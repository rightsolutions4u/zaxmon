(window["webpackJsonp@livechat/chat-widget"]=window["webpackJsonp@livechat/chat-widget"]||[]).push([[0],{1:function(e,t,n){"use strict";function r(e,t){return e+t}var a={}.hasOwnProperty;function i(e,t){return a.call(t,e)}function o(){return(o=Object.assign||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach((function(t){for(var n in t)i(n,t)&&(e[n]=t[n])})),e}).apply(void 0,arguments)}function c(e,t){var n;return(n=[]).concat.apply(n,t.map(e))}var s=Array.isArray;function u(e){return"object"===typeof e&&null!==e&&!s(e)}function l(e,t){return Object.keys(t).reduce((function(n,r){return n[r]=e(t[r]),n}),{})}function d(e){return s(e)?e.map(d):u(e)?l(d,e):e}var p=function(e){for(var t=e,n=!1,r=!1,a=!1,i=0;i<t.length;i++){var o=t[i];n&&/[a-zA-Z]/.test(o)&&o.toUpperCase()===o?(t=t.slice(0,i)+"-"+t.slice(i),n=!1,a=r,r=!0,i++):r&&a&&/[a-zA-Z]/.test(o)&&o.toLowerCase()===o?(t=t.slice(0,i-1)+"-"+t.slice(i-1),a=r,r=!1,n=!0):(n=o.toLowerCase()===o,a=r,r=o.toUpperCase()===o)}return t};function f(e){var t=e.trim();return 0===t.length?"":1===t.length?t.toLowerCase():/^[a-z\d]+$/.test(t)?t:(t!==t.toLowerCase()&&(t=p(t)),t=t.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(function(e,t){return t.toUpperCase()})))}function m(e){return s(e)?e.filter((function(e){return null!==e&&void 0!==e})):Object.keys(e).reduce((function(t,n){var r=e[n];return null!==r&&void 0!==r&&(t[n]=r),t}),{})}function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function v(e,t){var n;return function(){clearTimeout(n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];n=setTimeout.apply(void 0,[t,e].concat(a))}}function g(e){return null===e||void 0===e}function b(e){return function(t){return g(t)?e:t}}function y(e,t){return t.slice(0,-e)}function x(e){return s(e)?e:[e]}function j(e){return Object.keys(e).map((function(t){return[t,e[t]]}))}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(e(r))return r}}function w(e,t){for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1}function _(e,t){return O((function(n){return e(t[n])}),Object.keys(t))}function C(e,t){for(var n=t.length-1;n>=0;n--)if(e(t[n]))return t[n]}function E(e,t,n){for(var r=t;r>=0;r--)if(e(n[r]))return r;return-1}function I(e,t){return E(e,t.length-1,t)}function k(e,t){for(var n=[];e--;)n.push(t);return n}function S(e){return e}function T(e,t){return Object.keys(t).forEach((function(n){e(t[n],n)}))}var A=function(e){return e.reduce((function(e,t){var n=t[0],r=t[1];return e[n]=r,e}),{})};function R(){return Math.random().toString(36).substring(2)}function P(e){var t=R();return i(t,e)?P(e):t}function M(e,t){for(var n="string"===typeof e?e.split("."):e,r=0,a=t;a&&r<n.length;)a=a[n[r++]];return a}function N(e,t,n){var r=M(t,n);return void 0!==r&&null!==r?r:e}function z(e,t){return Object.keys(t).reduce((function(n,r){var a=e(r);return n[a]=n[a]||{},n[a][r]=t[r],n}),{})}function L(e,t){return-1!==t.indexOf(e)}function D(e){return 0===(s(e)?e:Object.keys(e)).length}var B=function(e){return!!e&&"function"===typeof e.then};function q(e,t){return t.reduce((function(t,n){return t[n[e]]=n,t}),{})}function F(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}function V(e){return e.length>0?e[e.length-1]:null}function U(e,t){return Object.keys(t).reduce((function(n,r){return n[e(r)]=t[r],n}),{})}function G(e,t){return Object.keys(t).reduce((function(n,r){return n[r]=e(t[r],r),n}),{})}function H(e,t){if(D(t))return e;var n={};return T((function(r,a){if(i(a,t))if(u(e[a])&&u(t[a]))n[a]=H(e[a],t[a]);else if(s(e[a])&&s(t[a])){var o=Math.max(e[a].length,t[a].length);n[a]=new Array(o);for(var c=0;c<o;c++)c in t[a]?n[a][c]=t[a][c]:c in e[a]&&(n[a][c]=e[a][c])}else n[a]=t[a];else n[a]=e[a]}),e),T((function(e,r){i(r,n)||(n[r]=t[r])}),t),n}function W(e){if(0===e.length)return{};var t=e[0];return e.slice(1).reduce((function(e,t){return H(e,t)}),t)}function Y(e){return function(e,t){var n={};return function(){var r=e.apply(void 0,arguments);if(i(r,n))return n[r];var a=t.apply(void 0,arguments);return n[r]=a,a}}(S,e)}function K(e){var t,n,r=!1;return function(){return r&&(arguments.length<=0?void 0:arguments[0])===n?t:(r=!0,n=arguments.length<=0?void 0:arguments[0],t=e.apply(void 0,arguments))}}function Q(){}function Z(e){return Object.keys(e).map((function(t){return e[t]}))}function J(e,t){var n="function"===typeof e?e:function(t){return M(e,t)};return(s(t)?[].concat(t):Z(t)).sort((function(e,t){return n(e)-n(t)}))}function X(e,t){return Object.keys(t).reduce((function(n,r){return e(t[r],r)||(n[r]=t[r]),n}),{})}function $(e,t){return X((function(t,n){return-1!==e.indexOf(n)}),t)}function ee(e,t){return Object.keys(t).reduce((function(n,r){return e(t[r])||(n[r]=t[r]),n}),{})}function te(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(void 0,arguments))}}function ne(e,t){return[e,t]}function re(e,t){return Object.keys(t).reduce((function(n,r){return n[e(t[r])?0:1][r]=t[r],n}),[{},{}])}function ae(e,t){return e.reduce((function(e,n){return e[n]=t[n],e}),{})}function ie(e,t){return Object.keys(t).reduce((function(n,r){return e(t[r])&&(n[r]=t[r]),n}),{})}function oe(e,t){return Object.keys(t).reduce((function(n,r){return e(t[r],r)&&(n[r]=t[r]),n}),{})}function ce(e,t){return e.reduce((function(e,n){return i(n,t)&&(e[n]=t[n]),e}),{})}function se(e){for(var t=[],n=0;n<=e;)t.push(n++);return t}function ue(e,t){return t.filter((function(t){return!e(t)}))}function le(e,t){var n=[].concat(t);return n.splice(e,1),n}var de=n(4);function pe(e,t,n){var r,a=e.split?e.split("."):e,o=a[0],c=t;if(a.length>1){var s=null!=n&&i(o,n)?n[o]:{};c=pe(a.slice(1),t,s)}return Object(de.a)({},n,((r={})[o]=c,r))}function fe(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function me(e,t){if(fe(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!i(n[a],t)||!fe(e[n[a]],t[n[a]]))return!1;return!0}function he(e){return"number"!==typeof e||isNaN(e)?NaN:0===e?0:-0===e?-0:e>0?1:-1}function ve(e,t){return[t.slice(0,e),t.slice(e,t.length)]}function ge(e){return e.reduce(r,0)}function be(e,t,n){var r=E((function(t){return!e(t)}),t,n);return r===t?[]:n.slice(r+1,t+1)}function ye(e,t){return be(e,t.length-1,t)}function xe(e,t){var n,r=Date.now()-2*e,a=function(){r=Date.now(),t.apply(void 0,arguments)};return function(){for(var t=Date.now(),i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];t-r>=e?a.apply(void 0,o):(clearTimeout(n),n=setTimeout.apply(void 0,[a,r-t+e].concat(o)))}}function je(e){return Array.prototype.slice.call(e)}var Oe=function(e){return Object.keys(e).map((function(t){return[t,e[t]]}))};function we(e,t){var n,r=Date.now()-2*e,a=function(){return r=Date.now(),t.apply(void 0,arguments)};return function(){var t=Date.now();t-r>=e&&(r=Date.now()),clearTimeout(n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];n=setTimeout.apply(void 0,[a,r-t+e].concat(o))}}function _e(e,t){var n=0;return function(){var r=Date.now();r-n>=e&&(n=Date.now(),t.apply(void 0,arguments))}}var Ce=function(e,t){return e===t?0:e<t?-1:1},Ee=/^\s+/;function Ie(e){return e.replace(Ee,"")}var ke=/\s+$/;function Se(e){return e.replace(ke,"")}function Te(e,t){var n=[];return t.filter((function(t){var r=e(t);return-1===n.indexOf(r)&&(n.push(r),!0)}))}function Ae(e,t,n){return[].concat(n.slice(0,e),[t],n.slice(e+1,n.length))}function Re(e,t,n){return t.map((function(t,r){return e(t,n[r])}))}function Pe(e,t){return Re(ne,e,t)}n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return y})),n.d(t,"i",(function(){return x})),n.d(t,"j",(function(){return j})),n.d(t,"l",(function(){return O})),n.d(t,"m",(function(){return w})),n.d(t,"n",(function(){return _})),n.d(t,"o",(function(){return C})),n.d(t,"p",(function(){return I})),n.d(t,"k",(function(){return k})),n.d(t,"q",(function(){return c})),n.d(t,"r",(function(){return T})),n.d(t,"s",(function(){return A})),n.d(t,"t",(function(){return R})),n.d(t,"u",(function(){return P})),n.d(t,"v",(function(){return M})),n.d(t,"w",(function(){return N})),n.d(t,"x",(function(){return z})),n.d(t,"y",(function(){return i})),n.d(t,"z",(function(){return S})),n.d(t,"A",(function(){return L})),n.d(t,"B",(function(){return s})),n.d(t,"C",(function(){return D})),n.d(t,"D",(function(){return g})),n.d(t,"E",(function(){return u})),n.d(t,"F",(function(){return B})),n.d(t,"G",(function(){return q})),n.d(t,"H",(function(){return F})),n.d(t,"I",(function(){return V})),n.d(t,"K",(function(){return U})),n.d(t,"L",(function(){return l})),n.d(t,"M",(function(){return G})),n.d(t,"P",(function(){return H})),n.d(t,"Q",(function(){return W})),n.d(t,"N",(function(){return Y})),n.d(t,"O",(function(){return K})),n.d(t,"R",(function(){return Q})),n.d(t,"S",(function(){return J})),n.d(t,"T",(function(){return $})),n.d(t,"U",(function(){return ee})),n.d(t,"V",(function(){return X})),n.d(t,"W",(function(){return te})),n.d(t,"X",(function(){return re})),n.d(t,"Y",(function(){return ae})),n.d(t,"Z",(function(){return ie})),n.d(t,"ab",(function(){return oe})),n.d(t,"bb",(function(){return ce})),n.d(t,"cb",(function(){return se})),n.d(t,"db",(function(){return ue})),n.d(t,"eb",(function(){return le})),n.d(t,"fb",(function(){return pe})),n.d(t,"gb",(function(){return me})),n.d(t,"hb",(function(){return he})),n.d(t,"ib",(function(){return ve})),n.d(t,"kb",(function(){return ge})),n.d(t,"lb",(function(){return ye})),n.d(t,"mb",(function(){return be})),n.d(t,"nb",(function(){return xe})),n.d(t,"ob",(function(){return je})),n.d(t,"pb",(function(){return Oe})),n.d(t,"qb",(function(){return we})),n.d(t,"J",(function(){return _e})),n.d(t,"jb",(function(){return Ce})),n.d(t,"sb",(function(){return Ie})),n.d(t,"rb",(function(){return Se})),n.d(t,"tb",(function(){return Te})),n.d(t,"ub",(function(){return Ae})),n.d(t,"vb",(function(){return Z})),n.d(t,"wb",(function(){return Pe})),n.d(t,"xb",(function(){return Re}))},12:function(e,t,n){"use strict";var r=n(1),a=function(e){return Object(r.pb)(e).map((function(e){return e.map(encodeURIComponent).join("=")})).join("&")},i=function(e){var t=e.split("&").map((function(e){return e.split("=").map(decodeURIComponent)}));return Object(r.s)(t)},o=/(?:[^:]+:\/\/)?([^/\s]+)/;function c(e){var t=e.match(o);return t&&t[1]}var s=/[^:]+:\/\/[^(/|?)\s]+/,u=function(e){var t=e.match(s);return t&&t[0]},l=/.*?\?([^#]+)/,d=function(e){var t=e.match(l);return t?"?"+t[1]:""},p=function(e){return e.replace(/^\?/,"")},f=function(e){var t=p(d(e));return i(t||e)},m=function(e,t){return f(t)[e]},h=/^(?:https?:)?\/\/[^/]+\/([^?#]+)/,v=function(e){var t=e.match(h);return"/"+(t&&t[1]||"")},g=function(e){return e.replace(/\w/g,"$&[\\r\\n\\t]*")},b=new RegExp("^[\0-\x1f]*("+g("javascript")+"|"+g("data")+"):","i"),y=function(e){return b.test(e)},x=/^((http(s)?:)?\/\/)/,j=function(e){return e.replace(x,"")},O=/^((http(s)?:)?\/\/)/,w=function(e){var t=e.match(O);return t?t[2]:null};n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return f})),n.d(t,"e",(function(){return v})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return y})),n.d(t,"k",(function(){return j})),n.d(t,"l",(function(){return p})),n.d(t,"f",(function(){return w}))},21:function(e,t,n){"use strict";var r=n(1),a=function(e,t){Object(r.r)((function(e,n){"style"!==n?t.setAttribute(n,e):function(e,t){Object(r.r)((function(e,n){t.style[n]=e}),e)}(e,t)}),e)},i=!!document.documentElement.currentStyle,o=function(e,t){var n=window.getComputedStyle(t),a="border-box"===n.boxSizing,o=Object(r.Y)(e,n);if(i&&a&&Object(r.y)("width",o)&&null!==o.width){var c=[o.width,n.paddingLeft,n.paddingRight,n.borderLeftWidth,n.borderRightWidth];o.width=Object(r.kb)(c.map(parseFloat))+"px"}if(i&&a&&Object(r.y)("height",o)&&null!==o.height){var s=[o.height,n.paddingTop,n.paddingBottom,n.borderTopWidth,n.borderBottomWidth];o.height=Object(r.kb)(s.map(parseFloat))+"px"}return o},c=n(229),s=n.n(c);function u(e,t){void 0===t&&(t=document.body);var n=s()(t),a=Object(r.m)((function(t){return t===e}),n);return n[a===n.length-1?0:a+1]}function l(){return new Promise((function(e){!function t(){document.body?e(document.body):setTimeout(t,100)}()}))}var d=null,p=function(){if(d)return d;var e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",t.direction="rtl";var n=document.createElement("div"),r=n.style;return r.width="100px",r.height="50px",e.appendChild(n),document.body.appendChild(e),e.scrollLeft>0?d="positive-descending":(e.scrollLeft=1,d=0===e.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(e),d};function f(e,t){return void 0===t&&(t=0),Math.abs(e.scrollTop+e.clientHeight-e.scrollHeight)<=t}function m(e,t){return void 0===t&&(t=0),e.scrollTop<=t}function h(e){var t=e.parentNode;t&&t.removeChild(e)}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return h}))},231:function(e,t,n){e.exports=n.p+"static/media/new_message.c597c3a2.mp3"},232:function(e,t,n){e.exports=n.p+"static/media/new_message.a37211a6.ogg"},244:function(e,t,n){"use strict";var r=n(36),a=n.n(r),i=n(47),o=n(1),c=n(27),s=n(31),u=n.n(s),l=n(63),d=n.n(l),p=n(46),f=n(127),m=n(49),h=n(42),v=n.n(h),g=n(73),b=n(82),y="@@livechat/4way",x="handshake",j="handshake_echo",O="response",w=n(67),_=n(66),C=n(171),E=n(45),I=n(34),k=(n(64),function(e){return!!e.data&&e.data["@@livechat/postmessenger"]}),S=Object(o.W)((function(){return Object(m.a)(a()((function(e){return e.data.origin=e.origin,e.data}))(u()(k)(Object(I.a)(window,"message"))))}));function T(e){return function(t){return Object(E.a)(a()(e)(t))}}var A=0,R=function(e,t,n,r){return void 0===r&&(r=A++),Object(_.a)((function(){return n.request=r,t(n),v()(1)(T((function(e){if(!e.data.error)return Object(p.a)((function(){return e.data.result}));var t=e.data.result,n=t.real,r=t.error;if(!n)return Object(C.a)(r);var a=new Error(r.message);return Object(o.y)("code",r)&&(a.code=r.code),Object(C.a)(a)}))(u()((function(e){return e.type===O&&e.request===r}))(e)))}))},P=function(e,t,n,r,a){return void 0===a&&(a=null),Object(w.a)({},e,{call:function(e){for(var a=arguments.length,o=new Array(a>1?a-1:0),c=1;c<a;c++)o[c-1]=arguments[c];return Object(i.a)(R(t,r,n("call",{method:e,args:o})))},emit:function(e,t){r(n("emit",{event:e,arg:t}))},data:a})},M=n(81),N=n.n(M);function z(){var e=N()();return[e,function(){var t=new Error("Destroyed.");t.code="DESTROYED",e(2,t)}]}var L=function(e,t,n,r){var a;return(a={})["@@livechat/postmessenger"]=!0,a.owner=e,a.instance=t,a.type=n,a.data=r,a},D=n(83),B=function(e,t,n,r){return function(a){switch(a.type){case"call":return void Object(D.a)((function(){var t=a.data,n=t.method,i=t.args;return r[n].apply(e,i)})).then((function(e){a.type=O,a.data={error:!1,result:e},n(a)}),(function(e){var t;a.type=O,e instanceof Error?(t={real:!0,error:{message:e.message}},Object(o.y)("code",e)&&(t.error.code=e.code)):t={real:!1,error:e},a.data={error:!0,result:t},n(a)}));case"emit":var i=a.data,c=i.event,s=i.arg;return void t(c,s);default:return}}},q=function(e){return Object(o.X)((function(e){return"function"===typeof e}),e)},F=Object(o.t)(),V=0,U=function(e){var t=document.createElement("a");return t.href=e,t.origin?"null"===t.origin?"*":t.origin:(t.protocol.length>4?t.protocol:window.location.protocol)+"//"+(t.host.length?"80"===t.port||"443"===t.port?t.hostname:t.host:window.location.host)};function G(e,t){var n=e.frame,r=e.targetOrigin,i=void 0===r?U(n.src):r,o=e.handshakeRetry,s=void 0===o?{}:o;void 0===t&&(t={});var l=q(t),h=l[0],O=l[1],w=z(),_=w[0],C=w[1],E=V++,I=n.contentWindow,k=Object(c.a)(),A=function(e,t){return L(F,E,e,t)},M=function(e){I.postMessage(e,i)},N=Object(m.a)(Object(g.a)(_)(u()((function(e){return e.owner===F&&e.instance===E}))(S()))),D=P(k,N,A,M),G=Object(m.a)(Object(g.a)(_)(T((function(e){return y in e?a()((function(){return e.data}))(R(N,M,A(j))):Object(p.a)((function(){return e}))}))(v()(1)(Object(f.a)(s.count||5)(Object(b.a)(s.interval||500)(R(N,M,A(x,O),null))))))),H=B(D,k.emit,M,h);return d()(H)(T((function(){return N}))(G)),{api:D,destroy:C,handshake$:G}}n(114);var H=n(128),W=n(21),Y=function(e,t){var n=document.createElement("iframe");return e.appendChild(n),n.src=t,n};var K=n(80),Q=n.n(K),Z=function(e){if(e.frame)return e.frame;var t=e.container,n=e.url;return Y(t,n)};function J(e,t){var n,r=e.onConnected,o=Object(H.a)(e,["onConnected"]),c=!o.frame,s=Z(o),u=z(),l=u[0],p=u[1],m=function(){c&&Object(W.h)(s),n?n.destroy():p()};return d()((function(e){e.destroy=m,e.frame=s,r(e)}))(Object(g.a)(l)(Object(f.a)()(T((function(){return Q()((function(e,r){var c=function(e,t){var n=G(e,t),r=n.api,o=n.destroy,c=n.handshake$;return{destroy:o,promise:Object(i.a)(a()((function(e){return r.data=e,r.destroy=o,r}))(c))}}(Object(w.a)({},o,{frame:s}),t);return c.promise.then(e,r),n=c,c.destroy}))}))(Object(I.a)(s,"load"))))),{destroy:m,frame:s}}n.d(t,"a",(function(){return J}))},27:function(e,t,n){"use strict";var r=n(4),a=n(226).a;t.a=function(){var e=Object.create(null),t=a(e);return Object(r.a)({},t,{off:function(n,r){n?t.off(n,r):Object.keys(e).forEach((function(t){delete e[t]}))},once:function(e,n){t.on(e,(function r(a,i){t.off(e,r),n(a,i)}))}})}},353:function(e,t){},354:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"CONNECTED",(function(){return z})),n.d(r,"DISCONNECTED",(function(){return L})),n.d(r,"NOT_INITIALIZED",(function(){return D})),n.d(r,"RECONNECTING",(function(){return B}));var a={};n.r(a),n.d(a,"getView",(function(){return se})),n.d(a,"getDefaultView",(function(){return ue})),n.d(a,"getCurrentView",(function(){return le})),n.d(a,"getConnectionState",(function(){return de})),n.d(a,"getEvent",(function(){return me})),n.d(a,"getEventByServerId",(function(){return he})),n.d(a,"hasEvent",(function(){return ve})),n.d(a,"hasEventByServerId",(function(){return ge})),n.d(a,"getIndexedEvents",(function(){return be})),n.d(a,"getEvents",(function(){return ye})),n.d(a,"getChat",(function(){return xe})),n.d(a,"getChatByServerId",(function(){return je})),n.d(a,"hasChat",(function(){return Oe})),n.d(a,"getChats",(function(){return we})),n.d(a,"getUsers",(function(){return _e})),n.d(a,"getSessionUser",(function(){return Ce})),n.d(a,"getUser",(function(){return Ee})),n.d(a,"getUserByServerId",(function(){return Ie})),n.d(a,"hasUser",(function(){return ke})),n.d(a,"getTimeline",(function(){return Se})),n.d(a,"getChatList",(function(){return Te})),n.d(a,"getSessionUserId",(function(){return Ae})),n.d(a,"getLastDeliveredEvent",(function(){return Re})),n.d(a,"getLastSeenEvent",(function(){return Pe})),n.d(a,"getLastEvent",(function(){return Me})),n.d(a,"getUnseenCount",(function(){return De})),n.d(a,"getLastSeenAgentEvent",(function(){return Be})),n.d(a,"getParticipants",(function(){return qe})),n.d(a,"localize",(function(){return Fe})),n.d(a,"getApplicationState",(function(){return Ve}));var i={};n.r(i),n.d(i,"addView",(function(){return He})),n.d(i,"setCurrentView",(function(){return We})),n.d(i,"updateView",(function(){return Ye})),n.d(i,"setDefaultView",(function(){return Ke})),n.d(i,"addChat",(function(){return Qe})),n.d(i,"addEvent",(function(){return Ze})),n.d(i,"removeEvent",(function(){return Je})),n.d(i,"addHistoryEvents",(function(){return Xe})),n.d(i,"addParticipant",(function(){return $e})),n.d(i,"addUser",(function(){return et})),n.d(i,"flushChat",(function(){return tt})),n.d(i,"recalculateTimeline",(function(){return nt})),n.d(i,"removeParticipant",(function(){return rt})),n.d(i,"sendEvent",(function(){return at})),n.d(i,"setApplicationState",(function(){return it})),n.d(i,"updateFeature",(function(){return ot})),n.d(i,"setConnectionState",(function(){return ct})),n.d(i,"setChatServerId",(function(){return st})),n.d(i,"setEventData",(function(){return ut})),n.d(i,"setEventServerId",(function(){return lt})),n.d(i,"setLocalization",(function(){return dt})),n.d(i,"setUserServerId",(function(){return pt})),n.d(i,"setUserProperties",(function(){return mt})),n.d(i,"requestSetUserProperties",(function(){return ht})),n.d(i,"updateChat",(function(){return gt})),n.d(i,"requestUpdateChat",(function(){return bt})),n.d(i,"updateEvent",(function(){return xt})),n.d(i,"requestUpdateEvent",(function(){return jt})),n.d(i,"updateUser",(function(){return wt})),n.d(i,"requestUpdateUser",(function(){return _t}));var o={};n.r(o),n.d(o,"chatStarted",(function(){return so})),n.d(o,"newMessage",(function(){return uo})),n.d(o,"chatEnded",(function(){return lo})),n.d(o,"newAgent",(function(){return po})),n.d(o,"visitorDataSet",(function(){return fo})),n.d(o,"visitorDataSetError",(function(){return mo})),n.d(o,"newFile",(function(){return ho})),n.d(o,"visitorQueued",(function(){return vo})),n.d(o,"typingIndicator",(function(){return go})),n.d(o,"rateChat",(function(){return bo})),n.d(o,"setVisitorData",(function(){return yo})),n.d(o,"sendFile",(function(){return xo})),n.d(o,"requestFileToken",(function(){return jo})),n.d(o,"fileTokenReceived",(function(){return Oo})),n.d(o,"newInvitation",(function(){return wo})),n.d(o,"messageSeen",(function(){return _o})),n.d(o,"protocolUpgraded",(function(){return Co})),n.d(o,"integrationData",(function(){return Eo}));var c={};n.r(c),n.d(c,"INIT",(function(){return kg})),n.d(c,"INVITATION",(function(){return Sg})),n.d(c,"CHAT_STARTED",(function(){return Tg}));var s={};n.r(s),n.d(s,"Root",(function(){return sy})),n.d(s,"Maximized",(function(){return ny})),n.d(s,"Minimized",(function(){return iy}));var u={};n.r(u),n.d(u,"caution",(function(){return gO})),n.d(u,"divider",(function(){return bO})),n.d(u,"border",(function(){return yO})),n.d(u,"error",(function(){return xO})),n.d(u,"success",(function(){return jO})),n.d(u,"accent",(function(){return OO})),n.d(u,"notification",(function(){return wO})),n.d(u,"webkitOutline",(function(){return _O})),n.d(u,"surface",(function(){return CO})),n.d(u,"text",(function(){return EO})),n.d(u,"grayscale",(function(){return IO})),n.d(u,"brand",(function(){return kO}));var l={};n.r(l),n.d(l,"heading",(function(){return SO})),n.d(l,"subheading",(function(){return TO})),n.d(l,"input",(function(){return AO})),n.d(l,"placeholder",(function(){return RO})),n.d(l,"caption",(function(){return PO})),n.d(l,"basic",(function(){return MO})),n.d(l,"basicContrast",(function(){return NO})),n.d(l,"errorCaption",(function(){return zO}));var d={};n.r(d),n.d(d,"easings",(function(){return LO}));var p={};n.r(p),n.d(p,"xs",(function(){return DO})),n.d(p,"sm",(function(){return BO})),n.d(p,"md",(function(){return qO})),n.d(p,"lg",(function(){return FO})),n.d(p,"xl",(function(){return VO})),n.d(p,"none",(function(){return UO})),n.d(p,"round",(function(){return GO})),n.d(p,"def",(function(){return HO}));var f={};n.r(f),n.d(f,"xs",(function(){return WO})),n.d(f,"sm",(function(){return YO})),n.d(f,"md",(function(){return KO})),n.d(f,"lg",(function(){return QO})),n.d(f,"floating",(function(){return ZO})),n.d(f,"outline",(function(){return JO}));var m={};n.r(m),n.d(m,"space0",(function(){return XO})),n.d(m,"space1",(function(){return $O})),n.d(m,"space2",(function(){return ew})),n.d(m,"space3",(function(){return tw})),n.d(m,"space4",(function(){return nw})),n.d(m,"space5",(function(){return rw})),n.d(m,"space6",(function(){return aw})),n.d(m,"space7",(function(){return iw}));var h=function(){window.performance&&"function"===typeof window.performance.mark&&window.performance.mark("lc_js_loaded")};h();var v,g,b,y=n(170),x=n.n(y),j=function(){for(var e;v;){e=v.fn,v=v.next;try{e()}catch(t){throw v?b():g=void 0,t}}g=void 0},O=window.MutationObserver||window.WebKitMutationObserver;if(O){var w=document.createTextNode(""),_=!0;new O(j).observe(w,{characterData:!0}),b=function(){w.data=_=!_}}else b=function(){setTimeout(j,0)};var C=function(e){var t={fn:e,next:void 0};g&&(g.next=t),v||(v=t,b()),g=t};/native code/.test(window.Promise)||(window.Promise=x.a,window.Promise._immediateFn=C),"function"!==typeof window.Promise.prototype.finally&&(window.Promise.prototype.finally=x.a.prototype.finally);n(255),n(273),n(275),n(280),n(285),n(287);var E=n(113),I=n.n(E),k=n(1);Object.assign=I.a,"function"!==typeof Array.prototype.find&&(Array.prototype.find=function(e){return Object(k.l)(e,this)}),"function"!==typeof Array.prototype.findIndex&&(Array.prototype.findIndex=function(e){return Object(k.m)(e,this)}),"function"!==typeof Object.values&&(Object.values=k.vb);var S,T=n(3),A=n(8),R=n(40),P=n(12);!function(e){e[e.Emergency=0]="Emergency",e[e.Alert=1]="Alert",e[e.Critical=2]="Critical",e[e.Error=3]="Error",e[e.Warning=4]="Warning",e[e.Notice=5]="Notice",e[e.Informational=6]="Informational",e[e.Debug=7]="Debug"}(S||(S={}));var M=function(e){var t=e.type,n=e.license,r=Object(A.a)(e,["type","license"]),a={licence_id:n.toString(),event_id:t,message:JSON.stringify(r)},i="https://queue.livechatinc.com/logs";return Object(R.a)(i,{method:"POST",headers:{Accept:"*/*","Content-Type":"application/x-www-form-urlencoded"},body:Object(P.a)(a)}).then(k.R,k.R)},N=n(19),z="connected",L="disconnected",D="not_initialized",B="reconnecting",q=n(4),F=n(35),V=n(27);function U(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}var G=function(e,t){var n=function n(){var r=t.apply(void 0,arguments);return"function"===typeof r?n:{type:e,payload:r}};return n.getActionName=function(){return e},n.toString=function(){return e},n},H=function(e,t){var n=function(n){var r=Object.create(n);r.action=function(t,r){var a={type:e,payload:t};r&&(a.meta=r),n.dispatch(a)};for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];return t.apply(void 0,[r].concat(i))};return n.toString=function(){return e},n},W=function(e,t){var n="REQUEST_"+e,r=H(e,t),a=function(e){for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];var c,s=Object.create(e);if(s.action=function(t){var a=U(),o=a.promise,s=a.resolve,u=a.reject;e.dispatch({type:n,payload:Object(q.a)({},t,{resolve:s,reject:u})}),(c=o).then((function(){r.apply(void 0,[e].concat(i))}),k.R)},t.apply(void 0,[s].concat(i)),"undefined"===typeof c)throw new Error("You forgot to call `action` handler in "+n+" creator.");return c};return a.toString=function(){return n},{actionMethod:r,requestActionMethod:a}},Y=function(e,t){if("object"!==typeof e||null===e||Array.isArray(e))throw new Error("bindActionMethods expects a plain object with actionMethods as values.");return Object(k.L)((function(e){return function(e,t){return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e.apply(void 0,[t].concat(r))}}(e,t)}),e)},K=function(e,t){return t[void 0]&&console.warn(["Reducer contains an 'undefined' action type.","Have you misspelled a constant?"].join("\n")),function(n,r){return void 0===n&&(n=e),Object(k.y)(r.type,t)?t[r.type](n,r.payload):n}};var Q=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Z=function(e){var t;return(t={})["SET_PROPERTY_"+e.toUpperCase()]=function(t,n){var r;return Object(q.a)({},t,((r={})[e]=n.data,r))},t["REMOVE_PROPERTY_"+e.toUpperCase()]=function(t){return Object(q.a)({},Object(k.T)([e],t))},t},J=function(e){var t;return(t={})["getProperty"+Q(e)]=function(t){return t[e]},t},X=function(e){var t;return(t={})["setProperty"+Q(e)]=G("SET_PROPERTY_"+e.toUpperCase(),(function(e,t){return void 0===t&&(t={}),{data:e,meta:t}})),t["removeProperty"+Q(e)]=G("REMOVE_PROPERTY_"+e.toUpperCase(),(function(){return{propName:e}})),t},$=function(e,t){if("object"!==typeof e||null===e||Array.isArray(e))throw new Error("bindSelectors expects a plain object with selectors as values.");return Object(k.L)((function(e){return function(e,t){return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e.apply(void 0,[t()].concat(r))}}(e,t)}),e)},ee=function(){var e=[],t=function(t){return function(n){return function(r){var a=n(r);return e.forEach((function(e){e(r,t)})),a}}};return t.add=function(t){e.push(t)},t},te=n(18),ne=function(e){var t=e.id,n=e.serverId,r=void 0===n?null:n,a=e.active,i=void 0===a||a,o=e.participants,c=void 0===o?[]:o,s=e.properties,u=void 0===s?{}:s;if("string"!==typeof t)throw new Error("Chat ID has to be a string.");if(null!==r&&t!==r)throw new Error('If serverId is given ("'+r+'") it should match id ("'+t+'").');return{id:t,serverId:r,active:i,participants:c,properties:u}},re=function(e){var t=e.id,n=e.type,r=e.author,a=e.timestamp,i=e.own,o=e.serverId,c=void 0===o?null:o,s=e.thread,u=void 0===s?null:s,l=e.serverTimestamp,d=void 0===l?null:l,p=e.delivered,f=void 0===p||p,m=e.seen,h=void 0!==m&&m,v=e.failed,g=void 0!==v&&v,b=e.properties,y=void 0===b?{}:b;if("string"!==typeof t)throw new Error("Event ID has to be a string.");if("string"!==typeof n)throw new Error("Event has to have string `type` property.");if(null!==c&&t!==c)throw new Error('If serverId is given ("'+c+'") it should match id ("'+t+'").');return{id:t,serverId:c,type:n,thread:u,author:r,own:i,timestamp:a,serverTimestamp:d,delivered:f,seen:h,failed:g,properties:y}},ae=function(e){var t=e.id,n=e.serverId,r=void 0===n?t:n,a=e.type,i=void 0===a?null:a,o=e.name,c=void 0===o?null:o,s=e.email,u=void 0===s?null:s,l=e.avatar,d=void 0===l?null:l,p=e.properties,f=void 0===p?{}:p;if("string"!==typeof t)throw new Error("User ID has to be a string.");return{id:t,serverId:r,type:i,name:c,email:u,avatar:d,properties:f}},ie=n(69),oe=n(125),ce=function(e,t){return t},se=function(e,t){var n=t.replace(/\//gi,".");return Object(k.v)(n,e.views)},ue=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object(k.v)(n+"._default",e.views)},le=function(e){return e.views.current},de=function(e){return e.session.connectionState},pe=function(e){return e.entities.chats.byIds},fe=function(e,t){return pe(e)[t]},me=function(e,t,n){return fe(e,t).events.byIds[n]},he=function(e,t,n){return me(e,t,fe(e,t).events.serverIdsMapping[n])},ve=function(e,t,n){return!!me(e,t,n)},ge=function(e,t,n){return!!he(e,t,n)},be=function(e,t){return fe(e,t).events.byIds},ye=Object(ie.a)([function(e,t){return fe(e,t).events.orderedIds},be],(function(e,t){return e.map((function(e){return t[e]}))}))(ce),xe=Object(ie.a)([fe,ye],(function(e,t){return Object(q.a)({},e,{events:t})}))(ce),je=function(e,t){return xe(e,e.entities.chats.serverIdsMapping[t])},Oe=function(e,t){return!!fe(e,t)},we=function(e){return Object(k.L)((function(t){var n=t.id;return xe(e,n)}),pe(e))},_e=function(e){return e.entities.users.byIds},Ce=function(e){return _e(e)[function(e){return e.session.id}(e)]},Ee=function(e,t){return _e(e)[t]},Ie=function(e,t){return Ee(e,e.entities.users.serverIdsMapping[t])},ke=function(e,t){return!!Ee(e,t)},Se=function(e,t){return e.views.Chat[t].timeline},Te=function(e){return e.views.ChatList},Ae=function(e){return Ce(e).id},Re=Object(ie.a)([ye,Ae],(function(e,t){return Object(k.o)((function(e){var n=e.delivered,r=e.author;return n&&r===t}),e)}))(ce),Pe=Object(ie.a)([ye,Ae],(function(e,t){return Object(k.o)((function(e){var n=e.seen,r=e.author;return n&&r===t}),e)}))(ce),Me=function(e,t){return Object(k.I)(ye(e,t))},Ne={boosters:!0,form:!0,system_message:!0},ze=Object(oe.createSelector)([ye,function(e){return Ce(e).id}],(function(e,t){return Object(k.p)((function(e){var n=e.author===t&&"message"===e.type,r=!!e.properties&&"file"===e.properties.serverType,a=!0===e.seen&&!Ne[e.type]&&e.serverId;return n&&!r||a}),e)})),Le=function(e,t){return e.author!==t&&!e.seen&&!Ne[e.type]},De=function(e,t){var n=ze(e,t),r=Ce(e).id;return ye(e,t).slice(n+1).filter((function(e){return Le(e,r)})).length},Be=function(e,t){var n=ze(e,t);if(-1===n)return null;var r=Ce(e).id,a=ye(e,t).slice(n+1);return Object(k.l)((function(e){return Le(e,r)}),a)},qe=Object(ie.a)([function(e,t){return fe(e,t).participants},_e],(function(e,t){return e.map((function(e){return t[e]}))}))(ce),Fe=function(e,t,n){var r=e.localization[t];return n?Object.keys(n).reduce((function(e,t){return e.replace(new RegExp("%"+t+"%","g"),n[t])}),r):r},Ve=function(e,t){return void 0===t?e.application:e.application[t]},Ue=["delivered","failed","properties","seen","serverTimestamp","thread"],Ge=function(e,t){return e.forEach((function(e){if(Object(k.y)(e,t))throw new Error("Updating `"+e+"` property is not possible.")}))},He=H("ADD_VIEW",(function(e,t,n){var r=e.action,a=e.getState;if(void 0===n&&(n={}),se(a(),t))throw new Error('There is already the "'+t+'" view. It has to be unique.');return r({name:t,data:n}),se(a(),t)})),We=H("SET_CURRENT_VIEW",(function(e,t){var n=e.action,r=e.getState;if(!se(r(),t))throw new Error('Given view "'+t+"\" doesn't exist.");return n({name:t}),le(r())})),Ye=H("UPDATE_VIEW",(function(e,t,n){var r=e.action,a=e.getState;if(!se(a(),t))throw new Error('There is no "'+t+'" view. You should add it first.');return r({name:t,data:n}),se(a(),t)})),Ke=H("SET_DEFAULT_VIEW",(function(e,t,n){var r=e.action,a=e.getState;return r({name:n,path:t}),se(a(),t+"/"+n)})),Qe=H("ADD_CHAT",(function(e,t){var n=e.action,r=e.getState,a=void 0===t?{}:t,i=a.events,o=void 0===i?[]:i,c=Object(te.a)(a,["events"]);if(Oe(r(),c.id))throw new Error('There is already a chat with "'+c.id+'" ID. It has to be unique.');var s=Object(k.l)((function(e){return!ke(r(),e)}),o.map((function(e){return e.author})).concat(c.participants||[]));if(s)throw new Error('Given user ("'+s+"\") doesn't exist. You should add it first.");var u=c.id||Object(k.u)(we(r()));return n({id:u,chat:ne(Object(q.a)({},c,{id:u})),events:o.map(re)}),xe(r(),u)})),Ze=H("ADD_EVENT",(function(e,t,n){var r=e.action,a=e.getState,i=n.id,o=n.serverId,c=a();if(i&&o&&i!==o)throw new Error('Specified ID ("'+i+'") differs from specified serverId ("'+o+'"). You either should use only ID or both should be the same.');if(!Oe(c,t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(ve(c,t,i))throw new Error('There is already an event with "'+i+'" ID in this chat ("'+t+'"). It has to be unique.');if(!ke(c,n.author))throw new Error('Specified author ("'+n.author+"\") doesn't exist. You should add it first.");return r({id:i,chat:t,event:re(Object(q.a)({timestamp:Date.now()},n,{own:n.author===Ae(c)}))}),me(a(),t,i)})),Je=H("REMOVE_EVENT",(function(e,t,n){var r=e.action,a=(0,e.getState)();if(!Oe(a,t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(!ve(a,t,n))throw new Error('There is no event with "'+n+'" ID in this chat ("'+t+'").');r({id:n,chat:t})})),Xe=H("ADD_HISTORY_EVENTS",(function(e,t,n){var r=e.action,a=(0,e.getState)();if(!Oe(a,t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');n.forEach((function(e){if(ve(a,t,e.id))throw new Error('There is already an event with "'+e.id+'" ID in this chat ("'+t+'"). It has to be unique.');if(!ke(a,e.author))throw new Error('Specified author ("'+e.author+"\") doesn't exist. You should add it first.")}));var i=Ae(a);r({chat:t,events:n.map((function(e){return re(Object(q.a)({},e,{serverId:e.id,own:e.author===i}))}))})})),$e=H("ADD_PARTICIPANT",(function(e,t,n){var r=e.action,a=e.getState;if(!Oe(a(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(!ke(a(),n))throw new Error('Given user ("'+n+"\") doesn't exist. You should add it first.");return r({chat:t,user:n}),qe(a(),t)})),et=H("ADD_USER",(function(e,t){var n=e.action,r=e.getState,a=t.id;if(ke(r(),a))throw new Error('There is already a user with "'+a+'" ID. It has to be unique.');return n({id:a,user:ae(t)}),Ee(r(),a)})),tt=H("FLUSH_CHAT",(function(e,t){var n=e.action,r=e.getState;if(!Oe(r(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');return n({id:t}),xe(r(),t)})),nt=H("RECALCULATE_TIMELINE",(function(e,t){var n=e.action,r=e.getState;if(!Oe(r(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');return n({id:t}),Se(r(),t)})),rt=H("REMOVE_PARTICIPANT",(function(e,t,n){var r=e.action,a=e.getState;if(!Oe(a(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(!ke(a(),n))throw new Error('Given user ("'+n+"\") doesn't exist. You should add it first.");return r({chat:t,user:n}),qe(a(),t)})),at=H("SEND_EVENT",(function(e,t,n,r){var a=e.action,i=e.getState;if(!Oe(i(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(ve(i(),t,n.id))throw new Error('There is already an event with "'+n.id+'" ID in this chat ("'+t+'"). It has to be unique.');var o=n.id||Object(k.u)(be(i(),t));return a({id:o,chat:t,event:re(Object(q.a)({},n,{author:Ce(i()).id,own:!0,id:o,timestamp:Date.now(),delivered:!1}))},r),me(i(),t,o)})),it=H("SET_APPLICATION_STATE",(function(e,t){var n=e.action,r=e.getApplicationState;if(!t||Object(k.C)(t))throw new Error("Given data object is empty.");return n(t),r()})),ot=H("UPDATE_FEATURE",(function(e,t,n){var r=e.action,a=e.getApplicationState;if(!n||!t||Object(k.C)(n))throw new Error("Given data object is empty.");return r({feature:t,data:n}),a()})),ct=H("SET_CONNECTION_STATE",(function(e,t){var n=e.action,r=e.getState;return n({connectionState:t}),de(r())})),st=H("SET_CHAT_SERVER_ID",(function(e,t,n){var r=e.action,a=e.getState;if(!Oe(a(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(null!==xe(a(),t).serverId)throw new Error('Chat with "'+t+'" ID has already serverId.');return r({id:t,serverId:n}),xe(a(),t)})),ut=H("SET_EVENT_DATA",(function(e,t,n,r){var a=e.action,i=e.getState;if(!Oe(i(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(!ve(i(),t,n))throw new Error('There is no "'+n+'" event in "'+t+'" chat. You should add it first.');return Ge(["id","type","own"],r),a({chat:t,id:n,data:Object(q.a)({},Object(k.bb)(Ue.concat("author","serverId","timestamp"),r),{own:r.author===Ae(i())})}),me(i(),t,n)})),lt=H("SET_EVENT_SERVER_ID",(function(e,t,n,r){var a=e.action,i=e.getState;if(!Oe(i(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(!ve(i(),t,n))throw new Error('There is no "'+n+'" event in "'+t+'" chat. You should add it first.');if(null!==me(i(),t,n).serverId)throw new Error('Event with "'+n+'" ID has already serverId.');return a({chat:t,id:n,serverId:r}),me(i(),t,n)})),dt=H("SET_LOCALIZATION",(function(e,t){(0,e.action)(t)})),pt=H("SET_USER_SERVER_ID",(function(e,t,n){var r=e.action,a=e.getState;if(!ke(a(),t))throw new Error('There is no "'+t+'" user. You should add it first.');if(null!==Ee(a(),t).serverId)throw new Error('User with "'+t+'" ID has already serverId.');return r({id:t,serverId:n}),Ee(a(),t)})),ft=W("SET_USER_PROPERTIES",(function(e,t,n){var r=e.action,a=e.getState;if(!ke(a(),t))throw new Error('There is no user with "'+t+'" ID. You should add it first.');return r({id:t,properties:n}),Ee(a(),t)})),mt=ft.actionMethod,ht=ft.requestActionMethod,vt=W("UPDATE_CHAT",(function(e,t,n){var r=e.action,a=e.getState;if(!Oe(a(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');return Ge(["id","participants","events"],n),r({id:t,data:Object(k.bb)(["active","properties"],n)}),xe(a(),t)})),gt=vt.actionMethod,bt=vt.requestActionMethod,yt=W("UPDATE_EVENT",(function(e,t,n,r){var a=e.action,i=e.getState;if(!Oe(i(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(!ve(i(),t,n))throw new Error('There is no "'+n+'" event in "'+t+'" chat. You should add it first.');return Ge(["id","type","author","own","timestamp"],r),a({chat:t,id:n,data:Object(k.bb)(Ue,r)}),me(i(),t,n)})),xt=yt.actionMethod,jt=yt.requestActionMethod,Ot=W("UPDATE_USER",(function(e,t,n){var r=e.action,a=e.getState;if(!ke(a(),t))throw new Error('There is no user with "'+t+'" ID. You should add it first.');return Ge(["id","type"],n),r({id:t,data:Object(k.bb)(["name","email","avatar","properties"],n)}),Ee(a(),t)})),wt=Ot.actionMethod,_t=Ot.requestActionMethod,Ct=function(e){var t;return void 0===e&&(e={}),K(e,((t={})[ot]=function(e,t){var n,r=t.feature,a=t.data;return Object(q.a)({},e,{config:Object(q.a)({},e.config,{features:Object(q.a)({},e.config.features,(n={},n[r]=Object(q.a)({},e.config.features[r],a),n))})})},t[it]=function(e,t){return Object(q.a)({},e,t)},t))},Et=function(e){return Object(k.vb)(e).reduce((function(e,t){var n=t.serverId,r=t.id;return null===n?e:(e[n]=r,e)}),{})},It=function(e,t){var n;return null!==t.serverId?Object(q.a)({},e,((n={})[t.serverId]=t.id,n)):e},kt=function(e,t){var n,r,a=t.id,i=t.chat,o=t.event;return Object(q.a)({},e,{chats:Object(q.a)({},e.chats,{byIds:Object(q.a)({},e.chats.byIds,(r={},r[i]=Object(q.a)({},e.chats.byIds[i],{events:{byIds:Object(q.a)({},e.chats.byIds[i].events.byIds,(n={},n[a]=o,n)),orderedIds:e.chats.byIds[i].events.orderedIds.concat(a),serverIdsMapping:It(e.chats.byIds[i].events.serverIdsMapping,o)}}),r))})})},St=function(e,t){var n,r=t.id,a=t.chat;return Object(q.a)({},e,{chats:Object(q.a)({},e.chats,{byIds:Object(q.a)({},e.chats.byIds,(n={},n[a]=Object(q.a)({},e.chats.byIds[a],{events:{byIds:Object(k.T)([r],e.chats.byIds[a].events.byIds),orderedIds:e.chats.byIds[a].events.orderedIds.filter((function(e){return e!==r})),serverIdsMapping:Object(k.U)((function(e){return e===r}),e.chats.byIds[a].events.serverIdsMapping)}}),n))})})},Tt=function(e,t){var n,r=t.chat,a=t.events;return Object(q.a)({},e,{chats:Object(q.a)({},e.chats,{byIds:Object(q.a)({},e.chats.byIds,(n={},n[r]=Object(q.a)({},e.chats.byIds[r],{events:{byIds:Object(q.a)({},e.chats.byIds[r].events.byIds,Object(k.G)("id",a)),orderedIds:a.map((function(e){return e.id})).concat(e.chats.byIds[r].events.orderedIds),serverIdsMapping:Object(q.a)({},e.chats.byIds[r].events.serverIdsMapping,Object(k.L)((function(e){return e.id}),Object(k.G)("serverId",a)))}}),n))})})},At=function(e,t){var n,r=t.id,a=t.user;return Object(q.a)({},e,{users:Object(q.a)({},e.users,{byIds:Object(q.a)({},e.users.byIds,(n={},n[r]=a,n)),serverIdsMapping:It(e.users.serverIdsMapping,a)})})},Rt=function(e,t,n){var r,a=n.properties,i=Object(te.a)(n,["properties"]),o=e.byIds[t];return Object(q.a)({},e,{byIds:Object(q.a)({},e.byIds,(r={},r[t]=Object(q.a)({},o,i,{properties:a?Object(q.a)({},o.properties,a):o.properties}),r))})},Pt=function(e,t,n){var r,a,i=e.byIds[t],o={byIds:Object(q.a)({},e.byIds,(r={},r[t]=Object(q.a)({},i,n),r))};n.serverId&&Object(k.y)("serverIdsMapping",e)&&(o.serverIdsMapping=Object(q.a)({},e.serverIdsMapping,((a={})[n.serverId]=t,a)));return Object(q.a)({},e,o)},Mt=function(e){var t,n=(void 0===e?{}:e).users,r=void 0===n?[]:n,a=Object(k.G)("id",r.map(ae));return K({users:{byIds:Object(q.a)({},a,{system:{id:"system",type:"system"}}),serverIdsMapping:Et(a)},chats:{byIds:{},serverIdsMapping:{}}},((t={})[Qe]=function(e,t){var n,r=t.id,a=t.chat,i=t.events;return Object(q.a)({},e,{chats:Object(q.a)({},e.chats,{byIds:Object(q.a)({},e.chats.byIds,(n={},n[r]=Object(q.a)({},a,{events:{byIds:Object(k.G)("id",i),orderedIds:i.map((function(e){return e.id})),serverIdsMapping:Et(i)}}),n)),serverIdsMapping:It(e.chats.serverIdsMapping,a)})})},t[Ze]=kt,t[Je]=St,t[Xe]=Tt,t[$e]=function(e,t){var n,r=t.chat,a=t.user,i=e.chats.byIds[r].participants;return Object(k.m)((function(e){return a===e}),i)>-1?e:Object(q.a)({},e,{chats:Object(q.a)({},e.chats,{byIds:Object(q.a)({},e.chats.byIds,(n={},n[r]=Object(q.a)({},e.chats.byIds[r],{participants:[].concat(i,[a])}),n))})})},t[et]=At,t[tt]=function(e,t){var n,r=t.id;return Object(q.a)({},e,{chats:Object(q.a)({},e.chats,{byIds:Object(q.a)({},e.chats.byIds,(n={},n[r]=Object(q.a)({},e.chats.byIds[r],{serverId:null,events:{byIds:{},orderedIds:[],serverIdsMapping:{}},properties:{}}),n))})})},t[rt]=function(e,t){var n,r=t.chat,a=t.user,i=e.chats.byIds[r].participants,o=Object(k.m)((function(e){return a===e}),i);return-1===o?e:Object(q.a)({},e,{chats:Object(q.a)({},e.chats,{byIds:Object(q.a)({},e.chats.byIds,(n={},n[r]=Object(q.a)({},e.chats.byIds[r],{participants:Object(k.eb)(o,i)}),n))})})},t[at]=kt,t[st]=function(e,t){var n,r=t.id,a=t.serverId;return Object(q.a)({},e,{chats:Object(q.a)({},Rt(e.chats,r,{serverId:a}),{serverIdsMapping:Object(q.a)({},e.chats.serverIdsMapping,(n={},n[a]=r,n))})})},t[lt]=function(e,t){var n,r,a=t.id,i=t.chat,o=t.serverId;return Object(q.a)({},e,{chats:Object(q.a)({},e.chats,{byIds:Object(q.a)({},e.chats.byIds,(r={},r[i]=Object(q.a)({},e.chats.byIds[i],{events:Object(q.a)({},Rt(e.chats.byIds[i].events,a,{serverId:o}),{serverIdsMapping:Object(q.a)({},e.chats.byIds[i].events.serverIdsMapping,(n={},n[o]=a,n))})}),r))})})},t[ut]=function(e,t){var n,r=t.id,a=t.chat,i=t.data;return Object(q.a)({},e,{chats:Object(q.a)({},e.chats,{byIds:Object(q.a)({},e.chats.byIds,(n={},n[a]=Object(q.a)({},e.chats.byIds[a],{events:Pt(e.chats.byIds[a].events,r,i)}),n))})})},t[mt]=function(e,t){var n=t.id,r=t.properties;return Object(q.a)({},e,{users:Pt(e.users,n,{properties:r})})},t[pt]=function(e,t){var n,r=t.id,a=t.serverId;return Object(q.a)({},e,{users:Object(q.a)({},Rt(e.users,r,{serverId:a}),{serverIdsMapping:Object(q.a)({},e.users.serverIdsMapping,(n={},n[a]=r,n))})})},t[gt]=function(e,t){var n=t.id,r=t.data;return Object(q.a)({},e,{chats:Rt(e.chats,n,r)})},t[xt]=function(e,t){var n,r=t.id,a=t.chat,i=t.data;return Object(q.a)({},e,{chats:Object(q.a)({},e.chats,{byIds:Object(q.a)({},e.chats.byIds,(n={},n[a]=Object(q.a)({},e.chats.byIds[a],{events:Rt(e.chats.byIds[a].events,r,i)}),n))})})},t[wt]=function(e,t){var n=t.id,r=t.data;return Object(q.a)({},e,{users:Rt(e.users,n,r)})},t))},Nt=function(e){return void 0===e&&(e={}),function(t,n){return void 0===t&&(t=e),n.type!==String(dt)?t:Object(q.a)({},t,n.payload)}},zt=function(e){var t;return K(function(e){var t=e.id,n=e.connectionState;return{id:t,connectionState:void 0===n?D:n}}(e),((t={})[ct]=function(e,t){var n=t.connectionState;return Object(q.a)({},e,{connectionState:n})},t))},Lt=function(e){return+new Date(e).setHours(0,0,0,0)},Dt=function(e,t){return Lt(e)===Lt(t)},Bt=function(e){var t=e.sessionUserId,n=e.event,r=e.showDate,a=void 0!==r&&r;return{own:n.author===t,author:n.author,events:[{id:n.id,type:n.type}],type:n.type,showDate:a,timestamp:n.timestamp}},qt=function(e,t){return Bt({sessionUserId:Ce(e).id,event:t,showDate:!0})},Ft=function(e){return Object(k.S)((function(e){return-1*Object(k.w)(0,"timestamp",Object(k.I)(e.events))}),e).map((function(e){return{id:e.id}}))},Vt=function(e,t){var n,r=t.id;return Object(q.a)({},e,{Chat:Object(q.a)({},e.Chat,(n={},n[r]=Object(q.a)({},e.Chat[r],{timeline:[]}),n))})},Ut=function(){return!1},Gt=function(){return!0},Ht=function(){return function(e){return void 0===e&&(e={}),e}},Wt=function(e,t){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){return t.reduce((function(e,t){return t(e,n)}),e)}}(Object(F.c)(Object(k.M)((function(t,n){return t(e[n])}),{application:Ct,entities:Mt,localization:Nt,session:zt,views:Ht})),function(e){var t=e.shouldAddToTimeline,n=void 0===t?Gt:t,r=e.shouldCreateNewGroup,a=void 0===r?Ut:r,i=function(e,t){var n=Ce(e).id;return function(r,i){var o=Object(k.I)(r),c=me(e,t,Object(k.I)(o.events).id);if("message_draft"===i.type&&"form"===o.type){var s=Object(k.o)((function(e){return"message_draft"===e.type}),r);return s?[].concat(Object(k.h)(2,r),[Object(q.a)({},s,{events:[].concat(s.events,[{id:i.id,type:i.type}])}),o]):[].concat(Object(k.h)(1,r),[Bt({sessionUserId:n,event:i}),o])}return Dt(c.timestamp,i.timestamp)?i.timestamp>=o.timestamp+3e5||o.author!==i.author||a(i)?[].concat(r,[Bt({sessionUserId:n,event:i})]):[].concat(Object(k.h)(1,r),[Object(q.a)({},o,{events:[].concat(o.events,[{id:i.id,type:i.type}])})]):[].concat(r,[Bt({sessionUserId:n,event:i,showDate:!0})])}},o=function(e,t,r){var a=r.filter(n);if(0===a.length)return[];var o=a[0],c=a.slice(1),s=qt(e,o);return c.reduce(i(e,t),[s])},c=function(e,t,n){var r=we(n);return{Chat:Object(k.L)((function(e){var t;return(t={})[e.id]={timeline:o(n,e.id,e.events)},t}),r),ChatList:Ft(r),current:null}},s=function(e,t,n){var r,a=t.id;return Object(q.a)({},e,{Chat:Object(q.a)({},e.Chat,(r={},r[a]={timeline:o(n,a,xe(n,a).events)},r)),ChatList:Ft(we(n))})},u=function(e,t,r){var a,o=t.chat,c=t.id,s=e.Chat[o].timeline,u=me(r,o,c);return n(u)?Object(q.a)({},e,{Chat:Object(q.a)({},e.Chat,(a={},a[o]=Object(q.a)({},e.Chat[o],{timeline:s.length>0?i(r,o)(s,u):[qt(r,u)]}),a)),ChatList:Ft(we(r))}):e},l=function(e,t){var n,r,a=t.chat,i=t.id,o=e.Chat[a].timeline,c=Object(k.m)((function(e){return e.events.some((function(e){return e.id===i}))}),o),s=o[c],u=s.events.filter((function(e){return e.id!==i}));return u.length>0?r=Object(k.ub)(c,Object(q.a)({},s,{events:u}),o):(r=c+1<o.length?Object(k.ub)(c+1,Object(q.a)({},o[c+1],{showDate:o[c+1].showDate||s.showDate}),o):o,r=Object(k.eb)(c,r)),Object(q.a)({},e,{Chat:Object(q.a)({},e.Chat,(n={},n[a]=Object(q.a)({},e.Chat[a],{timeline:r}),n))})},d=function(e,t,n){var r,a=t.chat,i=t.events,c=e.Chat[a].timeline,s=c[0],u=c.slice(1),l=Object(k.I)(i);s&&Dt(l.timestamp,s.timestamp)&&(s=Object(q.a)({},s,{showDate:Dt(Date.now(),s.timestamp)}));var d=o(n,a,i),p=s?[].concat(d,[s],u):d,f=i[0],m=!Dt(f.timestamp,Date.now());return Object(q.a)({},e,{Chat:Object(q.a)({},e.Chat,(r={},r[a]=Object(q.a)({},e.Chat[a],{hasDividers:m,timeline:p}),r))})},p=function(e,t,n){var r,a=t.id;return Object(q.a)({},e,{Chat:Object(q.a)({},e.Chat,(r={},r[a]={timeline:o(n,a,xe(n,a).events)},r))})};return function(e,t){var n=t.type,r=t.payload;if(Object(k.C)(e.views))return Object(q.a)({},e,{views:c(e.views,0,e)});switch(n){case String(Qe):return Object(q.a)({},e,{views:s(e.views,r,e)});case String(Ze):case String(at):return Object(q.a)({},e,{views:u(e.views,r,e)});case String(Je):return Object(q.a)({},e,{views:l(e.views,r)});case String(Xe):return Object(q.a)({},e,{views:d(e.views,r,e)});case String(He):var a=r.name.replace(/\//gi,".");return Object(q.a)({},e,{views:Object(k.fb)(a,r.data,e.views)});case String(tt):return Object(q.a)({},e,{views:Vt(e.views,r)});case String(Ke):var i=r.path.replace(/\//gi,".")+"._default";return Object(q.a)({},e,{views:Object(k.fb)(i,r.name,e.views)});case String(nt):return Object(q.a)({},e,{views:p(e.views,r,e)});case String(We):return Object(q.a)({},e,{views:Object(q.a)({},e.views,{current:r.name})});case String(Ye):var o=r.name.replace(/\//gi,"."),f=Object(k.v)(o,e.views);return Object(q.a)({},e,{views:Object(k.fb)(o,Object(q.a)({},f,r.data),e.views)});default:return e}}}(t))},Yt=function(e,t){var n=e.id,r=t.getState;return xe(r(),n)},Kt=function(e,t){var n=e.id,r=e.chat,a=t.getState;return{chat:r,event:me(a(),r,n)}},Qt=function(e,t){var n=e.id,r=t.getState;return Ee(r(),n)},Zt=function(e){var t=le(e);return{view:t,default:ue(e,t)}},Jt=function(e){var t;return function(e,t){return function(n,r){if(Object(k.y)(n.type,e)){var a=e[n.type](n.payload,r);n.meta&&(a.meta=n.meta),t(n.type.toLowerCase(),a)}}}(((t={})[Qe]=Yt,t[Ze]=Kt,t[et]=Qt,t[tt]=Yt,t[bt]=k.z,t[jt]=k.z,t[at]=Kt,t[it]=function(e,t){var n=t.getState;return Ve(n())},t[ct]=function(e,t){var n=t.getState;return de(n())},t[We]=function(e,t){var n=e.name,r=t.getState;return{name:n,data:se(r(),n),viewInfo:Zt(r())}},t[Ke]=function(e,t){var n=e.name,r=e.path,a=t.getState;return{name:n,path:r,data:se(a(),r+"/"+n),viewInfo:Zt(a())}},t[gt]=Yt,t[xt]=Kt,t[wt]=Qt,t[mt]=Qt,t[_t]=k.z,t[ht]=k.z,t[st]=k.z,t),e)},Xt=function(e){var t=e.entities,n=void 0===t?{}:t,r=e.session,a=void 0===r?{}:r,i=a.id,o=void 0===i?"session_"+Object(k.t)():i,c=n.users,s=void 0===c?[]:c,u=Object(k.l)((function(e){return e.id===o}),s);return Object(q.a)({},e,{entities:Object(q.a)({},n,{users:u?s:[].concat(s,[{id:o,serverId:null}])}),session:Object(q.a)({},a,{id:o})})};var $t=n(139),en={},tn=function(){return en};function nn(e,t){return void 0===t&&(t={}),Object($t.b)(e,tn,void 0,Object(q.a)({areStatesEqual:function(e){return e.getState()===e.getPreviousState()}},t))}var rn=n(0),an=n(126),on=rn.createContext(),cn=on.Provider,sn=on.Consumer,un=nn((function(e){return{localization:e.getState().localization,localize:e.localize}}))(function(e){function t(){return e.apply(this,arguments)||this}return Object(an.a)(t,e),t.prototype.render=function(){var e=this;return rn.createElement(cn,{value:function(t,n){return e.props.localize(t,n)}},this.props.children)},t}(rn.Component)),ln=function(e){if("string"===typeof e.children){var t=e.children,n=Object(te.a)(e,["children"]);return rn.createElement(sn,null,(function(e){return e(t,n)}))}return rn.createElement(sn,e)};function dn(e){var t=e.store,n=e.children,r=Object.create(t);return r.getState=function(){return t},rn.createElement($t.a,{store:r},rn.createElement(un,null,n))}var pn=r.CONNECTED,fn=r.DISCONNECTED,mn=r.RECONNECTING,hn=function(e,t){var n=t.getChat(e).properties.currentAgent;return n?t.getUser(n):null},vn=function(e,t){return t.getApplicationState("config").features[e]},gn=function(e){return vn("continuousChat",e).enabled},bn=function(e){return vn("chatHistory",e).enabled},yn=function(e,t,n){var r=t.authorPredicate,a=t.lastSeenPredicate,i=n.getEvents(e),o=Object(k.p)(a,i),c=Object(k.mb)((function(e){return r(e)||!e.seen}),o,i);return Object(k.db)(r,c)},xn=function(e,t,n){var r=n.getSessionUserId();return yn(e,{authorPredicate:function(e){return e.author!==r},lastSeenPredicate:function(e){return(e.serverTimestamp||e.timestamp)<=t}},n)},jn=function(e,t,n){var r=n.getSessionUserId();return yn(e,{authorPredicate:function(e){return e.author===r},lastSeenPredicate:function(e){return e.timestamp<=t}},n)},On=function(e,t,n){var r=e.getEvent(t,n);if("message_draft"===r.type&&null===r.serverId){var a=Object(k.o)((function(e){return"message_draft"===e.type}),e.getEvents(t));return r.id===a.id?e.localize("not_sent_yet"):null}if(!r.own)return null;if(r.failed)return"Message not sent";if(r.seen){var i=e.getLastSeenEvent(t);return i&&n===i.id?e.localize("message_read"):null}var o=e.getLastDeliveredEvent(t);return o&&n===o.id?e.localize("message_delivered"):null},wn=function(e){var t=e.getApplicationState("config");return!0===e.getApplicationState("mobile")?t.mobileMinimizedType:t.minimizedType},_n=function(e){var t=e.getApplicationState("config");return!0===e.getApplicationState("mobile")?t.mobileScreenPosition:t.screenPosition},Cn=function(e,t){return bn(e)&&e.getChat(t).properties.hasMoreHistory},En=function(e,t){var n=e.getChat(t).properties.fakeAgentMessageId;return n?e.getEvent(t,n):null},In=function(e,t){return!!En(e,t)},kn=function(e){return!!e.getApplicationState("embedded")},Sn=function(e,t){var n=t.getChat("liveChatChatId"),r=n.active,a=n.properties.queued;if(r||a)return!1;var i=t.getApplicationState(),o=i.availability,c=i.maximized,s=i.ready;return"online"===o&&(!s||(!c||Object(k.C)(t.getEvents(e))))},Tn=function(e,t){if(bn(t))return!1;var n=t.getApplicationState(),r=n.availability,a=n.embedded,i=n.actingAsDirectLink,o=n.isInCustomContainer,c=t.getChat(e);return a&&!i&&!o&&!c.active&&!c.properties.ended&&"offline"===r&&!Un(t)},An=function(e){return e.getConnectionState()===pn},Rn=function(e){return e.getConnectionState()===fn},Pn=function(e){return e.getConnectionState()===mn||Rn(e)},Mn=function(e,t){var n=t.getEvents(e),r=function e(t,n){if(n<0)return null;var r=t[n];return r.own&&"message"===r.type?null:"system_message"===r.type||"rich_message_postback"===r.type?e(t,n-1):r.properties.quickReplies?r:null}(n,n.length-1);return r&&(r.properties.invitation||t.getChat(e).active)?r:null},Nn=function(e,t){var n=t.getApplicationState().availability,r=t.getChat(e),a=r.active,i=r.properties,o=i.queued,c=i.ended;if(o)return t.localize("embedded_waiting_for_operator");var s=hn(e,t);return a&&s?t.localize("embedded_chat_with",{operator:s.name}):c?t.localize("embedded_chat_ended"):"online"===n?t.localize("embedded_chat_now"):Un(t)?t.localize("embedded_leave_message"):t.localize("agents_not_available")},zn=function(e,t){var n=e.getChat(t),r=gn(e);return sr(e,t)?null:Jn(e)?null:n.active?"text":Gn(e)?null:!n.properties.ended||r&&!Vn(e)?r||"offline"!==e.getApplicationState().availability?In(e,"liveChatChatId")?Vn(e)&&vn("preChatAfterGreeting",e).enabled?r&&"offline"===e.getApplicationState().availability?null:"requestPrechat":hn(t,e).properties.isBot?"startChat":"text":r?Vn(e)?"offline"===e.getApplicationState().availability?null:"requestPrechat":"text":r&&n.properties.ended?"text":null:null:"startChatAgain"},Ln=function(e,t){return!!t.getChat(e).properties.starting},Dn=function(e){return e.getApplicationState("testGroup")},Bn=function(e){return 1520===e.getApplicationState("license")},qn=function(e){var t=e.localize("user_in_queue"),n=e.getView("Chat/prechat").fields;if(!n||Object(k.C)(n))return t;var r=n.find((function(e){var t=e.meta;return t&&"groupSelect"===t}));if(!r||!r.options||Object(k.C)(r.options))return t;var a=r.options.find((function(t){return t.groupNumber===e.getApplicationState("group")}));return a&&a.queueTemplate?a.queueTemplate:t},Fn=function(e){return e.getApplicationState("config").theme.name},Vn=function(e){return e.getApplicationState().config.features.preChatForm.enabled},Un=function(e){return e.getApplicationState().config.features.offlineForm.enabled},Gn=function(e,t){void 0===t&&(t=void 0);var n=e.getLastEvent("liveChatChatId");if(!n)return!1;var r=n.type,a=n.properties;return"form"===r&&!a.answered&&("string"!==typeof t||a.formType===t)},Hn=function(e,t){var n=e.getView("Chat/"+t);return n&&n.fields},Wn=function(e){var t=e.getChat("liveChatChatId"),n=t.active,r=t.properties,a=r.queued,i=r.ended,o=r.startChatAgainPending,c=r.currentAgent,s=gn(e);return"offline"===e.getApplicationState("availability")&&(!(i&&!o)&&(s?!c&&!a:!n&&!a&&!Un(e)))},Yn=function(e){return hn("liveChatChatId",e)&&!Gn(e)&&!function(e,t){return!!t.getChat(e).properties.queued}("liveChatChatId",e)&&!Wn(e)},Kn=function(e,t){return!(!Jn(t)||t.getView("Chat/queue"))||("loader"===t.getDefaultView("Chat")||!cr(t)&&or(t))},Qn=function(e){var t=e.getLastEvent("liveChatChatId");return!!t&&("form"===t.type&&"offline"===t.properties.formType&&t.properties.answered)},Zn=function(e){var t=e.getApplicationState(),n=t.actingAsDirectLink,r=t.isInCustomContainer,a=t.mobileWrapper,i=t.embedded;return!n&&!r&&(a||i)},Jn=function(e){return e.getChat("liveChatChatId").properties.queued},Xn=function(e){return e.getChat("liveChatChatId").active&&!Pn(e)&&vn("fileSharing",e).enabled},$n=function(e){var t=e.getChat("liveChatChatId").properties.queued;return!Pn(e)&&(!t||gn(e))},er=function(e){var t=e.getEvents("liveChatChatId"),n=e.getChat("liveChatChatId").properties.lastThread;return Object(k.lb)((function(e){return e.thread===n}),t)},tr=function(e){var t=En(e,"liveChatChatId");return t&&t.properties.invitation?t:null},nr=function(e,t){void 0===t&&(t=tr(e));var n=e.getApplicationState(),r=n.availability,a=n.invitation,i=n.mobile,o=wn(e);return!("offline"!==r&&("bar"!==o||i))||Boolean(t&&Object(k.A)(t.properties.uniqueId,a.hiddenIds))},rr=function(e,t){void 0===t&&(t=tr(e));var n=e.getApplicationState().invitation;return Boolean(t&&Object(k.A)(t.properties.uniqueId,n.displayedIds))},ar=function(e){return!er(e).some((function(e){var t=e.author;return!e.own&&"system"!==t}))},ir=function(e){var t=e.properties,n=t.formType,r=t.fields,a=t.answered,i=r.filter((function(e){return e.answer&&e.label}));return"offline"!==n&&a&&Object(k.C)(i)},or=function(e){var t=e.getEvents("liveChatChatId");return Object(k.C)(t)||t.every((function(e){return"form"===e.type&&ir(e)}))},cr=function(e){return Yn(e)||Wn(e)||Jn(e)},sr=function(e,t){return e.getEvents(t).some((function(e){return"message_draft"===e.type&&null===e.serverId}))},ur=function(e){var t=e.getApplicationState(),n=t.embedded,r=t.actingAsDirectLink;return!n||r?"direct_link":"code"},lr=function(){var e=Object(P.h)(window.location.search);return parseInt(function(){var e=String(window.location).match(/licen(?:s|c)e\/g?(\d+)/);return e?e[1]:null}()||e.license,10)},dr=function(e){var t=parseInt(e,10);return t>-1?t:null},pr=function(){return"1"===Object(P.g)("unique_groups",window.location.search)||"1"===Object(P.g)("unique_group",window.location.search)},fr=function(e,t,n){void 0===n&&(n={});var r=n,a=r.name,i=void 0===a?function(e){var t=e.getSessionUser().name;return t||e.localize("client")}(e):a,o=r.agent,c=void 0===o?function(e){return hn("liveChatChatId",e).name}(e):o;return t.replace(/%name%/g,i).replace(/%agent%/g,c)},mr=function(e){return Object(N.b)(e)>.8},hr=function(e){return Object(N.b)(e)<=.179},vr=n(55),gr=Object(vr.b)()?window.localStorage:vr.a,br=[/sendURLToGuardwareProxy/i,/safari-extension:\/\//],yr=!("true"===gr.getItem("_livechat_has_visited"));gr.setItem("_livechat_has_visited","true");var xr=function(e,t,n){var r=(new Intl.DateTimeFormat).resolvedOptions().timeZone,a=Object(T.a)({type:"chat_widget_"+t,license:lr(),userAgent:navigator.userAgent,timeZone:String(r),logVersion:"2020-06-30",firstTimeVisitor:yr,severity:e,lc_env:"production"},n);if(r){var i=r.split("/")[0];i!==r&&(a.timeZoneArea=String(i))}return M(a)},jr=function(e,t,n){var r,a={};if(t instanceof Error?(a.errorMessage=t.message,a.stack=t.stack,a.code=t.code):a.errorMessage=JSON.stringify({error:t}),r=a,!br.some((function(e){return e.test(r.errorMessage+" "+r.stack)})))return Object(k.E)(n)||(n={meta:JSON.stringify({info:n})}),xr("Error",e,Object(T.a)({},n,a))},Or=function(e,t){return xr("Informational",e,t)},wr=function(e){return xr("Notice",e)},_r=function(e){return Or("chat_rated",e)},Cr=(n(190),n(191)),Er=n.n(Cr),Ir=n(192),kr=(n(193),n(80)),Sr=n.n(kr),Tr=n(114),Ar=n(66),Rr=n(194),Pr=n(195),Mr=n(115),Nr=n(196),zr=n(31),Lr=n.n(zr),Dr=n(45),Br=n(63),qr=n.n(Br),Fr=n(34),Vr=n(64),Ur=n.n(Vr);function Gr(e,t){return Sr()((function(n){return e.on(t,n),function(){e.off(t,n)}}))}var Hr=n(197),Wr=n.n(Hr),Yr=n(116),Kr=n(101),Qr=n.n(Kr),Zr=n(117),Jr=n.n(Zr),Xr=n(72),$r=n.n(Xr);function ea(e){return function(t){return Object(Dr.a)($r()(e)(t))}}var ta=function(e,t,n){e.on(t,(function r(a){e.off(t,r),n(a)}))};var na=n(46);n(198);var ra,aa=(ra=function(){return Mr.a},function(e){return function(t,n){if(0===t){var r,a=!1,i=function(e,t){r(e,t)};e(t,(function e(t,o){if(0===t)return r=o,a?void i(1):void n(t,i);if(2===t&&o&&!a){a=!0;try{ra(o)(0,e)}catch(c){n(2,c)}}else n(t,o)}))}}}),ia=(n(118),n(199)),oa=n(200),ca=(n(201),n(202)),sa=n(203),ua=n(49),la=n(204),da=n.n(la),pa=(n(81),n(119),n(42)),fa=n.n(pa),ma=n(73),ha=(n(205),n(206),n(82),n(207)),va=n(47);function ga(e,t){return Qr()(Wr()(e),Jr()(e.getState()),$r()(t),Object(Rr.a)(k.gb))}var ba=function(e){return Qr()(ga(e,(function(e){return e.application.ready})),Lr()(Boolean),fa()(1),sa.a)},ya=function(e){return Qr()(ba(e),ea((function(){return Qr()(ga(e,(function(e){return xe(e,"liveChatChatId").active})),da()(1),Lr()(Boolean))})))},xa=function(){return Object(k.v)("webkit.messageHandlers.iosMobileWidget.postMessage",window)?"ios":!!Object(k.v)("androidMobileWidget.postMessage",window)&&"android"},ja=function(e){return window.androidMobileWidget.postMessage(JSON.stringify(e))},Oa=function(e){return window.webkit.messageHandlers.iosMobileWidget.postMessage(e)},wa=function(){var e=xa();return"android"===e?ja:"ios"===e?Oa:null}(),_a=function(){return Boolean(xa())},Ca=function(e){wa&&(wa({messageType:"uiReady"}),e.on("add_event",(function(t){var n=t.event;if("message"===n.type){var r=e.getUser(n.author).name;wa({messageType:"newMessage",text:n.properties.text,id:n.id,timestamp:n.timestamp,author:{name:r}})}})),e.on("mobile_wrapper_minimize_intent",(function(){wa({messageType:"hideChatWindow"})})))},Ea=function(e){return er(e).some((function(e){return"form"===e.type&&e.properties.fields.some((function(e){return"group_chooser"===e.type}))}))},Ia=function(e){var t,n=e.getApplicationState(),r=n.s,a=n.mobile,i=n.protocol,o=n.embedded,c=n.testGroup,s=n.actingAsDirectLink,u=n.config,l=n.language,d=n.integrationName,p=n.clientChatNumber,f=n.clientVisitNumber,m=u&&u.theme&&u.theme.name,h=xa()||"none",v=pr(),g=bn(e),b=!!Cn(e,"liveChatChatId"),y=!!e.getSessionUser().email,x=function(e){return Boolean(e.getApplicationState("invitation").current)}(e)?"invitation":"other",j=wn(e),O=er(e),w=O.find((function(e){return!!e.properties.invitation})),_=Object(k.I)(O.filter((function(e){return"message"===e.type||"message_draft"===e.type})));t=Object(T.a)({s:r,mobile:a,embedded:o,themeName:m,testGroup:c,uniqueGroups:v,minimizedType:j,language:l||"unknown",lcProtocol:i||"unknown",integrationName:d||"none",mobileBridgeType:h,chatHistoryEnabled:g,hasPreviousChatThreads:b,hasGroupChooser:"lc3"===i?String(Ea(e)):"unknown",hasBeenImmediatelyQueued:"lc3"===i?String(e.getChat("liveChatChatId").properties.queued):"unknown",isCustomerEmailSet:y,actingAsDirectLink:s,chatWidgetWidth:window.innerWidth,chatWidgetHeight:window.innerHeight,clientChatNumber:p+1,clientVisitNumber:f,chatSource:x,fromGreeting:!!Object(k.w)(!1,"properties.fromGreeting",_)},"invitation"===x&&w&&Object(T.a)({greetingId:w.properties.id,greetingUniqueId:w.properties.uniqueId,greetingType:w.properties.type},w.properties.addon&&{greetingAddon:w.properties.addon})),Or("chat_started",t)},ka=function(e){return Qr()(ya(e),qr()((function(){return Ia(e)})))},Sa=new RegExp("("+["BetterJsPop","LOCAL_STORAGE is null","Can't find variable: auto","Can't find variable: ext","Can't find variable: $","_avast_submit","No license found in the URL.","getNewsReadStatus4Vivo","is banned!"].join("|")+")"),Ta=new RegExp("("+["chrome-extension://","https://www.smybeds.com/"].join("|")+")"),Aa=function(e){return!!(e.message&&Sa.test(e.message)||e.stack&&Ta.test(e.stack))};window.addEventListener("error",(function(e){var t=e.error;if(t)if(t.message&&-1!==t.message.indexOf("evaluating 'document.getElementById('view-chat').innerHTML'")){var n=lr();if(10095588===n||7243681===n)return;jr("custom_mobile_hacks",t)}else Aa(t)||jr("onerror",t)})),window.addEventListener("unhandledrejection",(function(e){null!=e&&null!=e.reason&&(Aa(e)||jr("unhandledrejection",e.reason))}));var Ra=n(141),Pa=Ra.a.Model;Ra.a.Model=function(){return function(e){var t=Object(V.a)(),n={};return e.resolveRemoteCall=function(e){var t=e.id,r=e.value,a=n[t];delete n[t],a(r)},e.emitEvent=function(e){var n=e.event,r=e.data;t.emit(n,r)},new Pa(e).then((function(r){return r.call=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];return new Promise((function(t){var i=Object(k.u)(n);n[i]=t,r.emit("remote-call",{id:i,method:e,args:a})}))},e.remoteCall=function(t){var n=t.id,a=t.method,i=t.args,o="function"===typeof e[a]?e[a].apply(r,i):void 0;o&&"function"===typeof o.then?o.then((function(e){r.call("resolveRemoteCall",{id:n,value:e})})):r.call("resolveRemoteCall",{id:n,value:o})},r.on=t.on,r.off=t.off,r}))}}();var Ma=Ra.a;function Na(e,t){return"object"===typeof e&&"object"===typeof t?za(e,t):e}function za(e,t){var n;if(Array.isArray(e)){n=new Array(e.length);for(var r=0;r<e.length;r++)e[r]!==t[r]&&(n[r]=Na(e[r],t[r]))}else n={},Object.keys(e).forEach((function(r){e[r]!==t[r]&&(n[r]=Na(e[r],t[r]))}));return n}var La=6e4;function Da(e,t){var n,r=Object(k.L)((function(e){return e.defaultValue}),t),a=Object.keys(t),i=Object(k.e)((function(e){return Object(T.a)({},r,e)}),(function(e){return Object(k.L)((function(e){return e.value}),e)}),(function(e){var n=Date.now();return Object(k.V)((function(e,r){return e.expires<n||void 0===t[r]}),e)}),JSON.parse,Object(k.g)("{}"),(function(){return gr.getItem(e)})),o=Object(k.e)(JSON.stringify,(function(e){var t=Date.now()+30*La;return Object(k.L)((function(e){return{value:e,expires:t}}),e)}));return{persist:function(r){return r.subscribe((function(){var c,s=(c=r.getState(),a.reduce((function(e,n){return e[n]=Object(k.v)(t[n].path,c),e}),{})),u=za(s,n);Object(k.C)(u)||(gr.setItem(e,o(Object(k.P)(i(),u))),n=s)})),r},rehydrate:function(){return n=i(),e=n,a.reduce((function(n,r){return Object(k.fb)(t[r].path,e[r],n)}),{});var e}}}var Ba=function(e){var t,n=[],r=U();return e.startStateSync=function(a){t=e.getState(),a.emit("state",t);var i=function(){n.forEach((function(e){var t=e[0],n=e[1];a.emit(t,n)})),n.length=0},o=function(e,t){1===n.push([e,t])&&setTimeout(i,0)};e.subscribe((function(){var n=e.getState();n!==t&&(o("state_diff",za(n,t)),t=n)}));var c=/^request_/;e.on("*",(function(e,t){c.test(e)||o("store_event",[e,t])})),r.resolve()},e.syncing=function(){return r.promise},e},qa=function(){return!function(e){return!!e&&/native code/.test(String(e))}(window.matchMedia)||!window.matchMedia("(hover: none)").matches},Fa=function(){return/mobile/gi.test(navigator.userAgent)&&!("MacIntel"===navigator.platform&&Object(k.A)("iPad",navigator.userAgent))},Va=function(){return Fa()||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>0},Ua={application:{rtl:!1,s:!1,actingAsDirectLink:!1,availability:null,clientLimitExceeded:!1,clientLimitExceededLifted:!1,config:{features:{agentAvatar:{enabled:!0},boosters:{enabled:!1,items:[]},chatHistory:{enabled:!1},continuousChat:{enabled:!1},creditCardMasking:{enabled:!1},disableSounds:{enabled:!1},emailTranscript:{enabled:!0},facebookButton:{enabled:!1},fileSharing:{enabled:!0},googlePlusButton:{enabled:!1},hideOnInit:{enabled:!1},hideOnMobile:{enabled:!1},hideTrademark:{enabled:!1},linksPreview:{enabled:!0},logo:{enabled:!0,path:"https://cdn.livechatinc.com/cloud/?uri=http://livechat.s3.amazonaws.com/default/logo/c4bf6633aa89a76af7461279581d8bdb.png"},offlineForm:{enabled:!0},preChatAfterGreeting:{enabled:!0},preChatForm:{enabled:!1},rating:{enabled:!0},twitterButton:{enabled:!1},mobileMinimized:{enabled:!0},minimized:{enabled:!0}},minimizedType:"bar",screenPosition:"right",theme:{}},destroyed:!1,eagerFetchingMode:!1,embedded:!0,requestedGroup:null,mobileWrapper:null,invitation:{current:null,hiddenIds:[],displayedIds:[]},isInCustomContainer:!1,hasUnseenEvents:!1,hidden:!1,maximized:!1,pageFocused:!1,applicationFocused:!1,mobile:Fa(),muted:!1,ready:!1,loadedInitialHistory:!1,integrationName:null,language:null,clientVisitNumber:0,clientChatNumber:0}},Ga={boosters:!0,carousel:!0,emoji:!0,form:!0,image_preview:!0,message:!0,rich_message:!0,sticker:!0,system_message:!0,url_preview:!0,email_prompt:!0,message_draft:!0},Ha={boosters:!0,carousel:!0,form:!0},Wa=function(e){return function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=Object(V.a)(),r=k.z,o=ee(),c=Object(F.d)(Wt(Xt(e),t),void 0,r(Object(F.a)(o)));o.add(Jt(n.emit));var s=c.getState(),u=s,l=s;return c.subscribe((function(){var e=c.getState();if(l!==e){var t=[l,e];u=t[0],l=t[1]}})),Object(k.a)(c,Y(i,c),$(a,c.getState),{getPreviousState:function(){return u},emit:n.emit,on:n.on,once:n.once,off:function(e,t){if(!e||!t)throw new Error(".off needs to be called with both type and handler arguments.");if("*"===e)throw new Error(".off('*', ...) is not supported.");n.off(e,t)}}),c}(e,{shouldAddToTimeline:function(e){return Ga[e.type]},shouldCreateNewGroup:function(e){return Ha[e.type]}})},Ya=function(e,t){var n=Da((void 0===t?{}:t).persistKey,{clientLimitExceededLifted:{path:["application","clientLimitExceededLifted"],defaultValue:!1},eyeCatcherHidden:{path:["application","eyeCatcher","hidden"],defaultValue:!1},invitationHiddenIds:{path:["application","invitation","hiddenIds"],defaultValue:[]},invitationDisplayedIds:{path:["application","invitation","displayedIds"],defaultValue:[]},maximized:{path:["application","maximized"],defaultValue:!1},muted:{path:["application","muted"],defaultValue:!1}}),r=Object(k.P)(Ua,Object(k.P)(e,n.rehydrate()));return Object(k.e)(n.persist,Ba,Wa)(r)},Ka=[{id:"iframekb",template:"moment",title:"Knowledge Base",description:"Save time with Knowledge Base - easy to access know-how right in the LiveChat widget",icon:"https://www.knowledgebase.ai/apple-touch-icon.71342b95.png",action:{type:"button",label:"Search",url:"https://livechat.kb.help/"}}],Qa=function(e,t){var n=!!Object(P.g)("lc_boosters",window.location.search)?function(e){return Object(k.P)(e,{application:{config:{features:{boosters:{enabled:!0,items:Ka}}}}})}(e):e,r=Ya(n,t);return r.setCurrentView("Chat"),r.addView("Chat/information"),r.addView("loader"),r.addView("Chat/postchat"),r.addView("Chat/prechat"),r.addView("Chat/queue"),r.addView("Chat/timeline"),r.addView("minimized",{text:"Chat"}),r.addView("Chat/offline"),r.addView("Moment",{show:!1,data:{}}),r.addView("uploadList",{ids:[]}),r.addChat({id:"liveChatChatId",active:!1,properties:{agentIsTyping:!1,ended:!1,fakeAgentMessageId:null,hasMoreHistory:null,lastThread:null,loadingHistory:!1,queued:!1,rate:null,rateComment:null,eventsSeenUpToMap:{}}}),r},Za=n(89),Ja=n(168),Xa=n.n(Ja),$a=n(169),ei=n.n($a),ti=/^\s+$/,ni=/^(?:\s+|[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/,ri=3;function ai(e){for(var t=null,n=0;t=ni.exec(e);){var r=t[0];if(e=e.slice(r.length),ti.test(r)||n++,n>ri)return!1}return!e}var ii=function(e){var t=e.customJson||{},n=hr(e.titlebarBackgroundColor)?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.05)",r=hr(e.agentbarBackgroundColor)?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.05)",a=hr(e.agentbarBackgroundColor)?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.1)";return Object(k.P)({name:e.name,iconTheme:e.name,showMessageAvatar:"modern"!==e.name,colors:{agentBarText:e.agentbarText,agentBarBackground:e.agentbarBackgroundColor,cta:e.ctaColor,minimizedIcon:e.minimizedColorIcon,minimizedBackground:e.minimizedColorBackground,background:e.backgroundColor,visitorMessageText:e.visitorMessageColorText,visitorMessageBackground:e.visitorMessageBackgroundColor,systemMessage:e.systemMessageColor,agentMessageText:e.agentMessageColorText,minimizedText:e.minimizedColorText,titleBarText:e.titlebarText,titleBarBackgroundColor:e.titlebarBackgroundColor},AgentBar:{css:{background:e.agentbarBackgroundColor,color:e.agentbarText},IconButton:{css:{background:{default:r,active:e.ctaColor}}},IconLabel:{css:{background:r}}},Form:{IconButton:{css:{background:{default:"rgba(0, 0, 0, 0.05)",active:e.ctaColor}}}},ChatSummary:{Icon:{color:e.minimizedColorIcon}},Divider:{css:{borderColor:r}},Maximized:{css:{background:e.backgroundColor}},Message:{own:{Bubble:{css:{background:"modern"===e.name?"transparent":e.visitorMessageBackgroundColor,color:e.visitorMessageColorText}}},system:{Bubble:{css:{color:e.systemMessageColor}}},Bubble:{css:{background:"modern"===e.name?"transparent":e.agentMessageBackgroundColor,color:e.agentMessageColorText}},css:{color:e.systemMessageColor}},TypingIndicator:{css:{color:e.systemMessageColor}},Minimized:{MinimizedBubble:{css:{color:e.minimizedColorText,backgroundColor:{default:e.minimizedColorBackground,hasAvatar:"transparent"}},Icon:{color:e.minimizedColorIcon}},MinimizedBar:{css:{color:e.minimizedColorText,backgroundColor:e.minimizedColorBackground},Icon:{color:e.minimizedColorIcon}}},TitleBar:{css:{color:e.titlebarText,backgroundColor:e.titlebarBackgroundColor},HourGlassLabel:{css:{backgroundColor:n}}},DividerLabel:{css:{color:e.systemMessageColor,borderColor:a}},TextComposer:{IconButton:{active:{Icon:{color:e.ctaColor}}}}},t)},oi=[0,2,4,6,8,1,3,5,7,9],ci=function(e){return e.replace(/\b(?:\d[ -]*?){8,15}((?:\d[ -]*?){4})\b/g,(function(e,t){var n=e.replace(/(-|\s)/g,"");return function(e){if(/[^0-9-\s]+/.test(e))return!1;for(var t,n=e.replace(/\D/g,""),r=n.length,a=1,i=0;r;)t=parseInt(n.charAt(--r),10),i+=(a^=1)?oi[t]:t;return i&&i%10===0}(n)?""+function(e){var t=e%4,n=t?4-t:0,r=Math.floor(e/4)+(t?1:0)-n-1,a=Object(k.k)(n,"XXX"),i=Object(k.k)(r,"XXXX");return a.concat(i).join("-").concat("-")}(n.length)+t:e}))};(new Xa.a).tlds(ei.a);var si=function(e,t,n){var r=Object(k.m)((function(t){return t.name===e}),n);return-1!==r?Object(k.ub)(r,Object(T.a)({},n[r],{defaultValue:t}),n):n},ui=function(e,t,n){e.addEvent(t,Object(T.a)({},n,{serverId:n.serverId||null}))},li=function(e,t){var n=e.getView("uploadList").ids;e.updateView("uploadList",{ids:[].concat(n,[t])})},di=function(e,t){var n=e.getView("uploadList").ids;e.updateView("uploadList",{ids:n.filter((function(e){return e!==t}))})},pi=function(e){e.updateChat("liveChatChatId",{active:!1,properties:{ended:!0,queued:!1,agentIsTyping:!1}})},fi=function(e){e.setApplicationState({eyeCatcher:Object(T.a)({},e.getApplicationState().eyeCatcher,{hidden:!0})})},mi=function(e){var t=tr(e);if(t&&t.properties.uniqueId&&!nr(e,t)){var n=e.getApplicationState().invitation;e.setApplicationState({invitation:Object(T.a)({},n,{hiddenIds:[].concat(n.hiddenIds,[t.properties.uniqueId])})})}},hi=function(e){var t=tr(e);if(t&&t.properties.uniqueId&&!rr(e)){var n=e.getApplicationState().invitation;e.setApplicationState({invitation:Object(T.a)({},n,{displayedIds:[].concat(n.displayedIds,[t.properties.uniqueId])})})}},vi=function(e){e.setApplicationState({maximized:!0})},gi=function(e){e.setApplicationState({maximized:!1})},bi=function(e,t){var n=t.id,r=t.thread,a=t.group,i=t.agent,o=t.queued,c=void 0!==o&&o;null===e.getChat("liveChatChatId").serverId&&e.setChatServerId("liveChatChatId",n);var s={ended:!1,queued:c,fakeAgentMessageId:null};void 0!==i&&(s.currentAgent=i),void 0!==r&&(s.lastThread=r),"number"===typeof a&&(s.group=a),fi(e),e.updateChat("liveChatChatId",{active:!0,properties:s}),qi(e);var u=hn("liveChatChatId",e);Object(k.v)("properties.isBot",u)?setTimeout((function(){return"loader"===e.getDefaultView("Chat")&&e.setDefaultView("Chat","timeline")}),1500):e.setDefaultView("Chat","timeline"),e.setApplicationState({hidden:!1});var l=e.getApplicationState(),d=l.maximized,p=l.ready;e.setCurrentView("Chat"),p&&!d&&vi(e)},yi=function(e,t,n){void 0===n&&(n={});var r=vn("creditCardMasking",e).enabled?ci(t):t;return{type:ai(r)?"emoji":"message",properties:Object(k.d)(Object(T.a)({text:r},n))}},xi=function(e,t,n,r){e.sendEvent(t,yi(e,n,{triggeredBy:r}))},ji=function(e,t,n){var r=e.getApplicationState("invitation").current,a=e.getEvent(t,r),i=yi.apply(void 0,[e,n].concat(a&&{fromGreeting:Object(k.Y)(["id","uniqueId"],a.properties)})),o=e.getChat(t).active,c=Vn(e),s=vn("preChatAfterGreeting",e).enabled;if(c&&!o&&s){var u=Gn(e,"prechat"),l=sr(e,t);ui(e,t,Object(T.a)({},i,{seen:!0,type:"message_draft",author:e.getSessionUserId(),id:Object(k.u)(e.getIndexedEvents("liveChatChatId"))})),u||l||wi(e)}else e.sendEvent(t,i)},Oi=function(e,t){e.updateChat("liveChatChatId",{properties:{currentAgent:t}})},wi=function(e){if(!Gn(e,"prechat")){var t=e.getView("Chat/prechat");Ri(e,t)}},_i=function(e,t){var n=e.getChat("liveChatChatId").properties,r=n.rate,a=n.rateComment,i=t.fields,o=Object(A.a)(t,["fields"]);r&&(i=si("rating",r,i)),a&&(i=si("rateComment",a,i)),Ri(e,Object(T.a)({},o,{fields:i}))},Ci=function(e,t,n){var r=(void 0===n?{}:n).chatId;e.updateChat("liveChatChatId",{properties:{startChatAgainPending:!1}}),e.updateView("uploadList",{ids:[]}),zi(e);var a=e.getChat("liveChatChatId").properties.lastThread;if(bn(e)){Bi(e);var i=En(e,"liveChatChatId");i&&e.removeEvent("liveChatChatId",i.id),e.hasEvent("liveChatChatId","boosters")&&e.removeEvent("liveChatChatId","boosters")}else e.flushChat(t),r&&e.setChatServerId("liveChatChatId",r);e.updateChat(t,{properties:{agentIsTyping:!1,ended:!1,fakeAgentMessageId:null,lastThread:a,loadingHistory:!1,queued:!1,rate:null,rateComment:null}}),Ni(e)},Ei=function(e,t){var n=t.getApplicationState("config");t.setApplicationState({config:Object(T.a)({},n,{features:Object(k.P)(n.features,e.features),minimizedType:e.theme.minimized,mobileMinimizedType:e.theme.mobileMinimized,theme:Object(k.P)(n.theme,ii(e.newTheme)),screenPosition:e.screenPosition,mobileScreenPosition:e.mobileScreenPosition,nonProfitLicense:e.nonProfitLicense,hasAnyCustomLicenseProperty:e.hasAnyCustomLicenseProperty})}),e.features.disableSounds.enabled&&t.setApplicationState({muted:!0})},Ii=function(e,t,n){var r,a=e.getApplicationState("config");e.setApplicationState({config:Object(T.a)({},a,{features:Object(k.P)(a.features,(r={},r[t]=n,r))})})},ki=function(e,t,n){Ii(e,t,Object(T.a)({enabled:!0},n))},Si=function(e,t,n){var r={answered:!0};n&&(r.fields=n.properties.fields,n.id&&e.setEventServerId("liveChatChatId",t,n.id)),e.updateEvent("liveChatChatId",t,{properties:r})},Ti=function(e,t){var n=e.getApplicationState(),r=n.maximized,a=n.embedded,i=n.actingAsDirectLink,o=n.availability,c=Gn(e,"prechat");Oi(e,t.author),"bar"!==wn(e)&&fi(e),e.setDefaultView("Chat","timeline"),qi(e),Fi(e);var s=tr(e);s&&e.removeEvent("liveChatChatId",s.id),Object(k.i)(t.properties.cards||t.properties.card).filter(Boolean).forEach((function(t){t.title&&(t.title=fr(e,t.title)),t.subtitle&&(t.subtitle=fr(e,t.subtitle)),t.buttons&&(t.buttons.forEach((function(e){return e.invitation=!0})),a&&!i||t.buttons.filter((function(e){return"url"===e.type&&"target"in e})).forEach((function(e){return e.target="new"})))}));var u=Object(k.u)(e.getIndexedEvents("liveChatChatId"));ui(e,"liveChatChatId",Object(T.a)({},t,{seen:!0,id:u,properties:Object(T.a)({},t.properties,t.properties.text&&{text:fr(e,t.properties.text)})})),e.updateChat("liveChatChatId",{properties:{fakeAgentMessageId:u}}),e.setApplicationState({hidden:!1,invitation:Object(T.a)({},e.getApplicationState("invitation"),{current:u})}),r||(e.setCurrentView("Chat"),nr(e)&&t.properties.receivedFirstTime&&vi(e)),gn(e)&&"offline"===o&&c&&wi(e)},Ai=function(e){Ri(e,Object(T.a)({},e.getView("Chat/offline"),{id:"offline_form",type:"offline"}))},Ri=function(e,t){var n={formType:t.type,formId:t.id,fields:t.fields};if(Gn(e)){var r=e.getLastEvent("liveChatChatId").id;return e.updateEvent("liveChatChatId",r,{properties:n})}var a=Object(k.u)(e.getIndexedEvents("liveChatChatId"));return ui(e,"liveChatChatId",{id:a,type:"form",author:"system",properties:n})},Pi=function(e){return!!e&&function(e){var t=Object(P.f)(e);return!t||"https:"===t||!1}(Object(Za.a)(e))},Mi=function(e,t){Pi(t.url)?e.updateView("Moment",{show:!0,data:t}):function(e,t,n){var r=n.systemMessageType,a=n.textVariables,i=n.text;ui(e,t,{id:Object(k.u)(e.getIndexedEvents("liveChatChatId")),serverId:null,type:"system_message",author:"system",seen:!0,properties:Object(k.d)({systemMessageType:r,textVariables:a,defaultText:i})})}(e,"liveChatChatId",{text:"Link attached to the button is invalid."})},Ni=function(e){var t=vn("boosters",e);t.enabled&&(e.hasEvent("liveChatChatId","boosters")||e.addEvent("liveChatChatId",{type:"boosters",id:"boosters",author:"system",seen:!0,properties:{boosters:t.items}}))},zi=function(e){e.updateView("Moment",{show:!1,data:{}})},Li=function(e,t){e.requestUpdateUser(e.getSessionUser().id,t)},Di=function(e,t){var n;e.setUserServerId(e.getSessionUser().id,t),e.setApplicationState({testGroup:(n=t,function(e){var t=0;return e.split("").forEach((function(e){var n=e.charCodeAt(0);t=(t<<5)-t+n,t&=t})),t}(n)%2?"A":"B")})},Bi=function(e,t){if(void 0===t&&(t=void 0),Gn(e,t)){var n=e.getLastEvent("liveChatChatId").id;e.removeEvent("liveChatChatId",n)}},qi=function(e){Bi(e,"prechat")},Fi=function(e){Bi(e,"offline")},Vi=function(e,t,n){var r=Object(k.v)("error.details.errors",e);if(r){var a=r.reduce((function(e,n){return"requester.email"===n.field?Object(T.a)({},e,{email:t("invalid_email")}):"requester.name"===n.field?Object(T.a)({},e,{name:n.message}):e}),{});Object(k.C)(a)?n():n(a)}else n()},Ui=function(e,t,n){switch(Object(k.A)(n.type,["message","webview"])&&e.setApplicationState({maximized:!0}),n.type){case"message":ji(e,"liveChatChatId",n.text);break;case"webview":Mi(e,{url:n.value,height:n.webviewHeight})}e.emit("rich_greeting_button_clicked",{button:n,event:e.getEvent("liveChatChatId",t)})};function Gi(e){var t=function(t,n){return(e.getApplicationState("hidden")?n.call("show").then((function(){e.setApplicationState({hidden:!1})})):Promise.resolve()).then((function(){t!==e.getApplicationState("maximized")&&e.setApplicationState({maximized:t})}))};return{hide:function(){e.getApplicationState("hidden")||t(!1,this).then((function(){e.setApplicationState({hidden:!0})}))},hideGreeting:function(){mi(e)},hideEyeCatcher:function(){fi(e)},isFocused:function(){return!!document.hasFocus&&document.hasFocus()},maximize:function(){t(!0,this)},minimize:function(){t(!1,this),e.getView("minimized").hidden&&e.updateView("minimized",{hidden:!1})},startStateSync:function(){e.startStateSync(this)},storeMethod:function(t){var n=t[0],r=t.slice(1);e[n].apply(e,r)},logInfo:function(){Or.apply(void 0,arguments)},logError:function(){jr.apply(void 0,arguments)},logNotice:function(){wr.apply(void 0,arguments)}}}var Hi,Wi,Yi=n(21),Ki=function(e){return/px$/.test(e)?Math.ceil(parseFloat(e))+"px":e},Qi=function(e,t){return e.call("resize",function(e){return Object(T.a)({},e,{width:Ki(e.width),height:Ki(e.height)})}(t))},Zi=function(e){var t=e.minimizedRef;return t?Object(Yi.b)(["width","height"],t):{width:"0px",height:"0px"}},Ji=function(e){var t=!1,n=null,r=function e(){if(n&&!t){var r=n;return n=null,t=!0,void r().then((function(){t=!1,e()}))}};return function(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];n=e.bind.apply(e,[null].concat(a)),r()}}((function(e,t){var n=t.getApplicationState().maximized,r=Hi,a=e.model,i=a.fullWidth,o=a.fullHeight;return Hi=n,new Promise((function(a){r&&n?a():!r||n?r||!n?e.minimizedRef?(e.minimizedRef&&(e.minimizedRef.style.width="100%",e.minimizedRef.style.height="100%"),requestAnimationFrame((function(){Qi(e,{width:i,height:o,maximized:n}).then((function(){e.minimizedRef&&(e.minimizedRef.style.width="",e.minimizedRef.style.height=""),requestAnimationFrame((function(){var t=Zi(e);Qi(e,t).then(a)}))}))}))):Qi(e,{width:"0px",height:"0px",maximized:n}).then(a):Qi(e,{width:i,height:o,maximized:n}).then(a):t.once("animation_end",(function(){Qi(e,Object(T.a)({},Zi(e),{maximized:n})).then(a)}))}))})),Xi=function(e,t){Hi=t.getApplicationState().maximized,Qr()(ga(t,(function(e){return e.application.maximized})),qr()((function(){return Ji(e,t)})))},$i=function(e){var t=e.license,n=e.group;return t+(e.uniqueGroups?":"+n:"")+":state"},eo=function(e){return Object(k.A)(e.lang,["ar","he","fa"])},to=function(e){document.documentElement.lang=e.lang},no=function(e){return Ve(e,"hidden")||se(e,"minimized").hidden&&!Ve(e,"maximized")},ro=n(50),ao=n(20),io=n(14),oo={LICENSE:"license",GROUP:"group",SESSION_ID:"sessionId",SECURED_TOKEN:"securedToken",CHAT_ID:"chatId",CHAT_STATE:"chatState",CHAT_STATUS:"chatStatus",VISITOR_ID:"visitorId",CUSTOM_VISITOR_ID:"customVisitorId",LAST_MESSAGE_ID:"lastMessageId",CONNECTION_STATUS:"connectionStatus",SNEAK_PEEK:"sneakPeek",TICKET_FORM:"ticketForm",PRE_CHAT_FORM:"preChatForm",POST_CHAT_FORM:"postChatForm",STATIC_CONFIG_VERSION:"staticConfigVersion",TRANSLATIONS_VERSION:"translationsVersion",TRANSLATIONS:"translations",SECRET_ID:"secretId",REGION:"region",CONFIG_LOADED:"configLoaded",LAST_AGENT_ID:"lastAgentId",DYNAMIC_CONFIG:"dynamicConfig",CONFIG:"config",WELCOME_MESSAGE:"welcomeMessage",ACCEPTED_INVITATION:"acceptedInvitation",SERVER_IDS_MAP:"serverIdsMap",VISITOR_CUSTOM_ID_MAP:"visitorCustomIdMap",CLIENT_LIMIT_EXCEEDED:"clientLimitExceeded",PING_SENT:"pingSent",CHAT_BETWEEN_GROUPS:"chatBetweenGroups",HISTORY_LOADED:"historyLoaded",REQUEST_DISTRIBUTION:"requestDistribution",MOBILE:"mobile",APPLICATION:"application"},co=Object(io.a)({},X(oo.LICENSE),X(oo.GROUP),X(oo.SESSION_ID),X(oo.SECURED_TOKEN),X(oo.CHAT_ID),X(oo.CHAT_STATE),X(oo.VISITOR_ID),X(oo.CUSTOM_VISITOR_ID),X(oo.LAST_MESSAGE_ID),X(oo.CHAT_STATUS),X(oo.CONNECTION_STATUS),X(oo.SNEAK_PEEK),X(oo.TICKET_FORM),X(oo.STATIC_CONFIG_VERSION),X(oo.SECRET_ID),X(oo.REGION),X(oo.CONFIG_LOADED),X(oo.LAST_AGENT_ID),X(oo.PRE_CHAT_FORM),X(oo.TRANSLATIONS_VERSION),X(oo.TRANSLATIONS),X(oo.POST_CHAT_FORM),X(oo.CONFIG),X(oo.DYNAMIC_CONFIG),X(oo.WELCOME_MESSAGE),X(oo.ACCEPTED_INVITATION),X(oo.SERVER_IDS_MAP),X(oo.VISITOR_CUSTOM_ID_MAP),X(oo.CLIENT_LIMIT_EXCEEDED),X(oo.PING_SENT),X(oo.CHAT_BETWEEN_GROUPS),X(oo.HISTORY_LOADED),X(oo.REQUEST_DISTRIBUTION),X(oo.MOBILE),X(oo.APPLICATION)),so=G("CHAT_STARTED",(function(e){return{securedToken:e.securedToken,welcomeMessage:e.welcomeMessage,visitorMessage:e.visitorMessage}})),uo=G("NEW_MESSAGE",(function(e){return{id:e.id,timestamp:e.timestamp,authorType:e.authorType,authorId:e.authorId,text:e.text,chatId:e.chatId,isMobile:e.isMobile,customId:e.customId,serverId:e.serverId,json:e.json}})),lo=G("CHAT_ENDED",(function(e){return{reason:(void 0===e?{}:e).reason}})),po=G("NEW_AGENT",(function(e){var t=e.avatarUrl,n=e.jobTitle,r=e.name,a=e.id,i=e.fromInvitation,o=void 0!==i&&i,c=e.trigger;return{avatarUrl:t,jobTitle:n,name:r,id:a,fromInvitation:o,trigger:void 0===c?null:c}})),fo=G("VISITOR_DATA_SET",(function(e){return{visitorData:e.visitorData,requestId:e.requestId}})),mo=G("VISITOR_DATA_SET_ERROR",(function(e){return{error:e.error,requestId:e.requestId}})),ho=G("NEW_FILE",(function(e){var t=e.id,n=e.timestamp,r=e.authorType,a=e.authorId,i=e.url,o=e.contentType;return{id:t,timestamp:n,authorType:r,authorId:a,url:i,size:e.size,contentType:o,attachmentToken:e.attachmentToken,thumbnail:e.thumbnail}})),vo=G("VISITOR_QUEUED",(function(e){return{numberInQueue:e.numberInQueue,waitingTime:e.waitingTime}})),go=G("TYPING_INDICATOR",(function(e){return{authorId:e.authorId,isTyping:e.isTyping}})),bo=G("RATE_CHAT",(function(e){return{rate:e.rate,comment:e.comment}})),yo=G("SET_VISITOR_DATA",(function(e){var t=e.visitorData,n=e.requestId,r=e.internal;return{visitorData:t,requestId:n,internal:void 0!==r&&r}})),xo=G("SEND_FILE",(function(e){return{file:e.file,customId:e.customId}})),jo=G("REQUEST_FILE_TOKEN",(function(e){return{customId:e.customId}})),Oo=G("FILE_TOKEN_RECEIVED",(function(e){return{customId:e.customId,token:e.token}})),wo=G("NEW_INVITATION",(function(e){return{id:e.id,authorId:e.authorId,text:e.text,receivedFirstTime:e.receivedFirstTime}})),_o=G("MESSAGE_SEEN",(function(e){return{id:e.id,customId:e.customId,type:e.type}})),Co=G("PROTOCOL_UPGRADED",(function(){})),Eo=G("INTEGRATION_DATA",(function(e){return{id:e.id,timestamp:e.timestamp,integrationName:e.integrationName,data:e.data}})),Io=Object(k.e)(k.Q,(function(e){return e.map(Z)}),k.vb)(oo),ko=Object(k.e)(k.Q,(function(e){return e.map(J)}),k.vb)(oo),So=function(e){return e.environment},To=((Wi={})[yo.getActionName()]=function(e,t){return Object(io.a)({},e,{visitorData:t.visitorData})},Wi),Ao=function(e){return e.visitorData},Ro=K({},Object(io.a)({},To,Io)),Po=n(25),Mo=function(e,t){var n=t.external,r=Object(Po.c)({context:{external:n}}),a=k.z,i=Object(F.d)(Ro,e,a(Object(F.a)(r)));return i.runSaga=r.run,i},No=n(5),zo=n.n(No),Lo=n(2),Do=G("PUBLIC_SEND_MESSAGE",(function(e){var t=e.customId,n=e.text,r=e.json,a=e.promise;return{customId:String(t),text:n,json:r,promise:a}})),Bo=(G("PUBLIC_INIT",(function(e){return{license:e.license,group:e.group}})),G("PUBLIC_SET_VISITOR_DATA",(function(e){var t=e.name,n=e.email,r=e.pageUrl,a=e.pageTitle,i=e.customProperties,o=e.promise,c=e.update;return{name:t,email:n,customProperties:i,pageUrl:r,pageTitle:a,promise:o,update:void 0===c||c}}))),qo=G("GET_VISITOR_DATA",(function(e){return{promise:e.promise}})),Fo=(G("PUBLIC_CALLBACK_ERROR",(function(e){return{errorMessage:e.errorMessage}})),G("PUBLIC_RATE_CHAT",(function(e){return{rate:e.rate,comment:e.comment,promise:e.promise}}))),Vo=G("PUBLIC_SET_SNEAK_PEEK",(function(e){return{text:e.text,promise:e.promise}})),Uo=G("PUBLIC_FORWARD_CHAT_TRANSCRIPT",(function(e){return{email:e.email,promise:e.promise}})),Go=G("PUBLIC_CLOSE_CHAT",(function(e){return{promise:e.promise}})),Ho=G("PUBLIC_DISCONNECT",(function(e){return{promise:e.promise}})),Wo=G("PUBLIC_GET_TICKET_FORM",(function(e){return{promise:e.promise,group:e.group}})),Yo=G("PUBLIC_SEND_TICKET_FORM",(function(e){return{answers:e.answers,promise:e.promise}})),Ko=G("PUBLIC_SEND_FILE",(function(e){return{file:e.file,customId:e.customId,promise:e.promise,onProgress:e.onProgress}})),Qo=G("PUBLIC_SEND_FILE",(function(e){return{customId:e.customId}})),Zo=G("PUBLIC_GET_PRECHAT_FORM",(function(e){return{promise:e.promise}})),Jo=G("PUBLIC_SEND_PRECHAT_FORM",(function(e){return{promise:e.promise,answers:e.answers}})),Xo=G("PUBLIC_GET_TRANSLATIONS",(function(e){return{promise:e.promise}})),$o=G("PUBLIC_GET_PREDICTED_AGENT",(function(e){return{promise:e.promise}})),ec=G("PUBLIC_GET_POSTCHAT_FORM",(function(e){return{promise:e.promise}})),tc=G("PUBLIC_SEND_POSTCHAT_FORM",(function(e){return{promise:e.promise,answers:e.answers}})),nc=G("PUBLIC_GET_CONFIG",(function(e){return{promise:e.promise}})),rc=G("PUBLIC_ACCEPT_INVITATION",(function(e){return{promise:e.promise,id:e.id}})),ac=G("PUBLIC_MESSAGE_AS_SEEN",(function(e){return{promise:e.promise,messageId:e.messageId}})),ic=G("PUBLIC_START_CHAT",(function(e){return{promise:e.promise}})),oc=G("PUBLIC_CHECK_GROUP_STATUS",(function(e){return{group:e.group,promise:e.promise}})),cc=G("PUBLIC_SET_VISITOR_GROUP",(function(e){return{group:e.group}})),sc=G("PUBLIC_GET_QUEUE_FORM",(function(e){return{promise:e.promise}})),uc=n(56),lc=n.n(uc),dc=n(129),pc=n.n(dc),fc=lc.a.mark(mc);function mc(e){var t,n,r,a,i=arguments;return lc.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:for(t=i.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=i[r];case 1:return o.next=3,Lo.j.apply(void 0,[e].concat(n));case 3:if("undefined"===typeof(a=o.sent)){o.next=6;break}return o.abrupt("return",a);case 6:return o.next=8,Object(Lo.l)("*");case 8:o.next=1;break;case 9:case"end":return o.stop()}}),fc)}var hc=function(e){return Object(Lo.e)(lc.a.mark((function t(){return lc.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e;case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",null);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))},vc="undefined"!==typeof document,gc="",bc=Object(vr.b)()?window.localStorage:vr.a,yc={setItem:function(e,t){bc.setItem(gc+e,t)},getItem:function(e){return bc.getItem(gc+e)},removeItem:function(e){bc.removeItem(gc+e)},setPrefix:function(e){gc=e},removeOldSecretTokenCookie:function(e){vc&&(document.cookie="secret_token_"+e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/licence/"+e+"/v2;domain=.livechatinc.com",document.cookie="secret_token_"+e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/licence/"+e+";domain=.livechatinc.com")}};function xc(e){return-1!==e.indexOf("cdn.livechatinc.com/cloud/?uri")?"https://"+Object(P.k)(e):"https://cdn.livechatinc.com/cloud/?uri=http://"+encodeURI(Object(P.k)(e))}function jc(e){var t=e.agent;return{invitation:{id:e.unique_id,authorId:t.login,text:e.greeting_message.text,receivedFirstTime:e.displayed_first_time},agent:{avatarUrl:xc(t.avatar_url),jobTitle:t.job_title,name:t.name,id:t.login}}}var Oc=n(142),wc=n.n(Oc),_c=function(e){function t(){return e.apply(this,arguments)||this}Object(an.a)(t,e);var n=t.prototype;return n.listitem=function(e){return""+kc+e},n.list=function(e,t,n){var r=n;return e.replace(kc,(function(){return t?r+++". ":"- "}))},t}(Oc.Renderer),Cc=Array.prototype.map,Ec=["A","UL","OL","LI","STRONG","EM","BR"],Ic=new _c,kc="%list-item%",Sc=function(e){return e.replace(/\n+$/,"")};function Tc(e){var t=wc()(e,{renderer:Ic}),n=(new DOMParser).parseFromString(t,"text/html").body;return n?Sc(n.textContent||""):""}var Ac,Rc,Pc=function(e){var t=e.template,n=e.root,r=e.preserveLists,a=n?n.props:{},i=n?n.component:rn.Fragment,o=rn.useMemo((function(){var e=new DOMParser,n=Sc(wc()(t,r?{renderer:Ic}:{})),a=e.parseFromString(n,"text/html").body;return a?function e(t){return Cc.call(t,(function(t,n){if("#text"===t.nodeName)return t.textContent;if(!Object(k.A)(t.nodeName,Ec))return t.hasChildNodes()?e(t.childNodes):null;var r=Object(q.a)({key:n},t.hasChildNodes()&&{children:e(t.childNodes)});if("A"===t.nodeName){var a=t.getAttribute("href");if(!a||Object(P.j)(a))return e(t.childNodes);var i=Object(q.a)({},r,{href:a,target:"_blank",rel:"nofollow noopener"});return rn.createElement("a",i)}return rn.createElement(t.nodeName.toLowerCase(),r)}))}(a.childNodes):""}),[t,r]);return rn.createElement(i,a,o)},Mc=function(e,t){return e.order-t.order},Nc={question:{type:"text"},checkbox_for_email:{type:"checkbox",meta:"confirm_subscription"},header:{type:"information"},skill:{type:"group_select"}},zc=function(e){return e.map((function(e,t){var n={};return Object(k.y)("label",e)&&(n.label=e.label),Object(k.y)("checked",e)&&(n.checked=e.checked),n.value=String(t),Object(k.y)("skill_id",e)&&(n.value=String(e.skill_id)),Object(k.y)("embedded_chat_hide_when_offline",e)&&(n.ticketFormDisabled=Boolean(e.embedded_chat_hide_when_offline)),Object(k.y)("queue_template",e)&&(n.queueTemplate=e.queue_template),n}))},Lc=function(e){var t=!1,n={fields:e.fields.sort(Mc).map((function(e,n){var r={};if("facebookConnect"===e.type)return t=!0,!1;e.id?r.name=e.id:-1===["header","information"].indexOf(e.type)&&(r.name=String(n)),Object(k.y)("value",e)&&(r.value=e.value),Object(k.y)("label",e)&&(r.label=e.label),Object(k.y)("required",e)&&(r.required=e.required),"rating"===e.type&&(r.commentLabel=e.options[0]),e.skills&&e.skills.length>0?r.options=zc(e.skills):e.options&&e.options.length>0&&(e.options_data?r.options=zc(e.options_data):Object(k.E)(e.options[0])?r.options=e.options.map((function(e,t){return{label:e.label,value:String(t)}})):r.options=e.options.map((function(e,t){return{label:e,value:String(t)}}))),e.serverType&&(r.serverType=e.serverType);var a=function(e){return{type:Nc[e]&&Nc[e].type||e,meta:Nc[e]&&Nc[e].meta||!1}}(e.type),i=a.type,o=a.meta;return r.type=i,o&&(r.meta=o),r})).filter(Boolean)};return e.id&&(n.id=e.id),t&&(n.facebookConnect=!0),n},Dc=function(e){return Object(io.a)({},e,{fields:e.fields.map((function(e){switch(e.type){case"name":case"subject":return Object(io.a)({},e,{maxLength:1024});case"email":case"textarea":return Object(io.a)({},e,{required:!0});default:return e}}))})},Bc=function(e,t,n){var r={survey_id:t.id},a=["name","question","email","checkbox","checkbox_for_email","radio","skill","select","textarea"],i=t.fields.map((function(r,a){var i,o,c={id:r.name,order:t.facebookConnect?a+1:a,type:(i=r.type,o=r.meta,void 0===o&&(o=!1),Object(k.n)((function(e){var t=e.type,n=e.meta;return t===i&&(!n||o===n)}),Nc)||i)};return"checkbox_for_email"===c.type?c.label="":Object(k.y)("label",r)&&(c.label=vc?Tc(r.label):r.label),Object(k.y)("options",r)?c.answers=r.options.map((function(t,a){var i={index:a};return Object(k.y)("label",t)&&(i.label=t.label),"skill"===c.type&&(i.group_id=parseInt(t.value,10)),"group_select"===r.type?i.chosen=parseInt(n,10)===a:i.chosen=e[r.name]&&(Array.isArray(e[r.name])&&-1!==e[r.name].indexOf(t.value)||"string"===typeof e[r.name]&&e[r.name]===t.value)||!1,i})):c.answer=e[r.name]||"",c})).filter((function(e){return-1!==a.indexOf(e.type)}));return r.fields=i,r},qc=function(e,t,n){var r=void 0===n?{}:n,a=r.headers,i=r.method,o=void 0===i?"POST":i,c=r.onProgress,s=r.withCredentials,u=void 0!==s&&s,l=new XMLHttpRequest;return{promise:new Promise((function(n,r){"function"===typeof c&&(l.upload.onprogress=function(e){c(e.loaded/e.total)}),l.onload=function(){var e;try{e=JSON.parse(l.response)}catch(t){e=l.response}if(l.status>=200&&l.status<300)n(e);else{var t=new Error("Upload failed.");t.code="UPLOAD_FAILED",t.response=e,r(t)}},l.onerror=function(){var e=new Error("Upload failed.");e.code="UPLOAD_FAILED",r(e)},l.onabort=function(){var e=new Error("Upload canceled.");e.code="UPLOAD_CANCELED",r(e)},l.open(o,e),l.withCredentials=u,a&&Object.keys(a).forEach((function(e){return l.setRequestHeader(e,a[e])})),l.send(function(e){var t=new FormData;return Object.keys(e).forEach((function(n){return t.append(n,e[n])})),t}(t))})),cancel:function(){l.abort()}}},Fc=((Ac={}).labs="-labs.",Ac.staging="-lc.",Ac.production=".",Ac),Vc=((Rc={}).labs="labs.",Rc.staging="staging.",Rc.production="",Rc),Uc=function(e,t,n){var r=t;return 1520===n&&(r="staging"),"https://secure"+(e?"-"+e:"")+Fc[r]+"livechatinc.com"},Gc=function(e,t,n){var r=t;return 1520===n&&(r="staging"),"https://api"+(e?"-"+e:"")+"."+Vc[r]+"livechatinc.com"},Hc=function(e,t,n){void 0===n&&(n={});var r=n.attempts||3,a=n.retryDelay||1e3;return new Promise((function(n,i){!function o(){var c;Object(R.a)(e,t).then((function(e){if(400!==e.status&&422!==e.status){if(!e.ok)throw new Error({type:"connection",reason:"Request failed"});n(e)}else e.json().then(i).catch(i)})).catch((function(e){return r?(--r,setTimeout((function(){o()}),a)):i(e)})),(c=15e3,new Promise((function(e){setTimeout(e,c)}))).then((function(){i({type:"connection",reason:"Request timeout"})}))}()}))},Wc=function(e){var t=e.environment,n=e.region,r=e.license,a=e.token,i=e.file,o=e.chatId,c=e.onProgress,s=Gc(n,t,r)+"/v2/chats/"+o+"/attachment",u=qc(s,{"author[type]":"visitor",license_id:r,files:i,token:a},{onProgress:c});return u[Po.a]=u.cancel,u},Yc=function(e,t,n){var r=t.environment,a=t.region,i=t.license,o=t.body,c=Gc(a,r,i)+"/"+e;return Hc(c,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(o)},n).then((function(e){return e.json()}))},Kc=function(e,t){var n=t.environment,r=t.license,a=t.region,i=""+Uc(a,n,r)+e;return Hc(i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}))},Qc=function(e,t,n,r){return!1===t?"licence/g"+e+"_"+r:n?"licence/external/"+e:"licence/"+e},Zc=function(e,t,n){var r=t.environment,a=t.license,i=t.body,o=void 0===i?{}:i,c=t.securedToken,s=t.secretId,u=t.region,l=t.queryStringData,d=void 0===l?{}:l,p=t.external,f=t.chatBetweenGroups,m=t.group,h=t.requestDistribution,v=!0===Object(k.v)(e,h)||-1!==e.indexOf("get_static_config")?"v2/":"",g={};c&&(g.secret_token=c),s&&(g.secret_id=s);var b=Uc(u,r,a)+"/"+Qc(a,f,p,m)+"/"+v+e+"?"+Object(P.a)(Object(io.a)({},d,g));return Hc(b,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(o)},n).then((function(e){return e.text()})).then((function(e){return JSON.parse(e.replace(/[\x01-\x08\x0B\x0C\x0E-\x1F\x7F]/g,""))}))},Jc=function(e,t){var n=t.environment,r=t.license,a=t.securedToken,i=t.secretId,o=t.region,c=t.external,s=t.group,u=t.chatBetweenGroups,l=Uc(o,n,r)+"/"+Qc(r,u,c,s)+"/tunnel_callback.cgi?"+function(e){for(var t="",n="0123456789abcdefghijklmnopqurstuvwxyzABCDEFGHIJKLMNOPQURSTUVWXYZ",r=0;r<e;r++)t+=n.substr(Math.floor(Math.random()*n.length),1);return t}(20);return a&&(l+="&secret_token="+a),i&&(l+="&secret_id="+i),l+="&command="+encodeURIComponent(e),Hc(l,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.text()})).then((function(e){return e.split("^")}))},Xc=zo.a.mark(es),$c=zo.a.mark(ts);function es(e,t){var n,r,a,i,o;return zo.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(Lo.j)(ko.getPropertyChatBetweenGroups);case 2:return n=c.sent,c.next=5,Object(Lo.j)(ko.getPropertyGroup);case 5:return r=c.sent,"get_dynamic_config.js",c.t0=Lo.c,c.t1=Zc,c.t2="get_dynamic_config.js",c.t3=io.a,c.t4={},c.t5=e,c.t6=t,c.next=16,Object(Lo.f)("external");case 16:return c.t7=c.sent,c.t8={queryStringData:c.t6,external:c.t7},c.t9=(0,c.t3)(c.t4,c.t5,c.t8),c.next=21,(0,c.t0)(c.t1,c.t2,c.t9);case 21:if(!(a=c.sent).error||"incorrect region"!==a.error){c.next=40;break}return c.next=25,Object(Lo.h)(co.setPropertyRegion(a.region));case 25:return c.t10=Lo.c,c.t11=es,c.t12=io.a,c.t13={},c.t14=e,c.t15=a.region,c.next=33,Object(Lo.f)("external");case 33:return c.t16=c.sent,c.t17={region:c.t15,external:c.t16},c.t18=(0,c.t12)(c.t13,c.t14,c.t17),c.next=38,(0,c.t10)(c.t11,c.t18);case 38:return i=c.sent,c.abrupt("return",i);case 40:if(!1!==n||a.visitor.groups===r){c.next=57;break}return c.next=43,Object(Lo.h)(co.setPropertyGroup(a.visitor.groups));case 43:return c.t19=Lo.c,c.t20=es,c.t21=io.a,c.t22={},c.t23=e,c.next=50,Object(Lo.f)("external");case 50:return c.t24=c.sent,c.t25={external:c.t24},c.t26=(0,c.t21)(c.t22,c.t23,c.t25),c.next=55,(0,c.t19)(c.t20,c.t26);case 55:return o=c.sent,c.abrupt("return",o);case 57:return c.abrupt("return",a);case 58:case"end":return c.stop()}}),Xc)}function ts(){var e,t,n,r,a,i,o;return zo.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(Lo.j)(ko.getPropertyLicense);case 2:return e=c.sent,c.next=5,Object(Lo.j)(ko.getPropertyGroup);case 5:return t=c.sent,c.next=8,Object(Lo.j)(So);case 8:return n=c.sent,c.next=11,Object(Lo.j)(ko.getPropertyRegion);case 11:return r=c.sent,c.next=14,Object(Lo.j)(Ao);case 14:return a=c.sent,c.next=17,Object(Lo.j)(ko.getPropertyChatBetweenGroups);case 17:return i=c.sent,o={},a.pageUrl&&(o.url=a.pageUrl),"undefined"!==typeof t&&(o.groups=t),c.next=23,Object(Lo.c)(es,{environment:n,license:e,group:t,region:r,chatBetweenGroups:i},o);case 23:return c.abrupt("return",c.sent);case 24:case"end":return c.stop()}}),$c)}var ns,rs=function(e){return"1"===e},as=function(e){return e.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&#94;/g,"^").replace(/&#45;/g,"-").replace(/&amp;/g,"&").replace(/<BR>/g,"\n")},is=as,os=function(e){return JSON.parse(as(e))},cs=((ns={}).none="0",ns.bad="1",ns.good="2",ns),ss={NEW_AGENT:"newAgent",NEW_AGENT_MESSAGE:"newAgentMessage",CHAT_ENDED:"chatEnded",VISITOR_QUEUED:"visitorQueued",TYPING_INDICATOR:"typingIndicator",RATE_CHAT:"rateChat",FORWARD_CHAT_TRANSCRIPT:"forwardChatTranscript",AGENTS_OFFLINE:"agentsOffline",GET_FORM:"getForm",GET_CUSTOM_FORM:"getCustomForm",JSON:"JSON",INTEGRATION_DATA:"integrationData"},us={IWCS5012F:[ss.AGENTS_OFFLINE,{}],IWCS5011F:[ss.AGENTS_OFFLINE,{}],IWCS0002R:[ss.NEW_AGENT,{1:["id"],2:["name",as],12:["chatId"],23:["avatarUrl",as],25:["jobTitle",as]},function(e){return e&&{trigger:e.trigger}}],IWCS0006R:[ss.NEW_AGENT_MESSAGE,{1:["authorId"],2:["message",is],9:["isMobile",rs],10:["id"],11:["json",function(e){if(!e)return null;try{return os(e)}catch(t){return null}}]}],IWCS1007S:[ss.CHAT_ENDED,null,{reason:"closed"}],IWCS0093R:[ss.CHAT_ENDED,null,{reason:"inactivity"}],IWCS0003R:[ss.CHAT_ENDED,null,{reason:"closed_by_agent"}],IWCS1002S:[ss.VISITOR_QUEUED,{2:["numberInQueue",parseInt],3:["waitingTime",parseInt]}],IWCS0002P:[ss.TYPING_INDICATOR,{2:["realCommand",function(e){var t=e.split("&#45;");return{authorId:t[1],isTyping:rs(t[2])}}]}],IWCS0113C:[ss.RATE_CHAT,{1:["visitorId"],2:["chatId"],3:["rate",function(e){return Object(k.l)((function(t){return cs[t]===e}),Object.keys(cs))},function(e){return cs[e]}]}],IWCS0069C:[ss.FORWARD_CHAT_TRANSCRIPT,{1:["visitorId"],2:["email"],5:["chatId"]}],IWCS0121C:[ss.GET_FORM,{1:["type",null,function(){return"1"}],2:["license"],4:["group"]}],IWCS0122C:[ss.GET_CUSTOM_FORM,{1:["license"],2:["type"],3:["group"]}],IWCSJSON:[ss.JSON,{1:["json",os]}],IWCS0109R:[ss.INTEGRATION_DATA,{1:["integrationName"],2:["data",os]}]},ls=function(e,t){var n=e.split("^"),r=n[0],a=n.slice(1),i=us[r];if(!i)return null;var o=i[0],c=i[1],s=i[2],u=a.reduce((function(e,t,n){if(!c||!c[n+1])return e;var r=c[n+1],a=r[0],i=r[1],o=void 0===i?k.z:i;return"realCommand"===a?Object(io.a)({},e,o(t)):(e[a]=o(t),e)}),{});return{name:o,data:Object(io.a)({},u,"function"===typeof s?s(t):s)}},ds=function(e,t){for(var n,r=Object(k.n)((function(t){return t[0]===e}),us),a=us[r][1],i=Math.max.apply(Math,Object.keys(a)),o=[r];o.length<i+1;){var c=a[o.length];if(c){var s=c[0],u=(n=String(t[s]),n.replace(/[\x01-\x08\x0B\x0C\x0E-\x1F\x7F]/g,"")).replace(/\^/g,"&#94;");c[2]?o.push(c[2](u)):o.push(u)}else o.push("")}return o.join("^")+"^"},ps=zo.a.mark(gs),fs=zo.a.mark(bs),ms=zo.a.mark(ys),hs=zo.a.mark(xs),vs=zo.a.mark(js);function gs(){var e;return zo.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Lo.b)({license:Object(Lo.j)(ko.getPropertyLicense),securedToken:Object(Lo.j)(ko.getPropertySecuredToken),secretId:Object(Lo.j)(ko.getPropertySecretId),environment:Object(Lo.j)(So),region:Object(Lo.j)(ko.getPropertyRegion),external:Object(Lo.f)("external"),group:Object(Lo.j)(ko.getPropertyGroup),chatBetweenGroups:Object(Lo.j)(ko.getPropertyChatBetweenGroups),requestDistribution:Object(Lo.j)(ko.getPropertyRequestDistribution)});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),ps)}function bs(e,t,n){var r;return zo.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return void 0===n&&(n={}),a.next=3,Object(Lo.c)(gs);case 3:return r=a.sent,a.next=6,Object(Lo.c)(Zc,e,Object(io.a)({},r,{body:t}),n);case 6:return a.abrupt("return",a.sent);case 7:case"end":return a.stop()}}),fs)}function ys(e){var t,n;return zo.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Lo.c)(gs);case 2:return t=r.sent,r.next=5,Object(Lo.c)(Kc,e,t);case 5:return n=r.sent,r.abrupt("return",n);case 7:case"end":return r.stop()}}),ms)}function xs(e,t){var n,r;return zo.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=ds(e,t),a.next=3,Object(Lo.c)(gs);case 3:return r=a.sent,a.next=6,Object(Lo.c)(Jc,n,r);case 6:return a.abrupt("return",a.sent);case 7:case"end":return a.stop()}}),hs)}function js(e,t){var n,r,a,i;return zo.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(Lo.c)(gs);case 2:return n=o.sent,r=n.license,a=n.environment,i=n.region,o.next=6,Object(Lo.c)(Yc,e,{environment:a,region:i,license:r,body:t});case 6:return o.abrupt("return",o.sent);case 7:case"end":return o.stop()}}),vs)}var Os=zo.a.mark(ws);function ws(e,t){var n;return zo.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n={},r.next=3,Object(Lo.c)(bs,"get_static_config."+e+"."+t+".js",n);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),Os)}var _s=zo.a.mark(Ms),Cs=zo.a.mark(Ls),Es=zo.a.mark(Ds),Is=zo.a.mark(Bs),ks=zo.a.mark(qs),Ss=zo.a.mark(Fs),Ts=zo.a.mark(Vs),As=zo.a.mark(Us),Rs=function(e){var t={};try{t=JSON.parse(e)}catch(n){}return t},Ps=function(e){var t,n,r=e.license_properties,a=e.group_properties,i="1"===a.chat_window.custom_mobile_settings,o="1"===r.non_profit,c="3"===r.lc_version,s=c&&"1"===r.continuous_chat_widget_enabled,u=Object(k.w)(!1,"properties.group.feade1d6c3f17748ae4c8d917a1e1068.forwardTicketFormToHelpdesk",e),l="1"===Object(k.w)(!1,"license_properties.helpdesk.inbound_forwarding",e),d={nonProfitLicense:o,visitorData:Object(k.K)(k.b,e.visitor),features:{helpDesk:{enabled:u||l,licenseId:Object(k.w)(null,"properties.license.feade1d6c3f17748ae4c8d917a1e1068.hdLicenseID",e)},fileSharing:{enabled:e.attachments.enable_for_visitors},agentAvatar:{enabled:e.chat_window.display_avatar,showWithMessage:e.chat_window.display_avatar&&"modern"!==Object(k.v)("group_properties.chat_window.new_theme.name",e)},continuousChat:{enabled:s},chatHistory:{enabled:s||c&&"1"===r.customer_history_enabled},rating:{enabled:e.chat_window.display_rating,position:"modern"===Object(k.v)("group_properties.chat_window.new_theme.name",e)?"bottom":"right"},emailTranscript:{enabled:e.chat_window.display_transcript_button},logo:{enabled:e.chat_window.logo.display,path:xc(e.chat_window.logo.path)},facebookButton:{enabled:Boolean(e.chat_window.social.facebook)},twitterButton:{enabled:Boolean(e.chat_window.social.twitter)},googlePlusButton:{enabled:Boolean(e.chat_window.social.plusone)},offlineForm:{enabled:!e.embedded_chat.hide_when_offline},linksPreview:{enabled:"1"===a.links_unfurling},preChatForm:{enabled:e.pre_chat_survey&&e.pre_chat_survey.enabled||!1},preChatAfterGreeting:{enabled:"1"===a.pre_chat_survey_after_greeting},creditCardMasking:{enabled:e.mask_credit_cards},hideTrademark:{enabled:"1"===a.chat_window.hide_trademark},hideOnMobile:{enabled:"1"===a.chat_window.hide_on_mobile},hideOnInit:{enabled:"1"===a.chat_window.hide_on_init},disableSounds:{enabled:"1"===a.chat_window.disable_sounds},minimized:{enabled:"0"===a.chat_window.disable_minimized},mobileMinimized:{enabled:i?"0"===a.chat_window.mobile_disable_minimized:"0"===a.chat_window.disable_minimized}},buttons:e.buttons.map((function(e){return{id:e.id,type:e.type,onlineImage:xc(e.online_value),offlineImage:xc(e.offline_value)}})),theme:{color:e.chat_window.theme.color,name:e.chat_window.theme.name,minimized:a.chat_window.theme.minimized,mobileMinimized:i?a.chat_window.mobile_minimized_theme:a.chat_window.theme.minimized},newTheme:{name:a.chat_window.new_theme.name,iconTheme:"modern"===a.chat_window.new_theme.name?"modern":"smooth",agentMessageBackgroundColor:Object(k.w)("#fffff","group_properties.chat_window.new_theme.agent_message_color_background",e),agentMessageColorText:Object(k.w)("#424d57","group_properties.chat_window.new_theme.agent_message_color_text",e),backgroundColor:Object(k.w)("#e9eef4","group_properties.chat_window.new_theme.background_color",e).toLowerCase(),minimizedColorBackground:Object(k.w)("#ffffff","group_properties.chat_window.new_theme.minimized_color_background",e),minimizedColorIcon:Object(k.w)("#4384F5","group_properties.chat_window.new_theme.minimized_color_icon",e),minimizedColorText:Object(k.w)("#000000","group_properties.chat_window.new_theme.minimized_color_text",e),visitorMessageBackgroundColor:Object(k.w)("#4384f5","group_properties.chat_window.new_theme.visitor_message_color_background",e),visitorMessageColorText:Object(k.w)("#ffffff","group_properties.chat_window.new_theme.visitor_message_color_text",e),titlebarBackgroundColor:Object(k.w)("#ffffff","group_properties.chat_window.new_theme.titlebar_background_color",e),titlebarText:Object(k.w)("#424d57","group_properties.chat_window.new_theme.titlebar_text",e),systemMessageColor:Object(k.w)("#424d57","group_properties.chat_window.new_theme.system_message_color",e),agentbarBackgroundColor:Object(k.w)("#ffffff","group_properties.chat_window.new_theme.agentbar_background_color",e),agentbarText:Object(k.w)("#424d57","group_properties.chat_window.new_theme.agentbar_text",e),ctaColor:Object(k.w)("#427fe1","group_properties.chat_window.new_theme.cta_color",e),customJson:Rs(Object(k.v)("group_properties.chat_window.new_theme.custom_json",e))},domainWhitelist:e.domain_whitelist,widgetType:e.embedded_chat.enabled?"embedded":"popup",integrations:e.integrations,hasAnyCustomLicenseProperty:Object.keys(e.properties.license).length>0,language:e.lang,groups:(t=e.skills,n=e.skills_online,Object(k.G)("id",t.map((function(e){return{id:e.id,status:-1!==n.indexOf(e.id)?"online":"offline",oldButtons:{onlineImage:xc(e.chat_button.online_url),offlineImage:xc(e.chat_button.offline_url)}}})))),clientLimitExceeded:e.client_limit_exceeded,screenPosition:a.chat_window.screen_position,mobileScreenPosition:i?a.chat_window.mobile_screen_position:a.chat_window.screen_position};return d.features.facebookButton.enabled&&(d.features.facebookButton.path=e.chat_window.social.facebook),d.features.twitterButton.enabled&&(d.features.facebookButton.path=e.chat_window.social.twitter),d.features.googlePlusButton.enabled&&(d.features.facebookButton.path=e.chat_window.social.plusone),d};function Ms(e){var t,n,r;return zo.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Lo.h)(co.setPropertyTicketForm(Dc(Lc(e.offline_form))));case 2:return a.next=4,Object(Lo.f)("external");case 4:if(t=a.sent,!e.pre_chat_survey){a.next=9;break}return n=Lc(e.pre_chat_survey),a.next=9,Object(Lo.h)(co.setPropertyPreChatForm(n));case 9:return r=t?e.localization_url.replace("/licence/","/licence/external/"):e.localization_url,a.next=12,Object(Lo.h)(co.setPropertyTranslationsVersion(r));case 12:return a.next=14,Object(Lo.h)(co.setPropertyConfigLoaded(!0));case 14:case"end":return a.stop()}}),_s)}var Ns={labs:"labs",staging:"staging",production:"prod"},zs=function(e,t){var n=t.split(",").map((function(e){return e.split(":")})),r=Object(k.s)(n);return Object(k.L)((function(t){if(!t)return!1;var n=parseFloat(t);return!(n<1&&e)&&n>Math.random()}),r)};function Ls(e){var t,n,r,a,i,o,c;return zo.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(Lo.j)(So);case 2:return t=s.sent,n=Ns[t],r=e.global_properties[n].requests_distribution,a=!1===e.t,i=zs(a,r),s.next=9,Object(Lo.h)(co.setPropertyRequestDistribution(i));case 9:return o=Ps(e),s.next=12,Object(Lo.j)(ko.getPropertyGroup);case 12:if(c=s.sent,-1===e.skills_online.indexOf(c)){s.next=18;break}return s.next=16,Object(Lo.h)(co.setPropertyChatStatus("ONLINE"));case 16:s.next=20;break;case 18:return s.next=20,Object(Lo.h)(co.setPropertyChatStatus("OFFLINE"));case 20:return s.next=22,Object(Lo.h)(co.setPropertyConfig(o));case 22:if("3"!==e.license_properties.lc_version){s.next=25;break}return s.next=25,Object(Lo.h)(Co());case 25:case"end":return s.stop()}}),Cs)}function Ds(){var e,t,n,r,a;return zo.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(Lo.c)(mc,ko.getPropertyStaticConfigVersion);case 2:return e=i.sent,i.next=5,Object(Lo.j)(ko.getPropertyGroup);case 5:return t=i.sent,i.next=8,Object(Lo.c)(ws,t,e);case 8:return n=i.sent,i.next=11,Object(Lo.c)(Ms,n);case 11:return i.next=13,Object(Lo.j)(ko.getPropertyDynamicConfig);case 13:return r=i.sent,a=Object(io.a)({},r,n),i.next=17,Object(Lo.c)(Ls,a);case 17:case"end":return i.stop()}}),Es)}function Bs(){var e,t,n;return zo.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Lo.c)(mc,ko.getPropertyTranslationsVersion);case 2:return e=r.sent,r.next=5,Object(Lo.c)(ys,e+"?acao=true");case 5:return t=r.sent,n=Object(k.K)((function(e){return e.toLowerCase()}),t.localization),r.next=9,Object(Lo.h)(co.setPropertyTranslations(n));case 9:case"end":return r.stop()}}),Is)}function qs(e){var t,n,r,a;return zo.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(Lo.j)(Ao);case 2:return t=i.sent,i.next=5,Object(Lo.j)(ko.getPropertyVisitorId);case 5:if(n=i.sent,r=Object(io.a)({},t),"undefined"===typeof e.visitor.groups){i.next=10;break}return i.next=10,Object(Lo.h)(co.setPropertyGroup(e.visitor.groups));case 10:return i.next=12,Object(Lo.h)(co.setPropertyStaticConfigVersion(e.static_config_version));case 12:if((t.name||e.visitor.nick)&&(r.name=t.name||e.visitor.nick),(a=r.customProperties||e.visitor.params&&Object(P.b)(e.visitor.params))&&(r.customProperties=a),!e.visitor.nick&&!e.visitor.params){i.next=18;break}return i.next=18,Object(Lo.h)(yo({visitorData:r}));case 18:if(n){i.next=22;break}return i.next=21,Object(Lo.h)(co.setPropertyVisitorId(e.visitor.session));case 21:yc.setItem("visitorId",e.visitor.session);case 22:case"end":return i.stop()}}),ks)}function Fs(e){var t,n,r;return zo.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Lo.c)(qs,e);case 2:return a.next=4,Object(Lo.h)(co.setPropertyDynamicConfig(e));case 4:return a.next=6,Object(Lo.h)(co.setPropertyClientLimitExceeded(e.client_limit_exceeded));case 6:if(!e.automatic_greeting){a.next=12;break}return t=jc(e.automatic_greeting),n=t.agent,r=t.invitation,a.next=10,Object(Lo.h)(po(Object(io.a)({},n,{fromInvitation:!0})));case 10:return a.next=12,Object(Lo.h)(wo(r));case 12:case"end":return a.stop()}}),Ss)}function Vs(){var e,t,n,r;return zo.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Lo.c)(ts);case 2:return e=a.sent,t=e.static_config_version,n=e.visitor.groups,a.next=7,Object(Lo.c)(ws,n,t);case 7:if(r=a.sent,"3"!==r.license_properties.lc_version){a.next=12;break}return a.next=12,Object(Lo.h)(Co());case 12:case"end":return a.stop()}}),Ts)}function Us(e){var t;return zo.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=8;break}return n.next=3,Object(Lo.c)(Fs,e);case 3:return n.next=5,Object(Lo.c)(Ms,e);case 5:return n.next=7,Object(Lo.c)(Ls,e);case 7:return n.abrupt("return");case 8:return n.next=10,Object(Lo.c)(ts);case 10:return t=n.sent,n.next=13,Object(Lo.c)(Fs,t);case 13:return n.next=15,Object(Lo.c)(Ds);case 15:case"end":return n.stop()}}),As)}var Gs="CHATTING",Hs="NOT_CHATTING",Ws=n(130),Ys=zo.a.mark(Ks);function Ks(e){var t,n,r,a,i;return zo.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.customId,n=e.text,r=e.json,o.next=3,Object(Lo.c)(mc,ko.getPropertyVisitorId);case 3:return a=o.sent,i={author:"visitor",message:n,message_id:t,random_id:t,visitor:{id:a}},r&&(i.message_json=JSON.stringify(r)),o.next=8,Object(Lo.c)(bs,"send_message",i);case 8:return o.next=10,Object(Lo.h)({type:"PRIVATE_SEND_MESSAGE"});case 10:case"end":return o.stop()}}),Ys)}var Qs=zo.a.mark(Zs);function Zs(){var e,t;return zo.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Lo.c)(mc,ko.getPropertyVisitorId);case 2:return e=n.sent,t={source:"visitor",random_id:String(Math.random()),visitor:{id:e}},n.next=6,Object(Lo.c)(bs,"close_chat",t);case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),Qs)}var Js=zo.a.mark(Xs);function Xs(e){var t,n,r;return zo.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Lo.c)(mc,ko.getPropertyVisitorId);case 2:return t=a.sent,a.next=5,Object(Lo.j)(ko.getPropertyChatId);case 5:return n=a.sent,r={visitorId:t,chatId:n,email:e.payload.email},a.next=9,Object(Lo.c)(xs,"forwardChatTranscript",r);case 9:return a.abrupt("return",a.sent);case 10:case"end":return a.stop()}}),Js)}var $s=zo.a.mark(eu);function eu(e){var t,n,r;return zo.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Lo.c)(mc,ko.getPropertyVisitorId);case 2:return t=a.sent,a.next=5,Object(Lo.j)(ko.getPropertyChatId);case 5:return n=a.sent,r={visitorId:t,chatId:n,rate:e.payload.rate},a.next=9,Object(Lo.c)(xs,"rateChat",r);case 9:return a.abrupt("return",a.sent);case 10:case"end":return a.stop()}}),$s)}var tu=zo.a.mark(iu),nu=function(e,t){var n=Object(k.K)((function(e){return"message"===e?"textarea":e}),e);return t.fields.map((function(e){if("information"===e.type)return null;var t={type:e.type,text:vc?Tc(e.label):e.label,serverType:e.serverType};return(e.name in n||e.type in n)&&("options"in e?t.value=Object(k.i)(n[e.name]).map((function(t){return Object(k.l)((function(e){return e.value===t}),e.options).label})).join(", "):e.name in n?t.value=n[e.name]:t.value=n[e.type],t.value=Object(k.rb)(t.value),t.text=t.text+" "+t.value),t})).filter(Boolean)},ru=function(e,t,n){var r=e.group,a=e.license,i=e.visitorId,o=e.visitorData,c=e.defaultValues,s=nu(n,t),u=Object(k.l)((function(e){return"email"===e.type||"email"===e.serverType}),s);if(!u)throw{type:"missing argument",reason:"Missing email"};if(!Object(k.l)((function(e){return"textarea"===e.type}),s))throw{type:"missing argument",reason:"Missing message"};var l=Object(k.l)((function(e){return"name"===e.type||"name"===e.serverType}),s),d=Object(k.l)((function(e){return"subject"===e.type||"subject"===e.serverType}),s),p=s.filter((function(e){var t=e.type,n=e.serverType;return-1===["name","email","subject"].indexOf(n||t)})).map((function(e){return e.text})).join("\n"),f={mail:u.value};l?f.name=l.value:c&&c.name&&(f.name=c.name);var m={group:r,licence_id:a,ticket_message:p,offline_message:s.map((function(e){return e.text})).join("\n"),requester:f,visitor_id:i};return d&&d.value&&(m.subject=d.value),o.pageUrl&&(m.source={url:o.pageUrl}),m},au=function(e,t){var n={id:e,text:t.ticket_message,visitor:{name:t.requester.name||null,email:t.requester.mail||null}};return t.subject&&(n.subject=t.subject),n};function iu(e){var t,n,r,a,i,o,c,s,u,l,d;return zo.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Object(Lo.j)(ko.getPropertyGroup);case 2:return t=p.sent,p.next=5,Object(Lo.j)(ko.getPropertyLicense);case 5:return n=p.sent,p.next=8,Object(Lo.c)(mc,ko.getPropertyVisitorId);case 8:return r=p.sent,p.next=11,Object(Lo.j)(Ao);case 11:return a=p.sent,p.next=14,Object(Lo.j)(ko.getPropertyTicketForm);case 14:return i=p.sent,p.next=17,Object(Lo.j)(ko.getPropertyTranslations);case 17:return o=p.sent,c=o?{name:o.client}:{},s=ru({group:t,license:n,visitorId:r,visitorData:a,defaultValues:c},i,e.answers),p.next=22,Object(Lo.c)(js,"v2/tickets/new",s);case 22:if(!(u=p.sent).errors){p.next=27;break}throw l=u.errors[0],{type:d=Object.keys(l)[0],reason:l[d][0]};case 27:return p.abrupt("return",au(u.id,s));case 28:case"end":return p.stop()}}),tu)}var ou=zo.a.mark(lu),cu=function(e,t){return Hc("https://api."+("labs"===e?"labs.":"")+"helpdesk.com/v1/externalTickets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return{id:e.ID}}))},su=function(e){var t=e.license,n=e.group,r=e.pageUrl,a=e.form,i=e.answers,o=nu(i,a),c=Object(k.l)((function(e){return"email"===e.type||"email"===e.serverType}),o),s=Object(k.l)((function(e){return"name"===e.type||"name"===e.serverType}),o);if(!c)throw new Error("Missing email");if(!Object(k.l)((function(e){return"textarea"===e.type}),o))throw new Error("Missing message");var u=Object(k.l)((function(e){return"subject"===e.type||"subject"===e.serverType}),o),l=o.filter((function(e){var t=e.type,n=e.serverType;return-1===["name","email","subject"].indexOf(n||t)})).map((function(e){return e.text})).join("\n");return Object(io.a)({},u&&u.value&&{subject:u.value},{message:{text:l},requester:Object(io.a)({email:c.value},s&&s.value&&{name:s.value}),integration:Object(io.a)({type:"livechat",ID:String(t),teamID:String(n)},r&&{referenceURL:r})})},uu=function(e,t){var n=t.requester,r=t.message,a=t.subject,i=r.text,o=n.name,c=n.email;return Object(io.a)({id:e,text:i},a&&{subject:a},{visitor:{name:o||null,email:c||null}})};function lu(e){var t,n,r;return zo.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=su,a.next=3,Object(Lo.j)(ko.getPropertyLicense);case 3:return a.t1=a.sent,a.next=6,Object(Lo.j)(ko.getPropertyGroup);case 6:return a.t2=a.sent,a.next=9,Object(Lo.j)(Ao);case 9:return a.t3=a.sent.pageUrl,a.next=12,Object(Lo.j)(ko.getPropertyTicketForm);case 12:return a.t4=a.sent,a.t5=e.answers,a.t6={license:a.t1,group:a.t2,pageUrl:a.t3,form:a.t4,answers:a.t5},t=(0,a.t0)(a.t6),a.next=18,Object(Lo.j)(So);case 18:return n=a.sent,a.next=21,Object(Lo.c)(cu,n,t);case 21:return r=a.sent,a.abrupt("return",uu(r.id,t));case 23:case"end":return a.stop()}}),ou)}var du=zo.a.mark(pu);function pu(e){var t,n;return zo.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Lo.j)(ko.getPropertyLicense);case 2:return t=r.sent,n={license:t,type:"offline",group:e},r.next=6,Object(Lo.c)(xs,"getCustomForm",n);case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),du)}var fu=zo.a.mark(mu);function mu(){var e,t,n;return zo.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Lo.j)(ko.getPropertyLicense);case 2:return e=r.sent,r.next=5,Object(Lo.j)(ko.getPropertyGroup);case 5:return t=r.sent,n={license:e,type:"queued",group:t},r.next=9,Object(Lo.c)(xs,"getCustomForm",n);case 9:return r.abrupt("return",r.sent);case 10:case"end":return r.stop()}}),fu)}var hu=zo.a.mark(vu);function vu(e){var t,n,r;return zo.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Lo.c)(mc,ko.getPropertyVisitorId);case 2:return t=a.sent,a.next=5,Object(Lo.j)(ko.getPropertyChatId);case 5:return n=a.sent,r={comment:e.payload.comment,conference_id:n,random_id:String(Math.random()),visitor:{id:t}},a.next=9,Object(Lo.c)(bs,"send_rating_comment",r);case 9:return a.abrupt("return",a.sent);case 10:case"end":return a.stop()}}),hu)}var gu=zo.a.mark(bu);function bu(e){var t,n,r,a;return zo.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(Lo.c)(mc,ko.getPropertyVisitorId);case 2:return t=i.sent,n=e.customId,i.next=6,Object(Lo.c)(mc,ko.getPropertyChatId);case 6:return r=i.sent,a={random_id:n,conference_id:r,visitor:{id:t},valid_time_sec:60},i.next=10,Object(Lo.c)(bs,"attachment_token",a);case 10:return i.abrupt("return",i.sent);case 11:case"end":return i.stop()}}),gu)}var yu=zo.a.mark(xu);function xu(){var e,t,n;return zo.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Lo.j)(ko.getPropertyLicense);case 2:return e=r.sent,r.next=5,Object(Lo.j)(ko.getPropertyGroup);case 5:return t=r.sent,n={type:"postchat",license:e,group:t},r.next=9,Object(Lo.c)(xs,"getForm",n);case 9:return r.abrupt("return",r.sent);case 10:case"end":return r.stop()}}),yu)}var ju=zo.a.mark(Ou);function Ou(e){var t,n,r,a;return zo.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.answers,i.next=3,Object(Lo.j)(ko.getPropertyVisitorId);case 3:return n=i.sent,i.next=6,Object(Lo.j)(ko.getPropertyChatId);case 6:return r=i.sent,a={conference_id:r,random_id:String(Math.random()),survey:t,visitor:{id:n}},i.next=10,Object(Lo.c)(bs,"post_chat_survey_data",a);case 10:return i.abrupt("return",i.sent);case 11:case"end":return i.stop()}}),ju)}var wu=zo.a.mark(_u);function _u(){var e,t;return zo.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Lo.c)(mc,ko.getPropertyVisitorId);case 2:return e=n.sent,t={random_id:String(Math.random()),visitor:{id:e}},n.next=6,Object(Lo.c)(bs,"get_predicted_agent",t);case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),wu)}var Cu=zo.a.mark(Eu);function Eu(e){var t,n,r,a,i,o,c;return zo.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.messageId,s.next=3,Object(Lo.c)(mc,ko.getPropertyVisitorId);case 3:return n=s.sent,s.next=6,Object(Lo.j)(ko.getPropertyServerIdsMap);case 6:return r=s.sent,a=r[t],i=a.serverId,o=a.authorId,c={message:{id:i,agent_id:o},random_id:String(Math.random()),visitor:{id:n}},s.next=11,Object(Lo.c)(bs,"agent_message_seen",c);case 11:return s.abrupt("return",s.sent);case 12:case"end":return s.stop()}}),Cu)}var Iu=zo.a.mark(ku);function ku(e){var t,n,r;return zo.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("undefined"===typeof e){a.next=4;break}a.t0=e,a.next=7;break;case 4:return a.next=6,Object(Lo.j)(ko.getPropertyGroup);case 6:a.t0=a.sent;case 7:return t=a.t0,a.next=10,Object(Lo.c)(mc,ko.getPropertyVisitorId);case 10:return n=a.sent,r={visitor:{id:n},skill:t,random_id:String(Math.random())},a.next=14,Object(Lo.c)(bs,"status_ping",r,{retry:10});case 14:return a.abrupt("return",a.sent);case 15:case"end":return a.stop()}}),Iu)}var Su=function(e){return{chatState:e.visitor_is_chatting?Gs:Hs,chatStatus:e.agent_available?"ONLINE":"OFFLINE"}},Tu=zo.a.mark(Al),Au=zo.a.mark(Rl),Ru=zo.a.mark(Pl),Pu=zo.a.mark(Ml),Mu=zo.a.mark(Nl),Nu=zo.a.mark(zl),zu=zo.a.mark(Ll),Lu=zo.a.mark(Dl),Du=zo.a.mark(Bl),Bu=zo.a.mark(ql),qu=zo.a.mark(Fl),Fu=zo.a.mark(Vl),Vu=zo.a.mark(Ul),Uu=zo.a.mark(Gl),Gu=zo.a.mark(Hl),Hu=zo.a.mark(Wl),Wu=zo.a.mark(Zl),Yu=zo.a.mark(Jl),Ku=zo.a.mark($l),Qu=zo.a.mark(ed),Zu=zo.a.mark(td),Ju=zo.a.mark(nd),Xu=zo.a.mark(rd),$u=zo.a.mark(ad),el=zo.a.mark(id),tl=zo.a.mark(od),nl=zo.a.mark(cd),rl=zo.a.mark(sd),al=zo.a.mark(ud),il=zo.a.mark(ld),ol=18e5,cl=Do,sl=Bo,ul=qo,ll=Fo,dl=Vo,pl=Uo,fl=Go,ml=Ho,hl=Wo,vl=Yo,gl=Ko,bl=Zo,yl=Jo,xl=Xo,jl=$o,Ol=ec,wl=tc,_l=nc,Cl=rc,El=ac,Il=ic,kl=oc,Sl=cc,Tl=sc;function Al(){var e;return zo.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Lo.j)(ko.getPropertyTranslations);case 2:if(!(e=t.sent)){t.next=5;break}return t.abrupt("return",e);case 5:return t.next=7,Object(Lo.c)(Bs);case 7:return t.next=9,Object(Lo.j)(ko.getPropertyTranslations);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),Tu)}function Rl(){var e;return zo.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Lo.j)(ko.getPropertyWelcomeMessage);case 2:if(!(e=t.sent)){t.next=5;break}return t.abrupt("return",e);case 5:return t.next=7,Object(Lo.c)(Al);case 7:return t.abrupt("return",t.sent.welcome_to_chat);case 8:case"end":return t.stop()}}),Au)}function Pl(e){var t,n,r,a,i,o,c,s,u,l,d;return zo.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return u=function(){return zo.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Lo.l)((function(e){return e.type===uo.getActionName()&&Object(k.v)("payload.customId",e)===a}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),t)},t=zo.a.mark(u),p.next=4,Object(Lo.c)(mc,ko.getPropertyChatState);case 4:return n=p.sent,r=e.payload,a=r.customId,i=r.text,o=r.json,c=n!==Gs,p.next=9,Object(Lo.j)(ko.getPropertyAcceptedInvitation);case 9:return s=p.sent,p.next=12,Object(Lo.e)(u);case 12:if(l=p.sent,p.prev=13,!c){p.next=28;break}return p.t0=Lo.c,p.t1=pd,p.t2=a,p.t3=i,p.next=21,Object(Lo.c)(Rl);case 21:return p.t4=p.sent,p.t5=s,p.t6={customId:p.t2,text:p.t3,welcomeMessage:p.t4,acceptedInvitation:p.t5},p.next=26,(0,p.t0)(p.t1,p.t6);case 26:p.next=30;break;case 28:return p.next=30,Object(Lo.c)(Ks,{customId:a,text:i,json:o});case 30:p.next=38;break;case 32:return p.prev=32,p.t7=p.catch(13),e.payload.promise.reject({type:"connection",reason:"Request failed"}),p.next=37,Object(Lo.d)(l);case 37:return p.abrupt("return");case 38:if(!c){p.next=45;break}return p.next=41,Object(Lo.l)([po.getActionName(),lo.getActionName()]);case 41:if(p.sent.type!==lo.getActionName()){p.next=45;break}return e.payload.promise.reject({type:"state",reason:"Chat is offline"}),p.abrupt("return");case 45:return p.next=47,Object(Lo.g)(l);case 47:d=p.sent,e.payload.promise.resolve({id:d.payload.id,timestamp:d.payload.timestamp});case 49:case"end":return p.stop()}}),Ru,null,[[13,32]])}function Ml(e){var t,n,r,a,i,o;return zo.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(Lo.c)(mc,ko.getPropertyClientLimitExceeded);case 2:return c.next=4,Object(Lo.j)(Ao);case 4:return t=c.sent,n=Object(k.T)(["customProperties"],t),r=Object(k.U)(k.D,Object(k.Y)(["name","email","pageUrl","pageTitle","customProperties"],e.payload)),a=String(Math.random()),i=e.payload.update?Object(k.P)(t,r):Object(k.P)(n,r),c.next=11,Object(Lo.h)(yo({requestId:a,visitorData:i}));case 11:return c.next=13,Object(Lo.l)((function(e){return(e.type===fo.getActionName()||e.type===mo.getActionName())&&e.payload.requestId===a}));case 13:if((o=c.sent).type!==fo.getActionName()){c.next=16;break}return c.abrupt("return",e.payload.promise.resolve(o.payload.visitorData));case 16:return c.abrupt("return",e.payload.promise.reject({type:"connection",reason:"Request failed"}));case 17:case"end":return c.stop()}}),Pu)}function Nl(e){return zo.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Lo.h)(co.setPropertySneakPeek(e.payload.text));case 2:e.payload.promise.resolve({success:!0});case 3:case"end":return t.stop()}}),Mu)}function zl(e){return zo.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Lo.j)(ko.getPropertyChatId);case 2:if(t.sent){t.next=6;break}return e.payload.promise.reject({type:"state",reason:"There is no chat to forward transcript"}),t.abrupt("return");case 6:return t.prev=6,t.next=9,Object(Lo.c)(Xs,e);case 9:t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(6),e.payload.promise.reject({type:"connection",reason:"Request failed"}),t.abrupt("return");case 15:e.payload.promise.resolve({success:!0});case 16:case"end":return t.stop()}}),Nu,null,[[6,11]])}function Ll(e){return zo.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Lo.j)(ko.getPropertyChatId);case 2:if(t.sent){t.next=6;break}return e.payload.promise.reject({type:"state",reason:"There is no chat to close"}),t.abrupt("return");case 6:return t.prev=6,t.next=9,Object(Lo.c)(Zs);case 9:t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(6),e.payload.promise.reject({type:"connection",reason:"Request failed"}),t.abrupt("return");case 15:return t.next=17,Object(Lo.l)(lo.getActionName());case 17:e.payload.promise.resolve({success:!0});case 18:case"end":return t.stop()}}),zu,null,[[6,11]])}function Dl(e){return zo.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Lo.j)(ko.getPropertyChatId);case 2:if(t.sent){t.next=6;break}return e.payload.promise.reject({type:"state",reason:"There is no chat to rate"}),t.abrupt("return");case 6:if(!e.payload.rate){t.next=16;break}return t.prev=7,t.next=10,Object(Lo.c)(eu,e);case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(7),e.payload.promise.reject({type:"connection",reason:"Request failed"}),t.abrupt("return");case 16:if(!e.payload.comment){t.next=26;break}return t.prev=17,t.next=20,Object(Lo.c)(vu,e);case 20:t.next=26;break;case 22:return t.prev=22,t.t1=t.catch(17),e.payload.promise.reject({type:"connection",reason:"Rate Comment request failed"}),t.abrupt("return");case 26:e.payload.promise.resolve({success:!0});case 27:case"end":return t.stop()}}),Lu,null,[[7,12],[17,22]])}function Bl(e){var t;return zo.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,Object(Lo.j)(ko.getPropertyChatState);case 3:if(n.sent!==Gs){n.next=7;break}return t.promise.reject({type:"state",reason:"You can't disconnect during the chat"}),n.abrupt("return");case 7:t.promise.resolve({success:!0});case 8:case"end":return n.stop()}}),Du)}function ql(e){var t,n,r,a,i,o,c;return zo.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.payload,n=t.promise,"undefined"===typeof(r=t.group)){s.next=18;break}return s.prev=3,s.next=6,Object(Lo.c)(pu,r);case 6:return a=s.sent,i=ls(a.join("^")),o=Dc(Lc(i.data.json)),s.next=11,Object(Lo.h)(co.setPropertyTicketForm(o));case 11:n.resolve(o),s.next=17;break;case 14:s.prev=14,s.t0=s.catch(3),n.reject({type:"connection",reason:"Request failed"});case 17:return s.abrupt("return");case 18:return s.next=20,Object(Lo.c)(mc,ko.getPropertyTicketForm);case 20:c=s.sent,n.resolve(c);case 22:case"end":return s.stop()}}),Bu,null,[[3,14]])}function Fl(e){var t,n,r,a;return zo.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.promise,i.prev=2,i.next=5,Object(Lo.c)(mu);case 5:r=i.sent,a=ls(r.join("^")),n.resolve(Lc(a.data.json)),i.next=13;break;case 10:i.prev=10,i.t0=i.catch(2),n.reject({type:"connection",reason:"Request failed"});case 13:case"end":return i.stop()}}),qu,null,[[2,10]])}function Vl(e){var t,n;return zo.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,r.next=4,Object(Lo.c)(Al);case 4:return n=r.sent,r.abrupt("return",t.promise.resolve(n));case 8:return r.prev=8,r.t0=r.catch(1),r.abrupt("return",t.promise.reject({type:"connection",reason:"Request failed"}));case 11:case"end":return r.stop()}}),Fu,null,[[1,8]])}function Ul(e){var t,n;return zo.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,Object(Lo.c)(mc,ko.getPropertyVisitorId);case 3:return r.next=5,Object(Lo.j)(Ao);case 5:return n=r.sent,r.abrupt("return",t.promise.resolve(n));case 7:case"end":return r.stop()}}),Vu)}function Gl(e){var t,n,r,a;return zo.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,i.next=3,Object(Lo.j)(ko.getPropertyConfig);case 3:return n=i.sent,r=Object(k.w)(!1,"features.helpDesk.enabled",n),a=r?lu:iu,i.next=8,Object(Lo.c)(mc,ko.getPropertyTicketForm);case 8:return i.prev=8,i.t0=t.promise,i.next=12,Object(Lo.c)(a,t);case 12:i.t1=i.sent,i.t0.resolve.call(i.t0,i.t1),i.next=19;break;case 16:i.prev=16,i.t2=i.catch(8),t.promise.reject(i.t2&&i.t2.reason||i.t2&&i.t2.errors?i.t2:{type:"connection",reason:"Request failed"});case 19:case"end":return i.stop()}}),Uu,null,[[8,16]])}function Hl(){var e;return zo.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Lo.c)(mc,ko.getPropertyConfigLoaded);case 2:return t.next=4,Object(Lo.j)(ko.getPropertyPreChatForm);case 4:if(e=t.sent){t.next=7;break}return t.abrupt("return",null);case 7:return t.abrupt("return",e);case 8:case"end":return t.stop()}}),Gu)}function Wl(e){var t,n;return zo.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,r.next=4,Object(Lo.c)(Hl);case 4:if(n=r.sent){r.next=7;break}return r.abrupt("return",t.promise.reject({type:"state",reason:"Pre-chat survey is turned off"}));case 7:return r.abrupt("return",t.promise.resolve(n));case 10:return r.prev=10,r.t0=r.catch(1),r.abrupt("return",t.promise.reject({type:"connection",reason:"Request failed"}));case 13:case"end":return r.stop()}}),Hu,null,[[1,10]])}var Yl=["email","text","radio","select","group_select"],Kl=["checkbox"],Ql=function(e,t){return e.map((function(e){var n=t[e.name],r=typeof t[e.name];return e.required&&!n?{reason:"Required field",description:"Pease fill in required field",field:e.name}:n&&-1!==Yl.indexOf(e.type)&&"string"!==r?{reason:"Wrong type",field:e.name}:!(!n||-1===Kl.indexOf(e.type)||Array.isArray(n))&&{reason:"Wrong type",field:e.name}})).filter(Boolean)};function Zl(e){var t,n,r,a,i,o,c,s,u,l,d,p,f;return zo.a.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.payload,m.next=3,Object(Lo.c)(mc,ko.getPropertyChatState);case 3:if(n=m.sent,m.prev=4,n!==Gs){m.next=7;break}return m.abrupt("return",t.promise.reject({type:"state",reason:"You can't send prechat when chat is running"}));case 7:return m.next=9,Object(Lo.j)(Ao);case 9:return r=m.sent,m.next=12,Object(Lo.c)(Hl);case 12:return a=m.sent,i=t.answers,o=t.promise,c=i.choosenGroupIndex,s=Object(Ws.a)(i,["choosenGroupIndex"]),m.next=17,Object(Lo.j)(ko.getPropertyAcceptedInvitation);case 17:if(u=m.sent,l=Bc(s,a,c),0===(d=Ql(a.fields,s)).length){m.next=22;break}return m.abrupt("return",o.reject({type:"wrong arguments",fields:d}));case 22:if(!(p=l.fields.filter((function(e){return"email"===e.type||"name"===e.type})))){m.next=27;break}return f=p.reduce((function(e,t){var n;return Object(io.a)({},e,((n={})[t.type]=t.answer,n))}),r),m.next=27,Object(Lo.h)(yo({visitorData:f}));case 27:return m.t0=Lo.c,m.t1=pd,m.t2=l,m.next=32,Object(Lo.c)(Rl);case 32:return m.t3=m.sent,m.t4=u,m.t5={customId:"prechat_startchat",answers:m.t2,welcomeMessage:m.t3,acceptedInvitation:m.t4},m.next=37,(0,m.t0)(m.t1,m.t5);case 37:return m.next=39,Object(Lo.c)(mc,ko.getPropertyChatId);case 39:return m.abrupt("return",o.resolve({success:!0}));case 42:return m.prev=42,m.t6=m.catch(4),m.abrupt("return",t.promise.reject({type:"connection",reason:"Request failed"}));case 45:case"end":return m.stop()}}),Wu,null,[[4,42]])}function Jl(e){var t,n,r,a,i,o,c,s,u,l,d,p;return zo.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.payload,f.next=3,Object(Lo.c)(mc,ko.getPropertyChatState);case 3:return n=f.sent,f.next=6,Object(Lo.j)(So);case 6:return r=f.sent,f.next=9,Object(Lo.j)(ko.getPropertyLicense);case 9:return a=f.sent,f.next=12,Object(Lo.j)(ko.getPropertyRegion);case 12:if(i=f.sent,o=t.customId,c=t.file,s=t.onProgress,f.prev=14,n===Gs){f.next=18;break}return f.next=18,Object(Lo.c)(pd,{customId:o+"_startchat",text:""});case 18:return f.next=20,Object(Lo.c)(mc,ko.getPropertyChatId);case 20:return u=f.sent,f.next=23,Object(Lo.c)(bu,t);case 23:return l=f.sent,d=l.attachment_token,f.next=27,Object(Lo.c)(Wc,{environment:r,region:i,license:a,token:d,file:c,chatId:u,onProgress:s});case 27:return f.next=29,Object(Lo.l)((function(e){return e.type===ho.getActionName()&&e.payload.attachmentToken===d}));case 29:return p=f.sent,f.abrupt("return",t.promise.resolve(Object(k.U)(k.D,Object(k.Y)(["id","timestamp","url","contentType","size","width","height"],p.payload))));case 33:return f.prev=33,f.t0=f.catch(14),f.abrupt("return",t.promise.reject({type:"connection",reason:"Request failed"}));case 36:case"end":return f.stop()}}),Yu,null,[[14,33]])}var Xl=function(e){var t=e.type,n=e.payload;return t===co.setPropertyPingSent.getActionName()&&!0===n.data};function $l(e){var t,n,r,a,i,o,c,s,u,l,d;return zo.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload,p.prev=1,p.next=4,Object(Lo.c)(mc,ko.getPropertyClientLimitExceeded);case 4:if(!p.sent){p.next=8;break}return p.next=8,Object(Lo.l)(Xl);case 8:return p.next=10,Object(Lo.c)(_u);case 10:if((n=p.sent).agent){p.next=13;break}return p.abrupt("return",t.promise.resolve({}));case 13:return p.next=15,Object(Lo.c)(Al);case 15:return r=p.sent,a=n.agent,i=a.login,o=a.name,c=a.avatar_url,s=a.job_title,u=a.is_bot,l=r.welcome_to_chat,p.next=20,Object(Lo.h)(co.setPropertyWelcomeMessage(l));case 20:return d={name:o,isBot:u,jobTitle:s,id:i,avatarUrl:xc(c),message:l},p.abrupt("return",t.promise.resolve(d));case 24:return p.prev=24,p.t0=p.catch(1),p.abrupt("return",t.promise.reject({type:"connection",reason:"Request failed"}));case 27:case"end":return p.stop()}}),Ku,null,[[1,24]])}function ed(e){var t,n,r,a;return zo.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,i.prev=1,i.next=4,Object(Lo.c)(xu);case 4:if(n=i.sent,(r=os(n[1])).survey){i.next=8;break}return i.abrupt("return",t.promise.reject({type:"state",reason:"Post-chat survey is turned off"}));case 8:return a=Lc(r.survey),i.next=11,Object(Lo.h)(co.setPropertyPostChatForm(a));case 11:return i.abrupt("return",t.promise.resolve(a));case 14:return i.prev=14,i.t0=i.catch(1),i.abrupt("return",t.promise.reject({type:"connection",reason:"Request failed"}));case 17:case"end":return i.stop()}}),Qu,null,[[1,14]])}function td(e){var t,n,r,a;return zo.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,i.prev=1,n=t.answers,i.next=5,Object(Lo.j)(ko.getPropertyPostChatForm);case 5:return r=i.sent,a=Bc(n,r),i.next=9,Object(Lo.c)(Ou,{answers:a});case 9:return i.abrupt("return",t.promise.resolve({success:!0}));case 12:return i.prev=12,i.t0=i.catch(1),i.abrupt("return",t.promise.reject({type:"connection",reason:"Request failed"}));case 15:case"end":return i.stop()}}),Zu,null,[[1,12]])}function nd(e){var t,n;return zo.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,Object(Lo.j)(ko.getPropertyConfig);case 3:if(n=r.sent){r.next=7;break}return r.next=7,Object(Lo.c)(Ds);case 7:return r.next=9,Object(Lo.j)(ko.getPropertyConfig);case 9:n=r.sent,t.promise.resolve(n);case 11:case"end":return r.stop()}}),Ju)}function rd(e){var t;return zo.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,Object(Lo.h)(co.setPropertyAcceptedInvitation(t.id));case 3:t.promise.resolve({success:!0});case 4:case"end":return n.stop()}}),Xu)}function ad(e){var t,n;return zo.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,n=t.messageId,r.next=5,Object(Lo.c)(Eu,{messageId:n});case 5:return r.abrupt("return",t.promise.resolve({success:!0}));case 8:return r.prev=8,r.t0=r.catch(1),r.abrupt("return",t.promise.reject({type:"connection",reason:"Request failed"}));case 11:case"end":return r.stop()}}),$u,null,[[1,8]])}function id(e){var t,n,r,a;return zo.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,i.next=3,Object(Lo.c)(mc,ko.getPropertyChatState);case 3:if(n=i.sent,!(n===Gs)){i.next=8;break}return t.promise.reject({type:"state",reason:"You can't start new chat during chat"}),i.abrupt("return");case 8:return i.next=10,Object(Lo.j)(ko.getPropertyWelcomeMessage);case 10:if(r=i.sent){i.next=15;break}return i.next=14,Object(Lo.c)(Al);case 14:r=i.sent.welcome_to_chat;case 15:return i.prev=15,i.next=18,Object(Lo.c)(pd,{customId:"startchat",welcomeMessage:r});case 18:return i.next=20,Object(Lo.c)(mc,ko.getPropertyChatId);case 20:a=i.sent,t.promise.resolve({chatId:a}),i.next=27;break;case 24:i.prev=24,i.t0=i.catch(15),t.promise.reject({type:"connection",reason:"Request failed"});case 27:case"end":return i.stop()}}),el,null,[[15,24]])}function od(e){var t,n,r,a,i,o,c,s,u,l,d,p;return zo.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:if(t=e.payload,n=t.group,r=t.promise,"undefined"===typeof n){f.next=6;break}f.t0=n,f.next=9;break;case 6:return f.next=8,Object(Lo.j)(ko.getPropertyGroup);case 8:f.t0=f.sent;case 9:return a=f.t0,f.next=12,Object(Lo.j)(ko.getPropertyClientLimitExceeded);case 12:if((i=f.sent)||"undefined"!==typeof n){f.next=23;break}return f.next=16,Object(Lo.j)(ko.getPropertyChatState);case 16:return o=f.sent,c=o===Gs,f.next=20,Object(Lo.j)(ko.getPropertyChatStatus);case 20:return s=f.sent,r.resolve({groupStatus:s.toLowerCase(),chatting:c}),f.abrupt("return");case 23:return f.prev=23,f.next=26,Object(Lo.c)(ku,a);case 26:if(u=f.sent,l=Su(u),d=l.chatStatus,p=l.chatState,!i||p!==Gs){f.next=31;break}return f.next=31,Object(Lo.h)(co.setPropertyClientLimitExceeded(!1));case 31:r.resolve({groupStatus:d.toLowerCase(),chatting:p===Gs}),f.next=37;break;case 34:f.prev=34,f.t1=f.catch(23),r.reject({type:"connection",reason:"Request failed"});case 37:case"end":return f.stop()}}),tl,null,[[23,34]])}function cd(){var e;return zo.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(Lo.c)(Po.d,ol);case 3:return t.next=5,Object(Lo.j)(ko.getPropertyChatState);case 5:if(e=t.sent,e===Gs){t.next=10;break}return t.next=10,Object(Lo.h)(co.setPropertyClientLimitExceeded(!0));case 10:t.next=0;break;case 12:case"end":return t.stop()}}),nl)}function sd(){var e,t;return zo.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Lo.a)([sl.getActionName()],Po.b.expanding());case 2:return e=n.sent,n.next=5,Object(Lo.l)("VISITOR_DATA_WATCHER");case 5:return n.next=8,Object(Lo.l)(e);case 8:return t=n.sent,n.next=11,Object(Lo.c)(mc,ko.getPropertyPingSent);case 11:return n.next=13,Object(Lo.c)(Ml,t);case 13:n.next=5;break;case 15:case"end":return n.stop()}}),rl)}function ud(e){var t;return zo.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,Object(Lo.h)(co.setPropertyGroup(t.group));case 3:case"end":return n.stop()}}),al)}function ld(){var e,t,n;return zo.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Lo.e)(cd);case 2:return r.next=4,Object(Lo.e)(sd);case 4:return r.next=6,Object(Lo.m)(Cl.getActionName(),rd);case 6:return r.next=8,Object(Lo.m)(xl.getActionName(),Vl);case 8:return r.next=10,Object(Lo.m)(hl.getActionName(),ql);case 10:return r.next=12,Object(Lo.m)(Tl.getActionName(),Fl);case 12:return r.next=14,Object(Lo.m)(vl.getActionName(),Gl);case 14:return r.next=16,Object(Lo.m)(ll.getActionName(),Dl);case 16:return r.next=18,Object(Lo.m)(dl.getActionName(),Nl);case 18:return r.next=20,Object(Lo.m)(fl.getActionName(),Ll);case 20:return r.next=22,Object(Lo.m)(pl.getActionName(),zl);case 22:return r.next=24,Object(Lo.m)(ml.getActionName(),Bl);case 24:return r.next=26,Object(Lo.m)(ul.getActionName(),Ul);case 26:return r.next=28,Object(Lo.m)(bl.getActionName(),Wl);case 28:return r.next=30,Object(Lo.m)(jl.getActionName(),$l);case 30:return r.next=32,Object(Lo.m)(Ol.getActionName(),ed);case 32:return r.next=34,Object(Lo.m)(wl.getActionName(),td);case 34:return r.next=36,Object(Lo.m)(_l.getActionName(),nd);case 36:return r.next=38,Object(Lo.m)(El.getActionName(),ad);case 38:return r.next=40,Object(Lo.m)(kl.getActionName(),od);case 40:return r.next=42,Object(Lo.m)(Sl.getActionName(),ud);case 42:return r.next=44,Object(Lo.a)([cl.getActionName(),gl.getActionName(),yl.getActionName(),Il.getActionName()],Po.b.expanding());case 44:e=r.sent,t=zo.a.mark((function t(){var n,r;return zo.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Lo.l)(e);case 2:n=t.sent,t.t0=n.type,t.next=t.t0===cl.getActionName()?6:t.t0===gl.getActionName()?9:t.t0===yl.getActionName()?19:t.t0===Il.getActionName()?22:25;break;case 6:return t.next=8,Object(Lo.c)(Pl,n);case 8:return t.abrupt("break",26);case 9:return t.next=11,Object(Lo.e)(Jl,n);case 11:return r=t.sent,t.next=14,Object(Lo.i)({success:Object(Lo.g)(r),cancel:Object(Lo.l)((function(e){return e.type===Qo.getActionName()&&e.payload.customId===n.payload.customId}))});case 14:if(!t.sent.cancel){t.next=18;break}return t.next=18,Object(Lo.d)(r);case 18:return t.abrupt("break",26);case 19:return t.next=21,Object(Lo.c)(Zl,n);case 21:return t.abrupt("break",26);case 22:return t.next=24,Object(Lo.c)(id,n);case 24:return t.abrupt("break",26);case 25:return t.abrupt("return",{v:void 0});case 26:case"end":return t.stop()}}),t)}));case 46:return r.delegateYield(t(),"t0",48);case 48:if("object"!==typeof(n=r.t0)){r.next=51;break}return r.abrupt("return",n.v);case 51:r.next=46;break;case 53:case"end":return r.stop()}}),il)}var dd=zo.a.mark(pd);function pd(e){var t,n,r,a,i,o,c,s,u,l,d,p,f,m,h;return zo.a.wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.customId,n=e.text,r=e.answers,a=e.welcomeMessage,i=e.acceptedInvitation,o=e.fromManualInvitation,c=void 0!==o&&o,v.next=3,Object(Lo.j)(ko.getPropertyGroup);case 3:return s=v.sent,v.next=6,Object(Lo.c)(mc,ko.getPropertyVisitorId);case 6:return u=v.sent,v.next=9,Object(Lo.j)(Ao);case 9:if(l=v.sent,v.t1=l.name,v.t1){v.next=15;break}return v.next=14,Object(Lo.c)(Al);case 14:v.t1=v.sent.client;case 15:if(v.t0=v.t1,v.t0){v.next=18;break}v.t0="Client";case 18:return d=v.t0,v.next=21,Object(Lo.j)(ko.getPropertyMobile);case 21:return p=v.sent,v.next=24,Object(Lo.c)(mc,ko.getPropertyPingSent);case 24:return f={group:s,source_group:s,details:"",details_labels:"",from_manual_invitation:c,integration_params:"",random_id:t,trigger_unique_id:"",version:"Embedded",custom_variables:{},is_mobile:p,welcome_message:(a||"").replace(/%name%/g,d),return_secured_session_id:!0,visitor:{id:u,nick:d,email:l.email||""},script_version:{embedded_env:"production",embedded_version:"VisitorSDK-e72b1b6431b46cda436972d15c24f89d5297b28d"}},n&&(f.visitor_message=n,f.visitor_message_id=t),l.customProperties&&(f.custom_variables=Object(k.L)(String,l.customProperties)),r&&(f.pre_chat_survey=r),i&&(f.trigger_unique_id=i),v.next=31,Object(Lo.h)(co.setPropertyChatId(void 0));case 31:return v.next=33,Object(Lo.j)(ko.getPropertyLicense);case 33:return m=v.sent,yc.removeItem("securedToken"),yc.removeOldSecretTokenCookie(m),v.next=38,Object(Lo.h)(co.removePropertySecuredToken());case 38:return v.next=40,Object(Lo.h)(co.setPropertyServerIdsMap({}));case 40:return v.next=42,Object(Lo.h)(co.setPropertyVisitorCustomIdMap({}));case 42:return v.next=44,Object(Lo.c)(bs,"start_chat",f);case 44:if(!(h=v.sent).secured_session_id){v.next=49;break}return v.next=48,Object(Lo.h)(co.setPropertySecretId(h.secured_session_id));case 48:yc.setItem("secretId",h.secured_session_id);case 49:if(!h.secured_token){v.next=55;break}return v.next=52,Object(Lo.h)(co.setPropertySecuredToken(h.secured_token));case 52:return v.next=54,Object(Lo.h)(co.setPropertyChatState(Gs,{source:c?"manual_invitation":"start_chat"}));case 54:yc.setItem("securedToken",h.secured_token);case 55:case"end":return v.stop()}}),dd)}var fd=zo.a.mark(yd),md=zo.a.mark(xd),hd=zo.a.mark(jd),vd=zo.a.mark(Od),gd=zo.a.mark(wd),bd=function(e,t,n,r,a){var i,o={visitor:{id:t,group:n}};return e&&(o.page={title:r.pageTitle,url:r.pageUrl}),e&&r.pageReferrer&&(o.page.referrer=r.pageReferrer),e&&a.channelType&&(o.channel_type=a.channelType),e&&r.email&&(o.visitor.email=r.email),e&&r.name&&(o.visitor.name=r.name),e&&r.customProperties&&(o.visitor.custom_variables=(i=r.customProperties,Object.keys(i).map((function(e){return{name:String(e),value:String(i[e])}})))),o};function yd(e){var t,n,r,a,i,o,c,s,u,l,d,p;return zo.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.sendFullPing,f.next=3,Object(Lo.c)(mc,ko.getPropertyVisitorId);case 3:return n=f.sent,f.next=6,Object(Lo.j)(ko.getPropertyLicense);case 6:return r=f.sent,f.next=9,Object(Lo.j)(ko.getPropertyGroup);case 9:return a=f.sent,f.next=12,Object(Lo.j)(ko.getPropertyApplication);case 12:return i=f.sent,f.next=15,Object(Lo.j)(Ao);case 15:return o=f.sent,f.next=18,Object(Lo.j)(So);case 18:return c=f.sent,f.next=21,Object(Lo.j)(ko.getPropertyRegion);case 21:return s=f.sent,u=bd(t,n,a,o,i),f.next=25,Object(Lo.j)(ko.getPropertyChatBetweenGroups);case 25:return l=f.sent,f.next=28,Object(Lo.j)(ko.getPropertyRequestDistribution);case 28:return d=f.sent,f.prev=29,f.t0=Lo.c,f.t1=Zc,f.t2=r,f.t3=c,f.t4=s,f.t5=u,f.next=38,Object(Lo.f)("external");case 38:return f.t6=f.sent,f.t7=l,f.t8=a,f.t9=d,f.t10={license:f.t2,environment:f.t3,region:f.t4,body:f.t5,external:f.t6,chatBetweenGroups:f.t7,group:f.t8,requestDistribution:f.t9},f.t11={retry:10},f.next=46,(0,f.t0)(f.t1,"ping",f.t10,f.t11);case 46:return p=f.sent,f.next=49,Object(Lo.j)(ko.getPropertyConnectionStatus);case 49:if("connected"===f.sent){f.next=53;break}return f.next=53,Object(Lo.h)(co.setPropertyConnectionStatus("connected"));case 53:return f.abrupt("return",p);case 56:return f.prev=56,f.t12=f.catch(29),f.next=60,Object(Lo.j)(ko.getPropertyConnectionStatus);case 60:if("disconnected"===f.sent){f.next=64;break}return f.next=64,Object(Lo.h)(co.setPropertyConnectionStatus("disconnected"));case 64:return f.abrupt("return",{error:!0});case 65:case"end":return f.stop()}}),fd,null,[[29,56]])}function xd(e){var t,n,r,a,i;return zo.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!e.automatic_greeting){o.next=8;break}return t=jc(e.automatic_greeting),n=t.agent,r=t.invitation,o.next=4,Object(Lo.h)(po(Object(io.a)({},n,{fromInvitation:!0})));case 4:return o.next=6,Object(Lo.h)(wo(r));case 6:o.next=20;break;case 8:if(!e.personal_greeting){o.next=13;break}return o.next=11,Object(Lo.c)(pd,{customId:String(Math.random()),welcomeMessage:e.personal_greeting.greeting_message.message,fromManualInvitation:!0});case 11:o.next=20;break;case 13:if(!e.standard_greeting){o.next=20;break}return o.next=16,Object(Lo.c)(Al);case 16:return a=o.sent,i=a.welcome_to_chat,o.next=20,Object(Lo.c)(pd,{customId:String(Math.random()),welcomeMessage:i,fromManualInvitation:!0});case 20:case"end":return o.stop()}}),md)}function jd(){var e,t,n,r;return zo.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Lo.a)(yo.getActionName(),Po.b.expanding());case 2:return e=a.sent,a.next=5,Object(Lo.h)({type:"VISITOR_DATA_WATCHER"});case 5:return a.next=8,Object(Lo.l)(e);case 8:if((t=a.sent).payload.internal){a.next=26;break}return a.next=12,Object(Lo.c)(yd,{sendFullPing:!0});case 12:if(!(n=a.sent).error){a.next=17;break}return a.next=16,Object(Lo.h)(mo({error:n.error,requestId:t.payload.requestId}));case 16:return a.abrupt("return",a.sent);case 17:return a.next=19,Object(Lo.c)(xd,n);case 19:return a.next=21,Object(Lo.j)(Ao);case 21:return r=a.sent,a.next=24,Object(Lo.h)(fo({visitorData:r,requestId:t.payload.requestId}));case 24:a.next=34;break;case 26:return a.t0=Lo.h,a.next=29,Object(Lo.j)(Ao);case 29:return a.t1=a.sent,a.t2={visitorData:a.t1},a.t3={type:"EMIT_VISITOR_DATA",payload:a.t2},a.next=34,(0,a.t0)(a.t3);case 34:a.next=5;break;case 36:case"end":return a.stop()}}),hd)}function Od(){var e,t,n,r;return zo.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e=3,t=!0,a.next=4,Object(Lo.c)(mc,ko.getPropertyRequestDistribution);case 4:return a.next=7,Object(Lo.c)(yd,{sendFullPing:t});case 7:if(n=a.sent,r=t,t=Boolean(n.next_ping_send_full_details),0!==n.next_ping_delay){a.next=16;break}return a.next=13,Object(Lo.c)(Vs);case 13:return a.next=15,Object(Lo.h)(co.setPropertyClientLimitExceeded(!0));case 15:return a.abrupt("return");case 16:return e=!r&&t?0:n.next_ping_delay||3,a.next=19,Object(Lo.c)(xd,n);case 19:return a.next=21,Object(Lo.h)(co.setPropertyPingSent(!0));case 21:return a.next=23,Object(Lo.c)(Po.d,1e3*e);case 23:a.next=4;break;case 25:case"end":return a.stop()}}),vd)}function wd(){return zo.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Lo.e)(Od);case 2:return e.next=4,Object(Lo.e)(jd);case 4:case"end":return e.stop()}}),gd)}var _d=vc?function(e){var t=document.cookie.split(";"),n=Object(k.l)((function(t){var n=Object(k.sb)(t).split("=")[0];return decodeURIComponent(n)===e}),t);return n?decodeURIComponent(n.split("=")[1]):null}:function(){return null},Cd=zo.a.mark(Ed);function Ed(){var e,t,n,r,a,i,o,c;return zo.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(Lo.c)(mc,ko.getPropertyRequestDistribution);case 2:return s.next=5,Object(Lo.j)(ko.getPropertyLicense);case 5:return e=s.sent,s.prev=6,s.next=9,Object(Lo.c)(ku);case 9:return t=s.sent,s.next=12,Object(Lo.j)(ko.getPropertyChatStatus);case 12:return n=s.sent,s.next=15,Object(Lo.j)(ko.getPropertyChatState);case 15:return r=s.sent,a=Su(t),i=a.chatStatus,o=a.chatState,s.next=19,Object(Lo.j)(ko.getPropertyConnectionStatus);case 19:if("connected"===s.sent){s.next=23;break}return s.next=23,Object(Lo.h)(co.setPropertyConnectionStatus("connected"));case 23:if(n===i){s.next=26;break}return s.next=26,Object(Lo.h)(co.setPropertyChatStatus(i));case 26:if(r===o||o!==Gs){s.next=32;break}return c=yc.getItem("securedToken")||_d("secret_token_"+e),s.next=30,Object(Lo.h)(co.setPropertySecuredToken(c));case 30:return s.next=32,Object(Lo.h)(co.setPropertyChatState(o,{source:"other_tab"}));case 32:s.next=42;break;case 34:return s.prev=34,s.t0=s.catch(6),s.next=38,Object(Lo.j)(ko.getPropertyConnectionStatus);case 38:if("disconnected"===s.sent){s.next=42;break}return s.next=42,Object(Lo.h)(co.setPropertyConnectionStatus("disconnected"));case 42:return s.next=44,Object(Lo.c)(Po.d,3e3);case 44:s.next=2;break;case 46:case"end":return s.stop()}}),Cd,null,[[6,34]])}var Id=Ed,kd="chat_started",Sd="new_message",Td="chat_ended",Ad="agent_changed",Rd="status_changed",Pd="connection_status_changed",Md="new_file",Nd="visitor_queued",zd="typing_indicator",Ld="visitor_data",Dd="chat_rated",Bd="new_invitation",qd="ready",Fd="message_seen",Vd="protocol_upgraded",Ud="integration_data",Gd=zo.a.mark(Xd),Hd=zo.a.mark(tp),Wd=zo.a.mark(np),Yd=zo.a.mark(rp),Kd=zo.a.mark(op),Qd=zo.a.mark(sp),Zd=zo.a.mark(dp),Jd=zo.a.mark(hp);function Xd(e,t){var n,r,a,i,o,c,s;return zo.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return n=e.emitter,r=t.payload,n.emit("__start_chat_request_succeeded"),u.next=5,Object(Lo.c)(mc,ko.getPropertyChatId);case 5:if(a=u.sent,n.emit(kd,{chatId:a}),!r.welcomeMessage){u.next=18;break}return u.next=10,Object(Lo.j)(ko.getPropertyLastAgentId);case 10:return i=u.sent,u.next=13,Object(Lo.j)(ko.getPropertyServerIdsMap);case 13:return o=u.sent,u.next=16,Object(Lo.h)(co.setPropertyServerIdsMap(Object(io.a)({},o,{welcome_message:{serverId:"welcome_message",authorId:i}})));case 16:return u.next=18,Object(Lo.h)(uo({id:"welcome_message",timestamp:Date.now(),authorType:"agent",authorId:i,text:r.welcomeMessage,chatId:a,customId:"welcome_message"}));case 18:if(!r.visitorMessage){u.next=21;break}return u.next=21,Object(Lo.h)(uo(r.visitorMessage));case 21:return u.next=23,Object(Lo.l)(lo.getActionName());case 23:return c=u.sent,s=c.payload.reason,n.emit(Td,{reason:s}),u.next=28,Object(Lo.h)(co.setPropertyLastMessageId(null));case 28:case"end":return u.stop()}}),Gd)}function $d(e,t){var n=e.emitter,r=t.payload;n.emit(Rd,{status:r.data.toLowerCase()})}function ep(e,t){var n=e.emitter,r=t.payload;n.emit(Pd,{status:r.data.toLowerCase()})}function tp(e,t){var n,r,a,i,o;return zo.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.emitter,r=t.payload,c.next=4,Object(Lo.c)(mc,ko.getPropertyChatId);case 4:return a=c.sent,c.next=7,Object(Lo.j)(ko.getPropertyVisitorId);case 7:i=c.sent,o={id:r.id,timestamp:r.timestamp,authorId:"visitor"===r.authorType?i:r.authorId,text:r.text,chatId:a,json:r.json},"undefined"!==typeof r.isMobile&&(o.isMobile=r.isMobile),"undefined"!==typeof r.customId&&(o.customId=r.customId),n.emit(Sd,o);case 12:case"end":return c.stop()}}),Hd)}function np(e,t){var n,r,a,i;return zo.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return n=e.emitter,r=t.payload,o.next=4,Object(Lo.j)(ko.getPropertyVisitorId);case 4:a=o.sent,i={id:r.id,timestamp:r.timestamp,authorId:"visitor"===r.authorType?a:r.authorId,url:r.url,contentType:r.contentType,size:r.size},r.thumbnail&&(i.thumbnail=r.thumbnail),n.emit(Md,i);case 8:case"end":return o.stop()}}),Wd)}function rp(e,t){var n,r,a;return zo.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=e.emitter,r=t.payload,Object(Lo.j)(ko.getPropertyLastAgentId)!==r.id){i.next=5;break}return i.abrupt("return");case 5:return i.next=7,Object(Lo.h)(co.setPropertyLastAgentId(r.id));case 7:a={name:r.name,id:r.id},r.avatarUrl&&(a.avatarUrl=r.avatarUrl),r.jobTitle&&(a.jobTitle=r.jobTitle),r.fromInvitation&&(a.fromInvitation=r.fromInvitation),r.trigger&&(a.trigger=r.trigger),n.emit(Ad,a);case 13:case"end":return i.stop()}}),Yd)}function ap(e,t){var n=e.emitter,r=t.payload,a=r.numberInQueue,i=r.waitingTime;n.emit(Nd,{numberInQueue:a,waitingTime:i})}function ip(e,t){var n=e.emitter,r=t.payload,a=r.authorId,i=r.isTyping;n.emit(zd,{authorId:a,isTyping:i})}function op(e){var t,n,r,a;return zo.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.emitter,i.next=3,Object(Lo.c)(mc,ko.getPropertyVisitorId);case 3:return n=i.sent,i.next=6,Object(Lo.j)(Ao);case 6:r=i.sent,a=r.name?{id:n,name:r.name}:{id:n},Promise.resolve().then((function(){t.emit(Ld,a)}));case 9:case"end":return i.stop()}}),Kd)}function cp(e,t){e.emitter.emit(Dd,{rate:t.payload.rate,comment:t.payload.comment})}function sp(e,t){return zo.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.emitter.emit(Bd,t.payload),n.next=4,Object(Lo.l)((function(e){return e.type===rc.getActionName()&&e.payload.id===t.payload.id}));case 4:return n.next=6,Object(Lo.h)(co.setPropertyWelcomeMessage(t.payload.text));case 6:case"end":return n.stop()}}),Qd)}function up(e){e.emitter.emit(qd)}function lp(e,t){var n=e.emitter,r=t.payload;n.emit(Fd,r)}function dp(e,t,n){return zo.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(Lo.c)(e[n.type],{emitter:t},n);case 3:r.next=7;break;case 5:r.prev=5,r.t0=r.catch(0);case 7:case"end":return r.stop()}}),Zd,null,[[0,5]])}function pp(e){e.emitter.emit(Vd)}function fp(e,t){var n=e.emitter,r=t.payload;n.emit(Ud,r)}function mp(e,t){var n=e.emitter,r=t.payload.visitorData;n.emit(Ld,Object(k.c)(r))}function hp(e){var t,n,r;return zo.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.emitter,a.next=3,Object(Lo.e)(op,{emitter:n});case 3:return(t={})[so.getActionName()]=Xd,t[co.setPropertyChatStatus.getActionName()]=$d,t[co.setPropertyConnectionStatus.getActionName()]=ep,t[uo.getActionName()]=tp,t[ho.getActionName()]=np,t[po.getActionName()]=rp,t[vo.getActionName()]=ap,t[go.getActionName()]=ip,t[bo.getActionName()]=cp,t[wo.getActionName()]=sp,t[co.setPropertyHistoryLoaded.getActionName()]=up,t[_o.getActionName()]=lp,t[Co.getActionName()]=pp,t[Eo.getActionName()]=fp,t.EMIT_VISITOR_DATA=mp,r=t,a.next=6,Object(Lo.m)(Object.keys(r),dp,r,n);case 6:case"end":return a.stop()}}),Jd)}var vp=G("INCOMING_MESSAGE",(function(e){return{name:e.name,message:e.message,trigger:e.trigger}})),gp=1800,bp=zo.a.mark(yp);function yp(e){var t,n,r,a,i;return zo.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return void 0===e&&(e={}),o.next=3,Object(Lo.c)(mc,ko.getPropertyVisitorId);case 3:return t=o.sent,o.next=6,Object(Lo.j)(ko.getPropertyGroup);case 6:return n=o.sent,o.next=9,Object(Lo.j)(ko.getPropertyLastMessageId);case 9:return r=o.sent,a=e.sneakPeek,i={random_id:String(Math.random()),visitor:{id:t,group:n}},r&&(i.last_unique_id=r),"string"===typeof a&&(i.sneak_peek=a),o.next=16,Object(Lo.c)(bs,"get_pending_messages",i);case 16:return o.abrupt("return",o.sent);case 17:case"end":return o.stop()}}),bp)}var xp=zo.a.mark(Ep),jp=zo.a.mark(Tp),Op=zo.a.mark(Ap),wp=zo.a.mark(Rp),_p=zo.a.mark(Pp),Cp="";function Ep(){var e;return zo.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Lo.j)(ko.getPropertyLicense);case 2:return e=t.sent,t.next=5,Object(Lo.h)(co.setPropertyChatState(Hs));case 5:return t.next=7,Object(Lo.h)(co.removePropertySecuredToken());case 7:return t.next=9,Object(Lo.h)(lo());case 9:return yc.removeItem("securedToken"),yc.removeOldSecretTokenCookie(e),t.next=13,Object(Lo.h)(co.setPropertyServerIdsMap({}));case 13:return t.next=15,Object(Lo.h)(co.setPropertyVisitorCustomIdMap({}));case 15:case"end":return t.stop()}}),xp)}var Ip=function(e){return Object(k.v)("message.data",e)&&(e.message.data=Object(k.K)(k.b,e.message.data)),Object(k.v)("message.name",e)&&(e.message.name=Object(k.b)(e.message.name)),Object(io.a)({timestamp:e.timestamp,uniqueId:e.unique_id},e.message)},kp=function(e){return Math.max.apply(Math,[0].concat(e.map((function(e){return e.unique_id}))))},Sp=function(e,t){return e.messages.map((function(e){if(e.message_iwcs){var n=ls(e.message_iwcs,t);return!!n&&{timestamp:e.timestamp,unique_id:e.unique_id,message:n}}return e})).filter(Boolean).map(Ip)};function Tp(){var e,t,n;return zo.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Lo.c)(mc,ko.getPropertyConfigLoaded);case 2:return r.next=4,Object(Lo.j)(ko.getPropertySecuredToken);case 4:if(!r.sent){r.next=34;break}return r.prev=6,r.next=9,Object(Lo.c)(yp);case 9:if(!(e=r.sent).messages){r.next=20;break}return t=Sp(e,{trigger:"init"}),r.next=14,Object(Lo.b)(t.map((function(e){return Object(Lo.h)(vp({name:e.name,message:e}))})));case 14:if(!(n=kp(e.messages))){r.next=18;break}return r.next=18,Object(Lo.h)(co.setPropertyLastMessageId(n));case 18:r.next=22;break;case 20:return r.next=22,Object(Lo.c)(Ep);case 22:r.next=32;break;case 24:return r.prev=24,r.t0=r.catch(6),r.next=28,Object(Lo.j)(ko.getPropertyConnectionStatus);case 28:if("disconnected"===r.sent){r.next=32;break}return r.next=32,Object(Lo.h)(co.setPropertyConnectionStatus("disconnected"));case 32:r.next=36;break;case 34:return r.next=36,Object(Lo.h)(co.setPropertyChatState(Hs));case 36:return r.next=38,Object(Lo.h)(co.setPropertyHistoryLoaded(!0));case 38:case"end":return r.stop()}}),jp,null,[[6,24]])}function Ap(){var e,t,n,r,a,i,o;return zo.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:e={};case 1:return c.next=4,Object(Lo.j)(ko.getPropertySecuredToken);case 4:return t=c.sent,c.next=7,Object(Lo.j)(ko.getPropertyChatState);case 7:return n=c.sent,c.next=10,Object(Lo.j)(ko.getPropertySneakPeek);case 10:if(r=c.sent,!t||n!==Gs){c.next=44;break}return c.prev=12,c.next=15,Object(Lo.c)(yp,{sneakPeek:Cp!==r?r:null});case 15:return a=c.sent,c.next=18,Object(Lo.j)(ko.getPropertyConnectionStatus);case 18:if("connected"===c.sent){c.next=22;break}return c.next=22,Object(Lo.h)(co.setPropertyConnectionStatus("connected"));case 22:if(a.messages){c.next=27;break}return c.next=25,Object(Lo.c)(Ep);case 25:c.next=34;break;case 27:if(i=Sp(a,{trigger:e.chatHasJustStarted?e.chatHasJustStarted.payload.meta.source:null}),!(o=kp(a.messages))){c.next=32;break}return c.next=32,Object(Lo.h)(co.setPropertyLastMessageId(o));case 32:return c.next=34,Object(Lo.b)(i.map((function(e){return Object(Lo.h)(vp({name:e.name,message:e}))})));case 34:c.next=44;break;case 36:return c.prev=36,c.t0=c.catch(12),c.next=40,Object(Lo.j)(ko.getPropertyConnectionStatus);case 40:if("disconnected"===c.sent){c.next=44;break}return c.next=44,Object(Lo.h)(co.setPropertyConnectionStatus("disconnected"));case 44:return Cp=r,c.next=47,Object(Lo.i)({chatHasJustStarted:Object(Lo.l)((function(e){return e.type===co.setPropertyChatState.getActionName()&&e.payload.data===Gs})),intervalElapsed:Object(Lo.c)(Po.d,gp),sendFileAttempt:Object(Lo.l)(Ko.getActionName()),sendMessegeResponseReceived:Object(Lo.l)("PRIVATE_SEND_MESSAGE")});case 47:e=c.sent,c.next=1;break;case 50:case"end":return c.stop()}}),Op,null,[[12,36]])}function Rp(){return zo.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Lo.c)(mc,ko.getPropertyChatState);case 2:return e.next=4,Object(Lo.c)(Ap);case 4:case"end":return e.stop()}}),wp)}function Pp(){return zo.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Lo.c)(Tp);case 2:return e.next=4,Object(Lo.k)(Rp);case 4:case"end":return e.stop()}}),_p)}var Mp="agentMessageSeen",Np="sendMessage",zp="startChat",Lp="chatAttachment",Dp="sendRatingComment",Bp="visitorMessageSeen",qp=zo.a.mark(Up),Fp=zo.a.mark(Gp),Vp=zo.a.mark(Hp);function Up(e,t){var n,r;return zo.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Lo.j)(ko.getPropertyVisitorCustomIdMap);case 2:return r=a.sent,a.next=5,Object(Lo.h)(co.setPropertyVisitorCustomIdMap(Object(io.a)({},r,((n={})[e]=t,n))));case 5:case"end":return a.stop()}}),qp)}function Gp(e){var t,n,r,a,i,c,s,u,l,d,p,f,m;return zo.a.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:t=e.payload,(n=t.message).timestamp*=1e3,h.t0=n.name,h.next=h.t0===zp?6:h.t0===Np?26:h.t0===ss.RATE_CHAT?31:h.t0===Dp?34:h.t0===Lp?37:h.t0===ss.NEW_AGENT_MESSAGE?45:h.t0===ss.AGENTS_OFFLINE?53:h.t0===ss.CHAT_ENDED?53:h.t0===ss.NEW_AGENT?69:h.t0===ss.VISITOR_QUEUED?78:h.t0===ss.TYPING_INDICATOR?81:h.t0===Bp?84:h.t0===ss.INTEGRATION_DATA?96:h.t0===Mp?99:111;break;case 6:return h.next=8,Object(Lo.j)(ko.getPropertySecuredToken);case 8:return h.t1=h.sent,h.t2=n.data.welcomeMessage,r={securedToken:h.t1,welcomeMessage:h.t2},a=Object(k.v)("data.visitor.nick",n),h.next=14,Object(Lo.j)(Ao);case 14:if(i=h.sent,!a||a===i.name){h.next=18;break}return h.next=18,Object(Lo.h)(yo({visitorData:Object(io.a)({},i,{name:a}),internal:!0}));case 18:return n.data.visitorMessage&&(r.visitorMessage={id:n.uniqueId,timestamp:n.timestamp,authorType:"visitor",text:n.data.visitorMessage,customId:n.data.randomId}),h.next=21,Object(Lo.h)(co.setPropertyChatId(void 0));case 21:return h.next=23,Object(Lo.h)(so(r));case 23:return h.next=25,Object(Lo.c)(Up,n.data.randomId,n.uniqueId);case 25:return h.abrupt("break",112);case 26:return h.next=28,Object(Lo.c)(Up,n.data.randomId,n.uniqueId);case 28:return h.next=30,Object(Lo.h)(uo({id:n.uniqueId,timestamp:n.timestamp,authorType:"visitor",text:n.data.message,customId:n.data.randomId}));case 30:return h.abrupt("break",112);case 31:return h.next=33,Object(Lo.h)(bo({id:n.uniqueId,timestamp:n.timestamp,rate:n.data.rate,comment:n.data.comment}));case 33:return h.abrupt("break",112);case 34:return h.next=36,Object(Lo.h)(bo({id:n.uniqueId,timestamp:n.timestamp,comment:n.data.comment}));case 36:return h.abrupt("break",112);case 37:return h.next=39,Object(Lo.j)(ko.getPropertyServerIdsMap);case 39:return s=h.sent,h.next=42,Object(Lo.h)(co.setPropertyServerIdsMap(Object(io.a)({},s,((c={})[n.uniqueId]={serverId:n.data.attachmentToken,authorId:n.data.author.login},c))));case 42:return h.next=44,Object(Lo.h)(ho({id:n.uniqueId,timestamp:n.timestamp,authorId:n.data.author.login||"visitor",authorType:n.data.author.type,url:n.data.files[0].url,size:n.data.files[0].size,contentType:n.data.files[0]["content-type"],attachmentToken:n.data.attachmentToken,thumbnail:n.data.files[0].thumbs}));case 44:return h.abrupt("break",112);case 45:return h.next=47,Object(Lo.j)(ko.getPropertyServerIdsMap);case 47:return l=h.sent,h.next=50,Object(Lo.h)(co.setPropertyServerIdsMap(Object(io.a)({},l,((u={})[n.uniqueId]={serverId:n.data.id,authorId:n.data.authorId},u))));case 50:return h.next=52,Object(Lo.h)(uo({id:n.uniqueId,timestamp:n.timestamp,authorType:"agent",text:n.data.message,isMobile:n.data.isMobile,authorId:n.data.authorId,serverId:n.data.id,json:n.data.json}));case 52:return h.abrupt("break",112);case 53:return h.next=55,Object(Lo.h)(lo(n.data));case 55:return h.next=57,Object(Lo.h)(co.setPropertyChatState(Hs));case 57:return h.next=59,Object(Lo.j)(ko.getPropertyHistoryLoaded);case 59:return d=h.sent,h.next=62,Object(Lo.j)(ko.getPropertyLicense);case 62:if(p=h.sent,yc.removeItem("securedToken"),yc.removeOldSecretTokenCookie(p),d){h.next=68;break}return h.next=68,Object(Lo.h)(co.removePropertySecuredToken());case 68:return h.abrupt("break",112);case 69:return h.next=71,Object(Lo.h)(po({id:n.data.id,name:n.data.name,jobTitle:n.data.jobTitle,avatarUrl:xc(n.data.avatarUrl),trigger:n.data.trigger}));case 71:return h.next=73,Object(Lo.j)(ko.getPropertyChatId);case 73:if(h.sent){h.next=77;break}return h.next=77,Object(Lo.h)(co.setPropertyChatId(n.data.chatId));case 77:return h.abrupt("break",112);case 78:return h.next=80,Object(Lo.h)(vo({numberInQueue:n.data.numberInQueue,waitingTime:n.data.waitingTime}));case 80:return h.abrupt("break",112);case 81:return h.next=83,Object(Lo.h)(go({authorId:n.data.authorId,isTyping:n.data.isTyping}));case 83:return h.abrupt("break",112);case 84:return h.t3=Lo.h,h.t4=o,h.next=88,Object(Lo.j)(ko.getPropertyVisitorCustomIdMap);case 88:return h.t5=n.data.id,h.t6=h.sent[h.t5],h.t7=n.data.id,h.t8={id:h.t6,customId:h.t7,type:"visitor"},h.t9=h.t4.messageSeen.call(h.t4,h.t8),h.next=95,(0,h.t3)(h.t9);case 95:return h.abrupt("break",112);case 96:return h.next=98,Object(Lo.h)(Eo({id:String(n.uniqueId),timestamp:n.timestamp,integrationName:n.data.integrationName,data:n.data.data}));case 98:return h.abrupt("break",112);case 99:return h.next=101,Object(Lo.j)(ko.getPropertyServerIdsMap);case 101:if(f=h.sent,m=null,f){h.next=105;break}return h.abrupt("break",112);case 105:if(Object(k.r)((function(e,t){e.serverId===n.data.message.id&&(m=t)}),f),m){h.next=108;break}return h.abrupt("break",112);case 108:return h.next=110,Object(Lo.h)(_o({id:m,customId:n.data.message.id,type:"agent"}));case 110:return h.abrupt("break",112);case 111:return h.abrupt("return");case 112:case"end":return h.stop()}}),Fp)}function Hp(){var e,t;return zo.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Lo.a)(vp.getActionName(),Po.b.expanding());case 2:e=n.sent;case 3:return n.next=6,Object(Lo.l)(e);case 6:return t=n.sent,n.next=9,Object(Lo.c)(Gp,t);case 9:n.next=3;break;case 11:case"end":return n.stop()}}),Vp)}var Wp=zo.a.mark(Xp),Yp=zo.a.mark($p),Kp=zo.a.mark(ef),Qp=[Do,Jo,ic,$o,so].map((function(e){return e.getActionName()})),Zp=function(e){var t=e.type,n=e.payload;return t===co.setPropertyClientLimitExceeded.getActionName()&&!0===n.data},Jp=function(e){var t=e.type,n=e.payload;return t===co.setPropertyClientLimitExceeded.getActionName()&&!1===n.data};function Xp(){var e,t,n;return zo.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,hc(Object(Lo.e)(Pp));case 2:e=r.sent;case 3:return r.next=6,Object(Lo.i)([Object(Lo.l)(Qp),Object(Lo.l)(Jp)]);case 6:return r.next=8,hc(Object(Lo.e)(Id));case 8:return t=r.sent,r.next=11,hc(Object(Lo.e)(wd));case 11:return n=r.sent,r.next=14,Object(Lo.i)([Object(Lo.l)(Ho.getActionName()),Object(Lo.l)(Zp)]);case 14:return r.next=16,Object(Lo.h)(co.setPropertyPingSent(void 0));case 16:return r.next=18,Object(Lo.d)(t,e,n);case 18:r.next=3;break;case 20:case"end":return r.stop()}}),Wp)}function $p(){var e,t,n;return zo.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(Lo.l)(co.setPropertyGroup);case 3:return e=r.sent,t=e.payload.data,r.next=7,Object(Lo.j)(ko.getPropertyLicense);case 7:n=r.sent,yc.setPrefix("_livechat_"+n+"_"+t),r.next=0;break;case 11:case"end":return r.stop()}}),Yp)}function ef(e){var t,n;return zo.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.emitter,n=e.serverConfig,r.next=3,Object(Lo.j)(ko.getPropertyChatBetweenGroups);case 3:if(!1!==r.sent){r.next=7;break}return r.next=7,hc(Object(Lo.e)($p));case 7:return r.next=9,hc(Object(Lo.e)(ld));case 9:return r.next=11,hc(Object(Lo.e)(hp,{emitter:t}));case 11:return r.next=13,hc(Object(Lo.e)(Hp));case 13:return r.next=15,hc(Object(Lo.e)(Xp));case 15:return r.next=17,Object(Lo.c)(Us,n);case 17:case"end":return r.stop()}}),Kp)}var tf=function(e){return function(t){var n=void 0===t?{}:t,r=n.text,a=n.customId,i=n.json,o=Object(ao.a)();return r&&a?(e.dispatch(Do({customId:a,text:r,json:i,promise:o})),o.promise):(o.reject({type:"missing argument",reason:"Missing text or customId parameter"}),o.promise)}},nf=function(e){return function(t){var n=t.text,r=Object(ao.a)();return e.dispatch(Vo({text:n,promise:r})),r.promise}},rf=function(e){return function(t){var n=void 0===t?{}:t,r=n.rate,a=n.comment,i=Object(ao.a)();return r||a?r&&"good"!==r&&"none"!==r&&"bad"!==r?(i.reject({type:"wrong argument",reason:'Rate argument should be equal "good", "bad" or "none"'}),i.promise):(e.dispatch(Fo({rate:r,comment:a,promise:i})),i.promise):(i.reject({type:"missing argument",reason:"Missing rate parameter"}),i.promise)}},af=function(e){return function(t){var n=(void 0===t?{}:t).email,r=Object(ao.a)();return n?(e.dispatch(Uo({email:n,promise:r})),r.promise):(r.reject({type:"missing argument",reason:"Missing email parameter"}),r.promise)}},of=function(e){return function(){var t=Object(ao.a)();return e.dispatch(Go({promise:t})),t.promise}},cf=function(e){return function(){var t=Object(ao.a)();return e.dispatch(Ho({promise:t})),t.promise}},sf=function(e,t){return function(){t.off("*"),e.cancel()}},uf=function(e){return function(t){var n=(void 0===t?{}:t).group,r=Object(ao.a)();return e.dispatch(Wo({promise:r,group:n})),r.promise}},lf=function(e){return function(){var t=Object(ao.a)();return e.dispatch(Xo({promise:t})),t.promise}},df=function(e){return function(t){var n=void 0===t?{}:t,r=n.file,a=n.onProgress,i=String(Math.random()),o=Object(ao.a)();return r?r.size>10485760?(o.reject({type:"wrong argument",reason:"Cannot upload a file over 10MB"}),o.promise):(e.dispatch(Ko({file:r,customId:i,promise:o,onProgress:a})),{then:function(e,t){return o.promise.then(e,t)},catch:function(e){return o.promise.catch(e)},cancel:function(){e.dispatch(Qo({customId:i}))}}):(o.reject({type:"missing argument",reason:"Missing file"}),o.promise)}},pf=function(e){return function(t){void 0===t&&(t={});var n=Object(ao.a)();return e.dispatch(Yo({answers:t,promise:n})),n.promise}},ff=function(e){return function(t){var n=void 0===t?{}:t,r=n.name,a=n.email,i=n.customProperties,o=n.pageUrl,c=n.pageTitle,s=n.update,u=Object(ao.a)();return r||a||i||o||c?(e.dispatch(Bo({name:r,email:a,customProperties:i,pageUrl:o,pageTitle:c,update:s,promise:u})),u.promise):(u.reject({type:"missing argument",reason:"Missing name, email, url or customProperties"}),u.promise)}},mf=function(e){return function(){var t=Object(ao.a)();return e.dispatch(qo({promise:t})),t.promise}},hf=function(e){return function(){var t=Object(ao.a)();return e.dispatch(Zo({promise:t})),t.promise}},vf=function(e){return function(t){void 0===t&&(t={});var n=Object(ao.a)();return e.dispatch(Jo({promise:n,answers:t})),n.promise}},gf=function(e){return function(){var t=Object(ao.a)();return e.dispatch($o({promise:t})),t.promise}},bf=function(e){return function(){var t=Object(ao.a)();return e.dispatch(ec({promise:t})),t.promise}},yf=function(e){return function(t){void 0===t&&(t={});var n=Object(ao.a)();return e.dispatch(tc({promise:n,answers:t})),n.promise}},xf=function(e){return function(){var t=Object(ao.a)();return e.dispatch(nc({promise:t})),t.promise}},jf=function e(t){return function(n){var r=Object(ao.a)();return t.dispatch(rc({id:n,promise:r})),e.promise}},Of=function(e){return function(t){var n=Object(ao.a)();return e.dispatch(ac({promise:n,messageId:t})),n.promise}},wf=function(e){return function(){var t=Object(ao.a)();return e.dispatch(ic({promise:t})),t.promise}},_f=function(e){return function(t){var n="undefined"!==typeof t?parseInt(t,10):void 0,r=Object(ao.a)();return e.dispatch(oc({promise:r,group:n})),r.promise}},Cf=function(e){return function(t){e.dispatch(cc({group:parseInt(t,10)}))}},Ef=function(e){return function(){var t=Object(ao.a)();return e.dispatch(sc({promise:t})),t.promise}},If=function(e,t){var n,r=void 0===e?{}:e,a=r.license,i=r.group,o=r.environment,c=void 0===o?"production":o,s=r.page,u=void 0===s?{}:s,l=r.visitor,d=void 0===l?{}:l,p=r.region,f=r.external,m=void 0===f||f,h=r.mobile,v=void 0!==h&&h,g=r.appName,b=void 0===g?null:g,y=r.application,x=void 0===y?{}:y;if(!a)throw new Error("Missing license parameter");if("production"!==c&&"labs"!==c&&"staging"!==c)throw new Error("Wrong environment parameter");var j=Object(V.a)(),O=j.emit,w=[];j.emit=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];w.push(t)},setTimeout((function(){j.emit=O,w.forEach((function(e){j.emit.apply(j,e)})),w=null}),0);var _=String(Math.random()),C=function(e){if(void 0===e&&(e={}),e.__lc&&!1===e.__lc.chat_between_groups)return!1;var t=Object(k.v)("location.href",vc&&document),n=t&&Object(P.h)(t);return!(n&&"1"===n.unique_groups||"1"===n.unique_group)}(t);C?yc.setPrefix("_livechat_"+a):yc.setPrefix("_livechat_"+a+"_"+i);var E=((n={environment:c})[oo.APPLICATION]=x,n[oo.LICENSE]=a,n[oo.GROUP]=i,n[oo.SESSION_ID]=_,n[oo.MOBILE]=v,n.visitorData={email:d.email||null,name:d.name||null,pageUrl:u.url||Object(k.w)("unknown","location.href",vc?document:null),pageTitle:u.title||Object(k.w)("unknown","0.innerHTML",vc&&document.getElementsByTagName("title")||{}),pageReferrer:u.referrer,customProperties:d.customProperties&&!Object(k.C)(d.customProperties)?d.customProperties:null},n[oo.SECURED_TOKEN]=yc.getItem("securedToken")||_d("secret_token_"+a),n[oo.SECRET_ID]=yc.getItem("secretId"),n[oo.CHAT_BETWEEN_GROUPS]=C,n);p&&(E[oo.REGION]=p);var I=Mo(E,{external:m}),S=yc.getItem("visitorId");S&&I.dispatch(co.setPropertyVisitorId(S));var T=I.runSaga(ef,{emitter:j,serverConfig:t});return"ReactNative"===b&&function(e){var t={licence_id:e,event_id:"chat_widget_react_native",message:JSON.stringify({severity:"Informational",event_name:"init"})};Object(R.a)("https://queue.livechatinc.com/logs",{method:"POST",headers:{Accept:"*/*","Content-Type":"application/x-www-form-urlencoded"},body:Object(P.a)(t)}).catch((function(){}))}(a),{sendMessage:tf(I),setSneakPeek:nf(I),setVisitorData:ff(I),getVisitorData:mf(I),rateChat:rf(I),forwardChatTranscript:af(I),closeChat:of(I),disconnect:cf(I),getTicketForm:uf(I),getTranslations:lf(I),sendTicketForm:pf(I),sendFile:df(I),on:j.on,off:j.off,destroy:sf(T,j),getPrechatForm:hf(I),sendPrechatForm:vf(I),getPredictedAgent:gf(I),getPostChatForm:bf(I),sendPostChatForm:yf(I),getConfig:xf(I),acceptInvitation:jf(I),markMessageAsSeen:Of(I),startChat:wf(I),checkGroupStatus:_f(I),setVisitorGroup:Cf(I),getQueueForm:Ef(I)}};var kf=function(e){var t=Object.keys(e);return Promise.all(Object(k.vb)(e)).then((function(e){return Object(k.s)(Object(k.wb)(t,e))}))},Sf=function(e){var t=e.id,n=e.authorId,r=e.timestamp,a=e.serverId,i=void 0===a?t:a,o=e.threadId,c=void 0===o?null:o,s=e.seen;return{id:t,serverId:i,thread:c,author:n,timestamp:r,seen:void 0!==s&&s}},Tf=function(e){e.id,e.customId,e.authorId,e.timestamp,e.threadId,e.properties,e.seen,e.serverId,e.type,e.text,e.urlDetails;return Object(A.a)(e,["id","customId","authorId","timestamp","threadId","properties","seen","serverId","type","text","urlDetails"])},Af=function(e){if(e.urlDetails){var t=e.urlDetails;return Object(T.a)({},Sf(e),{type:"url_preview",properties:{serverType:e.type,title:t.title,description:t.description,image:{url:t.imageUrl,link:t.url}}})}return ai(e.text)?Object(T.a)({},Sf(e),{type:"emoji",properties:Object(T.a)({serverType:e.type,text:e.text},Tf(e))}):Object(T.a)({},Sf(e),{type:"message",properties:Object(T.a)({serverType:e.type,text:e.text},Tf(e))})},Rf=function(e){switch(e.type){case"url":return Object(P.j)(e.value)?null:e;case"webview":if(Object(P.j)(e.value))return null;var t=Object(P.d)(e.value);if(!t)return e;if(/chatbot\.com$/.test(t)){var n=Object(P.b)(Object(P.l)(Object(P.i)(e.value)));if(n.p)try{var r=JSON.parse(atob(n.p));if(r.url)return Object(T.a)({},e,{proxiedValue:r.url})}catch(a){return e}}return e;default:return e}},Pf=function(e){var t={};return"string"===typeof e.title&&(t.title=e.title),"string"===typeof e.subtitle&&(t.subtitle=e.subtitle),e.image&&(t.image=e.buttons?e.image:Object(T.a)({},e.image,{link:e.image.url})),e.buttons&&(t.buttons=e.buttons.map(Rf).filter(Boolean)),t},Mf=function(e){switch(e.template){case"quick_replies":var t=e.elements[0];return Object(T.a)({},Sf(e),{type:"message",properties:{serverType:e.type,text:t.title,quickReplies:t.buttons.map((function(e){return{type:e.type,text:e.text,value:e.value,postbackId:e.postbackId}}))}});case"sticker":var n=e.elements[0].image;return Object(T.a)({},Sf(e),{type:"sticker",properties:{serverType:e.type,url:n.url,name:n.name}});default:if(e.elements.length>1)return Object(T.a)({},Sf(e),{type:"carousel",properties:{serverType:e.type,cards:e.elements.map(Pf)}});var r=e.elements[0];if(1===Object.keys(r).length&&r.image){var a=r.image;return Object(T.a)({},Sf(e),{type:"image_preview",properties:Object(T.a)({serverType:e.type,url:a.url},a.alternativeText&&{alternativeText:a.alternativeText})})}return Object(T.a)({},Sf(e),{type:"rich_message",properties:{serverType:e.type,card:Pf(r)}})}},Nf=function(e){if(e.thumbnails){var t=e.thumbnails,n=Object(T.a)({},Sf(e),{type:"image_preview",properties:Object(T.a)({serverType:e.type},t.default,{link:e.url})});return t.high&&(n.properties.srcSet=t.default.url+" 1x, "+t.high.url+" 2x"),e.alternativeText&&(n.properties.alternativeText=e.alternativeText),n}return Object(T.a)({},Sf(e),{type:"message",properties:Object(T.a)({serverType:e.type,text:e.name,url:e.url},e.alternativeText&&{alternativeText:e.alternativeText})})},zf=function(e){var t=Object(T.a)({},Sf(e),{type:"system_message",properties:{serverType:e.type,systemMessageType:e.systemMessageType,defaultText:e.text}});return e.textVars&&(t.properties.textVariables=e.textVars),t},Lf={group_select:"select",name:"text",subject:"text"},Df=function(e){return e.replace(/index[0-9]*_/gi,"")},Bf=function(e,t){var n=Object(k.l)((function(e){return"groupSelect"===e.meta}),e);return Object.keys(t).reduce((function(r,a){var i=t[a];if("rateComment"===a)return r.rateComment=i,r;if("rating"===a)return r.rate=null===i?i:Df(i),r;var o=Object(k.l)((function(e){return e.name===a}),e),c=o.serverName;return n&&c&&c===n.serverName&&(r.choosenGroupIndex=t[n.name].match(/index([0-9]*)_/)[1],r.choosenGroup=parseInt(Df(i),10)),o.options?r.fields[c]=Object(k.B)(i)?i.map(Df):Df(i):r.fields[c]=i,r}),{fields:{}})},qf=function(e,t){return Object(T.a)({},t,{type:e,fields:t.fields.reduce((function(e,t){var n=t.name,r=Object(A.a)(t,["name"]),a=Object(T.a)({},r,{type:Lf[r.type]||r.type,serverType:r.type});if(a.options){a.options=a.options.map((function(e,t){return Object(T.a)({},e,{value:"index"+t+"_"+e.value,originalValue:e.value})}));var i=a.options.filter((function(e){return e.checked}));i.length&&(a.defaultValue=i.map((function(e){return e.value})))}if("information"===r.type&&(a.value=a.value.replace(/<br(\s)?(\/)?>/gi,"\n")),"group_select"===r.type&&(a.meta="groupSelect",a.options=a.options.map((function(e){return Object(T.a)({},e,{groupNumber:parseInt(e.originalValue,10)})}))),n&&(a.serverName=n),"name"===r.type)a.name="name";else if("email"===r.type)a.name="email";else{if("rating"===r.type)return a.name="rating",[].concat(e,[a,{name:"rateComment",type:"textarea",label:a.commentLabel,required:!1,dependOn:"rating"}]);n&&(a.name=Object(k.t)()+"_"+n)}return[].concat(e,[a])}),[])})},Ff=function(e,t){return e.filter((function(e){return e.serverName in t})).map((function(e){return{type:e.type,label:e.label,value:e.options?Object(k.i)(t[e.serverName]).map((function(t){return Object(k.l)((function(e){return e.originalValue===t}),e.options).label})).join(", "):t[e.serverName]}}))},Vf=function(e,t){var n=e.getEvent("liveChatChatId",t),r=n.author,a=n.timestamp,i=n.properties.text,o=e.getUser(r),c=o.type,s={text:i,timestamp:Math.floor(a/1e3),user_type:"agent"===c?c:"visitor"};"agent"===c?(s.agent_name=o.name,s.agent_login=o.id):s.visitor_name=o.name,e.emit("on_message",s)},Uf=function(e,t,n,r){e.emit("on_"+t+"_survey_submitted",{form_data:Ff(n,r)})},Gf=function(e,t,n){Uf(e,"prechat",t,n)},Hf=function(e,t,n){Uf(e,"postchat",t,n)},Wf=function(e,t){e.emit("on_rating_comment_submitted",t)},Yf=function(e,t){e.emit("on_rating_submitted",null===t?"none":t)},Kf=function(e,t,n){e.emit("on_message",{text:t.properties.text,timestamp:n/1e3,user_type:"visitor",visitor_name:e.getSessionUser().name})},Qf=function(e,t,n,r){var a=r.id,i=r.text,o=r.visitor,c=o.email,s=o.name,u=r.subject,l={form_data:Ff(t,n),ticket_id:a,text:i,visitor_name:s,visitor_email:c};u&&(l.ticket_subject=u),e.emit("on_ticket_created",l)},Zf=function(e,t){return new Promise((function(n){var r=Object(k.m)((function(e){return"groupSelect"===e.meta}),t);if(-1!==r){var a,i=t[r],o=i.options.map((function(e){return parseInt(e.groupNumber,10)}));(a=o.map(e.checkGroupStatus),Promise.all(a.map((function(e){return e.then((function(e){return{status:"fulfilled",value:e}}),(function(e){return{status:"rejected",reason:e}}))})))).then((function(e){n(Object(k.ub)(r,Object(T.a)({},i,{options:Object(k.xb)((function(e,t){return"fulfilled"!==t.status?e:Object(T.a)({},e,{meta:{online:"online"===t.value.groupStatus}})}),i.options,e)}),t))}))}else n(null)}))},Jf=function(e){return Object(T.a)({},e,{serverId:null,timestamp:Date.now(),seen:!0,properties:e.properties?e.properties:{}})},Xf=function(e,t,n){return Jf(Object(T.a)({id:Object(k.u)(e.getIndexedEvents("liveChatChatId")),type:"system_message",author:"system",systemMessageType:t},Object(k.d)({textVars:n})))},$f=function(e,t){var n=Bf(e,t),r=n.fields;return{properties:{fields:e.filter((function(e){return void 0!==e.serverName&&"rating"!==e.type&&"information"!==e.type&&(!e.meta||"confirm_subscription"!==e.meta)})).map((function(e){var t=e.label,a=e.serverName;if("groupSelect"===e.meta)return{label:t,answer:e.options[n.choosenGroupIndex].label};if(Object(k.B)(e.options)){var i=Object(k.y)(a,r)?Object(k.i)(r[a]):[],o=e.options.filter((function(e){return Object(k.A)(e.originalValue,i)})).map((function(e){return e.label}));return 0===o.length?null:{label:t,answer:"checkbox"===e.type?o:o[0]}}return Object(k.y)(a,r)?{label:t,answer:r[a]}:null})).filter(Boolean)}}},em=function(e,t,n){var r=e.license,a=e.group,i=e.region,o=e.mobile;t.setApplicationState({eagerFetchingMode:!0});var c=t.getSessionUser(),s={name:c.name,email:c.email};c.properties&&(s.customProperties=c.properties);var u={license:r,environment:"production",page:t.getApplicationState("page"),visitor:s,external:!1,region:i,mobile:o,application:{channelType:ur(t)}};null!==a&&(u.group=a);var l=If(u,n);var d=function(e){void 0===e&&(e=!1);var t=[],n=e;return{add:function(e){n?e():t.push(e)},run:function(){n=!0;var e=t;t=[],e.forEach((function(e){return e()}))},pause:function(){n=!1}}}(),p=function(e){return function(t){return d.add((function(){return e(t)}))}};t.setApplicationState({isReturning:n.visitor.visit_number>1,clientChatNumber:n.visitor.chat_number||0,clientVisitNumber:n.visitor.visit_number||0});var f=function(){l.destroy(),t.setApplicationState({destroyed:!0})},m=function(){return l.getPredictedAgent().then((function(e){if(!e.id){var n=new Error;throw n.code="MISSING_PREDICTED_AGENT",n}var r=e.name,a=e.id,i=e.avatarUrl,o=e.jobTitle,c=e.message,s=e.isBot;return t.hasUser(a)||t.addUser({id:a,name:r,type:"agent",avatar:i,properties:{jobTitle:o,isBot:s||!1}}),{agent:e,message:Jf({id:Object(k.u)(t.getIndexedEvents("liveChatChatId")),type:"message",author:a,text:fr(t,c,{agent:r}),originalText:c,welcomeMessage:!0})}}))},h=!1,v=function(){var e=t.getChat("liveChatChatId"),n=e.active,r=e.properties,a=r.queued,i=r.ended;if(!(n||a||i)){if(!Un(t))return t.updateView("minimized",{hidden:!0}),t.setDefaultView("Chat","timeline"),void qi(t);if(Hn(t,"offline")){if(Qn(t))return;Ai(t)}else l.getTicketForm().then((function(e){t.updateView("Chat/offline",qf("offline",e)),Qn(t)||Ai(t)}),f)}},g=function(){var e=t.getChat("liveChatChatId"),n=e.active,r=e.properties,a=r.queued,i=r.ended;if(n)t.setDefaultView("Chat","timeline");else if(!a&&!i){var o=t.getApplicationState().maximized;t.updateView("minimized",{hidden:!1}),Gn(t,"prechat")||(In(t,"liveChatChatId")?Fi(t):Vn(t)?wi(t):o&&(h||(h=!0,m().then((function(e){var n=e.agent,r=e.message;h=!1;var a=t.getEvents("liveChatChatId").some((function(e){return!e.own&&"system"!==e.author}));if("offline"!==t.getApplicationState("availability")&&!a){var i=n.id;if(n.isBot)return l.startChat();Fi(t),Oi(t,i),x(r),t.updateChat("liveChatChatId",{properties:{fakeAgentMessageId:r.id}})}}),(function(e){if("MISSING_PREDICTED_AGENT"===e.code)return l.startChat();throw e})).finally((function(){h=!1})).catch(f))))}},b=function(e){var n=e.id,r=e.authorId,a=e.text,i=e.receivedFirstTime;l.acceptInvitation(n),t.getChat("liveChatChatId").properties.ended&&Ci(t,"liveChatChatId"),Ti(t,{type:"message",author:r,properties:{text:a,uniqueId:n,invitation:!0,receivedFirstTime:i,type:"plain_text"}})},y=function(e){var n=t.getSessionUser();return n.serverId===e.author?n.id:e.author},x=function(e){var n=function(e){var t=Object(T.a)({},e,{id:String(e.id),authorId:y(e),threadId:null,properties:{}});switch(t.type){case"message":return Af(t);case"rich_message":return Mf(t);case"file":return Nf(t);case"system_message":return zf(t);default:return void 0}}(e);ui(t,"liveChatChatId",n),"message"===n.properties.serverType&&t.getApplicationState("ready")&&Vf(t,n.id),t.getChat("liveChatChatId").properties.agentIsTyping&&n.author!==t.getSessionUser().serverId&&t.updateChat("liveChatChatId",{properties:{agentIsTyping:!1}})},j=function(e){return e.buttons?Object(T.a)({},e,{buttons:e.buttons.map((function(e){var t={text:e.text,type:e.type,value:e.value,users:e.user_ids,postbackId:e.postback_id};return e.webview_height&&(t.webviewHeight=e.webview_height),e.target&&(t.target=e.target),t}))}):e},O=function(e){return e.elements?Object(T.a)({},e,{elements:e.elements.map(j)}):e},w=function(e){t.updateChat("liveChatChatId",{properties:{rate:e}}),x(Xf(t,"good"===e?"rate_me_confirmation_good":"bad"===e?"rate_me_confirmation_bad":"rate_me_cancel"))},_=new Promise((function(e){l.on("ready",(function t(){l.off("ready",t),e()}))})),C=new Promise((function(e){l.on("status_changed",(function t(){l.off("status_changed",t),e()}))}));Promise.all([l.getTranslations(),l.getPrechatForm().catch((function(){return null})),l.getConfig(),_,C]).then((function(e){var n=e[0],r=e[1],a=e[2];t.setLocalization(n),Ei(a,t),r&&t.updateView("Chat/prechat",qf("prechat",r)),d.run(),Tn("liveChatChatId",t)&&gi(t),"offline"===t.getApplicationState().availability?v():g(),t.setApplicationState({ready:!0})})),l.on("visitor_data",p((function(e){t.getSessionUser().serverId||Di(t,e.id);var n=Object(k.bb)(["email","name"],e);Object(k.C)(n)||t.updateUser(t.getSessionUserId(),n)}))),l.on("chat_ended",p((function(e){switch(e.reason){case"inactivity":x(Xf(t,"client_inactive"));break;case"closed_by_agent":x(Xf(t,"operator_closed_session",{operator:hn("liveChatChatId",t).name}));break;case"closed":x(Xf(t,"chat_closed_by_customer"));break;default:x(Xf(t,"chat_session_closed"))}pi(t),t.setDefaultView("Chat","loader"),l.getPostChatForm().then((function(e){_i(t,qf("postchat",e)),t.setDefaultView("Chat","timeline")}),(function(){t.setDefaultView("Chat","timeline")}))}))),l.on("chat_started",p((function(e){var n=e.chatId;bi(t,{id:n})}))),l.on("status_changed",(function(e){var n=e.status;t.setApplicationState({availability:n}),t.getApplicationState().ready&&("offline"===n?v():g())})),l.on("agent_changed",p((function(e){var n=e.id,r=e.name,a=e.avatarUrl,i=e.jobTitle,o=e.fromInvitation,c=e.trigger;if(!o||kn(t)){var s=t.getChat("liveChatChatId").properties,u=s.ended,l=s.queued;(u||"manual_invitation"===c||"other_tab"===c)&&Ci(t,"liveChatChatId"),l&&t.updateChat("liveChatChatId",{properties:{queued:!1}});var d=hn("liveChatChatId",t);null!==d&&d.id!==n&&x(Xf(t,"user_transfer",{operator:r})),t.hasUser(n)||(t.addUser({id:n,name:r,type:"agent",avatar:a,properties:{jobTitle:i}}),t.addParticipant("liveChatChatId",n)),Oi(t,n)}}))),l.on("new_invitation",p((function(e){kn(t)&&(Gn(t,"postchat")?t.updateChat("liveChatChatId",{properties:{postponedGreeting:e}}):In(t,"liveChatChatId")||Sn("liveChatChatId",t)&&b(e))}))),l.on("new_message",p((function(e){var n=e.id,r=e.authorId,a=e.timestamp,i=e.text,o=e.customId,c=e.json;if(!t.hasEvent("liveChatChatId",o)){var s="welcome_message"===n,u=t.getEvents("liveChatChatId").some((function(e){return e.properties.welcomeMessage||e.properties.invitation}));if(!s||!u){var l={id:n,author:r,timestamp:a,seen:!1};c&&"rich_message"===c.type&&c.payload?x(Object(T.a)({},l,O(c.payload),{template:c.payload.template_id,type:"rich_message"})):(x(Object(T.a)({},l,{type:"message",text:s?fr(t,i):i})),s&&t.updateChat("liveChatChatId",{properties:{fakeAgentMessageId:n}}))}}}))),l.on("new_file",p((function(e){var n=e.id,r=e.authorId,a=e.timestamp,i=e.url,o=e.customId,c=e.thumbnail;if(!t.hasEvent("liveChatChatId",o)){var s={id:n,type:"file",author:r,timestamp:a,url:i,name:decodeURIComponent(Object(k.I)(i.split("/")))};c&&(s.thumbnails={default:{url:c.url}}),x(s)}}))),l.on("chat_rated",p((function(e){var n=e.rate,r=e.comment;n&&("none"===n?(w(null),t.updateChat("liveChatChatId",{properties:{rateComment:null}})):w(n));r&&function(e){t.updateChat("liveChatChatId",{properties:{rateComment:e}}),x(Xf(t,"rate_me_comment_added",{comment:e}))}(r)}))),l.on("message_seen",p((function(e){if("agent"!==e.type){var n=t.hasEvent("liveChatChatId",e.id)?e.id:e.customId;t.hasEvent("liveChatChatId",n)&&t.updateEvent("liveChatChatId",n,{seen:!0})}else(function(e,t,n){var r=n.getSessionUserId();return yn(e,{authorPredicate:function(e){return e.author===r},lastSeenPredicate:function(e){return e.serverId===t}},n)})("liveChatChatId",e.id,t).forEach((function(e){t.updateEvent("liveChatChatId",e.id,{seen:!0})}))}))),l.on("visitor_queued",p((function(e){qi(t),t.updateChat("liveChatChatId",{properties:{queued:!0}});var n=e.numberInQueue,r=e.waitingTime;t.updateView("Chat/queue",{numberInQueue:n,waitingTime:r}),t.getView("Chat/queue").template||l.getQueueForm().then((function(e){var n;t.updateView("Chat/queue",{template:(n=e,n.fields.find((function(e){return"information"===e.type})).value)})}),k.R)}))),l.on("connection_status_changed",p((function(e){var n=e.status;t.setConnectionState("disconnected"===n?mn:n)}))),l.on("typing_indicator",p((function(e){var n=e.isTyping,r=t.getChat("liveChatChatId").properties,a=r.agentIsTyping,i=!!r.messageDraft;t.updateChat("liveChatChatId",{properties:{agentIsTyping:a?n:n&&!i}})}))),l.on("protocol_upgraded",p((function(){t.emit("protocol_upgraded",{version:"3"})}))),l.on("integration_data",p((function(e){var n=e.id,r=e.integrationName,a=e.data;if("joinme"===r){var i=hn("liveChatChatId",t);x(function(e,n,r){return{id:e,author:r.id,type:"rich_message",template:"default",elements:[{title:t.localize("joinme_info").replace(/<(\/)?strong>/gi,"").replace(/<br>/gi,"\n").replace(/%sender%/gi,r.name),buttons:[{text:t.localize("button_allow"),type:"url",value:n.link},{text:t.localize("button_link_cancel"),type:"message",value:t.localize("joinme_session_rejected")}]}]}}(n,a,i))}}))),t.on("request_update_event",(function(e){var n=t.getEvent("liveChatChatId",e.id);if(e.data.seen)l.markMessageAsSeen(n.serverId).then(e.resolve,k.R);else if("offline"===n.properties.formType){var r=e.data.properties.answers,a=Bf(n.properties.fields,r).fields;l.sendTicketForm(a).then((function(r){Qf(t,n.properties.fields,a,r),e.resolve(),Si(t,e.id),t.setCurrentView("Chat")}),(function(n){!function(e,t,n){if(e&&e.errors){var r=e.errors[0];if("incorrect requester structure"===Object.keys(r)[0]){var a=r["incorrect requester structure"].reduce((function(e,n){return/name must be at most \d+ characters long/.test(n)?Object(T.a)({},e,{name:n}):"mail must be a valid e-mail address"===n?Object(T.a)({},e,{email:t("invalid_email")}):e}),{});Object(k.C)(a)?n():n(a)}else n()}else n()}(n,t.localize,e.reject)}))}else if("prechat"===n.properties.formType){var i=e.data.properties.answers,o=n.properties.fields,c=Bf(o,i);Gf(t,o,c.fields);var s=function n(){l.off("__start_chat_request_succeeded",n),Si(t,e.id,$f(o,i))};if(l.on("__start_chat_request_succeeded",s),"number"===typeof c.choosenGroup){var u=Object(k.l)((function(e){return"groupSelect"===e.meta}),o),d=Object(k.l)((function(e){return e.groupNumber===c.choosenGroup}),u.options);return t.updateFeature("offlineForm",{enabled:!d.ticketFormDisabled}),l.setVisitorGroup(c.choosenGroup),void l.checkGroupStatus(c.choosenGroup).then((function(n){return"offline"===n.groupStatus?d.ticketFormDisabled?void v():l.getTicketForm({group:c.choosenGroup}).then((function(e){t.updateView("Chat/offline",qf("offline",e)),v()})):l.sendPrechatForm(Object(T.a)({},c.fields,{choosenGroupIndex:c.choosenGroupIndex})).then((function(){e.resolve()}))})).catch((function(){l.off("__start_chat_request_succeeded",s),f()}))}l.sendPrechatForm(c.fields).then((function(){e.resolve()}),(function(){l.off("__start_chat_request_succeeded",s),e.reject()}))}else if("postchat"===n.properties.formType){var p=e.data.properties.answers,m=n.properties.fields,h=Bf(m,p);Hf(t,m,h.fields);var g=null;if(Object(k.y)("rate",h)){var y=t.getChat("liveChatChatId").properties,x=y.rate,j=y.rateComment,O={},w=x&&h.rate!==x,_=!x&&h.rate;if((w||_)&&(O.rate=h.rate,Yf(t,O.rate)),Object(k.y)("rateComment",h)&&h.rateComment!==j&&(O.comment=h.rateComment,Wf(t,O.comment)),!Object(k.C)(O)){var C=t.getApplicationState().testGroup;_r({testGroup:C,chatRating:null===O.rate?"canceled":O.rate,chatRatingSource:"postchat"}),g=l.rateChat(O).then((function(){t.updateChat("liveChatChatId",{properties:Object(k.bb)(["rate","rateComment"],h)})}),k.R)}}Promise.all([l.sendPostChatForm(h.fields),g].filter(Boolean)).then((function(){e.resolve(),Si(t,e.id,$f(m,p));var n=t.getApplicationState().availability,r=t.getChat("liveChatChatId").properties.postponedGreeting;"online"===n&&r?Promise.resolve().then((function(){t.updateChat("liveChatChatId",{properties:{postponedGreeting:void 0}}),b(r),t.setDefaultView("Chat","timeline")})):t.setDefaultView("Chat","timeline")}))}})),t.on("request_update_chat",(function(e){var n=e.resolve,r=e.reject,a=e.data,i=a.properties,o=void 0===i?{}:i,c=Object(A.a)(a,["properties"]);if(o.rateComment)Wf(t,o.rateComment),l.rateChat({comment:o.rateComment}).then(n).catch(r);else if("undefined"!==typeof o.rate){Yf(t,o.rate);var s=null===o.rate,u=t.getApplicationState().testGroup;_r({testGroup:u,chatRating:s?"canceled":o.rate,chatRatingSource:"other"}),l.rateChat({rate:s?"none":o.rate}).then((function(){s&&t.updateChat("liveChatChatId",{properties:{rateComment:null}}),n()})).catch(r)}else o.transcriptSentTo?l.forwardChatTranscript({email:o.transcriptSentTo}).then(n).catch(r):!1===c.active?l.closeChat().then(n).catch(r):"string"===typeof o.messageDraft&&l.setSneakPeek({text:o.messageDraft}).then(n).catch(r)})),t.on("request_update_user",(function(e){var n=e.resolve,r=e.id,a=e.data,i=a.properties,o=Object(A.a)(a,["properties"]);t.getSessionUserId()===r&&(i&&(o.customProperties=i,o.update=!0),l.setVisitorData(o).then(n,k.R))})),t.on("request_set_user_properties",(function(e){var n=e.resolve,r=e.id,a=e.properties;if(t.getSessionUserId()===r){var i={};a&&(i.customProperties=a,i.update=!1),l.setVisitorData(i).then(n,k.R)}})),t.on("update_event",(function(e){var n=e.event;"file"===n.type&&n.properties.canceled&&di(t,n.id)})),t.on("send_event",(function(e){var n=e.event,r=e.meta;if("file"===n.type)li(t,n.id),l.sendFile({file:r.file,onProgress:function(e){t.updateEvent("liveChatChatId",n.id,{properties:{progress:e}})}}).then((function(e){var r=e.id,a=e.url;t.setEventServerId("liveChatChatId",n.id,r),t.updateEvent("liveChatChatId",n.id,{delivered:!0,properties:{url:a}}),di(t,n.id)})).catch((function(e){var r={failed:!0,failReason:"Cannot upload a file over 10MB"===e.reason?t.localize("cannot_upload_a_file_over_10mb"):t.localize("upload_failed")};t.updateEvent("liveChatChatId",n.id,{properties:r})}));else if("message"===n.type||"emoji"===n.type){var a={customId:n.id,text:n.properties.text},i=n.properties.triggeredBy;if(i){var o=t.getEvent("liveChatChatId",i.event);a.json={postback:{id:i.button.postbackId,type:"message",value:i.button.value,event_id:o.serverId}}}l.setSneakPeek({text:""}),l.sendMessage(a).then((function(e){Kf(t,n,e.timestamp),t.setEventServerId("liveChatChatId",n.id,e.id),t.updateEvent("liveChatChatId",n.id,{delivered:!0})}),(function(){t.updateEvent("liveChatChatId",n.id,{failed:!0})}))}}));var E=Qr()(ga(t,(function(e){return e.application.destroyed})),Lr()(Boolean),fa()(1),sa.a);Qr()(ga(t,(function(e){return e.application.page})),da()(1),Object(ma.a)(E),qr()((function(e){var t=e.title,n=e.url;return l.setVisitorData({pageTitle:t,pageUrl:n}).catch(k.R)})));var I=function(){t.getApplicationState("destroyed")||l.checkGroupStatus().then((function(e){"online"===e.groupStatus?g():v()})).catch(f)},S=ba(t),R=function(e){return Qr()(S,ea(e))},P=Qr()(R((function(){return ga(t,(function(e){return e.application.maximized}))})),Lr()(Boolean),sa.a);Qr()(P,qr()((function(){return d.add(I)}))),Qr()(R((function(){if(!Vn(t))return ia.a;var e=ga(t,(function(){return Gn(t,"prechat")}));return Qr()(Ur()(P,e),Lr()((function(){return Gn(t,"prechat")})),ea((function(){var e=t.getLastEvent("liveChatChatId");return Qr()(Object(Yr.a)(Zf(l,e.properties.fields)),aa)})))})),Lr()((function(e){return e&&Gn(t,"prechat")})),qr()((function(e){var n=t.getLastEvent("liveChatChatId").id;return t.updateEvent("liveChatChatId",n,{properties:{fields:e}})}))),Qr()(ga(t,(function(){return t.getChat("liveChatChatId").properties.startChatAgainPending})),Lr()(Boolean),qr()((function(){var e=null;l.checkGroupStatus().then((function(n){return"online"===n.groupStatus?(e="online",Vn(t)?{type:"show_prechat"}:m().then((function(e){var t=e.agent,n=e.message;return t.isBot?l.startChat().then((function(){return{type:"nothing"}})):{type:"predicted_welcome_message",payload:{agent:t,message:n}}}),(function(e){if("MISSING_PREDICTED_AGENT"===e.code)return l.startChat().then((function(){return{type:"nothing"}}));throw e})).catch((function(){return{type:"panic"}}))):(e="offline",Un(t)?Hn(t,"offline")?{type:"show_offline_form"}:l.getTicketForm().then((function(e){return{type:"show_offline_form",payload:qf("offline",e)}})):{type:"hide_minimized"})})).then((function(n){if("nothing"!==n.type)switch(Ci(t,"liveChatChatId"),t.setApplicationState({availability:e}),n.type){case"hide_minimized":return void t.updateView("minimized",{hidden:!0});case"show_offline_form":return n.payload&&t.updateView("Chat/offline",n.payload),void Ai(t);case"show_prechat":return void wi(t);case"predicted_welcome_message":var r=n.payload,a=r.agent,i=r.message;return Oi(t,a.id),x(i),void t.updateChat("liveChatChatId",{properties:{fakeAgentMessageId:i.id}});case"panic":return void f();default:return}}),f)})))},tm=Object(vr.b)()?window.localStorage:vr.a,nm={setItem:function(e,t){return new Promise((function(n){return n(tm.setItem(e,t))}))},getItem:function(e){return new Promise((function(t){return t(tm.getItem(e))}))},removeItem:function(e){return new Promise((function(t){return t(tm.removeItem(e))}))}},rm=function(e,t,n){return""+("production"===n?"https://accounts.livechatinc.com":"https://accounts.livechatinc.com".replace("accounts.","accounts."+n+"."))+function(e){var t=e.uniqueGroups,n=e.licenseId,r=e.groupId;return(t?"/licence/g"+n+"_"+r:"")+"/customer"}(e)+"?"+Object(P.a)(function(e,t){var n=e.clientId,r=e.licenseId;return{license_id:String(r),flow:"button",response_type:"token",client_id:n,redirect_uri:t,post_message_uri:t,state:"@livechat/customer-auth"}}(e,t))},am=function(e){var t=e.code,n=e.message,r=new Error(n);return r.code=t,r},im=function(e,t){if("identity_exception"in e)throw am({code:"SSO_IDENTITY_EXCEPTION",message:e.identity_exception});if("oauth_exception"in e)throw am({code:"SSO_OAUTH_EXCEPTION",message:e.oauth_exception});return{accessToken:e.access_token,entityId:e.entity_id,expiresIn:1e3*e.expires_in,tokenType:e.token_type,creationDate:Date.now(),licenseId:t}},om=function(e,t){var n=e.licenseId,r=function(e){return"production"===e?"https://accounts.livechatinc.com":"https://accounts.livechatinc.com".replace("accounts.","accounts."+e+".")}(t);return new Promise((function(a,i){var o=function(e,t){var n=document.createElement("iframe");return n.style.display="none",n.setAttribute("src",rm(e,Object(P.d)(String(window.location))+window.location.pathname,t)),n}(e,t),c=function(){Object(Yi.h)(o),window.removeEventListener("message",u,!1)},s=setTimeout((function(){c(),i(am({message:"Request timed out.",code:"REQUEST_TIMEOUT"}))}),15e3),u=function(e){var t=e.origin,o=e.data;if(t===r&&function(e){return e&&"@livechat/customer-auth"===e.state}(o)){clearTimeout(s),c();try{a(im(o,n))}catch(u){i(u)}}};window.addEventListener("message",u,!1),Object(Yi.e)().then((function(e){e.appendChild(o)}))}))},cm=function(e){var t=e.licenseId,n=e.clientId;if("number"!==typeof t||"string"!==typeof n)throw new Error("You need to pass valid configuration object: { licenseId, clientId }.")},sm=function(e,t){cm(e);var n="@@lc_auth_token:"+e.licenseId+(e.uniqueGroups?":"+e.groupId:""),r=null,a=null,i=nm.getItem(n).then((function(e){null!==i&&(i=null,e&&(a=JSON.parse(e)))})),o=function(){return r=om(e,t).then((function(e){return r=null,nm.setItem(n,JSON.stringify(e)),a=e,e}),(function(e){throw r=null,e}))};return{getFreshToken:o,getToken:function e(){return r||(a&&!function(e){var t=e.creationDate,n=e.expiresIn;return Date.now()>=t+n}(a)?Promise.resolve(a):i?i.then(e):o())},hasToken:function e(){return i?i.then(e):Promise.resolve(!!a)},invalidate:function(){return a=null,i=null,nm.removeItem(n)}}},um="CONNECTION_LOST",lm="IDENTITY_MISMATCH",dm="MISDIRECTED_CONNECTION",pm="REQUEST_TIMEOUT",fm="login",mm="update_customer_page";function hm(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var vm=function(e){return e.connection.status},gm=function(e,t){return e.requests[t]},bm=function(e){return e.users.self.id},ym=function(e,t){var n=e.chats[t];return!!n&&n.active},xm=function(e){return"connected"===vm(e)},jm=function(e){var t=e.region;return"https://api"+(t?"-"+t:"")+function(e){var t=e.licenseId,n=e.env;return 1520===t?".staging":"production"===n?"":"."+n}(e)+".livechatinc.com"},Om=function(e){return jm(e)+"/v3.3/customer"},wm=function(e){var t=e.application,n=void 0===t?{}:t,r=e.licenseId,a=e.groupId,i=void 0===a?null:a,o=e.env,c=e.page,s=void 0===c?null:c,u=e.region,l=void 0===u?null:u,d=e.referrer,p=void 0===d?null:d,f=e.uniqueGroups,m=void 0!==f&&f,h=e.mobile,v=void 0!==h&&h;return{application:Object(q.a)({},n,{name:"chat_widget",version:"e72b1b6431b46cda436972d15c24f89d5297b28d"}),licenseId:r,env:o,groupId:i,chats:{},connection:{status:"disconnected"},page:s,region:l,referrer:p,requests:{},users:{self:{id:null,type:"customer"},others:{}},uniqueGroups:m,mobile:v}},_m=function(e,t){var n=t.id,r=e.requests,a=(r[n],Object(te.a)(r,[n].map(hm)));return Object(q.a)({},e,{requests:a})},Cm=function(e,t){return Object(q.a)({},t,{connection:Object(q.a)({},t.connection,{status:e})})},Em=function(e){var t;return K(e,((t={}).change_region=function(e,t){var n=t.region;return Object(q.a)({},e,{region:n})},t.destroy=function(e){return Cm("destroyed",e)},t.login_success=function(e){return Cm("connected",e)},t.pause_connection=function(e){return Cm("paused",e)},t.request_failed=_m,t.response_received=_m,t.send_request=function(e,t){var n,r=t.promise,a=t.resolve,i=t.reject,o=t.id,c=t.request;return Object(q.a)({},e,{requests:Object(q.a)({},e.requests,(n={},n[o]={id:o,promise:r,resolve:a,reject:i,request:c},n))})},t.set_chat_active=function(e,t){var n,r=t.id,a=t.active;return Object(q.a)({},e,{chats:Object(q.a)({},e.chats,(n={},n[r]=Object(q.a)({},e.chats[r],{active:a}),n))})},t.set_self_id=function(e,t){return Object(q.a)({},e,{users:Object(q.a)({},e.users,{self:Object(q.a)({},e.users.self,{id:t.id})})})},t.socket_disconnected=function(e){var t=vm(e);var n=Cm("disconnected"===t?"disconnected":"reconnecting",e);return Object(q.a)({},n,{requests:{}})},t.update_customer_page=function(e,t){return Object(q.a)({},e,{page:Object(q.a)({},e.page,t)})},t))};function Im(e){var t=e.message,n=e.code,r=new Error(t);return r.code=n,r}var km=function(e){var t={};return"string"===typeof e.customId&&(t.custom_id=e.customId),Object(k.E)(e.properties)&&(t.properties=e.properties),t},Sm=function(e){switch(e.type){case"message":var t=Object(q.a)({},km(e),{type:e.type,text:e.text});return e.postback&&(t.postback={id:e.postback.id,thread_id:e.postback.threadId,event_id:e.postback.eventId,type:e.postback.type,value:e.postback.value}),t;case"file":return Object(q.a)({},km(e),{type:e.type,url:e.url});case"filled_form":return Object(q.a)({},km(e),{type:e.type,form_id:e.formId,fields:e.fields.map((function(e){switch(e.type){case"group_chooser":if(!e.answer)return e;var t=e.answer,n=t.groupId,r=Object(te.a)(t,["groupId"]);return Object(q.a)({},e,{answer:Object(q.a)({},r,{group_id:n})});default:return e}}))});case"system_message":var n=Object(q.a)({},km(e),{type:e.type,text:e.text,system_message_type:e.systemMessageType});return e.recipients&&(n.recipients=e.recipients),n}},Tm=function(e){var t=e.chat,n=e.continuous,r={chat:{}};if("boolean"===typeof n&&(r.continuous=n),!t)return r;var a=t.access,i=t.thread,o=t.properties;return a&&a.groupIds&&(r.chat.access={group_ids:a.groupIds}),o&&(r.chat.properties=o),i&&(r.chat.thread=function(e){var t={},n=e.events,r=e.properties;return n&&(t.events=n.map(Sm)),r&&(t.properties=r),t}(i)),r},Am=function(e){return Object(k.pb)(e).map((function(e){var t,n=e[0],r=e[1];return(t={})[n]=r,t}))},Rm=function(e){var t=Object(k.bb)(["avatar","name","email"],e);return e.sessionFields&&(t.session_fields=Am(e.sessionFields)),t},Pm=function(e){return{type:"destroy",payload:{reason:e}}},Mm=function(e){return{type:"login_success",payload:e}},Nm=function(e){return void 0===e&&(e=!1),{type:"prefetch_token",payload:{fresh:e}}},zm=function(e){return{type:"reconnect",payload:{delay:e}}},Lm=function(e,t,n){return{type:"send_request",payload:Object(q.a)({request:{action:e,payload:t}},n&&{source:n})}},Dm=function(e,t){return{type:"set_chat_active",payload:{id:e,active:t}}},Bm=function(e){return{type:"set_self_id",payload:{id:e}}},qm=function(e,t){t.payload.id=Object(k.u)(e.getState().requests);var n=U(),r=n.resolve,a=n.reject,i=n.promise;return t.payload.promise=i,t.payload.resolve=r,t.payload.reject=a,e.dispatch(t),i},Fm=n(83),Vm="AUTHENTICATION",Um="CUSTOMER_BANNED",Gm="USERS_LIMIT_REACHED",Hm="WRONG_PRODUCT_VERSION",Wm=function(e){var t=e.getState(),n=t.licenseId,r=t.groupId;return"side_storage_"+n+(t.uniqueGroups?":"+r:"")},Ym=function(e){return nm.getItem(Wm(e)).catch(k.R).then((function(e){return JSON.parse(e||"{}")})).catch((function(){return{}}))},Km=function(e,t,n){var r=e.slice(0),a=!1;return function e(i){var o=r.shift();Object(Fm.a)((function(){return o(i)})).then((function(n){a||(r.length?e(n):t(n))}),(function(e){a||n(e)}))}(),{cancel:function(){a=!0}}},Qm=function(e,t,n){return qm(e,Lm(t,n,"login"))},Zm=function(e){return new Promise((function(t){setTimeout(t,e)}))};function Jm(e,t){var n,r,a=null,i=new pc.a({min:300,max:6e4,jitter:.3}),o=function(e){return n.dispatch(Pm(e))},c=function(){return n.dispatch(zm(i.duration()))},s=function(){return Promise.all([e.getToken(),Ym(n)])},u=function(e){var t=e[0],r=e[1],a=bm(n.getState());if(null===a)n.dispatch(Bm(t.entityId));else if(a!==t.entityId){var i=new Error("Identity has changed.");throw i.code=lm,i}return[t,r]},l=function(e){var r=e[0],i=e[1],o=n.getState(),c=o.application,s=o.groupId,u=o.page,l=o.referrer,d=o.mobile,p={token:r.tokenType+" "+r.accessToken,customer:"function"===typeof t?Rm(t()):{},customer_side_storage:i,is_mobile:d,application:Object(k.Y)(["name","version"],c)};return"number"===typeof s&&(p.group_id=s),c.channelType&&(p.application.channel_type=c.channelType),null!==u&&(a=u,p.customer_page=u),null!==l&&(p.referrer=l),Promise.race([Qm(n,fm,p),Zm(15e3).then((function(){return Promise.reject(Im({message:"Request timed out.",code:pm}))}))])};return function(t){n=t,r&&r.cancel(),r=Km([s,u,l],(function(e){r=null,i.reset(),function(){var e=n.getState().page;a!==e&&Qm(n,mm,e).catch(k.R),a=null}(),n.dispatch(Mm(e))}),(function(t){switch(t.code){case Vm:return e.getFreshToken(),void c();case um:case dm:return;case"SSO_IDENTITY_EXCEPTION":case"SSO_OAUTH_EXCEPTION":return"server_error"===t.message||"temporarily_unavailable"===t.message?void c():void o(t.message);case lm:case Um:case Gm:case Hm:return void o(t.code.toLowerCase());default:return void c()}}))}}var Xm,$m=function(e,t,n){return t.getToken().then((function(t){var r=e.getState();null===bm(r)&&e.dispatch(Bm(t.entityId));var a=r.page;if(a&&a.url){var i=Object(P.a)({license_id:r.licenseId}),o={customer_fields:n||{},session_fields:Am(n||{}),group_id:r.groupId||0,page_url:a.url};return Object(R.a)(Om(r)+"/action/check_goals?"+i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:t.tokenType+" "+t.accessToken},body:JSON.stringify(o)}).then((function(){}))}}))},eh=function(e,t){var n=e.getState,r=e.dispatch,a=function(e){return e.requests}(n());r({type:"fail_all_requests",payload:{rejects:Object.keys(a).map((function(e){return a[e].reject})),reason:t}})},th=function(e,t,n){var r=e.getState,a=e.dispatch,i=t.payload.id;a({type:"request_failed",payload:{id:i,reject:r().requests[i].reject,error:n}})},nh=Object.freeze({success:!0}),rh=function(e,t){var n={id:t.id,authorId:t.author_id,createdAt:t.created_at,threadId:e,properties:t.properties||{}};return void 0!==t.custom_id&&(n.customId=t.custom_id),n},ah=function(e,t){var n,r,a,i,o;t.height>t.width?(r="height",a="width",i=t.height,o=t.width):(r="width",a="height",i=t.width,o=t.height);var c=e/i;return(n={})[r]=Math.ceil(Math.min(i,e)),n[a]=Math.ceil(Math.min(c*o,o)),n},ih=function(e,t){return void 0!==t.width&&void 0!==t.height?function(e,t){return Object(q.a)({},rh(e,t),{type:"file",contentType:t.content_type,url:t.url,name:t.name,width:t.width,height:t.height,thumbnails:{default:Object(q.a)({url:t.thumbnail_url},ah(300,t)),high:Object(q.a)({url:t.thumbnail2x_url},ah(600,t))}},t.alternative_text&&{alternativeText:t.alternative_text})}(e,t):Object(q.a)({},rh(e,t),{type:"file",contentType:t.content_type,url:t.url,name:t.name})},oh=function(e){var t={};if("string"===typeof e.title&&(t.title=e.title),"string"===typeof e.subtitle&&(t.subtitle=e.subtitle),e.image){var n=e.image;t.image=Object(q.a)({url:n.url,name:n.name},n.alternative_text&&{alternativeText:n.alternative_text})}return e.buttons&&(t.buttons=e.buttons.map((function(e){switch(e.type){case"message":case"phone":return{type:e.type,text:e.text,postbackId:e.postback_id,userIds:e.user_ids,value:e.value,role:e.role||"default"};case"url":var t={type:e.type,text:e.text,postbackId:e.postback_id,userIds:e.user_ids,value:e.value,role:e.role||"default"};return e.target&&(t.target=e.target),t;case"webview":var n={type:e.type,text:e.text,postbackId:e.postback_id,userIds:e.user_ids,value:e.value,role:e.role||"default"};return"string"===typeof e.webview_height&&(n.webviewHeight=e.webview_height),n;default:return{text:e.text,postbackId:e.postback_id,userIds:e.user_ids,role:e.role||"default"}}}))),t},ch=function(e,t){switch(t.template_id){case"cards":case"quick_replies":case"sticker":return Object(q.a)({},rh(e,t),{type:"rich_message",template:t.template_id,elements:t.elements.map(oh)});default:return null}},sh=function(e,t){switch(t.type){case"file":return ih(e,t);case"filled_form":return function(e,t){return Object(q.a)({},rh(e,t),{type:"filled_form",formId:t.form_id,fields:t.fields.map((function(e){switch(e.type){case"group_chooser":if(!e.answer)return e;var t=e.answer,n=t.group_id,r=Object(te.a)(t,["group_id"]);return Object(q.a)({},e,{answer:Object(q.a)({},r,{groupId:n})});default:return e}}))})}(e,t);case"message":return function(e,t){return Object(q.a)({},rh(e,t),{type:"message",text:t.text})}(e,t);case"rich_message":return ch(e,t);case"system_message":return function(e,t){var n=Object(q.a)({},rh(e,Object(q.a)({},t,{author_id:"system"})),{type:"system_message",text:t.text,systemMessageType:t.system_message_type});return t.text_vars&&(n.textVars=t.text_vars),n}(e,t);default:return null}},uh=function(e){return{id:e.id,addon:e.addon||null,uniqueId:e.unique_id,displayedFirstTime:e.displayed_first_time,accepted:e.accepted||!1,event:sh(null,e.event),agent:{id:e.agent.id,name:e.agent.name,avatar:e.agent.avatar,jobTitle:e.agent.job_title,isBot:e.agent.is_bot||!1}}},lh=function(e){return void 0===e&&(e={}),e.group_ids?{groupIds:e.group_ids}:{}},dh=function(e){return Object(k.L)((function(e){return e.events_seen_up_to?e.events_seen_up_to:null}),Object(k.G)("id",e))},ph=function(e,t){var n=t.properties||{};return{id:t.id,chatId:e,active:t.active,access:lh(t.access),createdAt:t.created_at,userIds:t.user_ids,events:t.events.map((function(e){return sh(t.id,e)})).filter(Boolean),properties:n,previousThreadId:t.previous_thread_id||null,nextThreadId:t.next_thread_id||null,queue:t.queue?bh(t.queue):null}},fh=function(e){return{id:e.id,access:lh(e.access),users:e.users.map(yh),properties:e.properties||{},thread:ph(e.id,e.thread),eventsSeenUpToMap:dh(e.users)}},mh=function(e){var t=Object(k.bb)(["avatar","email","name"],e);return e.session_fields&&(t.sessionFields=e.session_fields.reduce((function(e,t){var n=Object.keys(t)[0];return e[n]=t[n],e}),{})),t},hh=function(e){var t=mh(e);return Object(q.a)({id:e.id,type:"customer"},t,{sessionFields:t.sessionFields||{}})},vh=function(e){var t=e.statistics;return Object(q.a)({},hh(e),{statistics:{chatsCount:t.chats_count,threadsCount:t.threads_count,visitsCount:t.visits_count,pageViewsCount:t.page_views_count,greetingsShownCount:t.greetings_shown_count,greetingsAcceptedCount:t.greetings_accepted_count}})},gh=function(e){return{position:e.position,waitTime:e.wait_time}},bh=function(e){return Object(q.a)({},gh(e),{queuedAt:e.queued_at})},yh=function(e){return"customer"===e.type?(n=e,Object(q.a)({},hh(n),{present:n.present})):{id:(t=e).id,type:"agent",name:t.name,avatar:t.avatar,jobTitle:t.job_title,present:t.present};var t,n},xh=((Xm={})[um]="Connection lost.",Xm[dm]="Connected to wrong region.",Xm),jh=function(e,t){var n=e.getState();switch(t.type){case"push_response_received":case"push_received":switch(t.payload.action){case"chat_deactivated":return void e.dispatch(Dm(t.payload.payload.chatId,!1));case"incoming_chat":return void e.dispatch(Dm(t.payload.payload.chat.id,!0));default:return}case"response_received":switch(t.payload.action){case"list_chats":return void t.payload.payload.chatsSummary.filter((function(e){var t=e.id,r=e.active;return ym(n,t)!==r})).forEach((function(t){var n=t.id,r=t.active;e.dispatch(Dm(n,r))}));default:return}}},Oh=function(e,t){t.forEach((function(t){if("present"in t){t.present;var n=Object(te.a)(t,["present"]);e("user_data",n)}else if("customer"!==t.type)e("user_data",t);else{t.statistics;var r=Object(te.a)(t,["statistics"]);e("user_data",r)}}))},wh=function(e,t){var n=e.emit,r=e.store,a=t.payload;switch(a.action){case"thread_properties_updated":return a.payload.properties.lc2&&"queue_pos"in a.payload.properties.lc2&&n("queue_position_updated",{chatId:a.payload.chatId,threadId:a.payload.threadId,queue:{position:a.payload.properties.lc2.queue_pos,waitTime:a.payload.properties.lc2.queue_waiting_time}}),void n("thread_properties_updated",a.payload);case"customer_side_storage_updated":return void function(e,t){nm.setItem(Wm(e),JSON.stringify(t)).catch(k.R)}(r,a.payload.customer_side_storage);case"customer_disconnected":switch(a.payload.reason){case"access_token_expired":r.dispatch(Nm(!0)),r.dispatch(zm(100)),n("disconnected",a.payload);break;case"customer_banned":case"customer_temporarily_blocked":case"license_not_found":case"product_version_changed":case"too_many_connections":case"unsupported_version":r.dispatch(Pm(a.payload.reason));break;case"misdirected_connection":eh(r,dm),r.dispatch({type:"change_region",payload:a.payload.data});break;case"too_many_unauthorized_connections":eh(r,"TOO_MANY_UNAUTHORIZED_CONNECTIONS");break;default:r.dispatch(zm(100)),n("disconnected",a.payload)}return;case"incoming_chat":return Oh(n,a.payload.chat.users),void n(a.action,a.payload);case"incoming_event":if(null===a.payload.event)return;return void n(a.action,a.payload);case"incoming_typing_indicator":return void n(a.action,a.payload);case"incoming_multicast":return function(e,t){var n=t.type,r=t.content;if("lc2"===n&&("groups_update"===r.name&&"groups"in r&&!Object(k.C)(r.groups))){var a=r.groups[0];e("availability_updated",{availability:"offline"===a.status?"offline":"online"})}}(n,a.payload),void n(a.action,a.payload);case"user_added_to_chat":return Oh(n,[a.payload.user]),void n(a.action,a.payload);default:return void n(a.action,a.payload)}},_h=function(e,t){var n=e.emit,r=t.payload;switch(r.action){case"chat_deactivated":return void r.resolve(nh);case"get_chat":return Oh(n,r.payload.users),void r.resolve(r.payload);case"incoming_chat":return Oh(n,r.payload.chat.users),void r.resolve(r.payload);case"incoming_event":return void r.resolve(r.payload.event);case"list_chats":return Oh(n,r.payload.users),void r.resolve(r.payload);default:return void r.resolve(r.payload)}},Ch=function(e){var t=e.auth,n=e.customerDataProvider,r=e.emitter,a=e.socket,i=r.emit,o=Jm(t,n);return function(e,n){switch(e.type){case"change_region":return void a.reinitialize();case"check_goals":return void $m(n,t,e.payload.sessionFields).catch(k.R);case"destroy":var c=e.payload;return a.destroy(),"manual"!==c.reason&&i("disconnected",c),void r.off();case"fail_all_requests":var s=e.payload,u=s.reason,l=s.rejects,d={message:xh[u],code:u};return void l.forEach((function(e){e(Im(d))}));case"login_success":var p=e.payload,f=p.dynamicConfig,m=p.customer,h=p.chats,v=p.greeting,g=p.availability,b=Object(q.a)({customer:m,availability:g},v&&{greeting:v});return Object.defineProperty(b,"__unsafeDynamicConfig",{value:f}),Object.defineProperty(b,"__unsafeChats",{value:h}),void i("connected",b);case"pause_connection":return void a.disconnect();case"prefetch_token":return e.payload.fresh?void t.getFreshToken().catch(k.R):void t.hasToken().then((function(e){return e?t.getToken().then((function(e){if(!(e.creationDate+e.expiresIn-Date.now()>36e5))return t.invalidate().then(t.getFreshToken)})):t.getToken()})).catch(k.R);case"push_received":return"customer_disconnected"===e.payload.action?void wh({emit:i,store:n},e):(jh(n,e),void wh({emit:i,store:n},e));case"push_response_received":return jh(n,e),void _h({emit:i},e);case"reconnect":return void a.reconnect(e.payload.delay);case"request_failed":var y=e.payload;return void(0,y.reject)(Im(y.error));case"response_received":return jh(n,e),void _h({emit:i},e);case"send_request":var x=n.getState();return function(e){return"destroyed"===vm(e)}(x)?void th(n,e,{code:"SDK_DESTROYED",message:"SDK destroyed."}):xm(x)||"login"===e.payload.source?void function(e,t){var n=t.payload,r=n.id,a=n.request,i=Object(q.a)({request_id:r},a);e.emit(i)}(a,e):void th(n,e,{code:"NO_CONNECTION",message:"No connection."});case"set_self_id":return void i("customer_id",e.payload.id);case"socket_disconnected":return void i("disconnected",{reason:"connection_lost"});case"socket_connected":return void o(n);case"socket_recovered":if(!xm(n.getState()))return;return void i("connection_recovered");case"socket_unstable":if(!xm(n.getState()))return;return void i("connection_unstable");case"start_connection":return a.connect(),void n.dispatch(Nm());case"update_customer_page":if(!xm(n.getState()))return;return void qm(n,Lm(mm,e.payload)).catch(k.R);default:return}}},Eh=function(e,t){var n={status:"idle",queuedTasks:[],nextPageId:null},r=function r(a,i){switch(n.status){case"idle":return n.status="fetching",void e.listThreads({chatId:t,minEventsCount:25,pageId:n.nextPageId||void 0}).then((function(e){var t=e.threads,i=e.nextPageId;n.nextPageId=i,n.nextPageId?(n.status="idle",a({value:{threads:[].concat(t).reverse()},done:!1})):(n.status="done",a({value:{threads:[].concat(t).reverse()},done:!0}));var o=n.queuedTasks.shift();o&&r(o.resolve,o.reject)}),(function(e){var t=n.queuedTasks;n.status="idle",n.queuedTasks=[],i(e),t.forEach((function(t){return t.reject(e)}))}));case"fetching":return void n.queuedTasks.push({resolve:a,reject:i});case"done":return void a({value:void 0,done:!0})}};return{next:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return new Promise(r)}))}},Ih=n(230),kh=n.n(Ih),Sh=function(e){var t=e.min,n=void 0===t?1e3:t,r=e.max,a=void 0===r?5e3:r,i=e.jitter,o=void 0===i?.5:i,c=0;return{duration:function(){var e=n*Math.pow(2,c++);if(o){var t=Math.random(),r=Math.floor(t*o*e);e=0===(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,a)},reset:function(){c=0}}},Th=function(e,t){var n,r=void 0===t?{}:t,a=r.query,i=r.transports,o=void 0===i?["websocket","xhr-polling"]:i,c=e+(a?"?"+Object(P.a)(a):""),s=Object(V.a)(),u=Sh({min:1e3,max:5e3,jitter:.5}),l=3,d=null,p=function(){l=1,u.reset(),s.emit("connect")},f=function(){l=3,d=null,s.emit("disconnect"),b()},m=function(e){var t=e.data;s.emit("message",t)},h=function(){s.emit("heartbeat")},v=function(){var e;(l=3,d)&&((e=d).removeEventListener("open",p),e.removeEventListener("close",f),e.removeEventListener("message",m),e.removeEventListener("heartbeat",h),d.close(),d=null)},g=function(){var e;l=0,d=new kh.a(c,void 0,{transports:o}),(e=d).addEventListener("open",p),e.addEventListener("close",f),e.addEventListener("message",m),e.addEventListener("heartbeat",h)},b=function(e){void 0===e&&(e=u.duration()),clearTimeout(n),0!==e?n=setTimeout(g,e):g()},y={connect:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){if(3!==l)throw new Error("Socket is already open or connecting.");clearTimeout(n),g()})),destroy:function(){y.off(),y.disconnect()},disconnect:function(){l=3,clearTimeout(n),v()},reconnect:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){v(),b(e)})),emit:function(e){if(1!==l)throw new Error("Socket is not connected.");d.send(e)},getReadyState:function(){return l},on:s.on,off:s.off};return y},Ah=function(){var e,t=k.R;return{cancel:function(){clearTimeout(e),t=k.R},check:function(){var n=U();return t=n.resolve,e=setTimeout((function(){var e=new Error("Timeout.");e.code="TIMEOUT",n.reject(e)}),2e3),n.promise},resolve:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){clearTimeout(e),t()}))}},Rh=function(e,t){var n,r,a,i=void 0===t?{}:t,o=i.query,c=void 0===o?{}:o,s=i.rescheduleTimeout,u=void 0===s?3e4:s,l=i.transports,d=i.emitter,p=void 0===d?Object(V.a)():d,f=Th(e,{query:Object(q.a)({bh:Object(k.t)()},c),transports:l}),m=Ah(),h=function(){return 1===f.getReadyState()},v=function(e){f.emit(JSON.stringify(e)),b()},g=function(){v({action:"ping"})},b=function(){clearTimeout(n),n=setTimeout(g,u)},y=function(){m.cancel(),clearTimeout(n)};return r=f,a=p,["connect","disconnect"].forEach((function(e){r.on(e,(function(t){a.emit(e,t)}))})),f.on("connect",b),f.on("disconnect",y),f.on("heartbeat",g),f.on("message",(function(e){m.resolve();var t=JSON.parse(e);"ping"!==t.action&&p.emit("message",t)})),"undefined"!==typeof window&&"undefined"!==typeof window.addEventListener&&(window.addEventListener("online",(function(){h()&&(m.check().then((function(){m.cancel(),p.emit("connection_recovered")}),(function(e){if(m.cancel(),"TIMEOUT"!==e.code)throw e;f.reconnect()})),g())})),window.addEventListener("offline",(function(){m.cancel(),h()&&p.emit("connection_unstable")}))),Object(q.a)({},f,{destroy:function(){y(),f.destroy()},disconnect:function(){y(),f.disconnect()},reconnect:function(e){y(),f.reconnect(e)},emit:v,on:p.on,off:p.off})},Ph=function(e,t){var n=e.getState(),r=Om(n)+"/rtm/sjs";return Rh(r,{query:{license_id:n.licenseId},emitter:t})},Mh=function(e){var t=Object(V.a)(),n=Ph(e,t);return Object(q.a)({},Object.keys(n).reduce((function(e,t){return e[t]=function(){var e;return(e=n)[t].apply(e,arguments)},e}),{}),{reinitialize:function(){n.disconnect(),(n=Ph(e,t)).connect()}})},Nh=function(e){return{chatId:e.chat_id,properties:e.properties}},zh=function(e){var t={chatId:e.chat_id,threadId:e.thread_id,transferredTo:Object(q.a)({},e.transferred_to.agent_ids&&{agentIds:e.transferred_to.agent_ids},e.transferred_to.group_ids&&{groupIds:e.transferred_to.group_ids}),queue:e.queue?bh(e.queue):null};return"manual"===e.reason?Object(q.a)({},t,{reason:e.reason,requesterId:e.requester_id}):Object(q.a)({},t,{reason:e.reason})},Lh=function(e){return{url:e.url,title:e.title,timestamp:1e3*e.timestamp}},Dh=function(e){return{customer:Object(q.a)({id:e.customer.id},mh(e.customer))}},Bh=function(e){return{chatId:e.chat_id,threadId:e.thread_id,eventId:e.event_id,properties:e.properties}},qh=function(e){return{chatId:e.chat_id,threadId:e.thread_id,eventId:e.event_id,properties:e.properties}},Fh=function(e){var t=e.thread_id;return{chatId:e.chat_id,threadId:t,event:sh(t,e.event)}},Vh=function(e){return{chatId:e.chat_id,userId:e.user_id,seenUpTo:e.seen_up_to}},Uh=function(e){return{uniqueId:e.unique_id}},Gh=function(e){return{chat:fh(e.chat)}},Hh=function(e){return{chatId:e.chat_id,event:sh(e.thread_id,e.event)}},Wh=function(e){return uh(e)},Yh=function(e){return{userId:e.user_id,chatId:e.chat_id,threadId:e.thread_id,eventId:e.event_id,postback:e.postback}},Kh=function(e){var t=e.chat_id,n=e.typing_indicator;return{chatId:t,typingIndicator:{authorId:n.author_id,isTyping:n.is_typing}}},Qh=function(e){return{chatId:e.chat_id,threadId:e.thread_id,queue:gh(e.queue)}},Zh=function(e){return{chatId:e.chat_id,threadId:e.thread_id,properties:e.properties}},Jh=function(e){return{chatId:e.chat_id,threadId:e.thread_id,properties:e.properties}},Xh=function(e){return{chatId:e.chat_id,user:yh(e.user),present:e.user.present}},$h=function(e){return{chatId:e.chat_id,userId:e.user_id}},ev=function(e){return e.map((function(e){switch(e.type){case"group_chooser":return Object(q.a)({},e,{options:e.options.map((function(e){var t=e.group_id,n=Object(te.a)(e,["group_id"]);return Object(q.a)({},n,{groupId:t})}))});case"rating":var t=e.comment_label,n=Object(te.a)(e,["comment_label"]);return Object(q.a)({},n,{commentLabel:t});default:return e}}))},tv=function(e){var t=e.map((function(e,t){return Object(q.a)({},e,{id:String(t)})}));return ev(t)},nv=function(e){return e.enabled?Object(q.a)({},e,{form:"id"in e.form.fields[0]?{id:e.form.id,fields:ev(e.form.fields)}:{id:"ticket",fields:tv(e.form.fields)}}):e},rv=function(e){var t={url:e.url};return e.title&&(t.title=e.title),e.description&&(t.description=e.description),e.image_url&&(t.imageUrl="https://"+e.image_url,e.image_width&&e.image_height&&(t.imageWidth=e.image_width,t.imageHeight=e.image_height)),t},av=function(e){var t=e.online_groups_ids,n=e.customer_groups;if(!t)return"offline";var r=n.monitoring.id;return Object(k.A)(r,t)?"online":"offline"},iv=function(e){var t=e.chats_summary.map((function(e){var t=e.id,n=e.active,r=e.access,a=e.last_thread_created_at,i=e.last_thread_id,o=e.last_event_per_type,c=e.properties,s=void 0===c?{}:c,u=e.users,l={id:t,active:n,access:lh(r),properties:s,users:u.map(yh),lastThreadId:i||null,lastThreadCreatedAt:a||null,eventsSeenUpToMap:dh(u)};if(!o)return l;l.lastEventsPerType=Object(k.L)((function(e){return sh(e.thread_id,e.event)}),o);var d=o,p=Object.keys(d).map((function(e){return d[e]})),f=Object(k.I)(p.sort((function(e,t){return e.thread_id===t.thread_id?Object(k.jb)(e.event.created_at,t.event.created_at):Object(k.jb)(e.thread_created_at,t.thread_created_at)})));return f&&(l.lastEvent=l.lastEventsPerType[f.event.type]),l}));return{chatsSummary:Object(k.S)((function(e){var t=e.lastEvent,n=e.order;return-1*(void 0!==t?t.timestamp:n)}),t),totalChats:e.total_chats,users:Object(k.tb)((function(e){return e.id}),Object(k.q)((function(e){return e.users}),t)),previousPageId:e.previous_page_id||null,nextPageId:e.next_page_id||null}},ov=function(e){return e.groups_status},cv=function(e,t){return{threads:t.threads.map((function(t){return ph(e.payload.chat_id,t)})),previousPageId:t.previous_page_id||null,nextPageId:t.next_page_id||null}},sv=function(e){var t=e.__priv_dynamic_config,n=e.chats,r=e.greeting||t.greeting;return Object(q.a)({dynamicConfig:t,customer:vh(e.customer),availability:av(t),chats:n.map((function(t){return{id:t.chat_id,active:"has_active_thread"in t?t.has_active_thread:e.has_active_thread,hasUnreadEvents:t.has_unread_events}}))},r&&{greeting:uh(r)})},uv=function(e){switch(e.action){case"chat_deactivated":return{action:e.action,payload:{chatId:e.payload.chat_id}};case"chat_properties_deleted":return{action:e.action,payload:(t=e.payload,{chatId:t.chat_id,properties:t.properties})};case"chat_properties_updated":return{action:e.action,payload:Nh(e.payload)};case"chat_transferred":return{action:e.action,payload:zh(e.payload)};case"customer_side_storage_updated":case"customer_disconnected":return{action:e.action,payload:e.payload};case"customer_page_updated":return{action:e.action,payload:Lh(e.payload)};case"customer_updated":return{action:e.action,payload:Dh(e.payload)};case"event_properties_deleted":return{action:e.action,payload:Bh(e.payload)};case"event_properties_updated":return{action:e.action,payload:qh(e.payload)};case"event_updated":return{action:e.action,payload:Fh(e.payload)};case"events_marked_as_seen":return{action:e.action,payload:Vh(e.payload)};case"greeting_accepted":case"greeting_canceled":return{action:e.action,payload:Uh(e.payload)};case"incoming_chat":return{action:e.action,payload:Gh(e.payload)};case"incoming_event":return{action:e.action,payload:Hh(e.payload)};case"incoming_greeting":return{action:e.action,payload:Wh(e.payload)};case"incoming_multicast":return{action:e.action,payload:e.payload};case"incoming_rich_message_postback":return{action:e.action,payload:Yh(e.payload)};case"incoming_typing_indicator":return{action:e.action,payload:Kh(e.payload)};case"queue_position_updated":return{action:e.action,payload:Qh(e.payload)};case"thread_properties_deleted":return{action:e.action,payload:Zh(e.payload)};case"thread_properties_updated":return{action:e.action,payload:Jh(e.payload)};case"user_added_to_chat":return{action:e.action,payload:Xh(e.payload)};case"user_removed_from_chat":return{action:e.action,payload:$h(e.payload)};case"chat_user_added":return{action:"user_added_to_chat",payload:Xh(e.payload)};case"chat_user_removed":return{action:"user_removed_from_chat",payload:$h(e.payload)}}var t},lv=function(e,t){var n=e.dispatch,r=e.getState,a=t.request_id,i=gm(r(),a),o=i.promise,c=i.resolve,s=function(e){var t,n,r=e.request,a=e.response;switch(a.action){case"accept_greeting":case"cancel_greeting":case"delete_chat_properties":case"delete_event_properties":case"delete_thread_properties":return{action:a.action,payload:nh};case"get_chat":return{action:a.action,payload:(n=a.payload,fh(n))};case"get_customer":return{action:a.action,payload:vh(a.payload)};case"get_form":return{action:a.action,payload:nv(a.payload)};case"get_predicted_agent":return{action:a.action,payload:(t=a.payload,{id:t.id,type:"agent",name:t.name,avatar:t.avatar,jobTitle:t.job_title,isBot:t.is_bot})};case"get_url_info":return{action:a.action,payload:rv(a.payload)};case"list_chats":return{action:a.action,payload:iv(a.payload)};case"list_group_statuses":return{action:a.action,payload:ov(a.payload)};case"list_threads":return{action:a.action,payload:cv(r,a.payload)};case fm:return{action:a.action,payload:sv(a.payload)};case"mark_events_as_seen":case"send_sneak_peek":case"set_customer_session_fields":case"send_rich_message_postback":case"update_chat_properties":case"update_customer":case mm:case"update_event_properties":case"update_thread_properties":return{action:a.action,payload:nh}}}({request:i.request,response:t});n({type:"response_received",payload:Object(q.a)({id:a,promise:o,resolve:c},s)})},dv=function(e,t){var n=e.dispatch;return t.on("connect",(function(){n({type:"socket_connected"})})),t.on("message",(function(t){if("response"===t.type){if(!t.success)return void function(e,t){var n,r=e.dispatch,a=e.getState,i=t.request_id,o=t.payload;r({type:"request_failed",payload:{id:i,reject:gm(a(),i).reject,error:(n=o.error,{code:n.type.toUpperCase(),message:n.message})}})}(e,t);switch(t.action){case"activate_chat":case"deactivate_chat":case"send_event":case"start_chat":return;default:return void lv(e,t)}}if("request_id"in t)switch(t.action){case"chat_deactivated":case"incoming_chat":case"incoming_event":return void function(e,t){var n=e.dispatch,r=e.getState,a=t.request_id,i=gm(r(),a),o=i.promise,c=i.resolve,s=uv(t);n({type:"push_response_received",payload:Object(q.a)({id:a,promise:o,resolve:c},s)})}(e,t)}!function(e,t){var n=uv(t);n&&e.dispatch({type:"push_received",payload:n})}(e,t)})),t.on("disconnect",(function(){eh(e,um),"connected"===vm(e.getState())&&e.dispatch({type:"socket_disconnected"})})),t.on("connection_unstable",(function(){n({type:"socket_unstable"})})),t.on("connection_recovered",(function(){n({type:"socket_recovered"})})),t.off},pv=function(e,t){return e.length?e+"\n"+t:t},fv=function(e,t,n){var r=n.filledForm,a=n.groupId,i=n.timeZone;return t.getToken().then((function(t){var n=e.getState();null===bm(n)&&e.dispatch(Bm(t.entityId));var o=jm(n)+"/v2/tickets/new",c=function(e,t){var n=t.fields,r=t.customerId,a=t.groupId,i=void 0===a?e.groupId:a,o=t.timeZone,c=Object(q.a)({licence_id:e.licenseId,ticket_message:"",offline_message:"",visitor_id:r,requester:{}},"number"===typeof i&&{group:i},e.page&&{source:{url:e.page.url}},o&&{timezone:o});return n.reduce((function(e,t){switch(t.type){case"subject":var n=t.answer,r=n?t.label+" "+n:t.label;return n&&(e.subject=n),e.offline_message=pv(e.offline_message,r),e;case"name":var a=t.answer,i=a?t.label+" "+a:t.label;return a&&(e.requester.name=a),e.offline_message=pv(e.offline_message,i),e;case"email":var o=t.answer,c=o?t.label+" "+o:t.label;return e.requester.mail=o,e.offline_message=pv(e.offline_message,c),e;case"question":case"textarea":var s=t.answer,u=s?t.label+" "+s:t.label;return e.offline_message=pv(e.offline_message,u),e.ticket_message=pv(e.ticket_message,u),e;case"radio":case"select":var l=t.answer&&t.answer.label,d=l?t.label+" "+l:t.label;return e.offline_message=pv(e.offline_message,d),e.ticket_message=pv(e.ticket_message,d),e;case"checkbox":var p=t.answers&&t.answers.map((function(e){return e.label})).join(", "),f=p?t.label+" "+p:t.label;return e.offline_message=pv(e.offline_message,f),e.ticket_message=pv(e.ticket_message,f),e;default:return e}}),c)}(n,{fields:r.fields,customerId:t.entityId,groupId:a,timeZone:i});return Object(R.a)(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){if(e.ok)return e.json().then((function(e){return Object(q.a)({},e,{text:c.ticket_message})}));if(400===e.status||422===e.status){var t=function(e){if(!e||!e.errors)throw new Error;var t=e.errors[0];if("incorrect requester structure"===Object.keys(t)[0])throw Im({message:t["incorrect requester structure"][0],code:"VALIDATION"});throw new Error};return e.json().then(t,t)}throw new Error}))}))},mv=function(e,t){if(void 0===t&&(t=2),e<1024)return e+" b";var n=e/1024;if(e<1048576)return n.toFixed(t)+" kb";var r=n/1024;return e<1073741824?r.toFixed(t)+" MB":(r/1024).toFixed(t)+" GB"},hv=function(e){if(e.size>10485760)throw Im({message:"The file is too big (max size is "+mv(10485760)+").",code:"TOO_BIG_FILE"})},vv=function(e,t){var n,r=e.auth,a=e.store,i=t.file,o=t.onProgress,c=!1;return{promise:new Promise((function(e,t){hv(i);var s=a.getState(),u=Object(P.a)({license_id:s.licenseId}),l=Om(s)+"/action/upload_file?"+u,d={file:i};r.getToken().then((function(r){c?t(new Error("Upload cancelled.")):(n=qc(l,d,{headers:{Authorization:r.tokenType+" "+r.accessToken},onProgress:o})).promise.then(e,(function(e){if(e.response){var n=e.response.error,r=n.type,a=n.message;t(Im({message:a,code:r.toUpperCase()}))}else t(e)}))}))})),cancel:function(){c||(c=!0,n&&n.cancel())}}},gv=function(e){e.env,e.licenseId,e.eventName;return Promise.resolve()},bv=function(e,t){void 0===t&&(t="production"),cm(e);var n=e.autoConnect,r=void 0===n||n,a=e.customerDataProvider,i=Object(te.a)(e,["autoConnect","customerDataProvider"]),o=function(e){var t=k.z,n=ee(),r=Object(F.d)(Em(wm(e)),t(Object(F.a)(n)));return r.addSideEffectsHandler=n.add,r}(Object(q.a)({},i,{env:t})),c=Object(V.a)(),s=Mh(o),u=sm(i,t);o.addSideEffectsHandler(Ch({emitter:c,socket:s,auth:u,customerDataProvider:a})),dv(o,s);var l=qm.bind(null,o),d=function(){o.dispatch({type:"start_connection"})},p=Object.freeze({acceptGreeting:function(e){var t=e.greetingId,n=e.uniqueId;return l(Lm("accept_greeting",{greeting_id:t,unique_id:n}))},activateChat:function(n){return gv({env:t,licenseId:e.licenseId,eventName:"chat_started"}),l(Lm("activate_chat",function(e){var t=Tm(e);return Object(q.a)({},t,{chat:Object(q.a)({},t.chat,{id:e.chat.id})})}(n)))},auth:u,cancelGreeting:function(e){var t=e.uniqueId;return l(Lm("cancel_greeting",{unique_id:t}))},cancelRate:function(e){var t=e.chatId,n=e.properties,r=void 0===n?["score"]:n;return p.listThreads({chatId:t}).then((function(e){var n=e.threads;if(!n.length)throw Im({message:'There is no thread in "'+t+'".',code:"MISSING_CHAT_THREAD"});return p.deleteThreadProperties({chatId:t,threadId:n[0].id,properties:{rating:r}})}))},connect:d,deactivateChat:function(e){var t=e.id;return l(Lm("deactivate_chat",{id:t}))},deleteChatProperties:function(e){var t=e.id,n=e.properties;return l(Lm("delete_chat_properties",{id:t,properties:n}))},deleteEventProperties:function(e){var t=e.chatId,n=e.threadId,r=e.eventId,a=e.properties;return l(Lm("delete_event_properties",{chat_id:t,thread_id:n,event_id:r,properties:a}))},deleteThreadProperties:function(e){var t=e.chatId,n=e.threadId,r=e.properties;return l(Lm("delete_thread_properties",{chat_id:t,thread_id:n,properties:r}))},destroy:function(){o.dispatch(Pm("manual"))},disconnect:function(){o.dispatch({type:"pause_connection"})},getChat:function(e){var t=e.chatId,n=e.threadId;return l(Lm("get_chat",{chat_id:t,thread_id:n}))},getChatHistory:function(e){var t=e.chatId;return Eh(p,t)},getCustomer:function(){return l(Lm("get_customer",{}))},getForm:function(e){var t=e.groupId,n=e.type;return l(Lm("get_form",{group_id:t,type:n}))},getPredictedAgent:function(e){void 0===e&&(e={});var t=e.groupId;return l(Lm("get_predicted_agent","number"===typeof t?{group_id:t}:{}))},getUrlInfo:function(e){var t=e.url;return l(Lm("get_url_info",{url:t}))},listChats:function(e){var t=void 0===e?{}:e,n=t.limit,r=void 0===n?10:n,a=t.pageId;return r>25?Promise.reject(new Error("Specified limit is too high (max 25).")):l(Lm("list_chats",{limit:r,page_id:a}))},listGroupStatuses:function(e){var t=(void 0===e?{}:e).groupIds;return l(Lm("list_group_statuses",t?{group_ids:t}:{all:!0}))},listThreads:function(e){var t=e.chatId,n=e.sortOrder,r=void 0===n?"desc":n,a=e.limit,i=e.pageId,o=e.minEventsCount;return l(Lm("list_threads",{chat_id:t,sort_order:r,limit:a,page_id:i,min_events_count:o}))},markEventsAsSeen:function(e){var t=e.chatId,n=e.seenUpTo;return l(Lm("mark_events_as_seen",{chat_id:t,seen_up_to:n}))},on:c.on,once:c.once,off:c.off,rateChat:function(e){var t=e.chatId,n=e.rating;return p.listThreads({chatId:t}).then((function(e){var r=e.threads;if(!r.length)throw Im({message:'There is no thread in "'+t+'".',code:"MISSING_CHAT_THREAD"});return p.updateThreadProperties({chatId:t,threadId:r[0].id,properties:{rating:n}})}))},sendEvent:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return l(function(e){var t=e.chatId,n=e.event,r=e.attachToLastThread,a={chat_id:t,event:Sm(n)};return r&&(a.attach_to_last_thread=!0),Lm("send_event",a)}(e))})),sendTicketForm:function(e){return fv(o,u,e)},sendRichMessagePostback:function(e){var t=e.chatId,n=e.threadId,r=e.eventId,a=e.postback;return l(Lm("send_rich_message_postback",{chat_id:t,event_id:r,thread_id:n,postback:a}))},setCustomerSessionFields:function(e){var t=e.sessionFields;return l(Lm("set_customer_session_fields",{session_fields:Am(t)}))},setSneakPeek:function(e){var t=e.chatId,n=e.sneakPeekText,r=o.getState();ym(r,t)&&xm(r)&&l(Lm("send_sneak_peek",{chat_id:t,sneak_peek_text:n})).catch(k.R)},startChat:function(n){return void 0===n&&(n={}),gv({env:t,licenseId:e.licenseId,eventName:"chat_started"}),l(Lm("start_chat",Tm(n)))},updateChatProperties:function(e){var t=e.id,n=e.properties;return l(Lm("update_chat_properties",{id:t,properties:n}))},updateCustomer:function(e){return l(Lm("update_customer",Rm(e)))},updateCustomerPage:function(e){o.dispatch({type:"update_customer_page",payload:Object(k.bb)(["title","url"],e)})},updateEventProperties:function(e){var t=e.chatId,n=e.threadId,r=e.eventId,a=e.properties;return l(Lm("update_event_properties",{chat_id:t,event_id:r,thread_id:n,properties:a}))},updateThreadProperties:function(e){var t=e.chatId,n=e.threadId,r=e.properties;return l(Lm("update_thread_properties",{chat_id:t,thread_id:n,properties:r}))},uploadFile:function(e){return vv({auth:u,store:o},e)}});return r?d():o.dispatch({type:"check_goals",payload:{sessionFields:"function"===typeof a?a().sessionFields:{}}}),p};function yv(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var xv={group_chooser:"select",header:"information",name:"text",question:"text",subject:"text",checkbox_for_email:"checkbox"},jv=function(e,t){return e.getSessionUser().serverId===t.authorId},Ov=function(e,t){return jv(e,t)?e.getSessionUser().id:t.authorId},wv=function(e,t){if("file"===t.type)return t.id;if(jv(e,t))return"customId"in t&&e.hasEvent("liveChatChatId",t.customId)?t.customId:t.id;var n=e.getEventByServerId("liveChatChatId",t.id);return n?n.id:t.id},_v=function(e){return e.groupIds?e.groupIds[0]:null},Cv=function(e,t){var n=e.getSessionUser().serverId,r=Object(k.I)(t.filter((function(e){return e.present&&e.id!==n})));return r?r.id:null},Ev=function(e,t){var n=t.chat,r=t.chat,a=r.thread,i=r.users;return{id:n.id,agent:Cv(e,i),events:a.events.map((function(t){return Rv(e,Object(T.a)({},t,{seen:!1}))})).filter(Boolean),group:_v(n.access),thread:a.id,properties:Lv(a)}},Iv=function(e,t){return Object(T.a)({},t,{type:e,fields:t.fields.reduce((function(e,t){var n=t.id,r=Object(A.a)(t,["id"]),a=Object(T.a)({},r,{type:xv[r.type]||r.type,serverName:n,serverType:r.type});if("information"===a.type)a.value=a.label.replace(/<br(\s)?(\/)?>/gi,"\n");else if("checkbox_for_email"===r.type)a.meta="confirm_subscription",a.label="",a.options=[{label:r.label,checked:r.checked,value:"index0_0",originalValue:"0"}],r.checked&&(a.defaultValue=[a.options[0].value]);else if(r.options){var i="group_select"===r.type;i&&(a.meta="groupSelect"),a.options=a.options.map((function(e,t){var n=i?e.groupId:e.id,r=Object(T.a)({},Object(k.T)(["id","checked","group"],e),{value:"index"+t+"_"+n,originalValue:n});return i&&(r.groupNumber=e.group),r}))}return a.name=Object(k.A)(r.type,["name","email","rating"])?r.type:Object(k.t)()+"_"+n,"rating"===r.type?[].concat(e,[a,{name:"rateComment",type:"textarea",label:a.commentLabel,required:!1,dependOn:"rating"}]):[].concat(e,[a])}),[])})},kv=function(e,t){return Dc(Iv("offline",t))},Sv=function(e,t){var n=e.getSessionUser().serverId,r=t[n],a=Object(A.a)(t,[n].map(yv));return{sessionUserSeenUpTo:r,latestOtherUserSeenUpTo:Object(k.I)(Object(k.vb)(a).filter(Boolean).sort())}},Tv=function(e,t){var n=t.thread,r=t.users,a=t.eventsSeenUpToMap,i=n.id,o=n.active,c=n.events,s=n.access,u=e.getSessionUser().serverId,l=Sv(e,a),d=l.sessionUserSeenUpTo,p=l.latestOtherUserSeenUpTo;return{thread:{id:i,active:o,agent:o?Cv(e,r):null,events:c.map((function(t){var n=t.authorId===u?p>=t.createdAt:d>=t.createdAt;return Rv(e,Object(T.a)({},t,{seen:n}))})).filter(Boolean),group:_v(s),properties:Lv(n)},eventsSeenUpToMap:a}},Av=function(e){var t=e.properties,n=Object(A.a)(e,["properties"]);if("lc2"in t){var r=t.lc2;if("greeting_unique_id"in r)return function(e,t){var n=Af(Object(T.a)({},e));return n.properties=Object(T.a)({},n.properties,{invitation:!0,id:t.greeting_id,uniqueId:t.greeting_unique_id}),n}(n,r);if(r.welcome_message)return function(e){return Af(Object(T.a)({},e,{welcomeMessage:!0}))}(n)}return function(e,t){return Af(t.url_details?Object(T.a)({},e,{urlDetails:t.url_details}):e)}(n,t)},Rv=function(e,t){var n=Object(T.a)({},t,{id:wv(e,t),serverId:t.id,authorId:Ov(e,t),timestamp:new Date(t.createdAt).getTime()});switch(n.type){case"filled_form":return Pv(n);case"message":return Av(n);case"rich_message":return function(e){if("lc2"in e.properties&&"greeting_unique_id"in e.properties.lc2){var t=Mf(e);return t.properties=Object(T.a)({},t.properties,{invitation:!0,id:e.properties.lc2.greeting_id,uniqueId:e.properties.lc2.greeting_unique_id}),t}return Mf(e)}(n);case"file":return Nf(n);case"system_message":return Mv(n);default:return null}},Pv=function(e){return Object(T.a)({},Sf(e),{type:"form",properties:{answered:!0,formId:e.formId,formType:e.properties.lc2.form_type,fields:e.fields.filter((function(e){return"answer"in e||"answers"in e&&0!==e.answers.length})).map((function(e){if("string"===typeof e.answer)return e;if("answers"in e){var t=e.answers,n=Object(A.a)(e,["answers"]);return Object(T.a)({},n,{answer:t.map((function(e){return e.label}))})}return Object(T.a)({},e,{answer:e.answer.label})}))}})},Mv=function(e){switch(e.systemMessageType){case"archived_customer_disconnected":case"routing.archived_inactive":return zf(Object(T.a)({},e,{systemMessageType:"client_inactive"}));case"manual_archived_agent":return zf(Object(T.a)({},e,{systemMessageType:"operator_closed_session",textVars:{operator:e.textVars.agent}}));case"manual_archived_customer":return zf(Object(T.a)({},e,{systemMessageType:"chat_closed_by_customer"}));case"system_archived":case"customer_banned":case"routing.archived_deleted":case"routing.archived_disconnected":case"routing.archived_offline":case"routing.archived_other":case"routing.archived_remotely_signed_out":case"routing.archived_signed_out":return zf(Object(T.a)({},e,{systemMessageType:"chat_session_closed"}));case"routing.assigned_other":return zf(Object(T.a)({},e,{systemMessageType:"user_transfer",textVars:{operator:e.textVars.agent}}));case"routing.assigned_deleted":case"routing.assigned_disconnected":case"routing.assigned_inactive":case"routing.assigned_remotely_signed_out":case"routing.assigned_signed_out":return zf(Object(T.a)({},e,{systemMessageType:"user_transfer",textVars:{operator:e.textVars.agent_added}}));case"chat_transferred":return zf(Object(T.a)({},e,{systemMessageType:"user_transfer",textVars:{operator:e.textVars.targets}}));case"agent_joined":case"agent_added":return zf(Object(T.a)({},e,{systemMessageType:"operator_joined_conference",textVars:{operator:e.textVars.agent}}));case"agent_left":case"agent_removed":return zf(Object(T.a)({},e,{systemMessageType:"operator_left_conference",textVars:{operator:e.textVars.agent}}));case"rating.chat_rated":return zf(Object(T.a)({},e,{systemMessageType:"rate_me_confirmation_"+e.textVars.score}));case"rating.chat_commented":return zf(Object(T.a)({},e,{systemMessageType:"rate_me_comment_added",textVars:{comment:e.textVars.comment}}));case"rating.chat_rating_canceled":return zf(Object(T.a)({},e,{systemMessageType:"rate_me_cancel"}));case"custom":e.systemMessageType;var t=Object(A.a)(e,["systemMessageType"]);return zf(t);default:return null}},Nv=function(e){var t=e.score,n=e.comment;return Object(T.a)({},"number"===typeof t&&{rate:1===t?"good":"bad"},"string"===typeof n&&{rateComment:n})},zv=function(e){return{position:e.position,waitingTime:e.waitTime}},Lv=function(e){return Object(T.a)({},"rating"in e.properties&&Nv(e.properties.rating),e.queue&&{queue:zv(e.queue)})},Dv=function(e,t){var n,r={event:Rv(e,t.event),author:Object(T.a)({},t.agent,{type:"agent"})};return r.event.properties=Object(T.a)({},r.event.properties,{invitation:!0,id:t.id,addon:t.addon,uniqueId:t.uniqueId,accepted:t.accepted,type:(n=r.event,n.properties.quickReplies?"quick_replies":"rich_message"===n.type?"card":"plain_text"),receivedFirstTime:t.displayedFirstTime}),r},Bv=function(e,t){var n=t.type,r=t.id;switch(n){case"filled_form":return t;case"emoji":case"message":case"message_draft":case"url_preview":var a=t.properties,i=a.text,o=a.triggeredBy,c={type:"message",customId:r,text:i};if(o){var s=e.getEvent("liveChatChatId",o.event);c.postback={id:o.button.postbackId,type:"message",value:o.button.value,eventId:s.serverId,threadId:s.thread}}return c;case"custom_system_message":var u=t.properties,l=u.recipients;return{type:"system_message",customId:r,text:u.text,recipients:l,systemMessageType:"custom"};default:return void 0}},qv=function(e,t){var n=En(e,"liveChatChatId");return n?Object(T.a)({},t,{events:t.events.map((function(e){return e.properties.welcomeMessage||e.properties.invitation?Object(T.a)({},e,{id:n.id}):e}))}):t},Fv=function(e){return Object(T.a)({},e,{properties:Object(T.a)({},e.properties,{accepted:!0})})},Vv=function(e,t){var n=e.sdk,r=t.event.properties,a=r.uniqueId,i=r.id;return n.acceptGreeting({greetingId:i,uniqueId:a}).then((function(){return Fv(t)}),(function(e){if("INTERNAL"===e.code)return Fv(t);throw e}))},Uv=function(e,t){var n=e.sdk,r=e.store,a=void 0===t?{}:t,i=a.group,o=a.customerStartingEvent,c=a.agentFakeEvent,s=r.getSessionUser();"Customer"!==s.name&&s.name||n.updateCustomer({name:r.localize("client")}).catch(k.R);var u=r.getChat("liveChatChatId").serverId,l=1520===r.getApplicationState().license,d=r.getEvents("liveChatChatId").filter((function(e){return"message_draft"===e.type&&null===e.serverId})),p={chat:{thread:{}}};if(gn(r)&&(p.continuous=!0,p.chat.properties={routing:{email_follow_up:!0}}),Object(k.C)(d)||(p.chat.thread.events=d.map((function(e){return Bv(r,e)}))),l||(p.chat.access={groupIds:["number"===typeof i?i:r.getApplicationState("group")]}),o){var f=Bv(r,o);Object(k.B)(p.chat.thread.events)?p.chat.thread.events.push(f):p.chat.thread.events=[f]}return c&&(p.chat.thread.properties=function(e){return{lc2:Object(T.a)({welcome_author_id:e.author,welcome_text:e.properties.originalText||e.properties.text},e.properties.invitation&&{greeting_id:e.properties.id,greeting_unique_id:e.properties.uniqueId})}}(c)),u?n.activateChat(Object(T.a)({},p,{chat:Object(T.a)({},p.chat,{id:u})})).then((function(e){return qv(r,Ev(r,e))})):n.startChat(p).then((function(e){return qv(r,Ev(r,e))}))},Gv=function(e){return e.sdk.listChats().then((function(e){var t=e.chatsSummary,n=Object(k.I)(t);return n?function(e){var t=e.id,n=e.active,r=e.access;return{id:t,active:n,lastThreadId:e.lastThreadId,group:_v(r)}}(n):null}))},Hv=function(e,t){var n=e.sdk,r=t.groupIds;return n.listGroupStatuses({groupIds:r}).then((function(e){return r.reduce((function(t,n){var r=e[n];return t[n]=r?function(e){return"offline"===e?"offline":"online"}(r):"not_found",t}),{})}))},Wv=function(e,t){return Object(R.a)(t+"?acao=true").then((function(e){return e.json()})).then((function(e){var t=e.localization;return Object(k.K)((function(e){return e.toLowerCase()}),t)}))},Yv=function(e,t,n){var r=e.sdk;return void 0===n&&(n=Iv),r.getForm(t).then((function(e){return e.enabled?{enabled:!0,form:n(t.type,e.form)}:e})).catch((function(e){return jr("get_form_request_failed",e),{enabled:!1}}))},Kv=function(e,t){return Yv(e,{groupId:t,type:"postchat"})},Qv=function(e,t){return Yv(e,{groupId:t,type:"ticket"},kv)},Zv=function(e,t){var n=e.sdk,r=t.chatId;return n.getChat({chatId:r}).then((function(e){return{users:e.users,eventsSeenUpToMap:e.eventsSeenUpToMap}}))},Jv=function(e,t){var n=e.sdk,r=e.store,a=t.chatId,i=t.threadId;return n.getChat({chatId:a,threadId:i}).then((function(e){return Tv(r,e)}))},Xv=function(e,t){return t.next().then((function(t){var n=t.value,r=t.done;return n?{value:n.threads.map((function(t){return function(e,t){var n=t.thread,r=n.id,a=n.active,i=n.events,o=n.access,c=e.getChat("liveChatChatId").properties.eventsSeenUpToMap,s=e.getSessionUser().serverId,u=Sv(e,c),l=u.sessionUserSeenUpTo,d=u.latestOtherUserSeenUpTo;return{id:r,active:a,events:i.map((function(t){var n=t.authorId===s?d>=t.createdAt:l>=t.createdAt;return Rv(e,Object(T.a)({},t,{seen:n}))})).filter(Boolean),group:_v(o),properties:Lv(n)}}(e,{thread:t})})),done:r}:{value:n,done:r}}))},$v=function(e,t){var n=e.sdk,r=e.store,a=n.getChatHistory({chatId:t});return Promise.all([a.next(),Zv({sdk:n,store:r},{chatId:t})]).then((function(e){var t=e[0],n=t.value,i=t.done,o=e[1],c=o.users,s=o.eventsSeenUpToMap,u=Object(k.G)("id",c);if(n&&n.threads.some((function(e){return e.events.some((function(e){return"system"!==e.authorId&&!(e.authorId in u)}))}))){var l=new Error;throw l.code="MISSING_USER",l}return{threads:n&&n.threads.map((function(e){return Tv(r,{thread:e,users:c,eventsSeenUpToMap:s}).thread})),eventsSeenUpToMap:s,hasMore:!i,iterator:{next:function(){return Xv(r,a)}}}}))},eg="SET",tg=function(e,t){switch(t.code){case"TOO_BIG_FILE":return e.localize("cannot_upload_a_file_over_10mb");case"VALIDATION":return"No active chat thread"===t.message?e.localize("closed_chat_upload_failed"):e.localize("upload_failed");default:return e.localize("upload_failed")}},ng=function(e){return Dc(Lc(e))},rg=function(e){var t=e.localization_url;return"https://"+e.serv+t},ag=function(e){var t=e.getChat("liveChatChatId").properties,n=t.rate,r=t.rateComment,a=t.queued,i=e.getView("Chat/queue");return{rate:n,rateComment:r,queue:a?{position:i.numberInQueue,waitingTime:i.waitingTime}:null}},ig={acceptingGreeting:!1,requestingPredictedWelcomeMessage:!1},og=function(e,t,n){var r=!t.getApplicationState("clientLimitExceeded"),a=function(e,t){var n=t.license,r=t.requestedGroup,a=t.region,i=t.uniqueGroups,o=t.autoConnect,c=t.mobile,s=e.getApplicationState("page"),u={licenseId:n,clientId:"c5e4f61e1a6c3b1521b541bc5c5a2ac5",mobile:c,region:a,page:Object(k.Y)(["url","title"],s),referrer:s.referrer,autoConnect:o,application:{channelType:ur(e)},uniqueGroups:i,customerDataProvider:function(){var t=e.getSessionUser(),n={};return t.name&&(n.name=t.name),t.email&&(n.email=t.email),t.properties&&!Object(k.C)(t.properties)&&(n.sessionFields=Object(k.H)(t.properties).length<=20?t.properties:Object(k.s)(Object(k.j)(t.properties).slice(0,20))),n}};return null!==r&&(u.groupId=r),bv(u,"production")}(t,Object(T.a)({},e,{autoConnect:r})),i={sdk:a,store:t},o=U(),c=null,s={};!0===n.s&&t.setApplicationState({s:!0}),n.pre_chat_survey&&t.updateView("Chat/prechat",qf("prechat",Lc(n.pre_chat_survey))),n.offline_form&&t.updateView("Chat/offline",qf("offline",ng(n.offline_form))),n.group_properties.chat_boosters&&function(e,t){try{var n=JSON.parse(t).filter((function(e){return"moment"===e.template_id}));if(Object(k.C)(n))return;ki(e,"boosters",{items:n.map((function(e){var t={type:"button",label:e.action.label,url:e.action.url};return e.action.webview_height&&(t.webviewHeight=e.action.webview_height),{id:e.id,template:e.template_id,title:e.title,description:e.description,icon:e.icon,action:t}}))})}catch(r){}}(t,n.group_properties.chat_boosters);var u=function(){(Tn("liveChatChatId",t)||t.getApplicationState().destroyed)&&t.updateView("minimized",{hidden:!0})},l=function(){a.destroy(),t.setApplicationState({destroyed:!0}),u()},d=function(){return t.getChat("liveChatChatId").serverId},p=function(e,n){bn(t)&&!c&&(c=n||function(e,t){var n=e.sdk,r=e.store,a=n.getChatHistory({chatId:t});return{next:function(){return Xv(r,a)}}}(i,{chatId:e}))},f=function(e){var n=e.id,r=e.group,a=e.thread,i=e.agent,o=e.events,c=e.properties,s=!!c.queue;if(p(n),o.forEach(_),bi(t,{id:n,thread:a,group:r,queued:s,agent:i}),Jn(t)){var u=c.queue,l=u.position,d=u.waitingTime;t.updateView("Chat/queue",{numberInQueue:l,waitingTime:d})}},m=function(){return t.getChat("liveChatChatId").properties.lastThread},h=function(e){return"good"===e?1:"bad"===e?0:null},v=function(e){return a.rateChat({chatId:d(),rating:Object(k.d)({comment:e.rateComment,score:h(e.rating)})}).then((function(){t.updateChat("liveChatChatId",{properties:Object(k.d)({rate:e.rating,rateComment:e.rateComment})})}),k.R)},g=function(e){return a.cancelRate({chatId:d(),properties:e}).then((function(){t.updateChat("liveChatChatId",{properties:e.reduce((function(e,t){return"comment"===t?e.rateComment=null:"score"===t&&(e.rate=null),e}),{})})}),k.R)},b=function(e){var n=t.getChat("liveChatChatId").properties,r=n.rate,a=n.rateComment,i={comment:"NOTHING",score:"NOTHING"};e.rating!==r&&(i.score=null===e.rating?"CANCEL":eg);var o="string"===typeof e.rateComment&&""!==e.rateComment;return a&&!o||"CANCEL"===i.score&&a?i.comment="CANCEL":!o||a&&e.rateComment===a||(i.comment=eg),i},y=function(){return Qv(i,t.getApplicationState("group")).then((function(e){e.enabled?(t.updateView("Chat/offline",e.form),Ai(t),t.setCurrentView("Chat")):t.setCurrentView("Chat")}))},x=function(){var e=ar(t);pi(t),e||Kv(i,j()).then((function(e){var n=e.enabled,r=e.form;n&&_i(t,r)}),k.R)},j=function(){var e=t.getChat("liveChatChatId").properties.group,n=t.getApplicationState("group");return"number"===typeof e?e:n},O=function(e){var n=function(e){if("customer"===e.type){var t={id:e.id,type:e.type,name:e.name,email:e.email||null,properties:e.fields};return"Customer"!==e.name&&(t.name=e.name),t}return{id:e.id,type:e.type,name:e.name,avatar:"https://"+Object(P.k)(e.avatar),properties:{jobTitle:e.jobTitle,isBot:e.isBot||!1}}}(e);t.getSessionUser().serverId!==n.id?t.getUser(n.id)?n.properties.isBot&&t.updateUser(n.id,{properties:{isBot:!0}}):t.addUser(n):t.updateUser(t.getSessionUserId(),Object(k.bb)(["name","email","properties"],n))},w=function(e){var n=ag(t),r={};if("rate"in e&&n.rate!==e.rate&&(r.rate=e.rate),"rateComment"in e&&n.rateComment!==e.rateComment&&(r.rateComment=e.rateComment),"queue"in e&&!Object(k.gb)(n.queue,e.queue)){var a=e.queue;!t.getChat("liveChatChatId").properties.ended&&a?function(e,t){var n=t.thread,r=t.numberInQueue,a=t.waitingTime,i={active:!0,properties:{queued:!0}};n&&(i.properties.lastThread=n),e.updateChat("liveChatChatId",i),e.updateView("Chat/queue",{numberInQueue:r,waitingTime:a})}(t,{numberInQueue:a.position,waitingTime:a.waitingTime}):r.queued=!1}t.updateChat("liveChatChatId",{properties:r})},_=function(e){ui(t,"liveChatChatId",e),"message"===e.properties.serverType&&t.getApplicationState("ready")&&Vf(t,e.id)},C=function(e){var n=Rv(t,e);n&&_(n)},E=function(e){var n=e.author,r=e.event;O(n);var a=t.getChat("liveChatChatId"),i=a.serverId;a.properties.ended&&Ci(t,"liveChatChatId",{chatId:i});var o=En(t,"liveChatChatId");o&&t.removeEvent("liveChatChatId",o.id),Ni(t),Ti(t,r)},I=function(e){if(!ig.requestingPredictedWelcomeMessage)if(Gn(t,"postchat"))t.updateChat("liveChatChatId",{properties:{postponedGreeting:e}});else if(Sn("liveChatChatId",t)){if(!e.event.properties.accepted)return ig.acceptingGreeting=!0,Vv(i,e).then((function(e){ig.acceptingGreeting=!1,E(e)}),(function(){ig.acceptingGreeting=!1}));E(e)}},S=function(e){return!!e&&-1!==e.indexOf(t.getApplicationState("group"))};a.on("thread_properties_deleted",(function(e){var n=e.threadId,r=e.properties;n===m()&&"rating"in r&&Object(k.A)("score",r.rating)&&w(Object(T.a)({},ag(t),{rate:null}))})),a.on("thread_properties_updated",(function(e){var n=e.threadId,r=e.properties;n===m()&&"rating"in r&&w(Object(T.a)({},ag(t),Nv(r.rating)))})),a.on("queue_position_updated",(function(e){var n=e.threadId,r=e.queue;n===m()&&w(Object(T.a)({},ag(t),{queue:zv(r)}))})),a.on("chat_transferred",(function(e){if("groupIds"in e.transferredTo){var n=e.transferredTo.groupIds[0];t.updateChat("liveChatChatId",{properties:{group:n}}),e.queue&&w(Object(T.a)({},ag(t),{queue:zv(e.queue)}))}})),a.on("customer_updated",(function(e){var n=e.customer,r=t.getSessionUserId();t.updateUser(r,Object(k.bb)(["name","email"],n)),n.sessionFields&&t.setUserProperties(r,n.sessionFields),t.emit("customer_updated")})),a.on("event_updated",(function(e){var n=e.chatId,r=e.threadId,a=e.event;if(n===d()&&r===m()&&Object(k.v)("properties.lc2.welcome_message",a)){var i=t.getEventByServerId("liveChatChatId",a.id);a.authorId!==i.author&&(t.setEventData("liveChatChatId",i.id,{author:a.authorId}),t.recalculateTimeline("liveChatChatId")),a.text!==i.properties.text&&t.updateEvent("liveChatChatId",i.id,{properties:{text:a.text}})}})),t.on("set_application_state",(function(e){var n=e.pageFocused;Rn(t)&&n&&(t.setConnectionState(mn),a.connect())})),a.on("disconnected",(function(e){var n=e.reason;switch(n){case"product_version_changed":case"wrong_product_version":return void t.emit("protocol_upgraded",{version:"2"});case"access_denied":case"identity_mismatch":case"too_many_connections":return jr(n),void l();case"customer_banned":case"license_not_found":case"unsupported_version":case"users_limit_reached":return void l();case"inactivity_timeout":return void(t.getApplicationState("pageFocused")||(t.setConnectionState(fn),a.disconnect()));default:return void t.setConnectionState(mn)}})),a.on("user_added_to_chat",(function(e){var n=e.chatId,r=e.user;if(e.present&&n===d()&&t.getSessionUser().serverId!==r.id){var a=hn("liveChatChatId",t);a&&a.id===r.id||(w(Object(T.a)({},ag(t),{queue:null})),Oi(t,r.id))}})),a.on("user_removed_from_chat",(function(e){var n=e.chatId,r=e.userId;if(n===d()&&(t.removeParticipant("liveChatChatId",r),t.getSessionUser().serverId!==r)){var a=hn("liveChatChatId",t);a&&a.id===r&&(t.getChat("liveChatChatId").properties.ended||Oi(t,null))}})),a.on("user_data",O);var R=function(){Tn("liveChatChatId",t)&&gi(t),t.setApplicationState({ready:!0})},M=function(e){var t=e.dynamicConfig,r=e.chatId,a=function(e,t){var n=e.monitoring,r=e.chats,a=Object.keys(r).find((function(e){return Object(k.A)(t,r[e].chat_ids)}));if(a!==n.id)return r[a].language_config_url?r[a].language_config_url:void 0}(t.customer_groups,r);if(a){var i=rg({localization_url:a,serv:n.serv});return{queueTemplate:Wv(0,i).then((function(e){return e.user_in_queue}))}}},N=function(e){var n=e.active,r=e.chatId,a=e.lastThreadId,o=e.becameInactive;if(bn(t))return{fetchedHistory:$v(i,r)};if(o){var c=t.getChat("liveChatChatId");return{fetchedThread:Jv(i,{chatId:r,threadId:c.properties.lastThread})}}return n?{fetchedThread:Jv(i,{chatId:r,threadId:a})}:void 0},z=function(e){e.filter((function(e){return!t.hasEvent("liveChatChatId",e.id)})).forEach(_)},L=function(e,n){var r=e.eagerFetchingMode,a=n.thread,i=a.id,o=a.active,c=a.agent,s=a.group,u=a.events,l=a.properties,d=n.eventsSeenUpToMap,p=t.getChat("liveChatChatId"),f=!o&&p.active;t.updateChat("liveChatChatId",{active:o,properties:Object(T.a)({ended:p.properties.ended,lastThread:i,group:s,eventsSeenUpToMap:d},f&&{ended:!0,queued:!1,agentIsTyping:!1})}),o&&Oi(t,c),w(Object(T.a)({rate:null},l,{queue:o&&"queue"in l?l.queue:null},!r&&!o&&{rate:null,rateComment:null})),o&&Ni(t),z(u)},D=function(e){null===Cn(t,"liveChatChatId")&&t.updateChat("liveChatChatId",{properties:{hasMoreHistory:e}})};a.on("connected",(function(e){var n,r=e.__unsafeDynamicConfig,c=e.__unsafeChats,l=e.greeting,d=e.availability,f=e.customer,h=function(e){var n=t.getSessionUser(),r={};return n.name&&e.name!==n.name&&(r.name=n.name),n.email&&e.email!==n.email&&(r.email=n.email),Object(k.C)(n.properties)||Object(k.gb)(n.properties,e.sessionFields)||(r.sessionFields=Object(k.C)(e.sessionFields)?n.properties:Object(k.s)(Object(k.j)(n.properties).reduce((function(t,n){var r=n[0],a=n[1];return r in e.sessionFields?t:[].concat(t,[[r,a]])}),[]))),Object(k.C)(r)?null:r}(f);h&&function(e){var t=e.customerData,n=e.usedSessionFieldsNumber,r=function(e){a.updateCustomer(e).catch((function(e){return jr("update_customer_request_failed",e)}))};t.sessionFields?Object(k.j)(t.sessionFields).slice(0,100-n).reduce((function(e,t){return Object(k.C)(e)||Object(k.I)(e).length>=20?e.push([t]):Object(k.I)(e).push(t),e}),[]).map(k.s).reduce((function(e,n,a){return e.then((function(){return r(Object(T.a)({},0===a&&t,{sessionFields:n}))}))}),Promise.resolve()):r(t)}({customerData:h,usedSessionFieldsNumber:Object(k.H)(f.sessionFields||{}).length}),O(f),"boolean"!==typeof t.getApplicationState().isReturning&&t.setApplicationState({isReturning:f.statistics.visitsCount>1}),t.setApplicationState({clientChatNumber:f.statistics.threadsCount||0,clientVisitNumber:f.statistics.visitsCount||0}),s={availability:d,greeting:kn(t)&&l&&Dv(t,l)},Promise.resolve().then((function(){if(c.length){var e=c[0],a=e.id,o=e.active,s=e.hasUnreadEvents;bn(t)&&t.setApplicationState({hasUnseenEvents:s});var u=!o&&t.getChat("liveChatChatId").active;n={active:o,chatId:a,becameInactive:u,dynamicConfig:r},null===t.getChat("liveChatChatId").serverId&&t.setChatServerId("liveChatChatId",a);var l=t.getApplicationState(),d=l.maximized,p=l.eagerFetchingMode;if(o||d||p)return Gv(i)}})).then((function(e){return e?(n.group=e.group,n.lastThreadId=e.lastThreadId,n.becameInactive?kf(Object(T.a)({chatSummary:e},function(e){var n=e.group;if(!ar(t)){var r=bn(t)?n:j();return{postchatForm:Kv(i,r).catch((function(){return{enabled:!1}}))}}}(n),N(n))):e.active?kf(Object(T.a)({chatSummary:e},M(n),N(n))):kf(Object(T.a)({chatSummary:e},N(n)))):kf({})})).then((function(e){return!!e.chatSummary&&e.chatSummary.active?e:kf(Object(T.a)({},e,{maximizedDecisionActions:ce()?oe({active:!1,availability:s.availability,connected:!0,hasFakeAgentMessage:In(t,"liveChatChatId")||!!s.greeting}):null}))})).then((function(e){var n=e.queueTemplate,r=e.chatSummary,a=e.postchatForm,i=e.maximizedDecisionActions,o=Object(A.a)(e,["queueTemplate","chatSummary","postchatForm","maximizedDecisionActions"]),c=s;if(s={},n&&t.setLocalization({user_in_queue:n}),t.setApplicationState({availability:c.availability}),!r)return i&&(Ni(t),fe(i)),c.greeting?I(c.greeting):void 0;var u={chatId:r.id,eagerFetchingMode:t.getApplicationState().eagerFetchingMode};t.setApplicationState({eagerFetchingMode:!0});var l=m()&&r.lastThreadId!==m();if(bn(t)){var d=o.fetchedHistory;(function(e,t){var n=e.getChat("liveChatChatId").properties.lastThread;return n&&!t.some((function(e){var t=e.id;return n===t}))})(t,d.threads)&&jr("threads_gap",null,{meta:JSON.stringify({stateLastThreadId:t.getChat("liveChatChatId").properties.lastThread,fetchedThreads:d.threads.map((function(e){return e.id}))})}),l&&Ci(t,"liveChatChatId",{chatId:t.getChat("liveChatChatId").serverId}),function(e,t){p(e.chatId,t.iterator),D(t.hasMore);var n=Object(k.ib)(-1,t.threads),r=n[0],a=n[1][0];z(Object(k.q)((function(e){return e.events}),r)),L(e,{thread:a,eventsSeenUpToMap:t.eventsSeenUpToMap})}(u,d)}else o.fetchedThread&&(l&&r.active&&Ci(t,"liveChatChatId",{chatId:t.getChat("liveChatChatId").serverId}),L(u,o.fetchedThread));if(i&&(Ni(t),fe(i)),!r.active)if(a&&a.enabled)_i(t,a.form);else if(c.greeting)return I(c.greeting)})).then((function(){t.setDefaultView("Chat","timeline"),t.setConnectionState(pn),u(),t.getChat("liveChatChatId").active&&t.setApplicationState({hidden:!1}),o.resolve()})).then((function(){var e=t.getChat("liveChatChatId"),n=t.getApplicationState().availability;gn(t)&&Vn(t)&&!e.active&&("offline"===n||e.properties.ended)&&wi(t)})).catch((function(e){switch(s={},e.code){case"CONNECTION_LOST":return;case"REQUEST_TIMEOUT":case"MISSING_USER":return a.disconnect(),void a.connect();case"INTERNAL":return void wr("connection_fetcher_internal_error");default:return void jr("connection_fetcher_error",e)}}))})),Ei(Ps(n),t),a.once("customer_id",(function(e){return Di(t,e)}));var B=ba(t),q=function(e){return Qr()(B,ea(e))},F=Qr()(ga(t,(function(e){return e.application.maximized})),Lr()(Boolean),$r()((function(){return{type:"maximized"}})),sa.a),V=Qr()(ga(t,(function(){return t.getSessionUser().serverId})),Lr()(Boolean),fa()(1),va.a);r?(t.setApplicationState({clientLimitExceededLifted:!0}),Wv(0,rg(n)).then(t.setLocalization).then((function(){return o.promise})).then(R)):Promise.all([Wv(0,rg(n)),V]).then((function(e){var r,i=e[0];t.setLocalization(i),r=n.skills_online,t.setApplicationState({availability:S(r)?"online":"offline"}),t.setConnectionState("fakely_connected"),u(),R();var o,c,s=(o=document,c=["click","touchstart"],Ur.a.apply(void 0,c.map((function(e){return Object(Fr.a)(o,e)}))));Qr()(Ur()(s,F),fa()(1),qr()((function(){t.setApplicationState({clientLimitExceededLifted:!0}),a.connect()})))})),"ononline"in window&&(a.on("connection_unstable",(function(){t.setConnectionState(mn)})),a.on("connection_recovered",(function(){t.setConnectionState(pn)}))),a.on("incoming_greeting",(function(e){if(kn(t)){var n=Dv(t,e);An(t)?I(n):s.greeting=n}})),a.on("availability_updated",(function(e){var n=e.availability;An(t)?t.setApplicationState({availability:n}):s.availability=n})),a.on("events_marked_as_seen",(function(e){var n,r=e.chatId,a=e.userId,i=e.seenUpTo;if(r===d()){t.updateChat("liveChatChatId",{properties:{eventsSeenUpToMap:Object(T.a)({},t.getChat("liveChatChatId").properties.eventsSeenUpToMap,(n={},n[a]=i,n))}});var o=new Date(i).getTime();(t.getSessionUser().serverId===a?jn:xn)("liveChatChatId",o,t).forEach((function(e){t.updateEvent("liveChatChatId",e.id,{seen:!0})}))}})),a.on("incoming_event",(function(e){var n=e.chatId,r=e.event;n===d()&&("postchat"===Object(k.v)("properties.lc2.form_type",r)&&(!function(e){Bi(e,"postchat")}(t),t.setDefaultView("Chat","timeline")),Ln("liveChatChatId",t)&&jr("received_event_during_chat_starting"),C(r))})),a.on("chat_deactivated",(function(e){e.chatId===d()&&x()})),a.on("incoming_chat",(function(e){Ci(t,"liveChatChatId",{chatId:t.getChat("liveChatChatId").serverId});var n=Ev(t,e);f(n)}));var G=function(e){var n=e.chatId,r=e.typingIndicator;if(n!==d())return!1;var a=hn("liveChatChatId",t);return!!a&&a.id===r.authorId},H=Qr()(Gr(a,"incoming_typing_indicator"),Lr()((function(e){return e.typingIndicator.isTyping&&G(e)})),$r()((function(){return!0}))),W=Qr()(Gr(a,"incoming_typing_indicator"),Lr()((function(e){return!e.typingIndicator.isTyping&&G(e)})),$r()((function(){return!1}))),Y=Qr()(Gr(a,"new_event"),Lr()((function(e){var n=e.chatId,r=e.event;return n===d()&&r.authorId!==t.getSessionUser().serverId&&"system"!==r.authorId})));Qr()(Ur()(Qr()(H,Lr()((function(){return!t.getChat("liveChatChatId").properties.messageDraft}))),W,Qr()(Y,$r()((function(){return!1})))),ea((function(e){return e?Object(Ir.a)(Object(oa.a)(!0),Qr()(Object(ha.a)(1e4),$r()((function(){return!1})))):Object(oa.a)(!1)})),Object(Rr.a)(),qr()((function(e){t.updateChat("liveChatChatId",{properties:{agentIsTyping:e}})})));Qr()(ga(t,(function(){return t.getChat("liveChatChatId").properties.loadingHistory})),Lr()(Boolean),qr()((function e(){c.next().then((function(n){var r=n.value,a=n.done,i=t.getTimeline("liveChatChatId").length,o=Object(k.q)((function(e){return e.events.map((function(e){return Object(T.a)({},e,{seen:!0})}))}),r).filter((function(e){return!t.hasEvent("liveChatChatId",e.id)}));o.length>0&&t.addHistoryEvents("liveChatChatId",o),i!==t.getTimeline("liveChatChatId").length||a?t.updateChat("liveChatChatId",{properties:{loadingHistory:!1,hasMoreHistory:!a}}):e()}),(function(){t.updateChat("liveChatChatId",{properties:{loadingHistory:!1}})}))}))),t.on("request_update_chat",(function(e){var n=e.resolve,r=e.reject,i=e.data,o=i.properties,c=void 0===o?{}:o,s=Object(A.a)(i,["properties"]);if(c.rateComment){var u=c.rateComment;Wf(t,u),a.rateChat({chatId:d(),rating:{comment:u}}).then(n,r)}else if("undefined"!==typeof c.rate){Yf(t,c.rate);var l=t.getApplicationState().testGroup;if(_r({testGroup:l,chatRating:null===c.rate?"canceled":c.rate,chatRatingSource:"other"}),null===c.rate)return void a.cancelRate({chatId:d()}).then((function(){t.updateChat("liveChatChatId",{properties:{rateComment:null}}),n()}),r);a.rateChat({chatId:d(),rating:{score:h(c.rate)}}).then(n,r)}else c.transcriptSentTo?a.updateThreadProperties({chatId:d(),threadId:m(),properties:{routing:{transcript_email:c.transcriptSentTo}}}).then(n,r):!1===s.active?a.deactivateChat({id:d()}).then((function(){x(),n()}),r):"string"===typeof c.messageDraft&&(t.getChat("liveChatChatId").active&&a.setSneakPeek({chatId:d(),sneakPeekText:c.messageDraft}),n())}));var K=function(e){return"subject"===e.serverType?"subject":"name"===e.name?"name":"text"===e.type?"question":e.type},Q=function(e,t){var n=e.id,r=e.properties,a=r.formType,i=r.formId,o=r.fields,c=Bf(o,t),s=c.fields,u={filledForm:{customId:n,type:"filled_form",formId:i,fields:o.filter((function(e){return void 0!==e.serverName&&"rating"!==e.type&&"information"!==e.type})).map((function(e){if("groupSelect"===e.meta)return{type:"group_chooser",id:e.serverName,label:Tc(e.label),answer:{id:String(c.choosenGroupIndex),groupId:c.choosenGroup,label:e.options[c.choosenGroupIndex].label}};if("confirm_subscription"===e.meta){var t=s[e.serverName];return{type:"checkbox_for_email",id:e.serverName,label:e.options[0].label,answer:!!t&&Object(k.A)(e.options[0].originalValue,t)}}if(Object(k.B)(e.options)){var n={type:K(e),id:e.serverName,label:Tc(e.label)},r=Object(k.y)(e.serverName,s)?Object(k.i)(s[e.serverName]):[],a=e.options.filter((function(e){return Object(k.A)(e.originalValue,r)})).map((function(e){return{label:e.label,value:e.originalValue}}));if("checkbox"===n.type)n.answers=a.map((function(e){return{label:e.label,id:e.value}}));else if(a.length){var i=a[0];n.answer={id:i.value,label:i.label}}return n}return Object(k.y)(e.serverName,s)?{type:K(e),id:e.serverName,label:Tc(e.label),answer:s[e.serverName]}:{type:K(e),id:e.serverName,label:Tc(e.label)}})),properties:{lc2:{form_type:a}}}};return void 0!==c.choosenGroup&&(u.choosenGroup=c.choosenGroup),u},Z=0,J=Object(k.qb)(300,(function(e){var t=new Date(e).toISOString().replace(/Z$/,"999Z");a.markEventsAsSeen({chatId:d(),seenUpTo:t}).catch(k.R)}));t.on("request_update_event",(function(e){var n=t.getEvent("liveChatChatId",e.id);if(e.data.seen)e.resolve(),Z=Math.max(Z,t.getEvent("liveChatChatId",e.id).timestamp),J(Z);else if("offline"===n.properties.formType){var r=e.data.properties.answers,o=n.properties.fields,c=Bf(o,r).fields,s=t.getApplicationState(),u=n,p=vn("helpDesk",t),f=null,m=null,h=null,x=null;if(p.enabled&&p.licenseId>-1)h=su({license:s.license,group:s.group,pageUrl:s.page.url,form:ng(u.properties),answers:c}),f=cu("production",h),m=function(e){return uu(e.id,h)},x=Vi;else{var j=Q(n,r).filledForm,O=(new Intl.DateTimeFormat).resolvedOptions().timeZone;f=a.sendTicketForm({filledForm:j,groupId:s.group,timeZone:"string"!==typeof O||/^Etc\//.test(O)||-1===O.indexOf("/")?null:O}),m=function(e){var t=Object(k.l)((function(e){return"subject"===e.type}),j.fields);return Object(T.a)({id:e.id,text:e.text,visitor:{name:Object(k.l)((function(e){return"name"===e.type}),j.fields)||null,email:Object(k.l)((function(e){return"email"===e.type}),j.fields)||null}},t&&t.answer&&{subject:t.answer})},x=function(e,t,n){e&&"VALIDATION"===e.code?/name must be at most \d+ characters long/.test(e.message)?n({name:e.message}):"mail must be a valid e-mail address"!==e.message?n():n({email:t("invalid_email")}):n()}}f.then((function(r){var a=n.properties.fields;Qf(t,a,c,m(r)),e.resolve(),Si(t,e.id),t.setCurrentView("Chat")}),(function(n){x(n,t.localize,e.reject)}))}else if("prechat"===n.properties.formType){var w=e.data.properties.answers,_=n.properties.fields;Gf(t,_,Bf(_,w).fields);var C=Q(n,w),I=C.filledForm,S=C.choosenGroup,A=function(t){switch(t.code){case"GROUPS_OFFLINE":return void y().then(e.resolve,e.reject);case"CUSTOMER_BANNED":case"GROUP_NOT_FOUND":return void l();default:e.reject()}},R=function(){var n={};return w.name&&(n.name=w.name),w.email&&(n.email=w.email),(Object(k.C)(n)?Promise.resolve():a.updateCustomer(n).catch((function(e){return jr("update_customer_request_failed",e)}))).then((function(){return ne({customerStartingEvent:I,agentFakeEvent:En(t,"liveChatChatId"),group:S}).then((function(n){te(n),e.resolve(),t.setDefaultView("Chat","timeline")}))}))};if(void 0!==S)return void function(e,t){var n=t.groupId;return Hv(e,{groupIds:[n]}).then((function(e){return e[n]}))}(i,{groupId:S}).then((function(e){if("not_found"===e){var t=new Error('Group "'+S+'" not found (most likely it has been removed).');throw t.code="GROUP_NOT_FOUND",t}return e})).then((function(n){if(t.setApplicationState({group:S}),!("online"===n))return gn(t)?void R().then((function(){t.setApplicationState({availability:"offline"})}),A):void Qv(i,t.getApplicationState("group")).then((function(e){e.enabled?(ki(t,"offlineForm"),t.updateView("Chat/offline",e.form)):function(e,t){Ii(e,t,{enabled:!1})}(t,"offlineForm"),t.setApplicationState({availability:"offline"})}),(function(t){"CONNECTION_LOST"!==t.code?l():e.reject()}));R().catch(A)}),(function(t){"CONNECTION_LOST"!==t.code?l():e.reject()}));R()}else if("postchat"===n.properties.formType){var P=e.data.properties.answers,M=n.properties.fields;Hf(t,M,Bf(M,P).fields);var N=Q(n,P).filledForm;a.sendEvent({chatId:d(),event:N,attachToLastThread:!0}).then((function(n){e.resolve(),Si(t,e.id,Rv(t,n));var r=t.getApplicationState().availability,a=t.getChat("liveChatChatId").properties.postponedGreeting;"online"===r&&a?Promise.resolve().then((function(){t.updateChat("liveChatChatId",{properties:{postponedGreeting:void 0}}),ig.acceptingGreeting=!0,Vv(i,a).then((function(e){ig.acceptingGreeting=!1,E(e),t.setDefaultView("Chat","timeline")}),(function(){ig.acceptingGreeting=!1}))})):t.setDefaultView("Chat","timeline"),"rating"in P&&function(e,t){var n=b(t),r=e.getApplicationState().testGroup;if("NOTHING"!==n.score||"NOTHING"!==n.comment){_r({testGroup:r,chatRating:"CANCEL"===n.score?"canceled":t.rating,chatRatingSource:"postchat"});var a=[];n.score===eg&&n.comment===eg?(a.push(v(t)),Yf(e,t.rating),Wf(e,t.rateComment)):"CANCEL"===n.score&&"CANCEL"===n.comment?a.push(g(["comment","score"])):("CANCEL"===n.score?a.push(g(["score"])):n.score===eg&&(a.push(v({rating:t.rating})),Yf(e,t.rating)),"CANCEL"===n.comment?a.push(g(["comment"])):n.comment===eg&&(a.push(v({rateComment:t.rateComment})),Wf(e,t.rateComment))),Promise.all(a.map((function(e){return e.catch(k.R)})))}}(t,P)}))}})),t.on("request_update_user",(function(e){var n=e.resolve,r=e.id,i=e.data,o=i.properties,c=Object(A.a)(i,["properties"]);if(t.getSessionUserId()===r){if(An(t)){var s=Object(k.d)({name:c.name,email:c.email,sessionFields:o});a.updateCustomer(s).catch((function(e){return jr("update_customer_request_failed",e)}))}n()}})),t.on("update_event",(function(e){var n=e.event;"file"===n.type&&n.properties.canceled&&di(t,n.id)})),t.on("request_set_user_properties",(function(e){var n=e.resolve,r=e.id,i=e.properties;t.getSessionUserId()===r&&(An(t)&&a.setCustomerSessionFields({sessionFields:i}).catch(k.R),n())}));var X=function(e,n){var r=n.id,a=n.timestamp,i=n.threadId;Kf(t,e,a),t.setEventServerId("liveChatChatId",e.id,r),t.updateEvent("liveChatChatId",e.id,{delivered:!0,serverTimestamp:a,thread:i})},$=function(e){t.updateEvent("liveChatChatId",e.id,{failed:!0})},ee=function(e){var n=e.event,r=e.meta;if("file"===n.type)return li(t,n.id),a.uploadFile({file:r.file,onProgress:function(e){t.updateEvent("liveChatChatId",n.id,{properties:{progress:e}})}}).promise.then((function(e){var t=e.url;return a.sendEvent({chatId:d(),event:{type:"file",customId:n.id,url:t}})})).then((function(e){t.updateEvent("liveChatChatId",n.id,{delivered:!0,properties:{url:e.url}}),di(t,n.id),C(e)}),(function(e){var r={failed:!0,failReason:tg(t,e)};t.updateEvent("liveChatChatId",n.id,{properties:r})}));if(Object(k.A)(n.type,["message","emoji"]))return a.sendEvent({chatId:d(),event:Bv(t,n)}).then((function(e){X(n,e)}),(function(){$(n)}));if("custom_system_message"===n.type)return a.sendEvent({chatId:d(),event:Bv(t,n)}).then(C,k.R);if("rich_message_postback"===n.type){var i=n.properties,o=i.eventId,c=i.postback;return a.sendRichMessagePostback({chatId:d(),threadId:t.getEvent("liveChatChatId",o).thread,eventId:o,postback:c}).catch(k.R)}if("url_preview"===n.type){var s=a.getUrlInfo({url:n.properties.url}).catch((function(){return null}));return a.sendEvent({chatId:d(),event:Bv(t,n)}).then((function(e){X(n,e),s.then((function(r){var i=r.title,o=r.description,c=r.url,s=r.imageUrl;return t.updateEvent("liveChatChatId",n.id,{properties:{title:i,description:o,image:{url:s,link:c}}}),a.updateEventProperties({chatId:d(),threadId:e.thread,eventId:e.id,properties:{url_details:{title:i,description:o,url:c,image_url:s,image_width:r.imageWidth,image_height:r.imageHeight}}})})).catch(k.R)}),(function(){$(n)}))}},te=function(e){var n=e.events,r=Object(A.a)(e,["events"]),a=t.getSessionUser().id;n.forEach((function(e){e.author===a?function(e,t){var n=t.timestamp;"message"===t.properties.serverType&&Kf(e,t,n),e.setEventServerId("liveChatChatId",t.id,t.serverId);var r={delivered:!0,serverTimestamp:n,thread:t.thread};"form"===t.type&&(r.properties={answered:!0,fields:t.properties.fields}),e.updateEvent("liveChatChatId",t.id,r)}(t,e):(e.properties.welcomeMessage||e.properties.invitation)&&t.hasEvent("liveChatChatId",e.id)?function(e,t){var n=En(e,"liveChatChatId");e.setEventServerId("liveChatChatId",n.id,t.serverId);var r=n.author!==t.author;r&&e.setEventData("liveChatChatId",n.id,{author:t.author});var a={delivered:!0,thread:t.thread,serverTimestamp:t.timestamp,properties:{}};n.properties.text!==t.properties.text&&(a.properties.text=t.properties.text),e.updateEvent("liveChatChatId",n.id,a),r&&(Oi(e,t.author),e.recalculateTimeline("liveChatChatId"))}(t,e):_(e)})),f(Object(T.a)({},r,{events:[]}))},ne=function(e){return t.updateChat("liveChatChatId",{properties:{starting:!0}}),Uv(i,e).then((function(e){return t.updateChat("liveChatChatId",{properties:{starting:!1}}),e}),(function(e){throw t.updateChat("liveChatChatId",{properties:{starting:!1}}),e}))},re=[],ae=function(e){if(Ln("liveChatChatId",t))re.push(e);else{var n=function(){(function(e){var t=e.getChat("liveChatChatId").properties,n=t.lastThread,r=t.currentAgent,a=t.queued;return!(!gn(e)||r||a)&&!!!Object(k.o)((function(e){var t=e.type,r=e.thread;return"email_prompt"===t&&r===n}),e.getEvents("liveChatChatId"))})(t)&&function(e){var t="email_prompt",n=e.getChat("liveChatChatId").properties.lastThread;e.hasEvent("liveChatChatId",t)&&e.removeEvent("liveChatChatId",t),e.addEvent("liveChatChatId",{id:t,serverId:null,seen:!0,type:"email_prompt",author:"system",thread:n})}(t)};t.getChat("liveChatChatId").active?e&&ee(e).then(n):ne(Object(T.a)({},e&&{customerStartingEvent:e.event},{agentFakeEvent:En(t,"liveChatChatId")})).then((function(e){te(e);var t=re;re=[],t.forEach(ee),n()}),(function(n){t.updateEvent("liveChatChatId",e.event.id,{failed:!0});var r=re;switch(re=[],r.forEach((function(e){t.updateEvent("liveChatChatId",e.id,{failed:!0})})),n.code){case"CUSTOMER_BANNED":return void l();case"GROUPS_OFFLINE":return void y();default:return}}))}};t.on("start_thread",ae),t.on("send_event",ae);var ie=function(e){return ne({agentFakeEvent:e}).then((function(e){return[{type:"hide_offline_form"},{type:"chat_activated",payload:e}]}),(function(e){switch(e.code){case"WIDGET_DESTROYED":case"CHAT_ALREADY_ACTIVE":case"CHAT_LIMIT_REACHED":return{type:"nothing"};case"GROUPS_OFFLINE":return Qv(i,t.getApplicationState("group")).then((function(e){return e.enabled?{type:"nothing"}:{type:"show_offline_form",payload:e.form}}));case"CUSTOMER_BANNED":default:return{type:"panic"}}}))},oe=function(e){var n=e.active,r=e.availability,a=e.connected,o=e.hasFakeAgentMessage,c=e.startChatAgainPending;return Object(Fm.a)((function(){return n?{type:"nothing"}:"offline"===r?gn(t)?c&&Vn(t)?{type:"show_prechat"}:{type:"nothing"}:Un(t)?Qn(t)?{type:"nothing"}:{type:"show_offline_form"}:{type:"hide_prechat_form"}:o?{type:"hide_offline_form"}:t.getApplicationState().maximized?Vn(t)?{type:"show_prechat"}:!a||ig.acceptingGreeting?{type:"nothing"}:(ig.requestingPredictedWelcomeMessage=!0,function(e){var t=e.sdk,n=e.store,r=1520===n.getApplicationState().license;return t.getPredictedAgent(r?void 0:{groupId:n.getApplicationState("group")}).then((function(e){var t,r=n.localize("welcome_to_chat");return{agent:e,message:Af((t={id:Object(k.u)(n.getIndexedEvents("liveChatChatId")),type:"message",authorId:e.id,text:fr(n,r,{agent:e.name}),originalText:r,welcomeMessage:!0},Object(T.a)({},t,{serverId:null,timestamp:Date.now(),seen:!0,properties:t.properties||{}})))}}))}(i).then((function(e){var t=e.agent,n=e.message;return ig.requestingPredictedWelcomeMessage=!1,t.isBot?ie(n):[{type:"hide_offline_form"},{type:"predicted_welcome_message",payload:{agent:t,message:n}}]}),(function(e){if(ig.requestingPredictedWelcomeMessage=!1,"offline"===t.getApplicationState("availability"))return{type:"nothing"};switch(e.code){case"GROUP_UNAVAILABLE":return ie();case"GROUP_OFFLINE":return{type:"nothing"};default:return{type:"panic"}}}))):{type:"nothing"}})).then(k.i)},ce=function(){var e=t.getChat("liveChatChatId");return(!e.active||e.properties.queued)&&!e.properties.starting&&!e.properties.ended},se=function(){t.updateView("minimized",{hidden:!1})},ue=Qr()(ga(t,(function(e){return e.application.destroyed})),Lr()(Boolean),fa()(1),sa.a);Qr()(F,qr()(se));var le=Qr()(ga(t,(function(e){return e.application.availability})),da()(1),ua.a,$r()((function(e){return{type:e}})),Object(ca.a)((function(e){return"online"===e.type}))),de=le[0],pe=le[1];Qr()(q((function(){return pe})),Lr()(ce),qr()((function(){!Gn(t,"prechat")&&gn(t)&&Vn(t)&&"offline"===t.getApplicationState().availability&&!t.getChat("liveChatChatId").active&&wi(t),Gn(t,"prechat")&&(qi(t),gn(t)&&wi(t)),u()}))),Qr()(de,Lr()(ce),qr()((function(){t.getView("minimized").hidden&&se()}))),Qr()(q((function(){if(!Vn(t))return ia.a;var e=ga(t,(function(){return Gn(t,"prechat")}));return Qr()(Ur()(F,e),Lr()((function(){return Gn(t,"prechat")})),ea((function(){var e=t.getLastEvent("liveChatChatId");return Qr()(Object(Yr.a)(function(e,t){var n=Object(k.m)((function(e){return"groupSelect"===e.meta}),t);if(-1===n)return Promise.resolve(null);var r=t[n],a=r.options.map((function(e){return parseInt(e.groupNumber,10)}));return a.length>20?Promise.resolve(null):Hv(e,{groupIds:a}).then((function(e){return Object(k.ub)(n,Object(T.a)({},r,{options:r.options.map((function(t){return Object(T.a)({},t,{meta:{online:"online"===e[parseInt(t.groupNumber,10)]}})}))}),t)}))}(i,e.properties.fields)),aa)})))})),Lr()((function(e){return e&&Gn(t,"prechat")})),qr()((function(e){var n=t.getLastEvent("liveChatChatId").id;return t.updateEvent("liveChatChatId",n,{properties:{fields:e}})})));var fe=function(e){return e.forEach((function(e){switch(e.type){case"panic":return void l();case"chat_activated":return void te(e.payload);case"predicted_welcome_message":var n=e.payload,r=n.agent,a=n.message;return O(r),Oi(t,r.id),_(a),void t.updateChat("liveChatChatId",{properties:{fakeAgentMessageId:a.id}});case"show_offline_form":return e.payload&&t.updateView("Chat/offline",e.payload),void Ai(t);case"hide_prechat_form":return void qi(t);case"hide_offline_form":return void(Gn(t,"offline")&&(Fi(t),t.setDefaultView("Chat","timeline")));case"show_prechat":return void wi(t);default:return}}))},me=function(){var e=t.getChat("liveChatChatId");return{active:e.active,availability:t.getApplicationState("availability"),connected:An(t),hasFakeAgentMessage:In(t,"liveChatChatId"),startChatAgainPending:e.properties.startChatAgainPending}};Qr()(q((function(){return Qr()(ga(t,(function(){return t.getChat("liveChatChatId").properties.startChatAgainPending})),Lr()(Boolean))})),ea((function(){return Object(Yr.a)(oe(me()))})),qr()((function(e){Ci(t,"liveChatChatId",{chatId:t.getChat("liveChatChatId").serverId}),fe(e)}))),Qr()(Ur()(F,de,pe),Object(Pr.a)(B),Lr()((function(){return ce()&&t.getApplicationState().eagerFetchingMode})),Object(Nr.a)((function(){return Object(Yr.a)(oe(me()))})),Object(ma.a)(ue),qr()(fe)),Qr()(q((function(){return Qr()(F,Lr()((function(){return!t.getApplicationState().eagerFetchingMode})))})),ea((function(){var e=t.getChat("liveChatChatId").serverId;return Object(Yr.a)(Promise.all([oe(me()),bn(t)&&e&&$v(i,e)].filter(Boolean)))})),Object(ma.a)(ue),qr()((function(e){var n=e[0],r=e[1];if(Ni(t),r){p(t.getChat("liveChatChatId").serverId,r.iterator),D(r.hasMore);var a=Object(k.q)((function(e){return e.events}),r.threads).filter((function(e){return!t.hasEvent("liveChatChatId",e.id)}));a.length>0&&t.addHistoryEvents("liveChatChatId",a),t.updateChat("liveChatChatId",{properties:{lastThread:r.threads.length?Object(k.I)(r.threads).id:null,eventsSeenUpToMap:r.eventsSeenUpToMap}})}t.setApplicationState({eagerFetchingMode:!0}),fe(n)}))),Qr()(ga(t,(function(e){return e.application.page})),da()(1),Object(ma.a)(ue),qr()((function(e){var t=e.url,n=e.title;a.updateCustomerPage({url:t,title:n})})))},cg=function(e){return e.some(k.z)},sg=function(e,t){var n=Qr()(function(){var e=Object(na.a)((function(){return!!document.hasFocus&&document.hasFocus()})),t=$r()((function(){return!0}))(Object(Fr.a)(window,"focus")),n=$r()((function(){return!1}))(Object(Fr.a)(window,"blur"));return Ur()(e,t,n)}(),sa.a);if(t){var r,a=(r=t,Qr()(Object(Ar.a)((function(){return Object(Yr.a)(Promise.race([r.call("isFocused"),new Promise((function(e){return ta(r,"focus",e)}))]))})),ea((function(e){return Qr()(Gr(r,"focus"),Jr()(e))}))));Qr()(n,qr()((function(n){e.setApplicationState({applicationFocused:n}),t.emit("focus",n)}))),Qr()(Er()(n,a),Object(Tr.a)(50),$r()(cg),Object(Rr.a)(),qr()((function(t){e.setApplicationState({pageFocused:t})})))}else Qr()(n,qr()((function(t){e.setApplicationState({pageFocused:t,applicationFocused:t})})))},ug=function(e){Qr()(ga(e,(function(){return e.localize("welcome_title")})),qr()((function(e){document.title=e})))},lg=/\.(\w+)$/i,dg=new Audio,pg={mp3:"audio/mpeg",ogg:"audio/ogg"},fg=function(e){var t=function(e){var t=e.match(lg);return t?t[1].toLowerCase():""}(e);if(t in pg){if(""!==dg.canPlayType(pg[t]))return!0}else 0;return!1},mg=function(e){return new Promise((function(t,n){var r=new Audio(e);r.onloadeddata=function(){t(r)},r.onerror=n}))},hg=function(e){var t=e.play();return Object(k.F)(t)?t:Promise.resolve()},vg=function(e){return"function"===typeof e.start&&"function"===typeof e.stop},gg=function(e){vg(e)?e.start(0):e.noteOn(0)},bg=function(){var e=new(window.AudioContext||window.webkitAudioContext),t=!0,n=[],r=function(t){return new Promise((function(n,r){e.decodeAudioData(t,n,r)}))},a=function(t){return{play:function(){var n=e.createBufferSource();return n.connect(e.destination),n.buffer=t,{playback:new Promise((function(t,r){if(n.onended=function(){return t()},gg(n),"running"!==e.state){var a=new Error("Playback failed, AudioContext is in incorrect state '"+e.state+"'");a.name="PlaybackError",r(a)}})),stop:function(){!function(e){vg(e)?e.stop(0):e.noteOff(0)}(n)}}}}};return{preload:function(e){return function(e){return new Promise((function(t,n){var r=new XMLHttpRequest;r.onload=function(){t(r.response)},r.onerror=n,r.open("GET",e),r.responseType="arraybuffer",r.send()}))}(e).then(r).then(a)},playSound:function(e){var r=e.play();return t&&n.push(r),r.playback},resumeOnInteraction:function(){var r=function r(){document.removeEventListener("click",r,!0),document.removeEventListener("touchend",r,!0),t&&(n.forEach((function(e){e.stop()})),n=[],t=!1),e.resume(),function(){var t=e.createBuffer(1,1,22050),n=e.createBufferSource();n.buffer=t,n.connect(e.destination),gg(n)}()};document.addEventListener("click",r,!0),document.addEventListener("touchend",r,!0)}}},yg=function(){return"function"===typeof window.webkitAudioContext?function(){var e=bg(),t=Object(k.N)((function(t){var n=e.preload(t);return n.catch(k.R),n}));return{play:function(n){var r=t(n).then(e.playSound);return r.catch(k.R),r},preload:t,unlock:function(){return e.resumeOnInteraction()}}}():function(){var e=Object(k.N)(mg);return{play:function(t){return e(t).then(hg)},preload:e,unlock:k.R}}()},xg=function(e){var t=yg(),n=function(e){return Object.keys(e).reduce((function(t,n){var r=Object(k.l)((function(e){return fg(e)}),Object(k.i)(e[n]));return t[n]=r,t}),{})}(e);return{play:function(e){var r=n[e];t.play(r).then(k.R,k.R)},preload:function(e){var r=n[e];t.preload(r).then(k.R,k.R)},resumeOnInteraction:function(){return t.unlock()}}},jg=n(231),Og=n.n(jg),wg=n(232),_g=n.n(wg),Cg=function(){var e,t=xg(((e={}).new_message=[_g.a,Og.a],e));return t.resumeOnInteraction(),t.preload("new_message"),Object(k.J)(2e3,(function(e){t.play(e)}))},Eg=function(e,t){return"system"!==e.author&&!e.properties.welcomeMessage&&e.author!==t},Ig=function(e){var t=Cg();e.on("add_event",(function(n){var r=n.event;if(!e.getApplicationState().muted){var a=e.getSessionUserId();Eg(r,a)&&t("new_message")}}))},kg="init",Sg="invitation",Tg="chatStarted",Ag=n(84),Rg=n.n(Ag),Pg=n(131),Mg=function(e){var t=e.amplitudeKey,n=e.children;return t?rn.createElement(Pg.AmplitudeProvider,{amplitudeInstance:Rg.a.getInstance(),apiKey:t},n):n},Ng=n(233),zg=n(29),Lg=n(246),Dg=n(235),Bg=n.n(Dg),qg=Object(Lg.a)({},{key:"lc",stylisPlugins:[Bg.a]}),Fg=qg,Vg=qg.css,Ug=qg.cx,Gg=qg.injectGlobal,Hg=qg.keyframes,Wg=n(9),Yg=n(236),Kg=function(e){var t={};if(e.flexFill&&(t.flexGrow=1,t.maxWidth="100%"),e.flexFit&&(t.flexGrow=0),e.noShrink&&(t.flexShrink=0),e.ellipsis&&(t.whiteSpace="nowrap",t.overflow="hidden",t.textOverflow="ellipsis"),e.nowrap&&(t.whiteSpace="nowrap"),"focusVisible"in e&&(t[":focus"]={outlineStyle:e.focusVisible?"auto":"none"}),e.preserveLines&&(t.whiteSpace="pre-line"),e.textWrap){t.wordWrap="break-word",t.overflowWrap="break-word",t.wordBreak="break-word"}return t},Qg=n(24),Zg=n(11),Jg=rn.createContext(),Xg=function(e){var t=e.value,n=e.children;return rn.createElement(Zg.a,{theme:t},rn.createElement(Jg.Provider,{value:t},n))},$g=n(10),eb=function(e){return e.charAt(0)!==e.charAt(0).toLowerCase()},tb=function(e,t){return eb(t)},nb=(k.V.bind(null,tb),k.ab.bind(null,tb)),rb={},ab=function(e){if(!e)return rb;var t=e.css,n=e.vars,r=Object($g.a)(e,["css","vars"]);return Object(Wg.a)({css:t,vars:n},function(e){return Object(k.x)((function(t){return eb(t)?"components":Object(k.E)(e[t])?"propsDescriptions":"themeProps"}),e)}(r))},ib=function(e){return function(t){return function(n){var r=n[e];if(!r)return n;var a=ab(r),i=a.propsDescriptions,o=a.components;if(!i&&!o)return n;var c=function(e,t,n){void 0===n&&(n={});var r=Object(k.ab)((function(e,n){return t[n]}),n);return Object.keys(r).map((function(t){var n,a=r[t],i=ab(a),o=i.themeProps,c=i.components;if(!o)return c;var s=((n={})[e]=o,n);return c?Object(Wg.a)({},s,c):s}))}(e,t,i);return Object(k.Q)([n,o].concat(c).filter(Boolean))}}},ob=function(e){var t,n,r=e.__ui_kit_name,a=ib(r);return n=t=function(t){function n(){return t.apply(this,arguments)||this}return Object(Qg.a)(n,t),n.prototype.render=function(){var t=this.props;return rn.createElement(Xg,{value:a(t)},rn.createElement(e,t))},n}(rn.Component),t.displayName="WithSubtheme("+r+")",n},cb=Object(Yg.a)(Fg,rn),sb=function e(t,n){var r=Object(k.Z)(k.E,n);return 0===Object.keys(r)?n:Object(k.d)(Object(k.M)((function(n,r){return Object(k.E)(n)?":"===r[0]?e(t,n):n[Object(k.l)((function(e){return t[e]}),Object.keys(n))]||n.default:n}),n))},ub=function(e,t,n){var r=e.theme,a=e.style,i=ab(r[t]),o=i.css,c=i.vars,s=i.themeProps;return[c?Object(Wg.a)({},r.vars,c):r.vars,"function"===typeof n&&void 0!==s&&n(s),o&&sb(e,o),Kg(e),"function"===typeof n&&n(Object(Wg.a)({},s,e)),a]},lb=function(e,t){void 0===t&&(t={});var n=t,r=n.displayName,a=n.displayType,i=n.mapPropsToStyles;var o=cb(e,t);return function(){for(var e=r||a||null,n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];var u=o.apply(void 0,c.concat([function(t){return ub(t,e,i)}]));return u.__ui_kit_name=e,t.section?Object.defineProperty(ob(u),"toString",{value:u.toString}):u}},db=n(53),pb=n(121),fb=n(48),mb=n(225),hb=n(102),vb=n(124),gb=n(122),bb=n(166);var yb=function(e){rn.useEffect(e,[])};function xb(e){return e<0?-1:1}function jb(e,t){var n,r,a;return n=0,r=1,a=t+e/100,Math.min(Math.max(a,n),r)}var Ob=function(e,t){var n=Object(fb.a)(t);yb((function(){var t=0,r=0,a=1,i=1,o=0,c=0,s=0,u=function(e,a){t=jb(e,t),r=jb(a,r),n.current({x:t,y:r})},l=function e(n){var o=("x"===n||"xy"===n)&&t>0&&t<1,c=("y"===n||"xy"===n)&&r>0&&r<1;(o||c)&&(u(o?5*a:0,c?5*i:0),s=requestAnimationFrame((function(){return e(n)})))},d=e.subscribe((function(e){var t=e.deltaX,n=e.deltaY;Math.abs(t)>8&&(u(t,0),a=xb(t),clearTimeout(o),o=window.setTimeout((function(){return l("x")}),50)),Math.abs(n)>8&&(u(0,n),i=xb(n),clearTimeout(c),c=window.setTimeout((function(){return l("y")}),50))}));return function(){d(),clearTimeout(o),clearTimeout(c),cancelAnimationFrame(s)}}))},wb=function(e){rn.useEffect((function(){var t=e.current,n=t.ownerDocument||document,r=function(e,t){for(var n=new Set,r=e;r=r.parentElement;){if(t.body===r)return n;n.add(r)}return n}(t,n),a=new Map;return function e(t,n){t.forEach((function(t){if(t!==n.modalElement){if(!n.ancestors.has(t)){var r=t.getAttribute("aria-hidden");return n.originalValues.set(t,r),void t.setAttribute("aria-hidden","true")}t.children&&e([].slice.call(t.children),n)}}))}([].slice.call(n.body.children),{ancestors:r,originalValues:a,modalElement:t}),function(){a.forEach((function(e,t){null!==e?t.setAttribute("aria-hidden",e):t.removeAttribute("aria-hidden")}))}}),[e])};function _b(e,t,n){rn.useEffect((function(){return document.addEventListener(e,t,n),function(){return document.removeEventListener(e,t,n)}}),[e,t,n])}var Cb=function(e,t){rn.useEffect((function(){var n=t.current;if(n){var r=function(e){e.preventDefault()};return n.addEventListener(e,r,{passive:!1}),function(){return n.removeEventListener("touchmove",r)}}}),[e,t])},Eb=0,Ib=null,kb=function(){Ib="keyboard"},Sb=function(){Ib="click"},Tb=function(){return rn.useEffect((function(){return 0===Eb&&(document.addEventListener("keydown",kb,!0),document.addEventListener("mousedown",Sb,!0),document.addEventListener("touchstart",Sb,!0)),Eb++,function(){--Eb>0||(Ib=null,document.removeEventListener("keydown",kb,!0),document.removeEventListener("mousedown",Sb,!0),document.removeEventListener("touchstart",Sb,!0))}}),[]),rn.useCallback((function(){return Ib}),[])},Ab=function(e){void 0===e&&(e=!1);var t=rn.useState(e),n=t[0],r=t[1];return[n,rn.useMemo((function(){return{onMouseEnter:function(){return r(!0)},onMouseLeave:function(){return r(!1)}}}),[])]};var Rb=function(e){return{onKeyPress:rn.useCallback((function(t){var n=t.key;"Enter"!==n&&" "!==n||e()}),[e])}};var Pb=function(e){var t=Object(fb.a)(e);rn.useEffect((function(){return function(){return t.current()}}),[t])},Mb=function(e){var t=rn.useRef(!1),n=Object(fb.a)(e);return rn.useEffect((function(){t.current&&(t.current=!1,n.current())})),rn.useCallback((function(){t.current=!0}),[])},Nb=n(133),zb={duration:0},Lb=Object(Nb.a)(),Db=["End","Home","Space","PageUp","PageDown","ArrowUp","ArrowDown"];var Bb=function(e,t){void 0===t&&(t={});var n=t,r=n.firstItemKey,a=n.lastItemKey,i=n.topThreshold,o=void 0===i?20:i,c=n.bottomThreshold,s=void 0===c?20:c,u=n.initialScrollTop,l=n.onIsUserScrollingChanged,d=n.onIsScrolledToTopChanged,p=n.onIsScrolledToBottomChanged,f=n.onScrollDeltaChanged,m=n.isScrollingChangedTimeout,h=void 0===m?300:m,v=rn.useRef(0),g=rn.useRef(0),b=rn.useRef(!1),y=rn.useRef(!1),x=rn.useRef(!1),j=rn.useRef(!1),O=rn.useRef(null),w=rn.useRef({timeout:0,value:!1}),_=rn.useRef("none"),C=Object(vb.a)("y",e),E=rn.useCallback((function(){j.current=!0,C.apply(void 0,arguments)}),[C]),I=Object(hb.a)(r),S=Object(hb.a)(a),T=rn.useCallback((function(){j.current=!1}),[]),A=rn.useCallback((function(){return y.current}),[]),R=rn.useCallback((function(){return x.current}),[]),P=rn.useCallback((function(e){return E(0,e)}),[C]),M=rn.useCallback((function(t){if(e.current){var n=e.current,r=n.scrollHeight,a=n.clientHeight;E(r-a,t),_.current=t&&0===t.duration?"instant":"animated"}}),[e,E]),N=rn.useCallback((function(e){return O.current=e}),[]),z=rn.useCallback((function(){return!!e.current&&e.current.scrollHeight>e.current.clientHeight}),[e]),L=rn.useCallback((function(){w.current.value||(w.current.value=!0,l&&l(w.current.value)),clearTimeout(w.current.timeout),w.current.timeout=window.setTimeout((function(){w.current.value&&(w.current.value=!1,l&&l(w.current.value))}),h)}),[h]),D=rn.useCallback((function(){var t=e.current,n=t.scrollTop,r=t.scrollHeight,a=v.current>n,i=v.current<n,c=v.current===n,u=r<g.current,l=r>g.current,m=v.current-n,h=r>1.5*window.innerHeight;if(v.current=n,g.current=r,z()&&!j.current&&L(),!c||!b.current){("instant"===_.current||"animated"===_.current&&x.current)&&requestAnimationFrame((function(){M({duration:0}),_.current="none"}));var O=y.current&&a,C=x.current&&(i||u||l),E=O||Object(Yi.g)(t,o),I=C||Object(Yi.f)(t,s);d&&(!y.current&&E?d(!0):y.current&&!E&&d(!1)),p&&(!x.current&&I?p(!0):x.current&&!I&&p(!1)),y.current=E,x.current=I,!l&&!y.current&&f&&!x.current&&b.current&&w.current&&Lb&&!j.current&&h&&f({deltaX:0,deltaY:m/2})}}),[d,p,L]),B=rn.useCallback((function(e){Object(k.A)(e.key,Db)&&T()}),[T]),q=function(){E(O.current.offsetTop,zb),O.current=null},F=function(){O.current?q():(I!==r&&function(){var t=e.current.scrollHeight,n=g.current-v.current;E(t-n,zb)}(),S!==a&&x.current&&M())};return _b("keydown",B),rn.useEffect((function(){!1===b.current?(O.current?q():E("number"===typeof u?u:e.current.scrollHeight,zb),D(),b.current=!0):F()})),rn.useEffect((function(){if(e.current){var t=e.current;return t.addEventListener("scroll",D,Lb?{passive:!0}:void 0),function(){return t.removeEventListener("scroll",D)}}}),[e,D]),{scrollTo:E,scrollToTop:P,scrollToBottom:M,getIsOnTop:A,getIsOnBottom:R,getIsScrollable:z,setScrollTargetNode:N,onWheel:T,onTouchStart:T}},qb=function(e){return Object(gb.useSubscription)({getCurrentValue:e.get,subscribe:e.subscribe})},Fb=function(e){return Object(db.a)((function(){var t=e,n=[];return{subscribe:function(e){return n.push(e),function(){n.splice(n.indexOf(e),1)}},next:function(e){t=e,n.forEach((function(t){return t(e)}))},get:function(){return t}}}))},Vb=function(e,t){rn.useEffect((function(){var n=setTimeout(e,t);return function(){return clearTimeout(n)}}),[e,t])};var Ub=new Map,Gb=rn.createContext(Ub);Gb.Provider;function Hb(e){var t=rn.useContext(Gb);if(t.has(e))return t.get(e);var n={},r={get:function(){return n.value},set:function(e){return n.value=e},clear:function(){return delete n.value},destroy:function(){return t.delete(e)}};return t.set(e,r),r}var Wb='[role="row"]',Yb='[role="gridcell"]',Kb="a, button, input, textarea, select",Qb=window.MutationObserver||window.WebKitMutationObserver;function Zb(e){var t=e.mainElementRef,n=e.itemsCount,r=e.tableEdgeReached,a=void 0===r?k.R:r,i=rn.useState(n),o=i[0],c=i[1],s=rn.useRef(!1),u=rn.useRef(!1),l=rn.useRef(null),d=rn.useRef(null),p=rn.useRef(null);_b("keydown",(function(e){"Tab"===e.key&&(s.current=!0)})),_b("keyup",(function(e){"Tab"===e.key&&(s.current=!1)}));var f=function(e){return e?Object(k.ob)(e.querySelectorAll(Kb)):[]},m=rn.useCallback((function(){var e=new Qb((function(){if(u.current||p.current.contains(document.activeElement)){m(p.current);var e=f(p.current);e.forEach((function(e){e.tabIndex=0,e.addEventListener("blur",n)})),c(p.current,!1),e.length&&!p.current.contains(document.activeElement)&&e[0].focus()}})),n=function(e){var t=e.target===p.current,n=e.relatedTarget===p.current,a=p.current.contains(e.target),i=p.current.contains(e.relatedTarget);if(s.current&&e.relatedTarget&&!t&&(!i||n))return e.preventDefault(),void requestAnimationFrame((function(){return e.target.focus()}));a&&!i&&r()},r=function(){f(p.current).forEach((function(e){e.tabIndex=-1,e.removeEventListener("blur",n)}))},i=function(e){" "===e.key&&e.target===p.current&&e.preventDefault()},o=function(e){switch(e.key){case" ":case"Enter":return void(e.target===p.current&&(e.preventDefault(),function(){var e=f(p.current).filter((function(e){return!e.disabled}));e.forEach((function(e){e.tabIndex=0,e.addEventListener("blur",n)})),e.length&&e[0].focus(),u.current=!0}()));case"Escape":return e.preventDefault(),r(),void requestAnimationFrame((function(){return p.current.focus()}))}},c=function(t,r){void 0===r&&(r=!0),t.tabIndex=0,r&&t.focus(),t.addEventListener("keyup",o),t.addEventListener("keydown",i),t.addEventListener("blur",n),e.observe(t,{childList:!0,subtree:!0})},m=function(t){t.tabIndex=-1,t.removeEventListener("keyup",o),t.removeEventListener("keydown",i),t.removeEventListener("blur",n),e.disconnect()},h=function(e){var t=e+"ElementSibling";if(d.current[t]||l.current[t]){for(var n=null,r=d.current,i=l.current;!n;)if(r&&r[t])n=(r=r[t]).querySelector(Yb);else{if(!i||!i[t])return void a(e);if((i=i[t]).attributes.role&&"row"===i.attributes.role.value)r=i;else{var o=i.querySelectorAll(Wb);r="previous"===e?Object(k.I)(o):o[0]}n=r?r.querySelector(Yb):null}i!==l.current&&(l.current=i),r!==d.current&&(d.current=r),n!==p.current&&(m(p.current),c(n),p.current=n)}else a(e)},v=function(e){switch(e.key){case"ArrowUp":case"ArrowLeft":return e.preventDefault(),void h("previous");case"ArrowDown":case"ArrowRight":return e.preventDefault(),void h("next");default:return}};p.current.tabIndex=0,c(p.current,!1);var g=t.current;return g.addEventListener("keydown",v),function(){e.disconnect(),g.removeEventListener("keydown",v)}}),[p,t,d,l,a]);rn.useEffect((function(){var e=setTimeout((function(){return c(n)}),100);return function(){return clearTimeout(e)}}),[n]),rn.useEffect((function(){if(t.current&&t.current.children.length){t.current.tabIndex=-1;var e=t.current.contains(document.activeElement);f(t.current).forEach((function(e){return e.tabIndex=-1})),Object(k.ob)(t.current.querySelectorAll(Yb)).forEach((function(t){e&&t===p.current||(t.tabIndex=-1)}));var n=Object(k.I)(Object(k.ob)(t.current.children)),r=n?n.querySelector(Yb):null,a=f(r),i=r&&r!==document.activeElement&&r.contains(document.activeElement),o=function(){return a.forEach((function(e){return e.tabIndex=0}))};if(i?o():a.forEach((function(e){e.addEventListener("focus",o)})),!e||i){if(l.current=Object(k.I)(Object(k.ob)(t.current.children)),!l.current)return;var c=l.current.attributes.role;if(d.current=c&&"row"===c.value?l.current:Object(k.I)(Object(k.ob)(l.current.querySelectorAll(Wb))),l.current.attributes.role&&"row"===l.current.attributes.role.value?d.current=l.current:d.current=Object(k.I)(Object(k.ob)(l.current.querySelectorAll(Wb))),!d.current)return;if(p.current=d.current.querySelector(Yb),!p.current)return}var s=m();return function(){s(),a.forEach((function(e){e.removeEventListener("focus",o)}))}}}),[p,d,l,t,m,o])}var Jb=n(86),Xb=n(7),$b=n(249),ey=lb("div",{displayName:"FixedWrapperMaximized",mapPropsToStyles:function(e){var t={};return e.theme&&(t.right="right"===e.theme.FixedWrapperRoot.position?"0":"auto",t.left="left"===e.theme.FixedWrapperRoot.position?"0":"auto"),e.animationDuration&&(t.transition="all "+e.animationDuration+"ms ease-out"),e.state&&(t.transform="entered"===e.state?"none":"scale(0.8) translate(10%, 30%)",t.opacity="entered"===e.state?"1":"0"),e.height&&(t.height=e.height),e.width&&(t.width=e.width),t},target:"ep7mz240"})("display:flex;flex-direction:column;max-height:100vh;position:absolute;bottom:0;@media (max-width:490px){width:100%;height:100%;position:fixed;}"),ty=function(e){return rn.createElement($b.a,{in:e.active,mountOnEnter:!0,timeout:e.theme.FixedWrapperMaximized.animationDuration,unmountOnExit:!0},(function(t){return rn.createElement(ey,Object(Wg.a)({},e,{state:t}),rn.Children.map(e.children,(function(t){return rn.cloneElement(t,{minimize:e.minimize})})))}))};ty.propTypes={active:Xb.bool,children:Xb.node.isRequired,minimize:Xb.func,style:Xb.shape()};var ny=Object(Zg.b)(ty),ry=lb("div",{displayName:"FixedWrapperMinimized",mapPropsToStyles:function(e){var t=e.state,n=e.theme,r={};return n&&(r.transition="all "+n.FixedWrapperMaximized.animationDuration+"ms ease-out",r.right="right"===n.FixedWrapperRoot.position?"0":"auto",r.left="left"===n.FixedWrapperRoot.position?"0":"auto"),t&&(r.transform="entered"===t?"none":"scale(0.8) translate(10%, 30%)",r.opacity="entered"===t?"1":"0"),r},target:"eq1nrcm0"})("width:60px;height:60px;position:absolute;bottom:1em;"),ay=function(e){return rn.createElement($b.a,{in:e.active,mountOnEnter:!0,timeout:e.theme.FixedWrapperMinimized.animationDuration,unmountOnExit:!0},(function(t){return rn.createElement(ry,Object(Wg.a)({},e,{state:t}),rn.Children.map(e.children,(function(t){return rn.cloneElement(t,{maximize:e.maximize})})))}))};ay.propTypes={active:Xb.bool,children:Xb.node.isRequired,maximize:Xb.func,style:Xb.shape()};var iy=Object(Zg.b)(ay),oy=lb("div",{displayName:"FixedWrapperRoot",mapPropsToStyles:function(e){var t={};return"right"===e.position?(t.right="1em",t.left="auto"):"left"===e.position&&(t.right="auto",t.left="1em"),t},target:"e7t7c040"})("position:fixed;bottom:0;z-index:99;font-size:16px;"),cy=function(e){return rn.createElement(oy,e,rn.createElement(Jb.a,{defaultOn:e.maximizedOnInit},(function(t){var n=t.on,r=t.setOff,a=t.setOn;return rn.createElement("div",null,rn.Children.map(e.children,(function(e){return e.type===ny?rn.cloneElement(e,{minimize:r,active:n}):e.type===iy?rn.cloneElement(e,{maximize:a,active:!n}):e})))})))};cy.defaultProps={maximizedOnInit:!1},cy.propTypes={children:Xb.node.isRequired,maximizedOnInit:Xb.bool,style:Xb.shape()};var sy=cy,uy=lb("div",{mapPropsToStyles:function(e){var t={};return e.verticalAlign&&("top"===e.verticalAlign?t.alignItems="flex-start":"bottom"===e.verticalAlign?t.alignItems="flex-end":t.alignItems=e.verticalAlign),e.justify&&(!0===e.justify?t.justifyContent="space-between":"left"===e.justify?t.justifyContent="flex-start":"right"===e.justify?t.justifyContent="flex-end":t.justifyContent=e.justify),e.reverse&&(t.flexDirection="row-reverse"),t},target:"e108e6fy0"})("display:flex;min-width:0;"),ly=lb(uy,{displayName:"ChatListItem",mapPropsToStyles:function(e){return{background:e.active?"rgba(0, 0, 0, 0.1)":"rgba(0, 0, 0, 0)"}},section:!0,target:"edumshe0"})("padding:0.5em;transition:background 0.2s;border-bottom:1px solid rgba(0,0,0,0.1);&:hover{cursor:pointer;}"),dy=function(e){return rn.createElement(ly,e)};dy.propTypes={active:Xb.bool,children:Xb.node.isRequired};var py=lb(uy,{displayName:"AgentBar",section:!0,target:"e1j58gbc0"})("padding:1em;"),fy=function(e){return rn.createElement(py,Object(Wg.a)({verticalAlign:"center"},e))};fy.propTypes={children:Xb.node};var my=fy,hy=n(85),vy=function(e){var t=e.color;return t?{fill:t,"& *":{fill:t}}:null},gy=Object(k.N)((function(e){return lb(e,{displayType:"Icon",mapPropsToStyles:vy,shouldForwardProp:hy.a,target:"e5ibypu0"})("&{display:block;}&,& *{fill:currentColor;}")})),by=function(e){var t=e.children,n=Object($g.a)(e,["children"]),r=gy(t.type);return rn.createElement(r,n)};by.propTypes={children:Xb.node.isRequired};var yy=by,xy=function(e){e.styles;var t=Object($g.a)(e,["styles"]);return rn.createElement("svg",Object(Wg.a)({width:"8px",height:"13px",viewBox:"0 0 8 13"},t),rn.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},rn.createElement("g",{transform:"translate(-840.000000, -560.000000)",fill:"#424D57",fillRule:"nonzero"},rn.createElement("g",{transform:"translate(845.000000, 567.000000) scale(-1, 1) translate(-845.000000, -567.000000) translate(831.000000, 553.000000)"},rn.createElement("g",{transform:"translate(3.000000, 1.000000)"},rn.createElement("polygon",{points:"8.59 17.34 13.17 12.75 8.59 8.16 10 6.75 16 12.75 10 18.75"}))))))},jy=function(e){return rn.createElement(yy,e,rn.createElement(xy,null))},Oy=function(e){e.styles;var t=Object($g.a)(e,["styles"]);return rn.createElement("svg",Object(Wg.a)({width:"8px",height:"13px",viewBox:"0 0 8 13"},t),rn.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},rn.createElement("g",{transform:"translate(-1104.000000, -560.000000)",fill:"#424D57",fillRule:"nonzero"},rn.createElement("g",{transform:"translate(1094.000000, 553.000000)"},rn.createElement("g",{transform:"translate(2.000000, 1.000000)"},rn.createElement("polygon",{points:"8.59 17.34 13.17 12.75 8.59 8.16 10 6.75 16 12.75 10 18.75"}))))))},wy=function(e){return rn.createElement(yy,e,rn.createElement(Oy,null))},_y=function(e){e.styles;var t=Object($g.a)(e,["styles"]);return rn.createElement("svg",Object(Wg.a)({viewBox:"0 0 58 58",style:{enableBackground:"new 0 0 58 58"}},t),rn.createElement("rect",{style:{fillRule:"evenodd",clipRule:"evenodd",fill:"#F2F2F2"},width:"58",height:"58"}),rn.createElement("path",{style:{fillRule:"evenodd",clipRule:"evenodd",fill:"#424D57"},d:"M40,38c7.3,3.8,11,8.4,11,13.9v6c0,0.2-0.1,0.3-0.2,0.4C47.9,62,6.1,62,6.1,58l0-0.1l0-0.1 v-6c0-5.5,3.7-10.1,11-13.9c1.2-0.7,2-0.2,2-0.2c2.5,2.3,5.8,3.7,9.5,3.7l-0.1,0l0.3,0c3.5-0.1,6.7-1.5,9.1-3.7 C38,37.8,38.8,37.3,40,38z M28.5,17C34.3,17,39,21.7,39,27.5S34.3,38,28.5,38S18,33.3,18,27.5S22.7,17,28.5,17z"}))},Cy=function(e){return rn.createElement(yy,e,rn.createElement(_y,null))},Ey=function(e){e.styles;var t=Object($g.a)(e,["styles"]);return rn.createElement("svg",Object(Wg.a)({height:"18px",viewBox:"0 0 21 18",width:"21px"},t),rn.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},rn.createElement("g",{fill:"#000000"},rn.createElement("polygon",{points:"0.01 18 21 9 0.01 0 0 7 15 9 0 11"}))))},Iy=function(e){return rn.createElement(yy,e,rn.createElement(Ey,null))},ky=lb("div",{displayName:"ImagePlaceholder",target:"e1b717320"})("width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:#e5e5e5;"),Sy=Vg("animation:1.5s ease-in-out 0s infinite;animation-name:",Hg("0%{opacity:1.0}50%{opacity:0.4;}100%{opacity:1.0}"),";"),Ty=Vg("width:32px;height:32px;fill:currentColor;",Sy),Ay=function(e){return rn.createElement(ky,e,rn.createElement("svg",{viewBox:"0 0 32 32",className:Ty},rn.createElement("path",{d:"M6.1,22.1l5.3-4.8c0.4-0.3,1-0.3,1.3,0l3.2,2.8l6.5-5.8c0.4-0.3,1-0.3,1.3,0l2.3,2.1V9c0-0.6-0.4-1-1-1h-18 c-0.6,0-1,0.4-1,1L6.1,22.1C6.1,22,6.1,22,6.1,22.1z M8,23h8.1l-4.1-3.7L8,23z M19.1,23h5.9c0.6,0,1-0.4,1-1v-3l-3-2.7l-5.7,5.1 L19.1,23z M7.1,6h18c1.7,0,3,1.3,3,3v13c0,1.7-1.3,3-3,3h-18c-1.7,0-3-1.3-3-3V9C4.1,7.3,5.4,6,7.1,6z M15.1,16c-1.7,0-3-1.3-3-3 s1.3-3,3-3s3,1.3,3,3S16.8,16,15.1,16z M15.1,14c0.6,0,1-0.4,1-1s-0.4-1-1-1c-0.6,0-1,0.4-1,1S14.5,14,15.1,14z"})))},Ry=n(357),Py=Vg("&-enter{opacity:0;height:0;}&-enter&-enter-active{opacity:1;height:1.2em;transition:height 200ms ease-in-out,opacity 100ms ease-in-out 100ms;}&-exit{opacity:1;height:1.2em;}&-exit&-exit-active{opacity:0;height:0;transition:height 100ms ease-in-out 100ms,opacity 200ms ease-in-out;}"),My=function(e){return rn.createElement(Ry.a,Object(Wg.a)({},e,{classNames:Py,timeout:200}))};My.propTypes={children:Xb.node};var Ny=My,zy=Vg("&-enter{opacity:0;transform:scale(1.2);}&-enter-active{opacity:1;transform:scale(1);transition:opacity ",200,"ms ","cubic-bezier(0.14, 0, 0, 1)",",transform ",200,"ms ","cubic-bezier(0.14, 0, 0, 1)",";}&-enter-done{opacity:1;transform:scale(1);}"),Ly=function(e){return rn.createElement(Ry.a,Object(Wg.a)({},e,{classNames:zy,timeout:500}))},Dy=function(e){var t=e.children,n=e.src,r=e.srcSet,a=(e.scaleImage,e.className),i=e.alt,o=void 0===i?"":i,c=Object($g.a)(e,["children","src","srcSet","scaleImage","className","alt"]),s=rn.useState("pending"),u=s[0],l=s[1],d=rn.useState(!1),p=d[0],f=d[1],m="loaded"===u,h="pending"===u,v=null;return t?v=t({imageStatus:u,shouldAnimate:p}):h&&(v=rn.createElement(Ay,c)),rn.useEffect((function(){l("pending"),f(!1)}),[n,r]),rn.useEffect((function(){if(!p&&h){var e=setTimeout((function(){return f(!0)}),300);return function(){return clearTimeout(e)}}}),[p,h]),rn.createElement(rn.Fragment,null,rn.createElement(Ly,{in:p&&m},rn.createElement("img",Object(Wg.a)({alt:o},c,{src:n,srcSet:r,className:a,onLoad:function(){return l("loaded")},onError:function(){return l("failed")},style:Object(Wg.a)({},!m&&{display:"none"})}))),v)};Dy.propTypes={children:Xb.func};var By=Dy,qy=Vg("display:block;border-radius:inherit;width:100%;height:100%;object-fit:cover;"),Fy=lb("div",{displayName:"Avatar",mapPropsToStyles:function(e){var t={},n={},r=e.size,a=e.radius,i=e.fontSize;return r&&(t.width=r,t.height=r,t.lineHeight=r),a&&(t.borderRadius=a,n.borderRadius=a),i&&(t.fontSize=i),Object(Wg.a)({},t,{"& img":n})},target:"e11ezd0e0"})("border:1px solid #fff;border-radius:50%;text-align:center;background-color:#fff;text-transform:uppercase;overflow:hidden;"),Vy=function(e){var t=e.imgUrl,n=e.letter,r=null;return t||n?t?r=rn.createElement(By,{src:t,className:qy,alt:"avatar"},(function(e){var t=e.imageStatus,n=e.shouldAnimate;return Object(k.A)(t,["failed","pending"])&&rn.createElement(Cy,{className:Ug(qy,n&&Sy)})})):n&&(r=rn.createElement("span",null,n)):r=rn.createElement("div",{className:qy},rn.createElement(Cy,{className:qy})),rn.createElement(Fy,e,r)};Vy.propTypes={imgUrl:Xb.string,letter:Xb.string,size:Xb.string,style:Xb.shape()};var Uy=Vy,Gy=Vg("& >:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit;border-bottom-right-radius:0;border-bottom-left-radius:0;}& >:last-child{border-top-left-radius:0;border-top-right-radius:0;border-bottom-right-radius:inherit;border-bottom-left-radius:inherit;}& >:first-child:last-child{border-top-left-radius:inherit;border-top-right-radius:inherit;border-bottom-right-radius:inherit;border-bottom-left-radius:inherit;}"),Hy=lb("div",{displayName:"Bubble",mapPropsToStyles:function(e){var t=e.isOwn,n=e.ovalBorderRadius,r=e.sharpBorderRadius,a=e.radiusType,i={borderTopLeftRadius:"single"===a||"first"===a?n:r,borderTopRightRadius:n,borderBottomRightRadius:n,borderBottomLeftRadius:"single"===a||"last"===a?n:r};return t?function(e){var t=e.borderTopLeftRadius,n=e.borderTopRightRadius,r=e.borderBottomRightRadius;return{borderTopLeftRadius:n,borderTopRightRadius:t,borderBottomRightRadius:e.borderBottomLeftRadius,borderBottomLeftRadius:r}}(i):i},target:"emwkn670"})(Gy,";border:1px solid rgba(0,0,0,0.05);display:inline-block;max-width:100%;margin-bottom:0.1em;& img{max-width:100%;display:block;}");Hy.propTypes={children:Xb.node,isOwn:Xb.bool,radiusType:Xb.oneOf(["single","first","last"])};var Wy=Hy,Yy=lb("div",{target:"ek650k30"})("display:flex;flex-direction:column;min-width:0;"),Ky=lb("div",{mapPropsToStyles:function(e){return{flexShrink:e.shrink?1:0}},target:"e1jdwequ0"})(),Qy=function(e){return rn.createElement(Ky,Object(Wg.a)({flexFill:!0},e))};Qy.defaultProps={shrink:!0},Qy.propTypes={shrink:Xb.bool};var Zy=Qy,Jy=lb("div",{mapPropsToStyles:function(e){return{flexShrink:e.shrink?1:0}},target:"e1yi1p4d0"})(),Xy=function(e){return rn.createElement(Jy,Object(Wg.a)({flexFit:!0},e))};Xy.defaultProps={shrink:!0},Xy.propTypes={shrink:Xb.bool};var $y=lb("button",{displayName:"IconButton",section:!0,target:"e1m5b1js0"})("appearance:none;background:transparent;border:0;display:inline-block;margin:0;padding:0.5em;color:inherit;&:hover{cursor:",(function(e){return e.disabled?"default":"pointer"}),";}"),ex=function(e){var t=Object(Wg.a)({},e),n=Object(bb.b)();return rn.createElement($y,Object(Wg.a)({},n,t))};ex.propTypes={active:Xb.bool,disabled:Xb.bool,children:Xb.node.isRequired,color:Xb.string,onClick:Xb.func};var tx=ex,nx=n(358),rx=function(e){return e.getBoundingClientRect().top+window.pageYOffset},ax=rn.createContext({registerUnseenListItem:k.R,isScrollOnBottom:k.R,scrollToBottom:k.R}),ix=ax.Provider,ox=ax.Consumer,cx=function(e){void 0===e&&(e=0);var t=e;return function(){return t++}}(),sx=lb("div",{displayName:"MessageList",target:"e1i3n9g60"})("padding:0.5em;overflow-y:auto;height:100%;outline-offset:-5px;"),ux=function(e){var t=e.active,n=void 0===t||t,r=e.innerRef,a=e.onScroll,i=Object($g.a)(e,["active","innerRef","onScroll"]),o=rn.useRef(),c=Object(pb.a)(o,r),s=function(){var e=rn.useRef([]);return{getAll:function(){return e.current},registerItem:rn.useCallback((function(t){var n=cx(),r=e.current;return r.push(Object(Wg.a)({},t,{id:n})),function(){var e=Object(k.m)((function(e){return e.id===n}),r);-1!==e&&r.splice(e,1)}}),[])}}(),u=s.getAll,l=s.registerItem,d=Object(fb.a)(n),p=Object(fb.a)(a),f=Object(bb.b)(),m=rn.useCallback((function(){u().forEach((function(e){var t,n;(t=o.current,n=e.ref,rx(n)-rx(t)+n.clientHeight<=t.clientHeight)&&e.onSeen()}))}),[u]),h=rn.useMemo((function(){return Object(k.nb)(300,(function(){d.current&&m()}))}),[d,m]),v=rn.useCallback((function(e){h(),p.current&&p.current(e)}),[p,h]);rn.useEffect((function(){n&&m()}),[n,m]);var g=rn.useMemo((function(){return{registerUnseenListItem:l,isScrollOnBottom:function(){return e=o.current,void 0===(t=20)&&(t=0),e.scrollTop+e.clientHeight-e.scrollHeight>=-t;var e,t},scrollToBottom:function(){var e;(e=o.current).scrollTop=e.scrollHeight}}}),[l]);return rn.createElement(ix,{value:g},rn.createElement(sx,Object(Wg.a)({},f,i,{innerRef:c,onScroll:v,role:"grid","aria-live":"polite","aria-relevant":"additions"})))},lx=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this)._unregisterFromMessageList=k.R,t._registerInMessageList=Object(k.O)((function(e){return function(n){t._unregisterFromMessageList(),n&&(t._unregisterFromMessageList=e({ref:n,onSeen:t.props.onSeen}))}})),t}Object(Qg.a)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this._unregisterFromMessageList()},n.render=function(){var e=this;return rn.createElement(ox,null,(function(t){var n=t.registerUnseenListItem;return rn.createElement("div",{ref:e.props.seen?null:e._registerInMessageList(n),role:"row"},rn.Children.only(e.props.children))}))},t}(rn.Component);lx.propTypes={children:Xb.node.isRequired,onSeen:Xb.func},lx.defaultProps={onSeen:k.R};var dx=lx,px=lb("div",{displayName:"Message",mapPropsToStyles:function(e){var t=e.horizontalAlign;return t?{flexDirection:"left"===t?"row":"row-reverse"}:null},section:!0,target:"e10ccb470"})("display:flex;align-items:flex-start;font-size:0.9em;margin:0.3em;max-width:100%;"),fx=lb("span",{displayName:"AuthorName",target:"e10ccb471"})("font-size:0.8em;"),mx=lb("div",{displayName:"MessageMeta",target:"e10ccb472"})("text-align:left;"),hx=lb("div",{displayName:"Content",target:"e10ccb473"})("display:flex;flex-direction:column;overflow:hidden;align-items:flex-start;"),vx=lb("span",{displayName:"Time",target:"e10ccb474"})("font-size:0.8em;"),gx=lb("div",{displayName:"Status",target:"e10ccb475"})("text-align:right;font-size:0.8em;"),bx=function(e){var t=e.children,n=e.authorName,r=e.deliveryStatus,a=e.isOwn,i=e.date,o=e.showMetaOnClick,c=e.onSeen,s=(e.radiusType,e.seen),u=Object($g.a)(e,["children","authorName","deliveryStatus","isOwn","date","showMetaOnClick","onSeen","radiusType","seen"]),l=Object(bb.b)(),d=rn.createElement(Jb.a,null,(function(e){var c=e.on,s=e.getElementTogglerProps;return rn.createElement(px,Object(Wg.a)({},s(u),{own:a,tabIndex:null}),rn.createElement(hx,Object(Wg.a)({role:"gridcell"},l),rn.createElement(nx.a,null,(!o||c)&&rn.createElement(Ny,null,rn.createElement(mx,null,n&&rn.createElement(fx,null,n," "),i&&rn.createElement(vx,null,i)))),t,r&&rn.createElement(gx,null,r)))}));return rn.createElement(dx,{onSeen:c,seen:s},d)};bx.propTypes={authorName:Xb.string,authorOpen:Xb.bool,children:Xb.node,date:Xb.string,deliveryStatus:Xb.string,isOwn:Xb.bool,onClick:Xb.func,onSeen:Xb.func,showMetaOnClick:Xb.bool,style:Xb.shape(),toggleAuthor:Xb.func,radiusType:Xb.oneOf(["single","first","last"]),seen:Xb.bool},bx.defaultProps={onClick:function(){},seen:!1};var yx=bx,xx=lb("div",{displayName:"SubTitle",target:"e1fut3qs0"})("font-weight:300;opacity:0.7;");xx.defaultProps={textWrap:!0};var jx=xx,Ox=lb("div",{displayName:"Title",target:"e9xf8br0"})("font-weight:400;");Ox.defaultProps={textWrap:!0};var wx=Ox,_x=(Object(k.W)(console.warn.bind(console)),lb("div",{displayName:"MessageTitle",target:"e1ykjxgu0"})("font-weight:600;padding:1em;")),Cx=Vg("margin-bottom:4px;"),Ex=function(e){var t=e.children,n=e.title,r=e.subtitle,a=Object($g.a)(e,["children","title","subtitle"]);var i=t||[n&&rn.createElement(wx,{key:"title",preserveLines:!0,className:Cx},n),r&&rn.createElement(jx,{key:"subtitle",preserveLines:!0},r)];return rn.createElement(_x,a,i)};Ex.propTypes={children:Xb.oneOfType([Xb.arrayOf(Xb.node),Xb.node]),subtitle:Xb.string,title:Xb.string};var Ix=Ex,kx=lb("div",{displayName:"MessageText",target:"eovu8nx0"})("white-space:pre-line;word-wrap:break-word;overflow-wrap:break-word;max-width:100%;padding:1em;"),Sx=lb("div",{displayName:"MessageMedia",mapPropsToStyles:function(e){var t=e.style||{};return{img:{borderTopLeftRadius:t.borderTopLeftRadius,borderTopRightRadius:t.borderTopRightRadius,borderBottomRightRadius:t.borderBottomRightRadius,borderBottomLeftRadius:t.borderBottomLeftRadius}}},target:"evmhqt80"})("overflow:hidden;"),Tx="1px solid rgba(0, 0, 0, 0.1)",Ax=lb("div",{displayName:"MessageButtons",target:"edowbh60"})(Gy,";& >:first-child{border-top:",Tx,";}&:first-child >:first-child{border-top:0;}& >:last-child{border-bottom:",Tx,";}&:last-child >:last-child{border-bottom:0;}> *{border-color:","rgba(0, 0, 0, 0.1)"," !important;}"),Rx=Object(N.a)(.2),Px=lb((function(e){var t=e.href,n=Object($g.a)(e,["href"]);return t?rn.createElement("a",Object(Wg.a)({href:t,rel:"nofollow noopener"},n)):rn.createElement("button",n)}),{displayName:"Button",mapPropsToStyles:function(e){var t=e.primary?e.theme.vars["--primary-color"]:"black",n=Rx(t);return{borderColor:t,color:t,":hover":{color:n,borderColor:n}}},shouldForwardProp:hy.a,target:"e1972fzd0"})("border-width:1px;border-style:solid;background-color:#fff;font-size:1em;font-family:inherit;line-height:1.4em;text-align:center;text-decoration:none;appearance:none;padding:0.8em;transition:box-shadow 0.1s,color 0.1s,border-color 0.2s;&:hover{cursor:pointer;}&:active{box-shadow:none;outline:none;}&[disabled]{pointer-events:none;}"),Mx=function(e){var t=e.label,n=Object($g.a)(e,["label"]),r=Object(bb.b)();return rn.createElement(Px,Object(Wg.a)({},r,n),t)};Mx.propTypes={label:Xb.string};var Nx=Mx,zx=lb(Nx,{target:"e121y1dq0"})("display:inline-block;width:100%;border-left:0;border-right:0;border-top:0;border-bottom-color:rgba(0,0,0,0.1);box-shadow:none;transition:background-color 0.1s;background:transparent;color:",(function(e){return e.disabled?"#8D9BA9":"inherit"}),";margin:0;&:hover{border-bottom-color:rgba(0,0,0,0.15);background:rgba(0,0,0,0.02);color:inherit;}&:active{background:rgba(0,0,0,0.04);color:inherit;}"),Lx=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){e.stopPropagation(),t.props.onClick(e)},t}return Object(Qg.a)(t,e),t.prototype.render=function(){return rn.createElement(zx,Object(Wg.a)({},this.props,{onClick:this.handleClick}))},t}(rn.Component);Lx.propTypes={className:Xb.string,label:Xb.string,onClick:Xb.func,primary:Xb.bool,value:Xb.oneOfType([Xb.string,Xb.number])},Lx.defaultProps={onClick:k.R};var Dx=function(e){return rn.Children.toArray(e).filter(Boolean)},Bx={radiusType:"single"},qx={radiusType:"first"},Fx={radiusType:"last"},Vx={authorName:null,date:null},Ux=lb("div",{displayName:"MessageGroup",mapPropsToStyles:function(e){return e.isOwn?{flexDirection:"row-reverse"}:null},target:"eslhdd60"})("display:flex;margin-bottom:1em;"),Gx=lb("div",{target:"eslhdd61"})("display:flex;flex-direction:column;align-items:center;text-align:center;font-size:0.7em;line-height:1.6em;",(function(e){return{minWidth:e.theme.Avatar.size,margin:e.isOwn?"0 0 0 .3em":"0 .3em 0 0"}}),";"),Hx=Vg("overflow:hidden;"),Wx=function(e){var t=e.avatar,n=e.avatarLetter,r=e.children,a=e.onlyFirstWithMeta,i=Object($g.a)(e,["avatar","avatarLetter","children","onlyFirstWithMeta"]),o=Dx(r),c=rn.Children.count(o);return rn.createElement(Ux,i,(t||n)&&rn.createElement(Gx,{flexFit:!0,isOwn:i.isOwn},rn.createElement(Uy,{imgUrl:t,letter:n})),rn.createElement(Zy,{className:Hx},rn.Children.map(o,(function(e,t){if(1===c)return Object(rn.cloneElement)(e,Bx);if(0===t)return Object(rn.cloneElement)(e,qx);var n=a&&t>0;return t===c-1?Object(rn.cloneElement)(e,n?Object(Wg.a)({},Fx,Vx):Fx):n?Object(rn.cloneElement)(e,Vx):e}))))};Wx.propTypes={avatar:Xb.string,avatarLetter:Xb.string,children:Xb.node,isOwn:Xb.bool,onlyFirstWithMeta:Xb.bool};var Yx=Wx,Kx=yx,Qx={vars:{"primary-color":"#427fe1","secondary-color":"#fbfbfb","tertiary-color":"#fff"},AgentBar:{Avatar:{size:"42px",css:{marginRight:".6em"}},css:{backgroundColor:"var(--secondary-color)"}},Avatar:{size:"30px"},Bubble:{sharpBorderRadius:"0.3em",ovalBorderRadius:"1.4em",css:{backgroundColor:{default:"var(--secondary-color)",bot:"green"}}},Button:{},ChatListItem:{Avatar:{css:{marginRight:".5em"}}},FixedWrapperMaximized:{animationDuration:100,width:"400px",height:"500px"},FixedWrapperMinimized:{animationDuration:100},FixedWrapperRoot:{position:"right",css:{}},Message:{secondaryTextColor:"#000",horizontalAlign:"left",own:{horizontalAlign:"right",Bubble:{css:{backgroundColor:"var(--primary-color)",color:"#fff"}},Content:{css:{alignItems:"flex-end"}},MessageMeta:{css:{textAlign:"right"}},Time:{css:{textAlign:"right"}}},bot:{Bubble:{css:{backgroundColor:"green"}}}},MessageButtons:{},MessageGroup:{},MessageList:{css:{backgroundColor:"var(--tertiary-color)"}},MessageMedia:{},MessageText:{},MessageTitle:{},QuickReply:{css:{borderColor:"var(--primary-color)",backgroundColor:"#fff",color:"var(--primary-color)"}},TextComposer:{inputColor:"#000",Icon:{color:"#aaa"},IconButton:{active:{Icon:{color:"var(--primary-color)"}}}},TitleBar:{iconsColor:"#fff",behaviour:"default",css:{backgroundColor:"var(--primary-color)"}}},Zx=function(e){var t=e.theme,n=void 0===t?{}:t,r=e.children,a=function e(t){var n=nb(t);return 0===Object.keys(n).length?Object(Wg.a)({},t,{vars:Object(k.K)((function(e){return"--"+e}),t.vars||{})}):Object(Wg.a)({},t,Object(k.L)((function(t){return Object(Wg.a)({},e(t),{css:t.css||{}})}),n),{vars:Object(k.K)((function(e){return"--"+e}),t.vars||{})})}(Object(k.P)(Qx,n));return rn.createElement(Xg,{value:a},r)},Jx=lb("button",{displayName:"QuickReply",target:"e1gt5po80"})("border-width:1px;border-style:solid;font-size:1em;line-height:1em;appearance:none;transition:box-shadow 0.1s,color 0.1s,border-color 0.2s;margin:0.25em;background-color:#fff;border-radius:1.4em;box-shadow:0 0.1em 0.1em 0 rgba(32,34,40,0.05);font-weight:400;overflow:hidden;padding:0.375em 1em 0.5em;word-break:break-word;&:hover{cursor:pointer;}&:active{outline:none;}"),Xx=function(e){var t=e.value,n=e.onSelect,r=void 0===n?k.R:n,a=e.onClick,i=void 0===a?k.R:a,o=Object($g.a)(e,["value","onSelect","onClick"]),c=Object(bb.b)(),s=rn.useCallback((function(e){r(t),i(e)}),[i,r,t]);return rn.createElement(Jx,Object(Wg.a)({value:t},o,c,{onClick:s}))},$x=(Object(k.W)(console.warn.bind(console)),lb("div",{displayName:"QuickReplies",target:"e1dnb9qc0"})("display:flex;flex-wrap:wrap;text-align:center;justify-content:center;width:100%;")),ej=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this)._handleSelect=function(e){return t.props.onSelect(e)},t}return Object(Qg.a)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.children,r=t.replies,a=(t.onSelect,Object($g.a)(t,["children","replies","onSelect"]));var i=n?Dx(n):r.map((function(e,t){return rn.createElement(Xx,{key:t,value:e},e)}));return rn.createElement($x,a,rn.Children.map(i,(function(t){return Object(rn.cloneElement)(t,{onSelect:e._handleSelect})})))},t}(rn.Component);ej.defaultProps={onSelect:k.R},ej.propTypes={children:Xb.node,onSelect:Xb.func,replies:Xb.arrayOf(Xb.string)};var tj=lb("div",{displayName:"TitleBar",section:!0,target:"e1ohfhv0"})("display:flex;justify-content:center;align-items:center;width:100%;border:#000;color:#fff;position:relative;z-index:2;text-align:center;padding:0.4em;"),nj=lb("div",{displayName:"TitleBarTitle",target:"e1ohfhv1"})("width:100%;margin:0;margin-bottom:4px;padding:0 2px;text-align:center;font-size:0.9em;flex-grow:1;"),rj=function(e){var t=e.leftIcons,n=e.rightIcons,r=e.title,a=Object($g.a)(e,["leftIcons","rightIcons","title"]);return rn.createElement(tj,a,t,rn.createElement(nj,{ellipsis:!0},r),n)};rj.propTypes={leftIcons:Xb.arrayOf(Xb.node),rightIcons:Xb.arrayOf(Xb.node),theme:Xb.shape(),title:Xb.node};var aj=rj,ij=n(123),oj=function(e){return 13===e.which},cj=function(e){return oj(e)&&(e.altKey||e.shiftKey)},sj=function(e){return oj(e)&&!e.altKey&&!e.shiftKey},uj=rn.createContext(),lj=uj.Provider,dj=uj.Consumer,pj=lb("div",{displayName:"TextComposer",section:!0,target:"eyij3xx0"})("padding:0;background:#fff;border-top:1px solid rgba(0,0,0,0.1);"),fj=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={value:t._getValue({value:t.props.defaultValue})},t._handleButtonClick=function(e){t.maybeSend()&&t.props.onButtonClick(e)},t._handleChange=function(e){var n=e.target.value;t._isControlled()||t.setState({value:n}),t.props.onValueChange(n),t.props.onChange(e)},t._handleInputRef=function(e){t._inputRef=e,t.props.inputRef(e)},t._handleKeyDown=function(e){var n=t.props.onKeyDown;sj(e)&&e.preventDefault(),oj(e)&&!cj(e)?(t.maybeSend(),n(e)):n(e)},t.maybeSend=function(){return!!t._canSend()&&(t._isControlled()||t.setState({value:""}),t.props.onValueChange(""),t.props.onSend(Object(k.rb)(t.state.value)),!0)},t}Object(Qg.a)(t,e);var n=t.prototype;return n._getValue=function(e,t){return void 0===e&&(e=this.state),void 0===t&&(t=this.props),this._isControlled()?t.value:e.value},n._canSend=function(){return this.props.active&&""!==this.state.value.trim()},n._isControlled=function(){return"string"===this.props.value},n._setCursorAtTheEnd=function(){var e=this._inputRef.value.length;this._inputRef.setSelectionRange(e,e)},n.componentDidMount=function(){this.props.defaultValue&&this._inputRef&&document.activeElement===this._inputRef&&this._setCursorAtTheEnd()},n.componentDidUpdate=function(e,t){var n=this._getValue();n!==this._getValue(t,e)&&""===n&&this._inputRef.focus()},n.render=function(){var e=this.props,t=(e.active,e.children),n=(e.defaultValue,e.onButtonClick,e.onChange,e.onKeyDown,e.onSend,e.onValueChange,e.value,Object($g.a)(e,["active","children","defaultValue","onButtonClick","onChange","onKeyDown","onSend","onValueChange","value"])),r={active:this._canSend(),inputRef:this._handleInputRef,value:this._getValue(),maybeSend:this.maybeSend,onButtonClick:this._handleButtonClick,onChange:this._handleChange,onKeyDown:this._handleKeyDown};return rn.createElement(lj,{value:r},rn.createElement(pj,n,t))},t}(rn.Component);fj.propTypes={active:Xb.bool,children:Xb.node,defaultValue:Xb.string,inputRef:Xb.func,onButtonClick:Xb.func,onChange:Xb.func,onKeyDown:Xb.func,onSend:Xb.func,value:Xb.string},fj.defaultProps={active:!0,defaultValue:"",inputRef:k.R,onButtonClick:k.R,onChange:k.R,onKeyDown:k.R,onSend:k.R,onValueChange:k.R};var mj=function(e){return void 0===e&&(e=k.z),function(t){var n,r;return r=n=function(n){function r(){return n.apply(this,arguments)||this}return Object(Qg.a)(r,n),r.prototype.render=function(){var n=this;return rn.createElement(dj,null,(function(r){return rn.createElement(t,Object(Wg.a)({},n.props,e(r,n.props)))}))},r}(rn.Component),n.displayName="withComposer("+Object(ij.a)(t)+")",r}},hj=function(e){function t(){return e.apply(this,arguments)||this}return Object(Qg.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.icon,n=Object($g.a)(e,["icon"]);return rn.createElement(tx,n,t?rn.createElement(yy,{"aria-hidden":!0},t):rn.createElement(Iy,null))},t}(rn.Component);hj.propTypes={active:Xb.bool,onClick:Xb.func};Object(k.W)(console.warn.bind(console));var vj=mj((function(e,t){var n=e.active,r=e.onButtonClick;return n?{active:n,onClick:r}:{active:n}}))(hj),gj=n(245),bj=lb((function(e){e.flexFill;var t=Object($g.a)(e,["flexFill"]);return rn.createElement(gj.a,t)}),{displayName:"TextInput",target:"e1m92qam0"})("appearance:none;border:0;resize:none;background-color:#fff;height:1.5em;line-height:1.5em;min-width 0;width:100%;font-size:1em;&:focus,&:active{outline:none;}"),yj=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this)._getRef=function(e){t.props.inputRef(e),t.props.innerRef(e)},t}return Object(Qg.a)(t,e),t.prototype.render=function(){var e=this.props,t=(e.innerRef,e.inputRef,Object($g.a)(e,["innerRef","inputRef"]));return rn.createElement(bj,Object(Wg.a)({},t,{inputRef:this._getRef}))},t}(rn.Component);yj.defaultProps={innerRef:k.R,inputRef:k.R,maxRows:3,onChange:k.R,onKeyDown:k.R,placeholder:"Write a message..."},yj.propTypes={defaultValue:Xb.string,innerRef:Xb.func,inputRef:Xb.func,maxRows:Xb.number,minRows:Xb.number,onChange:Xb.func,onHeightChange:Xb.func,onKeyDown:Xb.func,placeholder:Xb.string,value:Xb.string};Object(k.W)(console.warn.bind(console));var xj=mj((function(e,t){return{inputRef:e.inputRef,onChange:e.onChange,onKeyDown:e.onKeyDown,value:e.value}}))(yj),jj=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleButtonClick=function(e){return function(n){t.props.onButtonClick(n,e)}},t}return Object(Qg.a)(t,e),t.prototype.render=function(){var e=this,t=null,n=Object(k.m)((function(e){return e.showMore}),this.props.buttons);if(-1!==n){var r=this.props.buttons[n],a=r.text,i=Object($g.a)(r,["text"]);t=rn.createElement(Lx,Object(Wg.a)({},i,{label:a,"data-variant":"show-more",onClick:this.handleButtonClick(n)}))}return rn.createElement(rn.Fragment,null,rn.createElement(Ax,null,this.props.buttons.map((function(t,r){var a=t.text,i=t.key,o=(t.showMore,Object($g.a)(t,["text","key","showMore"])),c=void 0!==i?i:r;return r!==n?rn.createElement(Lx,Object(Wg.a)({key:c,label:a.length>20?a.slice(0,20).trim()+"\u2026":a,onClick:e.handleButtonClick(c)},o)):null}))),t)},t}(rn.Component);jj.defaultProps={onButtonClick:k.R};var Oj=jj,wj=function(e){return e.stopPropagation()},_j=function(e){return rn.createElement("a",Object(Wg.a)({},e,{onClick:wj,rel:"nofollow noopener",target:"_blank"}))},Cj=function(e){return Vg("display:block;width:100%;height:",e?"100%":"150px",";object-fit:cover;")},Ej=lb("div",{target:"e9ztsyy0"})("display:flex;margin:0 auto;overflow:hidden;width:100%;min-width:110px;height:",(function(e){return e.horizontalLayout?"100%":"150px"}),";align-items:center;justify-content:center;background:#fff;"),Ij=function(e){var t=e.link,n=e.url,r=e.srcset,a=e.horizontalLayout,i=Object($g.a)(e,["link","url","srcset","horizontalLayout"]),o=rn.createElement(Sx,i,rn.createElement(Ej,{horizontalLayout:a},rn.createElement(By,Object(Wg.a)({alt:"",className:Cj(a)},function(e,t){var n={src:e};return void 0!==t&&(n.srcSet=t),n}(n,r)))));return t?rn.createElement(_j,{href:t,style:i.style},o):o};Ij.propTypes={link:Xb.string,url:Xb.string.isRequired,srcSet:Xb.string};var kj=Ij,Sj=Vg("width:230px;"),Tj=Vg("display:flex;flex-direction:row;"),Aj=Vg("max-width:110px;"),Rj=lb("div",{target:"es7wtci0"})("width:230px;min-width:0px;max-width:",(function(e){return e.horizontalLayout?"66%":"100%"}),";"),Pj={borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit",borderBottomRightRadius:0,borderBottomLeftRadius:0},Mj={borderTopLeftRadius:"inherit",borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:"inherit"},Nj=(rn.Component,n(239)),zj=lb("div",{target:"epptpc30"})("position:relative;width:100%;display:flex;"),Lj=Vg("scrollbar-width:none;-ms-overflow-style:none;&::-webkit-scrollbar{display:none;}"),Dj=lb("div",{target:"epptpc31"})("display:flex;width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch;align-items:flex-start;",Lj," ",(function(e){var t,n=e.padding,r=e.dir;return Object(Wg.a)({},"undefined"!==typeof n&&{padding:n},{"> :not(:last-child)":(t={},t["rtl"===r?"marginLeft":"marginRight"]=8,t)})})),Bj=lb("div",{target:"epptpc32"})("flex-grow:0;flex-shrink:0;"),qj=lb("button",{target:"epptpc33"})("position:absolute;width:30px;height:30px;border-radius:50%;background:#fff;border:0;box-shadow:0 4px 12px rgba(0,0,0,0.3);text-align:center;top:32%;display:flex;align-items:center;justify-content:center;padding:0;z-index:1;-webkit-transform:translate3d(0,0,0);&:hover{cursor:pointer;}svg{display:inline;}",(function(e){var t;return(t={})[e.variant]=".5em",t}),";"),Fj=function(e){var t=e.itemCount;return t*e.itemWidth+(t-1)*e.spacing},Vj=function(e){var t=e.clientWidth,n=e.scrollableElement,r=e.currentX,a=e.nextX,i=e.scrollDirection,o=e.isRtl,c=n.firstElementChild.getBoundingClientRect().width,s=function(e,t){if(e.length<2)return 0;var n=e[0],r=e[1],a=n.getBoundingClientRect(),i=r.getBoundingClientRect();return t?a.left-i.right:i.left-a.right}(n.children,o),u=(o?n.lastElementChild:n.firstElementChild).getBoundingClientRect().left-n.getBoundingClientRect().left+r,l=function(e){var t=e.x,n=e.scrollDirection,r=(t-e.leftElementXOffset)/(e.itemWidth+e.spacing);return 1===n?Math.floor(r):Math.ceil(r)}({x:a,scrollDirection:i,leftElementXOffset:u,itemWidth:c,spacing:s});if(c>t)return u+(1===i?l+1:l-1)*(c+s);var d=u+l*(c+s),p=Math.floor(t/(c+s)),f=Fj({itemCount:p,itemWidth:c,spacing:s});return d+(f+c<=t?Fj({itemCount:p+1,itemWidth:c,spacing:s}):f)/2-t/2},Uj=function(e){var t=e.children,n=e.scrollableElementPadding,r=e.dir,a=rn.useRef(0),i=rn.useRef(null),o=Object(bb.b)(),c=Object(bb.b)(),s=Object(bb.b)(),u=rn.useState(!0),l=u[0],d=u[1],p=rn.useState(!0),f=p[0],m=p[1],h=Object(vb.a)("x",i),v=rn.useCallback((function(){var e=i.current;e&&(d(!function(e){if("ltr"===getComputedStyle(e).direction)return e.scrollLeft<=1;var t=e.scrollWidth-e.clientWidth;switch(Object(Yi.d)()){case"negative":return e.scrollLeft<=1-t;case"positive-ascending":return e.scrollLeft>=t-1;case"positive-descending":return e.scrollLeft<=1}}(e)),m(!function(e){var t=getComputedStyle(e).direction,n=e.scrollWidth-e.clientWidth;if("ltr"===t)return e.scrollLeft>=n-1;switch(Object(Yi.d)()){case"negative":return e.scrollLeft>=-1;case"positive-ascending":return e.scrollLeft<=1;case"positive-descending":return e.scrollLeft>=n-1}}(e)))}),[]),g=rn.useMemo((function(){return Object(k.nb)(200,v)}),[v]);yb((function(){var e=requestAnimationFrame(v),t=new Nj.a(Object(k.f)(200,v));return t.observe(i.current),function(){cancelAnimationFrame(e),t.disconnect()}}));var b=function(e){a.current+=e,a.current<0?a.current=0:a.current>=t.length&&(a.current=t.length-1);var n=i.current,o=n.clientWidth,c=n.scrollWidth,s="rtl"===r,u=function(e,t){var n=e.scrollWidth-e.clientWidth;if(t)switch(Object(Yi.d)()){case"negative":return n+e.scrollLeft;case"positive-ascending":return n-e.scrollLeft;case"positive-descending":return e.scrollLeft}return e.scrollLeft}(n,s),l=u+e*o,d=1===e?Math.min(l,c-o):Math.max(l,0),p=l===d?Vj({clientWidth:o,scrollableElement:n,currentX:u,nextX:l,scrollDirection:e,isRtl:s}):d;if(s)switch(Object(Yi.d)()){case"negative":return void h(-c+o+p);case"positive-ascending":return void h(c-o-p);case"positive-descending":return void h(p)}else h(p)};return rn.createElement(zj,null,l&&rn.createElement(qj,Object(Wg.a)({variant:"left","aria-label":"Previous item"},o,{onClick:function(e){e.stopPropagation(),b(-1)}}),rn.createElement(jy,{"aria-hidden":!0})),f&&rn.createElement(qj,Object(Wg.a)({variant:"right","aria-label":"Next item"},c,{onClick:function(e){e.stopPropagation(),b(1)}}),rn.createElement(wy,{"aria-hidden":!0})),rn.createElement(Dj,Object(Wg.a)({dir:r,tabIndex:-1,innerRef:i,onScroll:g,padding:n},s),rn.Children.map(t,(function(e,t){return rn.createElement(Bj,{onFocus:function(){return b(Object(k.hb)(t-a.current))}},e)}))))},Gj=n(54),Hj=Vg("margin:0 4px;margin-bottom:8px;padding:8px;border-radius:6px !important;"),Wj=lb(Xx,{target:"ecz5hmt0"})("font-family:'Noto Sans';font-size:0.9em;",(function(e){var t=e.theme;return Vg("color:",t.colors.cta,";border-color:",t.colors.cta,";")})),Yj=function(e){return e.stopPropagation()},Kj=function(e){var t=e.replies,n=e.onSelect,r=Object(A.a)(e,["replies","onSelect"]),a=Object(bb.b)();return rn.createElement(ej,Object(T.a)({onSelect:n},r,a),t.map((function(e,t){var n=e.text;return rn.createElement(Wj,{key:t,onClick:Yj,value:t,className:Hj},n.length>20?n.slice(0,20).trim()+"\u2026":n)})))},Qj=function(e){return Vg("transition-delay:",e,"ms;")},Zj=Vg("&-enter,&-appear{opacity:0;transform:translateY(8px);}&-enter-active,&-appear-active{opacity:1;transform:translateY(0);transition:opacity 100ms ease-in,transform 200ms ease-in;}&-exit{opacity:1;transform:translateY(0);}&-exit-active{opacity:0;transform:translateY(8px);transition:opacity 100ms ease-in,transform 200ms ease-in;}"),Jj=function(e){var t=e.delay,n=void 0===t?0:t,r=Object(A.a)(e,["delay"]);return rn.createElement(Ry.a,Object(T.a)({},r,{timeout:200+n,classNames:Zj,className:Qj(n)}))},Xj=function(e){return void 0===e&&(e=0),Vg("transition-delay:",e,"ms;&-enter,&-appear{opacity:0;}&-enter-active,&-appear-active{opacity:1;transition:opacity 200ms ease-out;}&-exit{opacity:1;}&-exit-active{opacity:0;transition:opacity 200ms ease-out;}")},$j=function(e){var t=e.delay,n=void 0===t?0:t,r=Object(A.a)(e,["delay"]);return rn.createElement(Ry.a,Object(T.a)({},r,{timeout:200+n,classNames:Xj(n)}))},eO=function(e){var t=e.slideDuration,n=e.opacityDuration,r=e.opacityDelay,a=e.theme;return Vg("&-exit{opacity:1;}&-exit-active,&-exit-done{opacity:0;transform:translateX(100%);transition:transform ",t,"ms ",a.transitions.easings.swift,",opacity ",n,"ms linear ",r,"ms;}")},tO=Object(Zg.b)((function(e){var t=e.transitionDuration,n=e.onTransitionStart,r=e.onTransitionEnd,a=e.theme,i=Object(A.a)(e,["transitionDuration","onTransitionStart","onTransitionEnd","theme"]),o=t,c=Math.floor(2/3*t),s=t-c;return rn.createElement(Ry.a,Object(T.a)({},i,{timeout:t,onExited:r,onEntered:r,onExiting:n,onEntering:n,classNames:eO({slideDuration:o,opacityDuration:c,opacityDelay:s,theme:a})}))})),nO=function(e,t){return Vg("&-enter{height:0;}&-enter-active{height:",e,"px;transition:height ",600,"ms ",t.transitions.easings.swift,";}&-exit{height:",e,"px;}&-exit-active,&-exit-done{height:0;transition:height ",600,"ms ",t.transitions.easings.swift,";}")},rO=Object(Zg.b)((function(e){var t=e.onTransitionStart,n=e.onTransitionEnd,r=e.contentHeight,a=e.theme,i=Object(A.a)(e,["onTransitionStart","onTransitionEnd","contentHeight","theme"]);return rn.createElement(Ry.a,Object(T.a)({},i,{timeout:600,onExited:n,onEntered:n,onExiting:t,onEntering:t,classNames:nO(r,a)}))})),aO=function(e){return Vg("transition-delay:",e,"ms;")},iO=function(e){return Vg("&-enter,&-appear{opacity:0;transform:translateY(30px);}&-enter-active,&-appear-active{opacity:1;transform:translateY(0);transition:opacity 300ms ",e.transitions.easings.smooth,",transform 400ms ",e.transitions.easings.smooth,";}")},oO=Object(Zg.b)((function(e){var t=e.theme,n=e.delay,r=void 0===n?0:n,a=Object(A.a)(e,["theme","delay"]);return rn.createElement(Ry.a,Object(T.a)({},a,{timeout:400+r,className:aO(r),classNames:iO(t)}))})),cO=lb(uy,{target:"e1wumze50"})("width:100%;margin-bottom:",(function(e){return e.noMargin?0:8}),"px;"),sO=function(e){var t=e.reverse,n=e.noMargin,r=e.children,a=Object(A.a)(e,["reverse","noMargin","children"]);return rn.createElement(Jj,a,rn.createElement(cO,{reverse:t,noMargin:n},r))},uO=function(e){var t=e.fill;return rn.createElement("g",{className:Vg("animation-timing-function:cubic-bezier(0,0,0.58,1);animation-name:",Hg("91.67%{transform:translate(60px,0px) scale(1,1) translate(-60px,0px);}100%{transform:translate(60px,0px) scale(0.3,0.3) translate(-60px,0px);}0%{transform:translate(60px,0px) scale(1,1) translate(-60px,0px);}"),";")},rn.createElement("circle",{cx:"30",cy:"30",r:"30",className:Vg("fill:",t,";animation-timing-function:cubic-bezier(0,0,1,1);animation-name:",Hg("0%{opacity:0;}4.17%{opacity:1;}100%{opacity:1;}"),";")}))},lO=function(e){var t=e.fill;return rn.createElement("g",{className:Vg("animation-timing-function:cubic-bezier(0,0,0.58,1);animation-name:",Hg("91.67%{transform:translate(29.5px,19px) translate(-29.5px,-19px) translate(0px,0px);}100%{transform:translate(29.5px,19px) translate(-29.5px,-19px) translate(22px,-12px);}0%{transform:translate(29.5px,19px) translate(-29.5px,-19px) translate(0px,0px);}"),";")},rn.createElement("g",{className:Vg("animation-timing-function:cubic-bezier(0,0,1,1);animation-name:",Hg("5%{transform:translate(29.5px,19px) rotate(0deg) translate(-29.5px,-19px);}9.17%{transform:translate(29.5px,19px) rotate(30deg) translate(-29.5px,-19px);}13.33%{transform:translate(29.5px,19px) rotate(35deg) translate(-29.5px,-19px);}17.50%{transform:translate(29.5px,19px) rotate(30deg) translate(-29.5px,-19px);}25%{transform:translate(29.5px,19px) rotate(-30deg) translate(-29.5px,-19px);}29.17%{transform:translate(29.5px,19px) rotate(-33deg) translate(-29.5px,-19px);}33.33%{transform:translate(29.5px,19px) rotate(-28deg) translate(-29.5px,-19px);}44.17%{transform:translate(29.5px,19px) rotate(16deg) translate(-29.5px,-19px);}49.17%{transform:translate(29.5px,19px) rotate(17deg) translate(-29.5px,-19px);}60.83%{transform:translate(29.5px,19px) rotate(-5deg) translate(-29.5px,-19px);}65%{transform:translate(29.5px,19px) rotate(-6deg) translate(-29.5px,-19px);}76.67%{transform:translate(29.5px,19px) rotate(3deg) translate(-29.5px,-19px);}80.83%{transform:translate(29.5px,19px) rotate(3deg) translate(-29.5px,-19px);}89.17%{transform:translate(29.5px,19px) rotate(0deg) translate(-29.5px,-19px);}0%{transform:translate(29.5px,19px) rotate(0deg) translate(-29.5px,-19px);}100%{transform:translate(29.5px,19px) rotate(0deg) translate(-29.5px,-19px);}"),";")},rn.createElement("g",{className:Vg("animation-timing-function:cubic-bezier(0,0,0.58,1);animation-name:",Hg("91.67%{transform:translate(29.5px,19px) scale(1,1) translate(-29.5px,-19px);}100%{transform:translate(29.5px,19px) scale(0.2,0.2) translate(-29.5px,-19px);}0%{transform:translate(29.5px,19px) scale(1,1) translate(-29.5px,-19px);}"),";")},rn.createElement("path",{d:"M29.5,46 C32.5375661,46 35,43.5375661 35,40.5 C35,37.824954 33.090254,35.595953 30.5597766,35.1020119 C30.2168484,35.0350734 29.8625201,19 29.5,19 C29.1861978,19 28.8785336,35.02628 28.5790883,35.0767591 C25.97994,35.5149119 24,37.7762361 24,40.5 C24,43.5375661 26.4624339,46 29.5,46 Z",className:Vg("fill:",t,";animation-timing-function:cubic-bezier(0,0,1,1);animation-name:",Hg("6.67%{opacity:0;}9.17%{opacity:1;}91.67%{opacity:1;}95.83%{opacity:0;}0%{opacity:0;}100%{opacity:0;}"),";")}))))},dO=function(e){var t=e.fill,n=e.stroke;return rn.createElement("g",{className:Vg("animation-timing-function:cubic-bezier(0,0,0.58,1);animation-name:",Hg("91.67%{transform:translate(29.5px,15px) translate(-29.5px,-15px) translate(0px,0px);}100%{transform:translate(29.5px,15px) translate(-29.5px,-15px) translate(22px,-8px);}0%{transform:translate(29.5px,15px) translate(-29.5px,-15px) translate(0px,0px);}"),";")},rn.createElement("g",{className:Vg("animation-timing-function:cubic-bezier(0,0,1,1);animation-name:",Hg("4.17%{transform:translate(29.5px,15px) rotate(0deg) translate(-29.5px,-15px);}7.50%{transform:translate(29.5px,15px) rotate(30deg) translate(-29.5px,-15px);}11.67%{transform:translate(29.5px,15px) rotate(35deg) translate(-29.5px,-15px);}15.83%{transform:translate(29.5px,15px) rotate(30deg) translate(-29.5px,-15px);}24.17%{transform:translate(29.5px,15px) rotate(-30deg) translate(-29.5px,-15px);}28.33%{transform:translate(29.5px,15px) rotate(-33deg) translate(-29.5px,-15px);}32.50%{transform:translate(29.5px,15px) rotate(-28deg) translate(-29.5px,-15px);}43.33%{transform:translate(29.5px,15px) rotate(16deg) translate(-29.5px,-15px);}48.33%{transform:translate(29.5px,15px) rotate(17deg) translate(-29.5px,-15px);}60%{transform:translate(29.5px,15px) rotate(-5deg) translate(-29.5px,-15px);}64.17%{transform:translate(29.5px,15px) rotate(-6deg) translate(-29.5px,-15px);}75.83%{transform:translate(29.5px,15px) rotate(3deg) translate(-29.5px,-15px);}80%{transform:translate(29.5px,15px) rotate(3deg) translate(-29.5px,-15px);}88.33%{transform:translate(29.5px,15px) rotate(0deg) translate(-29.5px,-15px);}0%{transform:translate(29.5px,15px) rotate(0deg) translate(-29.5px,-15px);}100%{transform:translate(29.5px,15px) rotate(0deg) translate(-29.5px,-15px);}"),";")},rn.createElement("g",{className:Vg("animation-timing-function:cubic-bezier(0,0,0.58,1);animation-name:",Hg("91.67%{transform:translate(29.5px,15px) scale(1,1) translate(-29.5px,-15px);}100%{transform:translate(29.5px,15px) scale(0.2,0.2) translate(-29.5px,-15px);}0%{transform:translate(29.5px,15px) scale(1,1) translate(-29.5px,-15px);}"),";")},rn.createElement("path",{className:Vg("stroke:",n,";stroke-width:2;fill:",t,";animation-timing-function:cubic-bezier(0,0,1,1);animation-name:",Hg("4.17%{opacity:0;}7.50%{opacity:1;}95.83%{opacity:1;}100%{opacity:0;}0%{opacity:0;}"),";"),d:"M18.9545455,25.5263158 C18.9545455,19.7127921 23.6759063,15 29.5,15 C35.3240937,15 40.0454545,19.7127921 40.0454545,25.5263158 C40.0454545,26.4164658 40.0454545,27.7322552 40.0454545,29.4736842 C40.0454545,32.2289394 41.3636364,34.8605184 44,37.3684211 L44,40 L29.5,40 L15,40 L15,37.3684211 C17.6363636,34.8605184 18.9545455,32.2289394 18.9545455,29.4736842 C18.9545455,27.7322552 18.9545455,26.4164658 18.9545455,25.5263158 L18.9545455,25.5263158 Z"}))))},pO=lb("svg",{target:"ejk9fwh0"})("*{animation-duration:3s;animation-iteration-count:1;animation-fill-mode:forwards;}"),fO=(Object(Zg.b)((function(e){var t=e.width,n=e.height,r=e.theme,a=e.color,i=void 0===a?r.colors.text.white:a,o=e.bgColor,c=void 0===o?r.colors.notification:o;return rn.createElement(pO,{viewBox:"0 0 60 60",width:t,height:n},rn.createElement(uO,{fill:c}),rn.createElement(lO,{fill:i}),rn.createElement(dO,{fill:i,stroke:c}))})),function(e){return e/16+"rem"}),mO=fO(16),hO=fO(14),vO=fO(12),gO="#ffd000",bO="#e3e3e3",yO="#b3b3b3",xO="#d93311",jO="#38c777",OO="#2000f0",wO="#e30d34",_O="#3b99fc",CO={light:"#ffffff",lightVariant:"#f0f0f0",dark:"#252525",darkVariant:"#2e2e2e "},EO={white:"#ffffff",black:"#111111",muted:"#757575"},IO={50:"#f8f8f8",100:"#e3e3e3",200:"#d5d5d5",300:"#c0c0c0",400:"#b3b3b3",500:"#757575",600:"#575757",700:"#2e2e2e",800:"#252525",900:"#111111"},kO={black:"#1b1b20",orange:"#ff5100"},SO={fontSize:mO,fontWeight:"bold",color:EO.black},TO={fontSize:hO,fontWeight:"bold",color:EO.black},AO={fontSize:hO,fontWeight:"normal",color:EO.black},RO={fontSize:hO,fontWeight:"normal",color:EO.muted},PO={fontSize:vO,fontWeight:"normal",color:EO.black},MO={fontSize:hO,fontWeight:"normal",color:EO.black},NO={fontSize:hO,fontWeight:"normal",color:EO.white},zO={fontSize:vO,fontWeight:"normal",color:xO},LO={linear:"cubic-bezier(0, 0, 1, 1)",sharp:"cubic-bezier(0.33, 0, 0, 1)",smooth:"cubic-bezier(0.33, 0, 0.67, 1)",swift:"cubic-bezier(0.14, 0, 0, 1)",spring:"cubic-bezier(0.18, 0.89, 0.32, 1.28)"},DO="2px",BO="4px",qO="6px",FO="8px",VO="12px",UO="0px",GO="50%",HO=qO,WO="0px 1px 2px "+Object(N.d)(.1,"rgba(0, 0, 0, 0)"),YO="0px 0px 8px "+Object(N.d)(.2,"rgba(0, 0, 0, 0)"),KO="0px 1px 10px "+Object(N.d)(.2,"rgba(0, 0, 0, 0)"),QO="0px 0px 24px "+Object(N.d)(.2,"rgba(0, 0, 0, 0)"),ZO="0 4px 12px "+Object(N.d)(.3,"rgba(0, 0, 0, 0)"),JO="0px 0px 6px 1px "+_O,XO="0px",$O="2px",ew="4px",tw="8px",nw="10px",rw="12px",aw="16px",iw="24px",ow=function(e){return Vg("display:inline-block;flex-shrink:0;width:1em;height:1em;font-size:",e?fO(e):"inherit",";user-select:none;fill:currentColor;")},cw=function(e){var t=e.className,n=e.size,r=e.color,a=void 0===r?"inherit":r,i=Object(A.a)(e,["className","size","color"]);return rn.createElement("svg",Object(T.a)({color:a,className:Ug(ow(n),t)},i))},sw=function(e,t){return rn.memo((function(n){return rn.createElement(cw,Object(T.a)({},t,n),e)}))},uw=Vg("fill:none;stroke:currentColor;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;animation-fill-mode:forwards;animation-name:",Hg("to{stroke-dashoffset:0;}"),";animation-duration:0.5s;animation-iteration-count:1;animation-timing-function:cubic-bezier(0,0,1,1);stroke-dasharray:9.7;stroke-dashoffset:9.7;"),lw=sw(rn.createElement("polyline",{className:uw,points:"4.3,8.1 5.3,9.1 6.8,10.5 9,8.2 11.1,6.1 "}),{size:16,viewBox:"0 0 16 16"}),dw=sw(rn.createElement("path",{d:"M23.7,16.7l-6,6c-0.4,0.4-1,0.4-1.4,0c-0.4-0.4-0.4-0.9-0.1-1.3l0.1-0.1l4.3-4.3H10c-0.5,0-0.9-0.4-1-0.9L9,16 c0-0.5,0.4-0.9,0.9-1l0.1,0h10.6l-4.3-4.3c-0.4-0.4-0.4-0.9-0.1-1.3l0.1-0.1c0.4-0.4,0.9-0.4,1.3-0.1l0.1,0.1l6,6 C24.1,15.7,24.1,16.2,23.7,16.7L23.7,16.7z"}),{size:32,viewBox:"0 0 32 32"}),pw=sw(rn.createElement("path",{d:"M18,10c0.6,0,1,0.4,1,1v9c0,1.6-1.2,3-2.7,3h-0.6c-1.5,0-2.7-1.4-2.7-3V9c0-2.2,2.1-4,4.5-4h1C20.9,5,23,6.8,23,9\tv12c0,3.9-3.1,7-7,7s-7-3.1-7-7v-8c0-0.6,0.4-1,1-1c0.6,0,1,0.4,1,1v8c0,2.8,2.2,5,5,5s5-2.2,5-5V9c0-1.1-1.1-2-2.5-2h-1\tC16.1,7,15,7.9,15,9v11c0,0.6,0.4,1,0.7,1h0.6c0.4,0,0.7-0.4,0.7-1v-9c0-0.3,0.1-0.5,0.3-0.7C17.5,10.1,17.7,10,18,10z"}),{size:32,viewBox:"0 0 32 32"}),fw=lb("circle",{target:"edfmt610"})("fill-rule:evenodd;clip-rule:evenodd;"),mw=lb("path",{target:"edfmt611"})("fill-rule:evenodd;clip-rule:evenodd;fill:",(function(e){return e.theme.colors.text.white}),";"),hw=sw(rn.createElement(rn.Fragment,null,rn.createElement(fw,{cx:"12",cy:"12",r:"10"}),rn.createElement(mw,{d:"M12,18c-0.6,0-1-0.4-1-1c0-0.6,0.4-1,1-1s1,0.4,1,1C13,17.6,12.6,18,12,18z M10.5,7.1 C10.5,6.5,11.2,6,12,6s1.5,0.5,1.5,1.1c0.1,5.2-0.4,7.9-1.5,7.9S10.4,12.4,10.5,7.1z"})),{size:32,viewBox:"0 0 24 24"}),vw=lb("path",{target:"e1nep2br0"})((function(e){var t=e.collapsed;return{opacity:t?0:1,transform:"scale("+(t?0:1)+")"}})," transform-origin:50% 50%;transition:200ms ",(function(e){return e.theme.transitions.easings.spring})," 50ms;"),gw=function(e){var t=e.backgroundColor,n=e.color,r=e.filled,a=void 0!==r&&r,i=Object(A.a)(e,["backgroundColor","color","filled"]);return rn.createElement(cw,Object(T.a)({viewBox:"0 0 32 32"},i),rn.createElement("path",{fill:n,d:"M12.63,26.46H8.83a6.61,6.61,0,0,1-6.65-6.07,89.05,89.05,0,0,1,0-11.2A6.5,6.5,0,0,1,8.23,3.25a121.62,121.62,0,0,1,15.51,0A6.51,6.51,0,0,1,29.8,9.19a77.53,77.53,0,0,1,0,11.2,6.61,6.61,0,0,1-6.66,6.07H19.48L12.63,31V26.46"}),rn.createElement(vw,{collapsed:a,fill:t,d:"M19.57,21.68h3.67a2.08,2.08,0,0,0,2.11-1.81,89.86,89.86,0,0,0,0-10.38,1.9,1.9,0,0,0-1.84-1.74,113.15,113.15,0,0,0-15,0A1.9,1.9,0,0,0,6.71,9.49a74.92,74.92,0,0,0-.06,10.38,2,2,0,0,0,2.1,1.81h3.81V26.5Z"}))},bw=sw(rn.createElement("path",{d:"M21.3331175,12.2868932 C21.7144399,11.9043689 22.3326857,11.9043689 22.7140082,12.2868932 C23.0953306,12.6694174 23.0953306,13.2896117 22.7140082,13.6721359 L17.1904454,19.2131068 C16.8091229,19.5956311 16.1908771,19.5956311 15.8095546,19.2131068 L10.2859918,13.6721359 C9.90466939,13.2896117 9.90466939,12.6694174 10.2859918,12.2868932 C10.6673143,11.9043689 11.2855601,11.9043689 11.6668825,12.2868932 L16.5,17.1352427 L21.3331175,12.2868932 Z"}),{size:32,viewBox:"0 0 32 32",fill:"none",stroke:"none",strokeWidth:1,fillRule:"evenodd"}),yw=sw(rn.createElement("path",{d:"M17.4,16l5.3,5.3c0.4,0.4,0.4,1,0,1.4c-0.4,0.4-1,0.4-1.4,0L16,17.4l-5.3,5.3c-0.4,0.4-1,0.4-1.4,0\tc-0.4-0.4-0.4-1,0-1.4l5.3-5.3l-5.3-5.3c-0.4-0.4-0.4-1,0-1.4c0.4-0.4,1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0\tc0.4,0.4,0.4,1,0,1.4L17.4,16z"}),{size:32,viewBox:"0 0 32 32"}),xw=sw(rn.createElement("path",{d:"M8,18c-1.1,0-2-0.9-2-2s0.9-2,2-2s2,0.9,2,2S9.1,18,8,18z M16,18c-1.1,0-2-0.9-2-2s0.9-2,2-2\ns2,0.9,2,2S17.1,18,16,18z M24,18c-1.1,0-2-0.9-2-2s0.9-2,2-2s2,0.9,2,2S25.1,18,24,18z"}),{size:32,viewBox:"0 0 32 32"}),jw=sw(rn.createElement("path",{d:"M8,25h16c0.6,0,1,0.4,1,1c0,0.5-0.4,0.9-0.9,1L24,27H8c-0.6,0-1-0.4-1-1c0-0.5,0.4-0.9,0.9-1L8,25z M20.6,5.2  L20.6,5.2l4.1,4.1c0.4,0.4,0.4,0.9,0.1,1.3l-0.1,0.1l-12,12c-0.2,0.2-0.4,0.3-0.6,0.3L12,23H8c-0.5,0-0.9-0.4-1-0.9L7,22v-4  c0-0.2,0.1-0.4,0.2-0.6l0.1-0.1l12-12C19.7,4.9,20.2,4.9,20.6,5.2z M17,10.4l-8,8V21h2.6l8-8L17,10.4z M20,7.4L18.4,9l2.6,2.6  l1.6-1.6L20,7.4z"}),{size:32,viewBox:"0 0 32 32"}),Ow=sw(rn.createElement("path",{d:"M17.6,17H7c-0.6,0-1-0.4-1-1s0.4-1,1-1h10.6l-2.3-2.3c-0.4-0.4-0.4-1,0-1.4c0.4-0.4,1-0.4,1.4,0l4,4 c0.4,0.4,0.4,1,0,1.4l-4,4c-0.4,0.4-1,0.4-1.4,0c-0.4-0.4-0.4-1,0-1.4L17.6,17L17.6,17z M8,12c0,0.6-0.4,1-1,1s-1-0.4-1-1V8.1 C6,7,7,6,8.1,6h15.8C25,6,26,7,26,8.1v15.8c0,1.2-1,2.1-2.1,2.1H8.1C7,26,6,25,6,23.9V20c0-0.6,0.4-1,1-1s1,0.4,1,1v3.9 C8,23.9,8.1,24,8.1,24h15.8c0.1,0,0.1-0.1,0.1-0.1V8.1C24,8.1,23.9,8,23.9,8H8.1C8.1,8,8,8.1,8,8.1V12z"}),{size:32,viewBox:"0 0 32 32"}),ww=sw(rn.createElement(rn.Fragment,null,rn.createElement("g",{className:Vg("fill:none;transform:translate(16px,16px) rotate(0deg) translate(-16px,-16px);animation-fill-mode:backwards;animation-timing-function:cubic-bezier(0,0,1,1);animation-name:",Hg("75%{transform:translate(16px,16px) rotate(0deg) translate(-16px,-16px);}91.67%{transform:translate(16px,16px) rotate(180deg) translate(-16px,-16px);}0%{transform:translate(16px,16px) rotate(0deg) translate(-16px,-16px);}100%{transform:translate(16px,16px) rotate(180deg) translate(-16px,-16px);}"),";")},rn.createElement("path",{d:"M22,22 L22,26 L10,26 L10,22 L16,16 L22,22 Z M22,10 L16,16 L10,10 L10,6 L22,6 L22,10 Z",strokeLinejoin:"round",className:Vg("stroke:currentColor;stroke-width:2;")})),rn.createElement("g",{className:Vg("transform:translate(16px,15px) scale(1,1) translate(-16px,-15px);animation-fill-mode:backwards;animation-name:",Hg("0%{transform:translate(16px,15px) scale(1,1) translate(-16px,-15px);}61.67%{transform:translate(16px,15px) scale(0,0) translate(-16px,-15px);}63.33%{transform:translate(16px,15px) scale(1,1) translate(-16px,-15px);}100%{transform:translate(16px,15px) scale(1,1) translate(-16px,-15px);}"),";animation-timing-function:cubic-bezier(0.42,0,1,1);")},rn.createElement("polygon",{points:"12 11 20 11 16 15",className:Vg("fill:currentColor;opacity:1;animation-fill-mode:backwards;animation-timing-function:cubic-bezier(0,0,1,1);animation-name:",Hg("58.33%{opacity:1;}60%{opacity:0;}91.67%{opacity:0;}96.67%{opacity:1;}0%{opacity:1;}100%{opacity:1;}"),";")})),rn.createElement("path",{d:"M16,17 L16,23",className:Vg("stroke:currentColor;stroke-width:2;stroke-dashoffset:12;stroke-dasharray:6,0,6,6;animation-fill-mode:backwards,backwards;animation-timing-function:cubic-bezier(0.42,0,1,1),cubic-bezier(0,0,1,1);animation-name:",Hg("0%{stroke-dashoffset:12;}68.33%{stroke-dashoffset:-6;}100%{stroke-dashoffset:-6;}"),",",Hg("0%{stroke-dasharray:6,0,6,6;}100%{stroke-dasharray:6,0,6,6;}"),";")}),rn.createElement("g",{className:Vg("transform:translate(16px,24px) translate(-16px,-24px) translate(0px,2px);animation-fill-mode:backwards;animation-timing-function:cubic-bezier(0,0,1,1);animation-name:",Hg("0%{transform:translate(16px,24px) translate(-16px,-24px) translate(0px,2px);}40%{transform:translate(16px,24px) translate(-16px,-24px) translate(0px,0px);}75%{transform:translate(16px,24px) translate(-16px,-24px) translate(0px,0px);}76.67%{transform:translate(16px,24px) translate(-16px,-24px) translate(-2px,0px);}78.33%{transform:translate(16px,24px) translate(-16px,-24px) translate(-4px,-1px);}81.67%{transform:translate(16px,24px) translate(-16px,-24px) translate(-8px,-6px);}83.33%{transform:translate(16px,24px) translate(-16px,-24px) translate(-8px,-8px);}85%{transform:translate(16px,24px) translate(-16px,-24px) translate(-8px,-11px);}88.33%{transform:translate(16px,24px) translate(-16px,-24px) translate(-4px,-13px);}91.67%{transform:translate(16px,24px) translate(-16px,-24px) translate(0px,-13px);}96.67%{transform:translate(16px,24px) translate(-16px,-24px) translate(0px,-11px);}100%{transform:translate(16px,24px) translate(-16px,-24px) translate(0px,-11px);}"),";")},rn.createElement("g",{className:Vg("transform:translate(16px,24px) rotate(0deg) translate(-16px,-24px);animation-fill-mode:backwards;animation-timing-function:cubic-bezier(0,0,1,1);animation-name:",Hg("75%{transform:translate(16px,24px) rotate(0deg) translate(-16px,-24px);}78.33%{transform:translate(16px,24px) rotate(36deg) translate(-16px,-24px);}83.33%{transform:translate(16px,24px) rotate(90deg) translate(-16px,-24px);}91.67%{transform:translate(16px,24px) rotate(180deg) translate(-16px,-24px);}0%{transform:translate(16px,24px) rotate(0deg) translate(-16px,-24px);}100%{transform:translate(16px,24px) rotate(180deg) translate(-16px,-24px);}"),";")},rn.createElement("g",{className:Vg("transform:translate(16px,24px) scale(1,1) translate(-16px,-24px);animation-fill-mode:backwards;animation-timing-function:cubic-bezier(0,0,1,1);animation-name:",Hg("0%{transform:translate(16px,24px) scale(1,1) translate(-16px,-24px);}40%{transform:translate(16px,24px) scale(1,1.4) translate(-16px,-24px);}68.33%{transform:translate(16px,24px) scale(1,1.6) translate(-16px,-24px);}86.67%{transform:translate(16px,24px) scale(1,1.6) translate(-16px,-24px);}88.33%{transform:translate(16px,24px) scale(1,1.4) translate(-16px,-24px);}91.67%{transform:translate(16px,24px) scale(0.8,1.3) translate(-16px,-24px);}96.67%{transform:translate(16px,24px) scale(0.45,1.6) translate(-16px,-24px);}100%{transform:translate(16px,24px) scale(0.45,1.6) translate(-16px,-24px);}"),";")},rn.createElement("rect",{x:"10",y:"23",width:"12",height:"2",className:Vg("fill:currentColor;opacity:1;animation-fill-mode:backwards;animation-timing-function:cubic-bezier(0,0,1,1);animation-name:",Hg("75%{opacity:1;}0%{opacity:1;}100%{opacity:1;}"),";")}))))),{size:32,viewBox:"0 0 32 32",className:Vg("*{animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:cubic-bezier(0,0,1,1);}")}),_w=lb((function(e){return rn.createElement(tx,Object(T.a)({type:"button"},e))}),{target:"e1mwfyk10"})("padding:0;border-radius:",(function(e){return e.theme.borderRadius.def}),";"),Cw=lb("div",{target:"e1ykiqc40"})("display:inline-block;",(function(e){var t=e.size;return{width:t,height:t}})," &:hover{background-color:",(function(e){return e.theme.colors.surface.lightVariant}),";border-radius:",(function(e){return e.theme.borderRadius.sm}),";}"),Ew=lb("div",{target:"eg7dzwm0"})("width:100%;height:100%;display:flex;align-items:center;justify-content:center;border-radius:",(function(e){return e.theme.borderRadius.sm}),";background-color:",(function(e){return e.theme.colors.surface.lightVariant}),";"),Iw=(sw(rn.createElement("path",{d:"M6.1,22.1l5.3-4.8c0.4-0.3,1-0.3,1.3,0l3.2,2.8l6.5-5.8c0.4-0.3,1-0.3,1.3,0l2.3,2.1V9c0-0.6-0.4-1-1-1h-18 c-0.6,0-1,0.4-1,1L6.1,22.1C6.1,22,6.1,22,6.1,22.1z M8,23h8.1l-4.1-3.7L8,23z M19.1,23h5.9c0.6,0,1-0.4,1-1v-3l-3-2.7l-5.7,5.1 L19.1,23z M7.1,6h18c1.7,0,3,1.3,3,3v13c0,1.7-1.3,3-3,3h-18c-1.7,0-3-1.3-3-3V9C4.1,7.3,5.4,6,7.1,6z M15.1,16c-1.7,0-3-1.3-3-3 s1.3-3,3-3s3,1.3,3,3S16.8,16,15.1,16z M15.1,14c0.6,0,1-0.4,1-1s-0.4-1-1-1c-0.6,0-1,0.4-1,1S14.5,14,15.1,14z"}),{size:32,viewBox:"0 0 32 32"}),sw(rn.createElement("path",{d:"M17,13c0.5,0,1,0.5,1,1c0,4.7,0,7.3,0,8s0.3,1,1,1v0c0.6,0,1,0.5,1,1c0,0.5-0.4,0.9-0.9,1L19,25l-2,0l0,0h-3 c-0.6,0-1-0.4-1-1c0-0.5,0.4-0.9,0.9-1l0.1,0c0.7,0,1-0.3,1-1c0-1,0-4.9,0-5.9S14,15,14,15c-0.6,0-1-0.5-1-1c0-0.5,0.4-1,1-1H17z M16,7c1.1,0,2,0.9,2,2s-0.9,2-2,2s-2-0.9-2-2S14.9,7,16,7z"}),{size:32,viewBox:"0 0 32 32"})),kw=sw(rn.createElement("path",{d:"M5.5,6l6.5,5.7L18.5,6H5.5z M20,7.3l-7.3,6.4c-0.4,0.3-0.9,0.3-1.3,0L4,7.3V17c0,0.6,0.4,1,1,1h14 c0.6,0,1-0.4,1-1V7.3z M5,4h14c1.7,0,3,1.3,3,3v10c0,1.7-1.3,3-3,3H5c-1.7,0-3-1.3-3-3V7C2,5.3,3.3,4,5,4z"}),{size:24,viewBox:"0 0 24 24"}),Sw=sw(rn.createElement("path",{d:"M11,22c-0.6,0-1-0.4-1-1s0.4-1,1-1h15c0.6,0,1,0.4,1,1s-0.4,1-1,1H11z"}),{size:32,viewBox:"0 0 32 32"}),Tw=sw(rn.createElement("path",{d:"M18,10.6l1.3-1.3c0.4-0.4,1-0.4,1.4,0c0.4,0.4,0.4,1,0,1.4L19.4,12l1.3,1.3c0.4,0.4,0.4,1,0,1.4 c-0.4,0.4-1,0.4-1.4,0L18,13.4l-1.3,1.3c-0.4,0.4-1,0.4-1.4,0c-0.4-0.4-0.4-1,0-1.4l1.3-1.3l-1.3-1.3c-0.4-0.4-0.4-1,0-1.4 c0.4-0.4,1-0.4,1.4,0L18,10.6L18,10.6z M7,8l4.3-3.7C11.9,3.7,13,4.1,13,5v14c0,0.9-1.1,1.3-1.7,0.7L7.2,16H4c-0.6,0-1-0.4-1-1V9 c0-0.6,0.4-1,1-1H7z M11,7.4L8.3,9.7C8.1,9.9,7.9,10,7.6,10H5v4h2.6c0.3,0,0.5,0.1,0.7,0.3l2.7,2.3V7.4z"}),{size:24,viewBox:"0 0 24 24"}),Aw=sw(rn.createElement("path",{d:"M9.1,8H12c0.6,0,1,0.4,1,1c0,0.5-0.4,0.9-0.9,1L12,10H9.1C9.1,10,9,10,9,10.1l0,0v12.8 C9,22.9,9,23,9.1,23l0,0h12.8c0.1,0,0.1,0,0.1-0.1l0,0V20c0-0.6,0.4-1,1-1c0.5,0,0.9,0.4,1,0.9l0,0.1v2.9c0,1.1-0.9,2-2,2.1l-0.2,0 H9.1c-1.1,0-2-0.9-2.1-2l0-0.2V10.1C7,9,7.9,8.1,9,8L9.1,8H12H9.1z M23,8L23,8C23,8,23.1,8,23,8L23,8c0.1,0,0.1,0,0.1,0 c0,0,0,0,0.1,0c0,0,0,0,0.1,0c0,0,0,0,0,0c0,0,0,0,0.1,0c0,0,0,0,0.1,0c0,0,0,0,0.1,0c0,0,0,0,0,0c0,0,0.1,0,0.1,0.1 c0,0,0.1,0.1,0.1,0.1l-0.1-0.1c0.1,0,0.1,0.1,0.2,0.2c0,0,0,0,0,0c0,0,0,0,0.1,0.1c0,0,0,0,0,0c0,0,0,0,0,0.1c0,0,0,0,0,0.1 c0,0,0,0,0,0.1c0,0,0,0,0,0c0,0,0,0,0,0.1c0,0,0,0,0,0.1c0,0,0,0,0,0.1c0,0,0,0,0,0.1c0,0,0,0,0,0v6c0,0.6-0.4,1-1,1s-1-0.4-1-1 l0-3.6l-5.3,5.3c-0.4,0.4-0.9,0.4-1.3,0.1l-0.1-0.1c-0.4-0.4-0.4-1,0-1.4l5.3-5.3H17c-0.6,0-1-0.4-1-1s0.4-1,1-1H23z"}),{size:32,viewBox:"0 0 32 32"}),Rw=sw(rn.createElement("path",{d:"M18.8,16.3C17.9,16.8,17,17,16,17c-1,0-1.9-0.2-2.8-0.7c-3.2,0.8-5.2,2.8-5.2,5c0,0.8,0,0.9,0,2c0,0,0,0,0.1,0\tc0.4,0.1,1,0.3,1.9,0.4c1.6,0.2,3.8,0.3,6.1,0.3s4.5-0.1,6.1-0.3c0.8-0.1,1.4-0.2,1.9-0.4c0,0,0.1,0,0.1,0v-2\tC24,19.2,21.9,17.1,18.8,16.3z M20.6,14.8c3.2,1.2,5.4,3.7,5.4,6.5v2.4c0,1.8-3.7,2.2-10,2.2S6,25.5,6,23.8c0-1.5,0-1.5,0-2.4\tc0-2.9,2.2-5.3,5.4-6.5c-0.9-1-1.4-2.4-1.4-3.8c0-3.3,2.7-6,6-6s6,2.7,6,6C22,12.5,21.5,13.8,20.6,14.8z M16,15c2.2,0,4-1.8,4-4\ts-1.8-4-4-4s-4,1.8-4,4S13.8,15,16,15z"}),{size:32,viewBox:"0 0 32 32"}),Pw=lb("path",{target:"e7kg0vt0"})("fill-rule:nonzero;fill:",(function(e){return e.theme.colors.text.muted}),";"),Mw=sw(rn.createElement(Pw,{d:"M7,10.75 L7,8.5 C7,7.675 7.675,7 8.5,7 L10.75,7 C11.1642136,7 11.5,6.66421356 11.5,6.25 L11.5,5.5 C11.5,4.67157288 12.1715729,4 13,4 C13.8284271,4 14.5,4.67157288 14.5,5.5 L14.5,6.25 C14.5,6.66421356 14.8357864,7 15.25,7 L17.5,7 C18.3284271,7 19,7.67157288 19,8.5 L19,10.75 C19,11.1642136 18.6642136,11.5 18.25,11.5 L17.5,11.5 C16.6715729,11.5 16,12.1715729 16,13 C16,13.8284271 16.6715729,14.5 17.5,14.5 L18.25,14.5 C18.6642136,14.5 19,14.8357864 19,15.25 L19,17.5 C19,18.3284271 18.3284271,19 17.5,19 L15.25,19 C14.8357864,19 14.5,18.6642136 14.5,18.25 L14.5,17.5 C14.5,16.6715729 13.8284271,16 13,16 C12.1715729,16 11.5,16.6715729 11.5,17.5 L11.5,18.25 C11.5,18.6642136 11.1642136,19 10.75,19 L8.5,19 C7.67157288,19 7,18.3284271 7,17.5 L7,15.25 C7,14.8357864 6.66421356,14.5 6.25,14.5 L5.5,14.5 C4.67157288,14.5 4,13.8284271 4,13 C4,12.1715729 4.67157288,11.5 5.5,11.5 L6.25,11.5 C6.66421356,11.5 7,11.1642136 7,10.75 Z M19,15.25 L19,17.5 C19,18.3284271 18.3284271,19 17.5,19 L15.25,19 C14.8357864,19 14.5,18.6642136 14.5,18.25 L14.5,17.5 C14.5,16.6715729 13.8284271,16 13,16 C12.1715729,16 11.5,16.6715729 11.5,17.5 L11.5,18.25 C11.5,18.6642136 11.1642136,19 10.75,19 L8.5,19 C7.67157288,19 7,18.3284271 7,17.5 L7,15.25 C7,14.8357864 6.66421356,14.5 6.25,14.5 L5.5,14.5 C4.67157288,14.5 4,13.8284271 4,13 C4,12.1715729 4.67157288,11.5 5.5,11.5 L6.25,11.5 C6.66421356,11.5 7,11.1642136 7,10.75 L7,10.3 C7.405,10.12 7.885,10 8.4775,10 C11.4775,10 11.4775,13 14.4925,13 C15.1225,13 15.6175,12.865 16.0375,12.6625 C15.9346018,13.1080984 16.0406047,13.576297 16.3254017,13.934119 C16.6101988,14.291941 17.0426753,14.5002933 17.5,14.5 L18.25,14.5 C18.6642136,14.5 19,14.8357864 19,15.25 Z"}),{size:24,viewBox:"0 0 24 24"}),Nw=sw(rn.createElement("path",{d:"M6.4,5.6l21,9.5c0.5,0.2,0.7,0.8,0.5,1.3c-0.1,0.2-0.3,0.4-0.5,0.5l-21,9.5\tc-0.5,0.2-1.1,0-1.3-0.5c-0.1-0.3-0.1-0.6,0-0.8L8.6,18L20.5,16L8.6,14.1L5.1,6.9c-0.2-0.5,0-1.1,0.5-1.3C5.8,5.5,6.1,5.5,6.4,5.6z"}),{size:32,viewBox:"0 0 32 32"}),zw=sw(rn.createElement("path",{d:"M16.5,21.1l-6.3,3.8C9,25.5,7.6,24.3,8.1,23l2.2-5.7l-3.8-3.7c-1-0.9-0.4-2.6,1-2.6h5.3l2.3-5.1 c0.5-1.2,2.2-1.2,2.8,0l2.3,5.1h5.4c1.4,0,2,1.7,1,2.6l-3.9,3.7l2.2,5.7c0.5,1.3-0.9,2.5-2.2,1.8L16.5,21.1z M10.5,22.3l5.3-3.1l0,0 c0.4-0.2,1-0.2,1.5,0l5.3,3.1l-1.8-4.7c-0.2-0.6,0-1.2,0.4-1.6l3.2-3h-4.4c-0.6,0-1.1-0.4-1.4-0.9l-2-4.4l-2,4.4 c-0.2,0.6-0.8,0.9-1.4,0.9H8.8l3.1,3c0.4,0.4,0.6,1,0.4,1.6L10.5,22.3z"}),{size:32,viewBox:"0 0 32 32"}),Lw=sw(rn.createElement("path",{d:"M20,19H18.56c-.35.5-.91,1.35-1.64,2.53a3.75,3.75,0,0,0-.24.44,6.74,6.74,0,0,0-.52,2.42C16,26.18,15.49,27,14,27c-1.66,0-2.74-1.2-3-3V19H8c-3,0-3.64-2.26-2.4-6.65S7.58,7,11,7h6a1.11,1.11,0,0,1,.75.3L19.48,9H20V9a1,1,0,0,1,1-1h4a1,1,0,0,1,1,1V19a1,1,0,0,1-1,1H21a1,1,0,0,1-1-1Zm0-2V11h-.94a1,1,0,0,1-.71-.3L16.65,9H11c-2.38,0-2.45.15-3.51,3.9C6.58,16.21,6.75,17,8,17h4a1,1,0,0,1,1,1v5.92c.12.81.46,1.07,1,1.08a4.54,4.54,0,0,0,.12-.81,8.39,8.39,0,0,1,.69-3.06q.17-.33.36-.66a34.1,34.1,0,0,1,2.07-3.11,1,1,0,0,1,.76-.36Zm4,1V10H22v8Z"}),{size:32,viewBox:"0 0 32 32"}),Dw=sw(rn.createElement("path",{d:"M11,14h1.47c.35-.5.9-1.35,1.64-2.53a3.68,3.68,0,0,0,.23-.44,6.34,6.34,0,0,0,.52-2.42C15.05,6.82,15.51,6,17,6c1.66,0,2.65,1.06,2.92,2.86V14h3c3,0,3.76,2.26,2.51,6.65S23.35,26,19.93,26H14a1,1,0,0,1-.71-.3L11.55,24H11v0a1,1,0,0,1-1,1H6a1,1,0,0,1-1-1V14a1,1,0,0,1,1-1h4a1,1,0,0,1,1,1Zm0,2v6h1a1,1,0,0,1,.7.3L14.37,24H20c2.37,0,2.44-.15,3.51-3.9.94-3.31.68-4.1-.6-4.1h-4A1,1,0,0,1,18,15V9.08C17.87,8.27,17.54,8,17,8a5.27,5.27,0,0,0-.13.81,8.19,8.19,0,0,1-.69,3.06,5.37,5.37,0,0,1-.36.66,34.81,34.81,0,0,1-2.06,3.11A1,1,0,0,1,13,16ZM7,15v8H9V15Z"}),{size:32,viewBox:"0 0 32 32"}),Bw=sw(rn.createElement("path",{d:"M8.7,15.2c-0.4-0.4-1-0.4-1.4,0c-0.4,0.4-0.4,1,0,1.4l5.7,5.7c0.4,0.4,1,0.4,1.4,0l9.9-9.9 c0.4-0.4,0.4-1,0-1.4c-0.4-0.4-1-0.4-1.4,0l-9.2,9.2L8.7,15.2z"}),{size:32,viewBox:"0 0 32 32"}),qw=sw(rn.createElement("path",{d:"M15,19v-2c2.8,0,5-2.2,5-5s-2.2-5-5-5V5c3.9,0,7,3.1,7,7S18.9,19,15,19z M15,16v-2c1.1,0,2-0.9,2-2s-0.9-2-2-2 V8c2.2,0,4,1.8,4,4S17.2,16,15,16z M7,8l4.3-3.7C11.9,3.7,13,4.1,13,5v14c0,0.9-1.1,1.3-1.7,0.7L7.2,16H4c-0.6,0-1-0.4-1-1V9 c0-0.6,0.4-1,1-1H7z M11,7.4L8.3,9.7C8.1,9.9,7.9,10,7.6,10H5v4h2.6c0.3,0,0.5,0.1,0.7,0.3l2.7,2.3V7.4z"}),{size:24,viewBox:"0 0 24 24"}),Fw=lb(tx,{target:"eed86ay0"})("padding:0;flex-shrink:0;display:flex;align-items:center;justify-content:center;",(function(e){var t=e.size;return{width:t,height:t}})),Vw=function(e){var t=e.buttonSize,n=void 0===t?32:t,r=e.iconSize,a=void 0===r?24:r,i=Object(A.a)(e,["buttonSize","iconSize"]);return rn.createElement(Fw,Object(T.a)({size:n},i),rn.createElement(Cw,{size:a},rn.createElement(yw,{size:a})))},Uw=lb("div",{target:"e1viqdiv0"})("margin:8px 16px;background:",(function(e){return e.theme.colors.surface.light}),";box-shadow:",(function(e){return e.theme.boxShadow.sm}),";",(function(e){var t=e.stickToEdge,n=void 0!==t&&t,r=e.theme;return{marginBottom:n?"0":"8px",borderRadius:n?r.borderRadius.md+" "+r.borderRadius.md+" "+r.borderRadius.none+" "+r.borderRadius.none:r.borderRadius.md,"@media (orientation: landscape)":{maxWidth:"50%",margin:n?"0 auto":"0 auto 8px"}}})),Gw=lb("div",{target:"erkouar0"})("max-width:300px;max-height:300px;"),Hw=lb("img",{target:"erkouar1"})("display:block;width:auto;height:auto;max-width:100%;max-height:100%;"),Ww=function(e){var t=e.url,n=e.name;return rn.createElement(Gw,null,rn.createElement(Hw,{alt:n,src:t}))},Yw=n(30),Kw=n.n(Yw),Qw=function(e){return e.stopPropagation()},Zw=Vg("color:inherit;"),Jw=function(e){var t=e.children,n=Object(A.a)(e,["children"]);return rn.createElement("a",Object(T.a)({},n,{onClick:Qw,className:Zw,rel:"nofollow noopener",target:"_blank"}),t)},Xw=function(e){var t=e.text,n=e.url;return rn.createElement(kx,null,n?rn.createElement(Jw,{href:n},t):rn.createElement(Kw.a,{component:Jw},t))},$w=function(e){return"smooth"===e.name?Vg("color:",e.colors.text.black,";background-color:",e.colors.grayscale[100],";"):Vg("color:",e.colors.text.muted,";")},e_=Object(Zg.b)((function(e){var t=e.text,n=e.url,r=e.theme,a=e.radiusType,i=void 0===a?"single":a,o=e.draft,c=void 0!==o&&o;return rn.createElement(Wy,{radiusType:i,className:Ug(c&&$w(r))},rn.createElement(Xw,{text:t,url:n}))}));var t_=function(e){var t=e.color,n=e.backgroundColor,r=e.hoverBackgroundColor;return Vg("color:",t,";background-color:",n,";&:hover{color:",t,";background-color:",r,";}")},n_=lb(Nx,{target:"e1osmd0p0"})("padding:",(function(e){return e.theme.spaces.space3}),";overflow:hidden;font-weight:400;white-space:nowrap;text-overflow:ellipsis;border:none !important;width:100%;display:block;",(function(e){var t=e.theme,n=e.variant,r=e.disabled;return Vg("border-radius:","modern"===t.name?4:6,"px !important;",(!n||"default"===n)&&t_({color:Object(N.e)(.6,t.colors.cta),backgroundColor:Object(N.f)(.95,t.colors.cta),hoverBackgroundColor:Object(N.f)(.85,t.colors.cta)})," ","primary"===n&&t_({color:t.colors.text.white,backgroundColor:t.colors.cta,hoverBackgroundColor:Object(N.e)(.25,t.colors.cta)})," ","danger"===n&&t_({color:t.colors.text.white,backgroundColor:t.colors.error,hoverBackgroundColor:Object(N.e)(.25,t.colors.error)})," ",r&&Vg("color:",t.colors.grayscale[500],";background-color:",t.colors.grayscale[100],";"))})),r_=lb(Nx,{target:"e1osmd0p1"})("padding:6px 4px;width:auto;overflow:hidden;font-weight:400;white-space:nowrap;text-overflow:ellipsis;border:none;",(function(e){var t=e.theme;return t_({color:Object(N.e)(.6,t.colors.cta),backgroundColor:Object(N.c)(.02,t.colors.surface.lightVariant),hoverBackgroundColor:Object(N.c)(.01,t.colors.surface.lightVariant)})})),a_=lb("ul",{target:"e52g9ij0"})("list-style:none;display:flex;flex-direction:column;list-style:none;margin:0;padding:1em;",(function(e){var t=e.compact,n=e.theme;return t&&Vg("padding:",n.spaces.space3,";flex-wrap:wrap;flex-direction:row;")})),i_=lb("li",{target:"e52g9ij1"})("margin-bottom:",(function(e){return e.theme.spaces.space3}),";",(function(e){return e.compact&&Vg(Hj," padding:0;flex-grow:1;")})),o_=lb("div",{target:"e7yhn050"})("background-color:",(function(e){return e.theme.colors.surface.light}),";border-radius:",(function(e){return e.theme.borderRadius.md}),";"),c_=lb(o_,{target:"ezxewqd0"})("display:flex;flex-direction:",(function(e){return e.horizontalLayout?"row":"column"}),";width:",(function(e){return e.horizontalLayout?"100%":"230px"}),";max-width:100%;margin-bottom:0.1em;",(function(e){var t=e.theme;return"smooth"===t.name?Vg("box-shadow:",t.boxShadow.xs,";"):Vg("border:1px solid ",t.colors.divider,";")}),";"),s_=lb("div",{target:"ezxewqd1"})("display:flex;flex-direction:column;width:230px;min-width:0%;max-width:",(function(e){return e.narrow?"66%":"100%"}),";color:",(function(e){return e.theme.colors.text.black}),";"),u_=lb("div",{target:"eztkvdh0"})("padding:1em;&:active{outline:none;}"),l_=lb("h2",{target:"eztkvdh1"})("margin:0;margin-bottom:4px;font-size:1em;font-weight:400;"),d_=lb("p",{target:"eztkvdh2"})("margin:0;opacity:0.7;"),p_=Vg("object-fit:cover;width:100%;height:100%;"),f_=lb("div",{target:"ex5d4ma0"})("overflow:hidden;",(function(e){var t=e.horizontalLayout,n=e.theme;return t?Vg("width:33%;height:100%;border-top-left-radius:",n.borderRadius.md,";border-bottom-left-radius:",n.borderRadius.md,";"):Vg("width:100%;height:150px;border-top-left-radius:",n.borderRadius.md,";border-top-right-radius:",n.borderRadius.md,";")})),m_=function(e){var t=e.url,n=e.link,r=e.horizontalLayout,a=e.alternativeText,i=void 0===a?"":a,o=rn.createElement(f_,{horizontalLayout:r},rn.createElement(By,{alt:i,src:t,className:p_}));return n?rn.createElement("a",{href:n,onClick:function(e){return e.preventDefault()},rel:"noopener noreferrer nofollow",target:"_blank"},o):o},h_=Vg("padding-top:0.5em;"),v_=Vg("padding-bottom:0.5em;"),g_=function(e){var t=e.card,n=e.onButtonClick,r=void 0===n?k.R:n,a=e.compactButtons,i=void 0!==a&&a,o=e.horizontalLayout,c=void 0!==o&&o,s=Object(A.a)(e,["card","onButtonClick","compactButtons","horizontalLayout"]),u=Object(bb.b)(),l=rn.useRef(null),d=function(e){return e.buttons?Object(T.a)({},e,{buttons:e.buttons.map((function(e){switch(e.type){case"phone":e.type;var t=e.value,n=e.role,r=Object(A.a)(e,["type","value","role"]);return Object(T.a)({},r,{href:"tel:"+t,target:"_parent",variant:n});case"url":e.type;var a=e.value,i=e.role,o=Object(A.a)(e,["type","value","role"]);return"invitation"in e?Object(T.a)({},o,{variant:i}):Object(T.a)({},o,{href:a,target:"_blank",variant:i});default:if("value"in e){e.type,e.value;var c=e.role,s=Object(A.a)(e,["type","value","role"]);return Object(T.a)({},s,{variant:c})}e.type;var u=e.role,l=Object(A.a)(e,["type","role"]);return Object(T.a)({},l,{variant:u})}}))}):e}(t),p=d.title,f=d.subtitle,m=d.image,h=d.buttons,v=void 0===h?[]:h,g=p||f,b=i&&v.length>3;return rn.createElement(c_,Object(T.a)({innerRef:l,horizontalLayout:c},s),m&&rn.createElement(m_,Object(T.a)({},m,{horizontalLayout:c})),rn.createElement(s_,{narrow:m&&c},g&&rn.createElement(u_,Object(T.a)({className:Ug(!Object(k.C)(v)&&v_)},u),p&&rn.createElement(l_,{textWrap:!0,preserveLines:!0},p),f&&rn.createElement(d_,{textWrap:!0,preserveLines:!0},f)),!Object(k.C)(v)&&rn.createElement(a_,{className:Ug(g&&h_),compact:i},(b?v.slice(0,3):v).map((function(e,t){var n=e.text,a=Object(A.a)(e,["text"]),o=n.length>20?n.slice(0,20).trim()+"\u2026":n;return rn.createElement(i_,{key:t,compact:i},rn.createElement(n_,Object(T.a)({label:o,onClick:function(e){e.stopPropagation(),r(t)}},a)))}))),b&&rn.createElement(ln,null,(function(e){return rn.createElement(r_,{label:e("show_more")})}))))},b_=lb(By,{target:"e1f2pv4c0"})("width:100%;height:100%;display:block;object-fit:",(function(e){return e.scaleImage?"cover":"fill"}),";"),y_=lb("div",{displayName:"ImagePreview",target:"e1f2pv4c1"})("display:flex;margin:0 auto;align-items:center;justify-content:center;overflow:hidden;background:",(function(e){return e.theme.colors.divider}),";color:",(function(e){return e.theme.colors.text.black}),";",(function(e){var t=e.dimensions;return Object(T.a)({},t)})),x_=function(e){return e.stopPropagation()},j_=function(e){var t=e.children,n=Object(A.a)(e,["children"]);return rn.createElement("a",Object(T.a)({},n,{onClick:x_,rel:"noopener noreferrer nofollow",target:"_blank"}),t)},O_=function(e){var t=e.link,n=e.url,r=e.width,a=e.height,i=e.maxWidth,o=e.maxHeight,c=e.srcSet,s=e.alternativeText,u=void 0===s?"":s,l=Object(A.a)(e,["link","url","width","height","maxWidth","maxHeight","srcSet","alternativeText"]),d=!!r||!!a,p=function(e){var t=void 0===e?{}:e,n=t.width,r=void 0===n?230:n,a=t.height,i=void 0===a?150:a,o=t.maxWidth,c=void 0===o?200:o,s=t.maxHeight,u=void 0===s?300:s,l=r/i;return r>c&&(i=(r=c)/l),i>u&&(r=(i=u)*l),{width:r,height:i}}({width:r,height:a,maxWidth:i,maxHeight:o});return rn.createElement(j_,{href:t||n},rn.createElement(y_,{dimensions:p},rn.createElement(b_,Object(T.a)({},l,{alt:u,src:n,srcSet:c,scaleImage:!d}))))},w_={spaceBase:8,typography:l,colors:u,transitions:d,borderRadius:p,boxShadow:f,spaces:m},__=Hg("100%{opacity:0.3;}"),C_=Object(T.a)({},w_,{borderRadius:Object(T.a)({},w_.borderRadius,{def:w_.borderRadius.md}),vars:{"primary-color":w_.colors.accent,"secondary-color":w_.colors.text.white,"tertiary-color":w_.colors.divider},ApplicationWrapper:{css:{padding:{default:"1em 1em 1em 1em",expandToEdge:"0"}}},AgentBar:{Avatar:{size:"40px"},IconButton:{css:{width:"40px",height:"40px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"6px",fontSize:fO(32),opacity:{default:"1",disabled:"0.15"},color:{active:w_.colors.text.white}}},Title:{css:{fontSize:".9em",fontWeight:"bold"}},SubTitle:{css:{fontSize:"0.9em",opacity:"1"}},css:{backgroundColor:w_.colors.surface.light,zIndex:"1",color:w_.colors.text.black,padding:"1rem"}},Avatar:{size:"20px",css:{border:0}},Bubble:{sharpBorderRadius:"6px",ovalBorderRadius:"6px",css:{boxShadow:w_.boxShadow.xs,border:"0"}},ImagePreview:{css:{maxWidth:"200px",maxHeight:"300px",borderRadius:w_.borderRadius.md}},IconButton:{css:{padding:"0 .5em"}},Footer:{css:{fontSize:"0.65em",padding:"0.3em 0",width:"100%",textAlign:"center",backgroundColor:w_.colors.surface.lightVariant},FooterLink:{css:{textDecoration:"none",color:"#7d7d7d",padding:"0.2em",borderRadius:w_.borderRadius.md}}},Form:{IconButton:{css:{color:{default:"#8f8f8f",active:w_.colors.text.white}}}},MessageButtons:{css:{color:w_.colors.accent}},MessageText:{css:{fontSize:"14px"}},Message:{css:{animation:{default:"none",sending:__+" 2s 2s forwards"},opacity:{default:"1",failed:"0.7"},color:w_.colors.text.black,justifyContent:{default:"flex-start",system:"center"}},Bubble:{sharpBorderRadius:"6px",ovalBorderRadius:"6px",css:{boxShadow:w_.boxShadow.xs,border:"0"}},system:{Bubble:{css:{background:"transparent",textAlign:"center",border:"0",width:"100%",boxShadow:"none"}},MessageText:{css:{padding:"0 1em"}}},fullWidth:{Content:{css:{width:"100%"}}}},MinimizedBar:{Icon:{color:"var(--primary-color)"},css:{position:"relative"}},MinimizedBubble:{Icon:{color:w_.colors.text.white},css:{position:"relative",background:{default:"var(--primary-color)",hasAvatar:"transparent"}}},Minimized:{Avatar:{css:{border:"0",backgroundColor:"transparent"}}},Invitation:{IconButton:{css:{visibility:{mobile:"visible"}}},Bubble:{sharpBorderRadius:"6px",ovalBorderRadius:"6px",css:{border:"0"}}},TitleBar:{css:{backgroundColor:w_.colors.surface.light,color:w_.colors.text.black,fontWeight:"700!important",fontSize:"1em",textAlign:"center",height:"56px"},TitleBarTitle:{css:{fontSize:fO(14)}},Avatar:{size:"30px",css:{border:"0"}}},TextComposer:{css:{fontSize:{default:"14px",mobile:"16px"},boxShadow:"0 -1em 1em rgba(0, 0, 0, 0.03)",zIndex:"1"},IconButton:{css:{opacity:{active:1,default:.4}}}},View:{css:{color:w_.colors.text.black},Bubble:{sharpBorderRadius:"6px",ovalBorderRadius:"6px",css:{boxShadow:w_.boxShadow.xs,border:"0"}}},SystemCard:{css:{border:"0",boxShadow:w_.boxShadow.xs,left:{default:"50%",rtl:"auto"},right:{default:"auto",rtl:"50%"},transform:{default:"translateX(-50%)",rtl:"translateX(50%)"}}}}),E_=(Object(T.a)({},C_,{colors:Object(T.a)({},C_.colors,{cta:"#427fe1"})}),(new Date).toISOString(),lb("div",{target:"eyqxlol0"})("display:flex;align-items:center;justify-content:center;width:auto;min-width:1.5em;border-radius:",(function(e){return e.theme.borderRadius.xl}),";padding:0 4px;flex-shrink:0;background-color:",(function(e){return e.theme.colors.notification}),";color:",(function(e){return e.theme.colors.text.white}),";height:1.5em;line-height:1.5em;text-align:center;font-size:0.8em;box-shadow:",(function(e){return e.theme.boxShadow.xs}),";font-weight:bold;animation-name:",(function(e){return function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1.3),Hg("0%{transform:scale(",e,");}25%{transform:scale(",e,");}50%{transform:scale(",t,");}100%{transform:scale(1.0);}")}(e.minScale,e.maxScale)}),";animation-duration:0.625s;animation-timing-function:",(function(e){return e.theme.transitions.easings.spring}),";")),I_=lb("span",{target:"e1tnd1n30"})("flex-grow:1;flex-shrink:1;"),k_=lb("div",{target:"e1tnd1n31"})("display:flex;cursor:pointer;justify-content:flex-start;align-items:center;",(function(e){return e.theme.typography.basic})),S_=lb(E_,{target:"e1tnd1n32"})("margin:0 6px;flex-shrink:0;box-shadow:none;"),T_=function(e){var t=e.unseenCount,n=e.text,r=e.stickToEdge,a=e.onClose,i=e.onClick,o=Object(A.a)(e,["unseenCount","text","stickToEdge","onClose","onClick"]);return rn.createElement(Uw,Object(T.a)({stickToEdge:r},o),rn.createElement(k_,{onClick:i},rn.createElement(S_,null,t<100?t:"99+"),rn.createElement(I_,{ellipsis:!0},n),rn.createElement(Vw,{onClick:function(e){e.stopPropagation(),a()}})))},A_=lb(_w,{target:"e241ssi0"})("width:",fO(24),";height:",fO(24),";border-radius:",(function(e){return e.theme.borderRadius.round}),";background:rgba(255,255,255,0.5);margin-bottom:",(function(e){return.5*e.theme.spaceBase}),"px;opacity:",(function(e){var t=e.mobile;return!qa()||t?"1":"0"}),";&:focus{opacity:1;}"),R_=Vg("font-size:",fO(24),";"),P_=function(e){var t=e.mobile,n=void 0!==t&&t,r=e.onClick,a=Object(A.a)(e,["mobile","onClick"]);return rn.createElement(A_,Object(T.a)({onClick:r,mobile:n},a),rn.createElement(yw,{className:R_,"aria-hidden":!0}))},M_=lb(Yy,{displayName:"Invitation",section:!0,target:"efsb37y0"})("max-width:",(function(e){return e.maxWidth}),";width:100%;margin-bottom:8px;align-items:",(function(e){return e.reverse?"flex-end":"flex-start"}),";&:hover{",A_,"{opacity:1;}}",c_,",",Wy,"{color:",(function(e){return e.theme.colors.text.black}),";box-shadow:",(function(e){return e.theme.boxShadow.floating}),";}"),N_=lb(uy,{target:"e1svly570"})((function(e){return e.theme.typography.basic})," width:100%;margin-bottom:10px;cursor:pointer;box-shadow:none;"),z_=lb(Wy,{target:"e1r3j30a0"})("width:100%;border:1px solid;box-shadow:",(function(e){return e.theme.boxShadow.floating}),";border-color:",(function(e){return e.highlighted?e.theme.colors.cta:"transparent"}),";transition:border-color 100ms ease-in-out;",(function(e){return"modern"===e.theme.name&&{padding:0}})),L_=lb(kx,{target:"e1r3j30a1"})("padding:",tw,";"),D_=function(e){var t=e.highlighted,n=e.children;return rn.createElement(z_,{highlighted:t},rn.createElement(L_,null,n))},B_=Vg("max-width:255px;cursor:pointer;"),q_=function(e){var t=e.onClick,n=e.children;return rn.createElement(Wy,{className:B_,onClick:t},rn.createElement(kx,null,n))},F_=lb("input",{target:"e19y96k30"})("width:240px;flex:1;margin-bottom:1px;border:none;outline:none;font-family:inherit;font-size:14px;color:",(function(e){return e.theme.colors.text.black}),";background-color:inherit;&::placeholder{color:",(function(e){return e.theme.colors.text.muted}),";}"),V_=function(e){return Vg("color:",e.colors.cta,";transition:color 100ms ease-in-out;flex-shrink:0;&:disabled{opacity:0.4;color:",e.colors.text.muted,";}")},U_=Object(Zg.b)((function(e){var t=e.disabled,n=e.mobile,r=e.theme;return rn.createElement(_w,{type:"submit",disabled:t,mobile:n,className:V_(r),"aria-label":"Send a message"},rn.createElement(Nw,null))})),G_=["0px, 0px","0px, -8px","0px, -10px","0px, -6px","0px, -2px","0px, 3px","0px, 2px","0px, -1px"],H_=[["0%, 66.67%, 100%","6.67%","13.33%, 20%","26.67%","33.33%","40%","46.67%","53.33%"],["0%, 6.67%, 73.33%, 100%","13.33%","20%, 26.67%","33.33%","40%","46.67%","53.33%","60%"],["0%, 13.33%, 80%, 100%","20%","26.67%, 33.33%","40%","46.67%","53.33%","60%","66.67%"]].map((function(e){return Hg(e.map((function(e,t){return e+" { transform: translate("+G_[t]+"); }"})))})),W_=lb("circle",{target:"epoxe490"})("transform-box:fill-box;transform-origin:50% 50%;animation-timing-function:",(function(e){return e.theme.transitions.easings.linear}),";animation-name:",(function(e){return e.animationName}),";animation-duration:",(function(e){return(e.animationDuration||1.5)+"s"}),";animation-iteration-count:",(function(e){return e.animationIterationCount||"infinite"}),";"),Y_=Object(Zg.b)((function(e){var t=e.height,n=e.width,r=e.theme,a=e.animationDuration,i=e.animationIterationCount,o=e.color,c=void 0===o?r.colors.text.black:o,s=Object(A.a)(e,["height","width","theme","animationDuration","animationIterationCount","color"]);return rn.createElement("svg",Object(T.a)({viewBox:"0 0 60 40",height:t,width:n,fill:c},s),H_.map((function(e,t){return rn.createElement(W_,{r:"6",cy:"20",key:t,cx:9+21*t,animationName:e,animationDuration:a,animationIterationCount:i})})))})),K_=Vg("overflow:hidden;margin-bottom:0;"),Q_=Object(Zg.b)((function(e){var t=e.avatar,n=e.theme;return rn.createElement(Yx,{avatar:t,className:K_},rn.createElement(Kx,null,rn.createElement(Wy,null,rn.createElement(kx,null,rn.createElement(Y_,{height:"16px",width:"24px",color:n.colors.agentMessageText})))))})),Z_=function(e){var t=e.onClose,n=e.onClick,r=e.rowReverse,a=void 0!==r&&r;return rn.createElement(M_,null,rn.createElement(Yy,null,rn.createElement(uy,{reverse:a},rn.createElement(P_,{onClick:t})),rn.createElement(uy,{reverse:a},rn.createElement(q_,{onClick:n},rn.createElement(Y_,{width:"32px",height:"21px"})))))},J_=nn((function(e){var t=function(t){return e.localize(t)},n=function(){return e.setApplicationState({maximized:!0})},r=function(t){return ji(e,"liveChatChatId",t)};return function(){return{maximize:n,localize:t,sendMessage:r}}}))((function(e){var t=e.maximize,n=e.localize,r=e.sendMessage,a=e.animated,i=void 0!==a&&a,o=rn.useState(!1),c=o[0],s=o[1],u=rn.useState(""),l=u[0],d=u[1],p=rn.useCallback((function(){return s(!0)}),[s]),f=rn.useCallback((function(){return s(!1)}),[s]),m=rn.useCallback((function(e){var t=e.target;return d(t.value)}),[]),h=rn.useCallback((function(e){e.preventDefault();var n=l.trim();n&&(d(""),t(),r(n))}),[t,l,r]);return rn.createElement(nx.a,{appear:i,component:null},rn.createElement(sO,{delay:750},rn.createElement(D_,{highlighted:c},rn.createElement("form",{onSubmit:h},rn.createElement(uy,null,rn.createElement(F_,{value:l,"aria-label":n("write_a_message"),onBlur:f,onFocus:p,onChange:m,placeholder:n("write_a_message")}),rn.createElement(U_,{disabled:!l.trim()}))))))})),X_=function(e,t,n){return void 0===n&&(n=[]),e.buttons?Object(T.a)({},e,{buttons:e.buttons.map((function(e){return Object(T.a)({},e,{disabled:t||!!Object(k.l)((function(t){return t===e.type}),n)})}))}):e},$_=function(e){var t=e.card,n=e.disabledButtons,r=e.eventId,a=e.compactButtons,i=e.onActionButtonClick,o=Object(A.a)(e,["card","disabledButtons","eventId","compactButtons","onActionButtonClick"]),c=rn.useState(!1),s=c[0],u=c[1];return rn.useEffect((function(){if(s){var e=setTimeout((function(){u(!1)}),1e3);return function(){return clearTimeout(e)}}}),[s]),rn.createElement(g_,Object(T.a)({card:X_(t,s,n),onButtonClick:function(e){u(!0),i({button:t.buttons[e],event:r})},compactButtons:a},o))},eC=Object(Zg.b)((function(e){var t,n,r=e.theme,a=Object(A.a)(e,["theme"]);return r&&"modern"===r.name&&(t=150,n=250),rn.createElement(O_,Object(T.a)({maxWidth:t,maxHeight:n},a))})),tC=lb("span",{target:"e1vbunaw0"})("font-size:2.5em;"),nC=function(e){var t=e.event,n=e.radiusType;return rn.createElement(Wy,{radiusType:n},rn.createElement(kx,null,rn.createElement(tC,null,t.properties.text)))},rC=function(e){function t(){return e.apply(this,arguments)||this}Object(zg.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e,t,n){n&&this._messageListContext.scrollToBottom()},n.getSnapshotBeforeUpdate=function(e){return!this.shouldRenderPreview(e)&&this.shouldRenderPreview()&&this._messageListContext.isScrollOnBottom()},n.shouldRenderPreview=function(e){return void 0===e&&(e=this.props),Boolean(e.urlPreview.properties.title)},n.render=function(){var e=this;return rn.createElement(ox,null,(function(t){e._messageListContext=t;var n=e.props,r=n.urlPreview.properties,a=n.radiusType,i=Object(k.Y)(["url","link"],r.image);return e.shouldRenderPreview()?rn.createElement(Wy,{radiusType:a},rn.createElement(eC,i),rn.createElement(Ix,{subtitle:r.description,title:r.title})):rn.createElement(Wy,{radiusType:a},rn.createElement(Xw,{text:r.text}))}))},t}(rn.Component),aC=Object(Zg.b)((function(e){var t=e.event,n=e.mobile,r=e.radiusType,a=e.disabledButtons,i=e.onActionButtonClick,o=e.onShow,c=void 0===o?k.R:o,s=e.theme,u=e.compactButtons,l=void 0!==u&&u,d=e.rtl,p=n&&l;switch(yb(c),t.type){case"carousel":return rn.createElement(Uj,{dir:d?"rtl":"ltr",mobile:n,scrollableElementPadding:s.spaces.space5},t.properties.cards.map((function(e,n){return rn.createElement($_,{key:n,card:e,horizontalLayout:p,eventId:t.id,compactButtons:l,disabledButtons:a,onActionButtonClick:i})})));case"message":case"message_draft":return rn.createElement(e_,Object(T.a)({},t.properties,{radiusType:r,draft:"message_draft"===t.type&&null===t.serverId}));case"emoji":return rn.createElement(nC,{event:t,radiusType:r});case"rich_message":return rn.createElement($_,{eventId:t.id,horizontalLayout:p,card:t.properties.card,compactButtons:l,disabledButtons:a,onActionButtonClick:i});case"sticker":return rn.createElement(Ww,t.properties);case"url_preview":return rn.createElement(rC,{radiusType:r,urlPreview:t});case"image_preview":var f=Object(k.Y)(["url","link","width","height","srcSet","alternativeText"],t.properties);return rn.createElement(eC,f)}return null})),iC=function(e){var t=e.children,n=e.screenPosition,r=e.onResize,a=e.onClick,i=e.onClose,o=rn.useState(!0),c=o[0],s=o[1],u=rn.useCallback((function(){return s(!1)}),[]);return Vb(u,2e3),rn.createElement(nx.a,{appear:!0,exit:!1,component:null},c&&rn.createElement(oO,{onExited:r},rn.createElement(Z_,{onClose:i,onClick:a,rowReverse:"right"===n})),!c&&rn.createElement(oO,{delay:400},t))},oC=nn((function(e,t){var n=t.id,r=function(){return mi(e)},a=function(){return hi(e)},i=function(t){var n=t.event,r=t.button;Ui(e,n,r)};return function(e){var t=e.getApplicationState().mobile,o=e.getEvent("liveChatChatId",n),c=Object(k.c)(o),s=rr(e,o);return o.properties.card&&o.properties.card.image&&(c.properties.card.image=Object(k.T)("link",o.properties.card.image)),o.properties.text&&(c.properties.text=function(e,t){var n=t.split(" "),r=0,a=!1,i=n.map((function(t){return!a&&t.length+r<e?(r+=t.length+1,t):(a=!0,null)})).filter((function(e){return"string"===typeof e})).join(" ");return a?i+"...":i}(t?70:200,o.properties.text)),{mobile:t,wasDisplayed:s,event:c,onClose:r,onShow:a,onActionButtonClick:i,screenPosition:_n(e),rtl:e.getApplicationState("rtl")}}}))((function(e){var t=e.wasDisplayed,n=e.onShow,r=e.onResize,a=e.event,i=e.mobile,o=e.screenPosition,c=e.onClose,s=e.onClick,u=e.onActionButtonClick,l=e.rtl,d=a.properties,p=d.quickReplies,f=d.addon,m=Object(db.a)((function(){return!t})),h=rn.useMemo((function(){return p&&!Object(k.C)(p)}),[p]),v=rn.useCallback((function(e){return u({event:a.id,button:p[e]})}),[a.id,u,p]);yb(r),Pb(r);var g=rn.createElement(M_,{reverse:"right"===o,maxWidth:i?"100%":"message"===a.type?"255px":"230px"},rn.createElement(uy,{reverse:"right"===o},rn.createElement(P_,{mobile:i,onClick:c,"aria-label":"Hide greeting"})),rn.createElement(N_,{reverse:"right"===o,onClick:s},rn.createElement(aC,{compactButtons:!0,event:a,mobile:i,onShow:n,onActionButtonClick:u,rtl:l})),h&&rn.createElement(uy,{reverse:"right"===o},rn.createElement(Kj,{replies:p,onSelect:v})),"message_input"===f&&rn.createElement(N_,{reverse:"right"===o},rn.createElement(J_,{animated:m})));return m?rn.createElement(iC,e,g):g})),cC=function(e){return Vg("display:flex;width:",e?"24px":"32px",";height:",e?"24px":"32px",";align-items:center;justify-content:center;")},sC=lb("div",{target:"e1dmt1bi0"})("position:relative;transition:transform 200ms ",(function(e){return e.theme.transitions.easings.spring})," 50ms;",(function(e){var t=e.compact;return cC(t)})," ",(function(e){return{transform:"scale("+(e.isScaled?1.25:1)+")"}})),uC=lb("div",{target:"e1dmt1bi1"})("position:absolute;z-index:1;left:0;right:0;bottom:1px;transition:opacity 150ms ",(function(e){return e.theme.transitions.easings.smooth})," 50ms;",(function(e){var t=e.compact;return cC(t)})," ",(function(e){return{opacity:e.isVisible?1:0}})),lC=Object(Zg.b)((function(e){var t=e.on,n=e.theme,r=e.compact,a=void 0!==r&&r,i=Object(A.a)(e,["on","theme","compact"]),o=rn.useState(t),c=o[0],s=o[1];return rn.useEffect((function(){if(!t){var e=setTimeout((function(){return s(!1)}),200);return function(){return clearTimeout(e)}}s(!0)}),[t]),rn.createElement(sC,Object(T.a)({isScaled:t,compact:a},i),rn.createElement(gw,{filled:t,size:a?24:32,color:n.colors.minimizedIcon,backgroundColor:n.colors.minimizedBackground}),rn.createElement(uC,{isVisible:t,compact:a},c&&rn.createElement(Y_,{width:a?"14px":"18px",animationDuration:1,animationIterationCount:1,color:n.colors.minimizedBackground})))})),dC=lb("div",{target:"e3vrje60"})("width:5px;height:5px;border-radius:",(function(e){return e.theme.borderRadius.round}),";background-color:",(function(e){return e.theme.colors.surface.light}),";"),pC=function(e){return Vg("z-index:1;position:absolute;right:",e?-4:0,"px;top:",e?-4:0,"px;")},fC=function(e){var t=e.mobile,n=void 0!==t&&t;return rn.createElement(E_,{className:pC(n)},rn.createElement(dC,null))},mC=lb("p",{target:"ejp8d810"})("margin:1em 0;"),hC=lb("div",{displayName:"MinimizedBar",section:!0,target:"e16i86ec0"})("width:255px;height:50px;box-shadow:",(function(e){return e.theme.boxShadow.floating}),";background:",(function(e){return e.theme.colors.surface.light}),";border-radius:",(function(e){var t=e.theme;return[t.borderRadius.lg,t.borderRadius.lg,t.borderRadius.none,t.borderRadius.none].join(" ")}),";display:flex;padding:0 0.9em;align-items:center;&:hover{cursor:pointer;}"),vC=lb(mC,{target:"e16i86ec1"})("flex-grow:1;font-weight:700;font-size:0.9em;margin-right:",(function(e){return e.theme.spaces.space2}),";"),gC=function(e){var t=e.text,n=e.hasUnseenEvents,r=e.onClick,a=Ab(),i=a[0],o=a[1],c=Rb(r),s=Object(bb.b)();return rn.createElement(hC,Object(T.a)({onClick:r,role:"button",tabIndex:"0","aria-label":"Open LiveChat chat widget"},c,o,s),n?rn.createElement(fC,null):null,rn.createElement(vC,{ellipsis:!0},t),rn.createElement(lC,{compact:!0,on:i,"aria-hidden":!0}))},bC=lb("div",{displayName:"MinimizedBubble",section:!0,target:"e1ybl9g10"})("display:flex;width:",(function(e){return e.mobile?"40px":"60px"}),";height:",(function(e){return e.mobile?"40px":"60px"}),";box-shadow:",(function(e){return e.theme.boxShadow.floating}),";border-radius:",(function(e){return e.theme.borderRadius.round}),";background:",(function(e){return e.theme.colors.surface.lightVariant}),";justify-content:center;",(function(e){return e.mobile&&Vg("margin-left:8px;margin-bottom:16px;")})," &:hover{cursor:pointer;}"),yC=Vg(Vg("padding:0;"),";width:100%;display:flex;justify-content:center;align-items:center;"),xC=function(e){var t=e.mobile,n=e.avatar,r=e.hasUnseenEvents,a=e.onClick,i=Ab(),o=i[0],c=i[1];return rn.createElement(bC,Object(T.a)({mobile:t,hasAvatar:Boolean(n),onClick:a},c),r?rn.createElement(fC,{mobile:t}):null,rn.createElement(tx,{className:yC,"aria-label":"Open LiveChat chat widget"},n?rn.createElement(Uy,{"aria-hidden":!0,imgUrl:n,size:t?"40px":"60px"}):rn.createElement(lC,{"aria-hidden":!0,compact:t,on:o})))},jC=lb("div",{displayName:"Minimized",section:!0,target:"eqd5v0k0"})("padding:",(function(e){return"circle"===e.minimizedType?"0.5em 0.5em 1em 1em":"0.8em 0.8em 0 0.8em"}),";max-width:100%;position:absolute;bottom:0;z-index:2;display:flex;justify-content:flex-end;align-items:flex-end;will-change:width,height,transform,opacity;backface-visibility:hidden;",(function(e){return e.position}),":0;"),OC=Vg("align-items:flex-end;"),wC=nn((function(e){var t=e.getApplicationState(),n=t.availability,r=t.eagerFetchingMode,a=t.hasUnseenEvents,i=t.mobile,o="online"===n,c=e.getChat("liveChatChatId").active,s=tr(e),u=!s||nr(e,s)?null:s.id,l=vn("agentAvatar",e).enabled&&(o||c)?hn("liveChatChatId",e):null;return{mobile:i,visibleGreetingId:u,avatar:Object(k.w)(!1,"avatar",l),minimizedType:wn(e),screenPosition:_n(e),minimizedText:Nn("liveChatChatId",e),hasUnseenEvents:r?e.getUnseenCount("liveChatChatId")>0:a}}))((function(e){var t=e.dir,n=e.mobile,r=e.avatar,a=e.onMaximize,i=e.minimizedText,o=e.minimizedType,c=e.screenPosition,s=e.hasUnseenEvents,u=e.visibleGreetingId,l=e.innerRef,d=void 0===l?k.R:l,p=e.onResize,f=void 0===p?k.R:p,m=null,h=null,v={reverse:"right"===c,dir:"circle"===o?"ltr":t};if(u&&(m=rn.createElement(oC,{key:u,id:u,onClick:a,onResize:f})),"circle"===o){var g=u&&n;h=rn.createElement(xC,{avatar:r,onClick:a,hasUnseenEvents:s,mobile:g})}return"bar"===o&&(h=rn.createElement(gC,{text:i,hasUnseenEvents:s,onClick:a})),rn.createElement(jC,{dir:t,role:"main",innerRef:d,minimizedType:o,position:c},n&&"circle"===o?rn.createElement(rn.Fragment,null,rn.createElement(Yy,null,rn.createElement(uy,v,m)),rn.createElement(Yy,{noShrink:!0},rn.createElement(uy,v,h))):rn.createElement(Yy,null,rn.createElement(uy,v,m),rn.createElement(uy,Object(T.a)({},v,{className:OC}),h)))})),_C=function(e,t){var n=new Date(e);return n.toLocaleDateString()===(new Date).toLocaleDateString()?t.today(n):function(e){var t=new Date;return t.setDate(t.getDate()-1),e.toLocaleDateString()===t.toLocaleDateString()}(n)?t.yesterday(n):n.toLocaleDateString([],{year:"numeric",month:"2-digit",day:"2-digit"})},CC=function(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window},EC=function(e,t,n){var r=Object(k.vb)(t).sort((function(e,t){return e.timestamp-t.timestamp})),a=Object(k.m)((function(t){return t.node===e}),r);if(a>-1)return{currentTimestamp:r[a].timestamp,previousTimestamp:a>0?r[a-1].timestamp:n}},IC=function(e,t){var n=rn.useRef({beginingOfTime:t,currentTimestamp:0,subscribers:[],dividers:{}}),r=function(e){var t=e.rootRef,n=e.rootMargin,r=e.threshold,a=e.intersectionHandler;if(CC()){var i=rn.useRef(null),o=rn.useRef([]),c=Object(fb.a)(a);return rn.useEffect((function(){return i.current=new IntersectionObserver((function(e,t){c.current&&c.current(e,t)}),{root:t.current,rootMargin:n,threshold:r}),o.current.forEach((function(e){return i.current.observe(e)})),o.current=[],function(){return i.current.disconnect()}}),[n,r,t,c]),Object(db.a)((function(){return{add:function(e){i.current?i.current.observe(e):o.current.push(e)},remove:function(e){i.current?i.current.unobserve(e):o.current=o.current.filter((function(t){return t!==e}))}}}))}}({rootRef:e,intersectionHandler:function(e){var t=function(e,t,n){var r=e.filter((function(e){return e.isIntersecting})).sort((function(e,t){return e.boundingClientRect.top-t.boundingClientRect.top}))[0];if(r){var a=EC(r.target,t,n);return a&&a.previousTimestamp}var i=e.filter((function(e){return e.boundingClientRect.top<=e.rootBounds.top})).sort((function(e,t){return e.boundingClientRect.top-t.boundingClientRect.top})).reverse()[0];if(i){var o=EC(i.target,t,n);return o&&o.currentTimestamp}}(e,n.current.dividers,n.current.beginingOfTime);if(t){var r={timestamp:t,direction:t>n.current.currentTimestamp?"down":"up"};n.current.currentTimestamp=t,n.current.subscribers.forEach((function(e){return e(r)}))}},threshold:.2});return rn.useEffect((function(){var e=Object(k.vb)(n.current.dividers).map((function(e){return e.timestamp})),t=Math.max.apply(Math,e.concat([n.current.beginingOfTime]));n.current.currentTimestamp=t,n.current.subscribers.forEach((function(e){return e({timestamp:t,direction:"up"})}))}),[]),Object(db.a)((function(){return{add:function(e){n.current.dividers[e.timestamp]=e,r&&r.add(e.node)},remove:function(e){r&&r.remove(e.node),delete n.current.dividers[e.timestamp]},subscribe:function(e){n.current.subscribers.push(e)},unsubscribe:function(e){n.current.subscribers=n.current.subscribers.filter((function(t){return t!==e}))},setBeginingOfTime:function(e){n.current.beginingOfTime=e},currentTimestamp:function(){return n.current.currentTimestamp}}}))},kC=rn.createContext(null),SC=function(){return rn.useContext(kC)},TC=function(e){var t=e.children,n=e.rootRef,r=e.beginingOfTime,a=IC(n,r);return rn.useEffect((function(){a.setBeginingOfTime(r)})),rn.createElement(kC.Provider,{value:a},t)},AC=lb("span",{displayName:"DividerLabel",target:"eceo2x80"})("padding:4px 8px;font-size:12px;position:relative;padding:0 8px;&:before,&:after{content:'';width:50vw;height:0;border-top:1px solid;border-top-color:inherit;position:absolute;top:50%;}&:before{right:100%;}&:after{left:100%;}"),RC=lb("div",{target:"e1g4em790"})("position:relative;"),PC=lb(AC,{target:"e1g4em791"})("color:",(function(e){return e.theme.colors.text.black}),";overflow:hidden;border:1px solid ",(function(e){return e.theme.colors.divider}),";background-color:",(function(e){return e.theme.colors.surface.light}),";border-radius:",(function(e){return e.theme.borderRadius.md}),";padding:2px 6px;transition:opacity 150ms linear;",(function(e){return!e.visible&&Vg("opacity:0;pointer-events:none;")})),MC=lb("span",{target:"e1g4em792"})(),NC=function(e){return Vg("&-enter ",MC,",&-exit ",MC,"{position:relative;}&-enter ",MC,"{top:","up"===e?"-2em":"2em",";}&-enter-active ",MC,"{top:0;transition:top ",200,"ms ease-out;}&-exit{opacity:1;}&-exit-active{opacity:0;transition:opacity ",200,"ms ease-out;}&-exit ",MC,"{top:0;position:relative;}&-exit-active ",MC,"{top:","up"===e?"2em":"-2em",";transition:top ",200,"ms ease-out;}")};var zC=CC()?function(e){var t=e.isUserScrollingSource,n=Object(A.a)(e,["isUserScrollingSource"]),r=qb(t),a=SC(),i=rn.useState({direction:"up",timestamp:a.currentTimestamp()}),o=i[0],c=i[1];return rn.useEffect((function(){a.subscribe(c);var e=a.currentTimestamp();return e!==o.timestamp&&c({direction:"up",timestamp:e}),function(){return a.unsubscribe(c)}}),[a]),o.timestamp?rn.createElement(ln,null,(function(e){var t=_C(o.timestamp,{today:function(){return e("today")},yesterday:function(){return e("yesterday")}});return rn.createElement(RC,null,rn.createElement(nx.a,{component:null,childFactory:function(e){return rn.cloneElement(e,{classNames:NC(o.direction)})}},rn.createElement(Ry.a,{key:t,classNames:NC(o.direction),timeout:200},rn.createElement(PC,Object(T.a)({},n,{visible:r}),rn.createElement(MC,null,t)))))})):null}:function(){return null},LC=function(e){var t=SC();rn.useEffect((function(){var n={timestamp:e.timestamp,node:e.nodeRef.current};return t.add(n),function(){t.remove(n)}}),[])},DC=lb("div",{target:"ehmqpie0"})("height:20px;margin:16px -0.5em;text-align:center;overflow:hidden;"),BC=function(e){var t=e.timestamp,n=rn.useRef(null);return LC({timestamp:t,nodeRef:n}),rn.createElement(ln,null,(function(e){return rn.createElement(DC,{innerRef:n},rn.createElement(AC,null,_C(t,{today:function(e){return e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},yesterday:function(){return e("yesterday")}})))}))},qC=lb("div",{displayName:"NewMessageHorizontalDivider",target:"eacid5n0"})("height:27px;margin:16px -0.5em;text-align:center;overflow:hidden;"),FC=lb(E_,{target:"eacid5n1"})("display:inline-flex;padding:2px 12px;font-weight:normal;box-shadow:none;height:auto;&:before,&:after{border-top:0;}"),VC=function(e){var t=e.unseenCount,n=e.setScrollTargetNode,r=rn.useRef(null);return yb((function(){r.current&&n(r.current)})),rn.createElement(ln,null,(function(e){return rn.createElement(qC,{innerRef:r},rn.createElement(FC,{minScale:.9,maxScale:1.05},e(1===t?"new_message":"new_messages")))}))},UC=lb("div",{displayName:"Divider",target:"evqzb400"})("border-top:1px solid rgba(0,0,0,0.05);margin:0 1em;margin-bottom:-1px;z-index:10;position:relative;"),GC=lb("div",{target:"ekfrplk0"})((function(e){return e.theme.typography.basic})," color:inherit;display:flex;width:100%;flex-direction:",(function(e){return e.compact?"row":"column"}),";"),HC=lb("div",{target:"e1lbo1s40"})("display:flex;justify-content:center;flex-shrink:0;"),WC=lb("div",{displayName:"IconLabel",target:"e1lbo1s41"})("background-color:",(function(e){return e.theme.colors.surface.lightVariant}),";border-radius:",(function(e){return e.theme.borderRadius.round}),";display:flex;justify-content:center;align-items:center;",(function(e){return{width:e.size,height:e.size}}),";"),YC=function(e){var t=e.size,n=void 0===t?"64px":t,r=e.children,a=Object(A.a)(e,["size","children"]);return rn.createElement(HC,null,rn.createElement(WC,Object(T.a)({size:n},a),r))},KC=lb(YC,{target:"eua2v1x0"})("margin:",(function(e){return e.compact?"0px 15px 0 0":"4px 15px 4px 0"}),";"),QC=function(e){e.compact;var t=Object(A.a)(e,["compact"]);return rn.createElement(KC,t)},ZC=function(e){return void 0===e&&(e=3),Vg("-webkit-line-clamp:",e,";-webkit-box-orient:vertical;-webkit-box-pack:center;display:-webkit-box;text-overflow:ellipsis;overflow:hidden;")},JC=function(e){return e.stopPropagation()},XC=lb("a",{target:"ecc17ou0"})("color:inherit;"),$C=function(e){return rn.createElement(XC,Object(T.a)({rel:"nofollow noopener",target:"_blank",textWrap:!0},e,{onClick:JC}))},eE=lb("div",{target:"e1dlrkch0"})((function(e){return ZC(e.lines)}),";text-align:",(function(e){return e.compact?"left":"center"}),";margin:",(function(e){return e.compact?"0px":"0 20px 10px"}),";a{color:inherit;}"),tE=function(e){var t=e.compact,n=e.text,r=rn.useMemo((function(){return Tc(n)}),[n]);return rn.createElement(eE,{title:r,lines:t?4:8,compact:t},rn.createElement(Pc,{template:n,root:{component:Kw.a,props:{component:$C}}}))},nE=function(e){var t=e.text,n=e.compact;return rn.createElement(GC,{compact:n},rn.createElement(QC,{size:"36px",compact:n},rn.createElement(Iw,null)),rn.createElement(tE,{text:t,compact:n}))},rE=function(e){var t=e.template,n=void 0===t?"":t,r=e.numberInQueue,a=e.waitingTime,i=e.compact,o=n.replace(/%number%/g,"**"+r+"**").replace(/%minutes%/g,"**"+Math.floor(a/60)+"**");return rn.createElement(GC,{compact:i},rn.createElement(QC,{size:"36px",compact:i},rn.createElement(ww,null)),rn.createElement(tE,{text:o,compact:i}))},aE=function(){return!0},iE=nn((function(e,t){var n=t.name,r=t.condition,a=void 0===r?aE:r;return function(e){var t=vn(n,e),r=t.enabled,i=Object(A.a)(t,["enabled"]);return{shouldRender:r&&a(i)}}}))((function(e){var t=e.shouldRender,n=e.children;return t?n:null})),oE=n(138),cE=function(e){return document.getElementById(e)},sE=function(e){var t=e.portalId,n=void 0===t?"app-portal":t,r=e.children,a=rn.useState((function(){return cE(n)})),i=a[0],o=a[1];return yb((function(){i||o(cE(n))})),i?ro.createPortal(r,i):null},uE=function(e){return{enter:300,exit:e+300}},lE=function(e,t){return Vg("&-enter,&-appear{background-color:rgba(0,0,0,0);}&-enter-active,&-appear-active,&-enter-done,&-appear-done{background-color:rgba(0,0,0,0.5);transition:background-color ",300,"ms ",t.transitions.easings.smooth,";}&-exit{background-color:rgba(0,0,0,0.5);}&-exit-active,&-exit-done{background-color:rgba(0,0,0,0);transition:background-color ",300,"ms ",t.transitions.easings.smooth,";transition-delay:",e,"ms;}")},dE=Vg("z-index:999;position:absolute;top:0;left:0;right:0;bottom:0;border-radius:inherit;"),pE=function(e){var t=rn.useRef(null);return Cb("touchmove",t),rn.createElement("div",Object(T.a)({ref:t,className:dE},e))},fE=rn.memo(Object(Zg.b)((function(e){var t=e.shown,n=e.exitDelay,r=void 0===n?100:n,a=e.onClick,i=e.theme;return rn.createElement(nx.a,{appear:!0,component:null},t&&rn.createElement(Ry.a,{classNames:lE(r,i),timeout:uE(r)},rn.createElement(pE,{onClick:a})))}))),mE=Vg("margin:0;background:transparent;"),hE=function(e){return Vg("position:absolute;z-index:1500;width:calc(100% - 2rem);max-width:290px;top:1em;left:50%;background:",e.colors.surface.light,";box-shadow:",e.boxShadow.lg,";padding:",1*e.spaceBase,"px;border-radius:",e.borderRadius.md,";")},vE=lb("div",{target:"e1yhh5l70"})("display:flex;flex-direction:row-reverse;"),gE=lb("div",{target:"e1yhh5l71"})("padding:",(function(e){return 1*e.theme.spaceBase}),"px;padding-top:0;"),bE={enter:300,exit:300},yE=function(e){return Vg("&-enter{transform:translate(-50%,20%);opacity:0;}&-enter-active,&-enter-done{transition:transform ",300,"ms ",e.transitions.easings.swift,",opacity ",300,"ms ",e.transitions.easings.swift,";transform:translate(-50%,0%);opacity:1;}&-exit{transform:translate(-50%,0%);opacity:1;}&-exit-active,&-exit-done{transform:translate(-50%,20%);opacity:0;transition:transform ",300,"ms ",e.transitions.easings.swift,",opacity ",150,"ms ease-out 50ms;}")},xE=rn.forwardRef((function(e,t){var n=e.onClose,r=void 0===n?k.R:n,a=e.children,i=e.theme,o=Object(A.a)(e,["onClose","children","theme"]);return function(e,t){var n=Object(fb.a)(t),r=!!t;rn.useEffect((function(){if(r){var t=function(t){t.keyCode===e&&n.current&&n.current(t)};return document.addEventListener("keydown",t),function(){return document.removeEventListener("keydown",t)}}}),[e,r,n])}(27,r),wb(t),rn.createElement(oE.a,{autoFocus:!0,returnFocus:!0,crossFrame:!1,className:hE(i),ref:t,lockProps:Object(T.a)({role:"dialog","aria-modal":!0},o)},rn.createElement(vE,null,rn.createElement(_w,{className:mE,onClick:r,"aria-label":"Close modal"},rn.createElement(yw,{"aria-hidden":!0}))),rn.createElement(gE,null,a))})),jE=Object(Zg.b)((function(e){var t=e.onClose,n=void 0===t?k.R:t,r=e.shown,a=e.children,i=e.theme,o=Object(A.a)(e,["onClose","shown","children","theme"]),c=rn.useRef(null);return rn.createElement(sE,null,rn.createElement(fE,{shown:r,onClick:n,exitDelay:25}),rn.createElement(nx.a,{component:null},r&&rn.createElement(Ry.a,{nodeRef:c,classNames:yE(i),timeout:bE},rn.createElement(xE,Object(T.a)({onClose:n,theme:i,ref:c},o),a))))})),OE=n(23),wE=n(135),_E=n(15),CE=lb("form",{displayName:"Form",section:!0,target:"e1nyj5rz0"})(),EE=lb(mC,{target:"exlwksr0"})("margin:0;transition:height 100ms ",(function(e){return e.theme.transitions.easings.linear}),";overflow:hidden;",(function(e){return e.theme.typography.errorCaption})),IE=function(e){var t=e.id,n=e.error,r=rn.useRef(null);return rn.useLayoutEffect((function(){var e=r.current;if(n){e.style.height="auto";var t=getComputedStyle(e).height;e.style.height="0",function(e){e.scrollTop}(e),e.style.height=t}else e.style.height="0"}),[n]),rn.createElement(EE,{id:t,innerRef:r,role:"alert"},n)},kE=lb("label",{target:"e2zxkge0"})("width:100%;display:inline-block;a{color:inherit;}",(function(e){var t=e.theme,n=e.isRequired,r=void 0!==n&&n;return[t.typography.basic,r&&Vg("&::after{display:inline;content:'\\00a0*';",t.typography.errorCaption,"}")]}));kE.defaultProps={textWrap:!0};var SE=kE,TE=lb("legend",{target:"e1kph7ea0"})("padding:0;display:inline-block;width:100%;a{color:inherit;}",(function(e){var t=e.theme,n=e.isRequired,r=void 0!==n&&n;return[t.typography.basic,r&&Vg("&::after{display:inline;content:'\\00a0*';",t.typography.errorCaption,"}")]}));TE.defaultProps={textWrap:!0};var AE=TE,RE=lb("div",{target:"e1oy1v900"})((function(e){return{margin:.25*e.theme.spaceBase+"px 0"}})),PE=lb(_w,{target:"e1oy1v901"})("width:40px;height:40px;"),ME=lb("div",{target:"e1oy1v902"})("width:",(function(e){return.75*e.theme.spaceBase}),"px;display:inline-block;"),NE=function(e){var t=e.input,n=e.meta,r=function(e){return function(n){var r=t.value===e;n.preventDefault(),t.onChange(r?null:e)}},a="good"===t.value?"rate_me_cancel_tooltip":"rate_me_good_tooltip",i="bad"===t.value?"rate_me_cancel_tooltip":"rate_me_bad_tooltip",o=n.error&&n.touched;return rn.createElement(ln,null,(function(e){return rn.createElement(RE,null,rn.createElement(PE,{active:"good"===t.value,onClick:r("good"),"aria-label":e(a)},rn.createElement(Dw,null)),rn.createElement(ME,null),rn.createElement(PE,{active:"bad"===t.value,onClick:r("bad"),"aria-label":e(i)},rn.createElement(Lw,null)),rn.createElement(IE,{error:o?n.error:null}))}))},zE=lb("div",{target:"egtcv0s0"})("position:relative;border:1px solid ",(function(e){return e.theme.colors.border}),";border-radius:",(function(e){return e.theme.borderRadius.sm}),";width:100%;background-color:",(function(e){return e.theme.colors.surface.light}),";transition:border-color 100ms linear;",(function(e){var t=e.focused,n=e.theme;return Object(T.a)({margin:.25*n.spaceBase+"px 0"},t?{borderColor:n.colors.accent}:{})})),LE=lb("select",{target:"egtcv0s1"})("width:100%;-webkit-appearance:none;font-family:inherit;background-color:transparent;border:none;:focus,:active{outline:none;}::-ms-expand{display:none;}",(function(e){var t=e.theme,n=t.spaceBase,r=t.typography;return Object(T.a)({},r.input,{padding:n+"px",paddingRight:"32px",":-moz-focusring":{color:"transparent",textShadow:"0 0 0 "+r.input.color}})})),DE=Vg("position:absolute;pointer-events:none;right:0;top:calc(50% - ",16,"px);"),BE=function(e){var t=e.onFocus,n=e.onBlur,r=Object(A.a)(e,["onFocus","onBlur"]),a=rn.useState(!1),i=a[0],o=a[1];return rn.createElement(zE,{focused:i},rn.createElement(LE,Object(T.a)({},r,{onFocus:function(e){t&&t(e),o(!0)},onBlur:function(e){n&&n(e),o(!1)}})),rn.createElement(bw,{"aria-hidden":!0,focusable:"false",className:DE}))},qE=function(e){var t=e.input,n=e.meta,r=Object(A.a)(e,["input","meta"]),a=n.touched&&!!n.error;return rn.createElement(rn.Fragment,null,rn.createElement(BE,Object(T.a)({},t,r,{"aria-invalid":a||void 0})),rn.createElement(IE,{error:a?n.error:null}))},FE=lb("input",{target:"e1xplv9i0"})("width:100%;border:1px solid ",(function(e){return e.theme.colors.border}),";-webkit-appearance:none;background-color:",(function(e){return e.theme.colors.surface.light}),";font-family:inherit;box-shadow:none;transition:border-color 100ms linear;:focus,:active{outline:none;border-color:",(function(e){return e.theme.colors.accent}),";}",(function(e){var t=e.theme,n=t.spaceBase,r=t.typography,a=t.borderRadius;return Object(T.a)({borderRadius:a.def},r.input,{padding:n+"px",margin:.25*n+"px 0"})})),VE=function(e){var t=e.value,n=e.errorMessageProps,r=Object(A.a)(e,["value","errorMessageProps"]);return rn.createElement(rn.Fragment,null,rn.createElement(FE,Object(T.a)({},r,{value:t||""})),rn.createElement(IE,n))},UE=lb("textarea",{target:"edsifzp0"})("width:100%;border:1px solid ",(function(e){return e.theme.colors.border}),";-webkit-appearance:none;background-color:",(function(e){return e.theme.colors.surface.light}),";font-family:inherit;box-shadow:none;transition:border-color 100ms linear;resize:none;:focus,:active{outline:none;border-color:",(function(e){return e.theme.colors.accent}),";}",(function(e){var t=e.theme,n=t.spaceBase,r=t.typography,a=t.borderRadius;return Object(T.a)({borderRadius:a.def},r.input,{padding:n+"px",margin:.25*n+"px 0"})})),GE=function(e){var t=e.value,n=e.errorMessageProps,r=Object(A.a)(e,["value","errorMessageProps"]);return rn.createElement(rn.Fragment,null,rn.createElement(UE,Object(T.a)({},r,{value:t||""})),rn.createElement(IE,n))},HE=function(e){return rn.createElement("path",Object(T.a)({d:"M4,0.5 C2.06700338,0.5 0.5,2.06700338 0.5,4 L0.5,12 C0.5,13.9329966 2.06700338,15.5 4,15.5 L12,15.5 C13.9329966,15.5 15.5,13.9329966 15.5,12 L15.5,4 C15.5,2.06700338 13.9329966,0.5 12,0.5 L4,0.5 Z"},e))},WE=function(e){return rn.createElement("path",Object(T.a)({d:"M4,0 L12,0 C14.209139,-4.4408921e-16 16,1.790861 16,4 L16,12 C16,14.209139 14.209139,16 12,16 L4,16 C1.790861,16 0,14.209139 0,12 L0,4 C-4.4408921e-16,1.790861 1.790861,0 4,0 Z"},e))},YE=function(e){return rn.createElement("polyline",Object(T.a)({strokeWidth:"2",strokeDasharray:"10",strokeLinecap:"round",strokeLinejoin:"round",points:"5 7.90626754 7.06606709 10 12 5"},e))},KE=function(e){return Vg("animation-iteration-count:1;animation-timing-function:",e.transitions.easings.linear,";animation-fill-mode:forwards;animation-duration:300ms;")},QE=Hg("0%{opacity:0;}33.33%{opacity:1;}100%{opacity:1;}"),ZE=Hg("0%{stroke-dashoffset:10;}33.33%{stroke-dashoffset:10;}77.78%{stroke-dashoffset:0;}100%{stroke-dashoffset:0;}"),JE=Object(Zg.b)((function(e){var t=e.className,n=e.checked,r=e.focused,a=e.theme,i=Object(A.a)(e,["className","checked","focused","theme"]);return rn.createElement("svg",Object(T.a)({width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",fillRule:"evenodd",className:Ug(Vg("border-radius:",a.borderRadius.sm,";background-color:",a.colors.surface.light,";"),r&&Vg("box-shadow:",a.boxShadow.outline,";"),t)},i),rn.createElement(HE,{stroke:a.colors.border}),n&&rn.createElement(rn.Fragment,null,rn.createElement(WE,{fill:a.colors.accent,className:Vg(KE(a)," animation-name:",QE,";")}),rn.createElement(YE,{stroke:a.colors.text.white,className:Vg(KE(a)," animation-name:",ZE,";")})))})),XE=lb("input",{target:"e81sjne0"})("opacity:0;margin:0;padding:0;height:100%;width:100%;position:absolute;"),$E=rn.forwardRef((function(e,t){var n=e.className,r=e.defaultChecked,a=void 0!==r&&r,i=e.checked,o=e.id,c=e.onBlur,s=void 0===c?k.R:c,u=e.onChange,l=void 0===u?k.R:u,d=e.onFocus,p=void 0===d?k.R:d,f=Object(A.a)(e,["className","defaultChecked","checked","id","onBlur","onChange","onFocus"]),m=rn.useState(void 0!==i?i:a),h=m[0],v=m[1],g=rn.useState(!1),b=g[0],y=g[1],x=Tb();void 0!==i&&h!==i&&v(i);return rn.createElement("div",{className:Ug(Vg("display:inline-block;position:relative;height:16px;width:16px;"),n)},rn.createElement(XE,Object(T.a)({type:"checkbox",checked:h,id:o,onChange:function(e){l(e),void 0===i&&v((function(e){return!e}))},onFocus:function(e){p(e),"keyboard"===x()&&y(!0)},onBlur:function(e){s(e),y(!1)},innerRef:t},f)),rn.createElement(JE,{"aria-hidden":!0,checked:h,focused:b,focusable:"false"}))})),eI=Object(Zg.b)((function(e){var t=e.theme,n=e.color,r=void 0===n?t.colors.border:n,a=Object(A.a)(e,["theme","color"]);return rn.createElement("circle",Object(T.a)({fillRule:"nonzero",fill:r,cx:"8",cy:"8",r:"3.5"},a))})),tI=Object(Zg.b)((function(e){var t=e.theme,n=e.color,r=void 0===n?t.colors.border:n,a=Object(A.a)(e,["theme","color"]);return rn.createElement("circle",Object(T.a)({fillRule:"nonzero",cx:"8",cy:"8",r:"7.5",stroke:r,strokeWidth:"1"},a))})),nI=Hg("0%{transform:scale(0,0);}50%{transform:scale(1.1,1.1);}66.67%{transform:scale(1.1,1.1);}83.33%{transform:scale(0.95,0.95);}100%{transform:scale(1,1);}"),rI=Hg("0%{opacity:0;}83.33%{opacity:1;}100%{opacity:1;}"),aI=function(e){return Vg("animation-duration:200ms;animation-iteration-count:1;animation-fill-mode:forwards;animation-timing-function:",e.transitions.easings.linear,";")},iI=Object(Zg.b)((function(e){var t=e.className,n=e.checked,r=e.focused,a=e.theme,i=Object(A.a)(e,["className","checked","focused","theme"]);return rn.createElement("svg",Object(T.a)({width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",fillRule:"evenodd",className:Ug(Vg("border-radius:",a.borderRadius.round,";background-color:",a.colors.surface.light,";"),r&&Vg("box-shadow:",a.boxShadow.outline,";"),t)},i),rn.createElement(tI,null),n&&rn.createElement(rn.Fragment,null,rn.createElement(tI,{color:a.colors.accent,className:Vg(aI(a)," animation-name:",rI,";")}),rn.createElement(eI,{color:a.colors.accent,className:Vg(aI(a)," animation-name:",nI,";transform-origin:50% 50%;")})))})),oI=lb("input",{target:"e12lg4gr0"})("opacity:0;margin:0;padding:0;height:100%;width:100%;position:absolute;"),cI=function(e){var t=e.className,n=e.defaultChecked,r=void 0!==n&&n,a=e.checked,i=e.id,o=e.onBlur,c=void 0===o?k.R:o,s=e.onChange,u=void 0===s?k.R:s,l=e.onFocus,d=void 0===l?k.R:l,p=Object(A.a)(e,["className","defaultChecked","checked","id","onBlur","onChange","onFocus"]),f=rn.useState(void 0!==a?a:r),m=f[0],h=f[1],v=rn.useState(!1),g=v[0],b=v[1],y=Tb();void 0!==a&&m!==a&&h(a);return rn.createElement("div",{className:Ug(Vg("display:inline-block;position:relative;height:16px;width:16px;"),t)},rn.createElement(oI,Object(T.a)({type:"radio",checked:m,id:i,onChange:function(e){u(e),void 0===a&&h((function(e){return!e}))},onBlur:function(e){c(e),b(!1)},onFocus:function(e){d(e),"keyboard"===y()&&b(!0)},required:!0},p)),rn.createElement(iI,{"aria-hidden":!0,checked:m,focused:g,focusable:"false"}))},sI=Hg("0%{transform:rotate(-90deg);}100%{transform:rotate(270deg);}"),uI=lb("circle",{target:"e5pj4iq0"})("animation-duration:1s;transform-origin:center;animation-name:",(function(e){return t=e.animationFactor,Hg("0%{stroke-dasharray:",22*t," ",1e3*t,";}50%{stroke-dasharray:",88*t," ",1e3*t,";}100%{stroke-dasharray:",22*t," ",1e3*t,";}");var t}),",",sI,";animation-iteration-count:infinite;animation-timing-function:linear;"),lI={r:"28",cx:"32",cy:"32",fill:"none",strokeLinecap:"round"},dI={small:{sideLength:16,strokeWidth:2},medium:{sideLength:24,strokeWidth:3},large:{sideLength:32,strokeWidth:4},xlarge:{sideLength:56,strokeWidth:4}},pI=lb("svg",{target:"e5pj4iq1"})(),fI=Object(Zg.b)((function(e){var t=e.size,n=e.theme,r=e.adjustToColor,a=void 0===r?n.colors.surface.light:r,i=e.ariaLabel,o=Object(A.a)(e,["size","theme","adjustToColor","ariaLabel"]),c=mr(a)?"rgba(0, 0, 0, 0.1)":"rgba(255, 255, 255, 0.1)",s=mr(a)?n.colors.cta:n.colors.text.white,u=dI[t],l=u.sideLength,d=u.strokeWidth,p=i?{"aria-labelledby":"loader-label"}:{},f=Object(bb.b)();return rn.createElement(pI,Object(T.a)({height:l+"px",width:l+"px",viewBox:"0 0 64 64",role:"img"},p,o,f),i&&rn.createElement("title",{id:"loader-label"},i),rn.createElement("circle",Object(T.a)({},lI,{strokeWidth:d,stroke:c,vectorEffect:"non-scaling-stroke"})),rn.createElement(uI,Object(T.a)({},lI,{strokeWidth:d,stroke:s,vectorEffect:"non-scaling-stroke",animationFactor:l/56})))})),mI=lb("button",{displayType:"Button",target:"esv0owm0"})("font-size:inherit;font-weight:bold;border:0;font-family:inherit;width:100%;max-width:320px;flex-shrink:0;cursor:pointer;display:flex;justify-content:center;align-items:center;",(function(e){var t=e.capitalize,n=e.color,r=e.disabled,a=e.dark,i=e.theme,o=i.spaceBase,c=i.typography,s=i.borderRadius;return Object(T.a)({borderRadius:s.def},c.basicContrast,{padding:1.5*o+"px",backgroundColor:""+(a?Object(N.a)(.2,n):n)},r?{":hover":{cursor:"default"}}:{},t?{textTransform:"capitalize"}:{})})),hI=lb("div",{target:"esv0owm1"})("display:flex;margin-left:0.5em;"),vI=lb("div",{target:"esv0owm2"})(),gI=Object(Zg.b)((function(e){var t=e.children,n=e.destructive,r=e.disabled,a=void 0!==r&&r,i=e.pending,o=void 0!==i&&i,c=e.theme,s=Object(A.a)(e,["children","destructive","disabled","pending","theme"]),u=n?c.colors.error:c.colors.cta,l=Object(bb.b)();return rn.createElement(mI,Object(T.a)({},l,s,{disabled:a,dark:o||a,color:u}),rn.createElement(vI,{ellipsis:!0},t),o&&rn.createElement(hI,{"aria-hidden":!0},rn.createElement(fI,{size:"small",adjustToColor:u})))}));var bI=function(e){var t=e.label,n=e.submitting,r=Object(A.a)(e,["label","submitting"]);return rn.createElement(gI,Object(T.a)({pending:n,disabled:n,type:"submit"},r),rn.createElement("span",null,t))},yI=n(240),xI={},jI={submitError:!0},OI={submitting:!0},wI={values:!0},_I=Object(wE.a)(),CI={format:function(e){return Object(k.rb)(e||"")},formatOnBlur:!0},EI=function(e){var t=e.meta,n=Object(_E.d)(),r=null;return t.submitError&&!t.dirtySinceLastSubmit?r=t.submitError:t.touched&&t.error&&(r=t.error),{validationState:r?"invalid":"valid",errorMessageProps:{error:r,id:n}}},II=function(e){var t=e.name,n=e.ariaLabel,r=e.label,a=e.required,i=e.type,o=e.autoComplete,c=Object(OE.d)(t,CI),s=EI(c),u=s.validationState,l=s.errorMessageProps,d=Object(yI.a)(Object(T.a)({id:t,type:i,isRequired:a,autoComplete:o,validationState:u,"aria-errormessage":l.id,label:r,"aria-label":n},c.input),null);return{inputProps:d.inputProps,labelProps:d.labelProps,errorMessageProps:l}},kI=function(){return rn.createElement(OE.c,{subscription:jI},(function(e){var t=e.submitError;return rn.createElement(IE,{error:t||null})}))},SI=document.hasFocus?function(){return document.hasFocus()}:function(){return!1},TI=function(e){return void 0===e&&(e=Fa()),!e&&SI()},AI=lb("div",{target:"e1n7ru1l0"})("text-align:center;"),RI=[_I],PI=function(e){var t=e.id,n=e.children,r=e.mobile,a=e.initialValues,i=e.submitLabel,o=e.validate,c=e.onSubmit,s="form_"+t;return yb((function(){TI(r)&&function(e){var t=Object(wE.b)(e)();if(t.length){var n=t[0],r=n.tagName;("INPUT"===r&&!Object(k.A)(n.type,["checkbox","radio"])||"TEXTAREA"===r)&&Object(_E.b)(n)}}(s)})),rn.createElement(OE.b,{decorators:RI,initialValues:a,onSubmit:c,subscription:xI,validate:o},(function(e){var t=e.handleSubmit;return rn.createElement(CE,{name:s,onSubmit:t},n,rn.createElement(kI,null),rn.createElement(AI,null,rn.createElement(OE.c,{subscription:OI},(function(e){var t=e.submitting;return rn.createElement(bI,{submitting:t,label:i})}))))}))},MI=lb("div",{target:"eptvlbh0"})("display:flex;flex-direction:column;width:100%;margin-bottom:",(function(e){return e.theme.spaceBase+"px"}),";"),NI=function(e){var t=e.children,n=e.showRequiredMark,r=void 0!==n&&n,a=Object(A.a)(e,["children","showRequiredMark"]);return rn.createElement(SE,Object(T.a)({isRequired:r},a),"string"===typeof t?rn.createElement(Pc,{preserveLists:!0,template:t,root:{component:Kw.a,props:{component:$C}}}):t)},zI=function(e){var t=e.label,n=e.required,r=II(e),a=r.inputProps,i=(a.type,Object(A.a)(a,["type"])),o=r.labelProps,c=r.errorMessageProps;return rn.createElement(MI,null,t&&rn.createElement(NI,Object(T.a)({showRequiredMark:n},o),t),rn.createElement(GE,Object(T.a)({},i,{errorMessageProps:c})))},LI="DISABLE_PERMANENTLY",DI="TOOLTIP_HOVER_START",BI="TOOLTIP_HOVER_END",qI="TRIGGER_HOVER_START",FI="TRIGGER_HOVER_END",VI=lb("div",{displayName:"Tooltip",target:"ezqijrk0"})("display:inline-block;background-color:",(function(e){return e.theme.colors.surface.darkVariant}),";color:",(function(e){return e.theme.colors.text.white}),";padding:1em;position:fixed;border-radius:",(function(e){return e.theme.borderRadius.lg}),";z-index:9;font-size:0.8em;white-space:nowrap;font-weight:normal;margin-top:0.5em;",(function(e){var t=e.position;return{left:t.left?t.left-10+"px":"auto",right:t.right?t.right-10+"px":"auto",top:t.top+"px"||!1}}),";"),UI=lb("svg",{displayName:"TooltipArrow",target:"ezqijrk1"})("position:absolute;fill:",(function(e){return e.theme.colors.surface.darkVariant}),";margin-top:-1.5em;",(function(e){var t=e.position,n=e.horizontalFactor;return{left:t.left?n-10+"px":"auto",right:t.right?n-10+"px":"auto",top:"0"}}),";"),GI=lb("div",{target:"ezqijrk2"})("position:relative;"),HI=function(e){var t=e.getBoundingClientRect(),n=t.left,r=t.right,a=t.bottom,i=window,o=i.innerWidth,c=i.pageXOffset,s=a+i.pageYOffset;return n+c>o/2?{top:s,right:o-(r+c)}:{top:s,left:n+c}},WI={permanentlyDisabled:!1,triggerHovered:!1,tooltipHovered:!1,triggerData:null},YI=function(e,t){switch(t.type){case LI:return Object(T.a)({},WI,{permanentlyDisabled:!0});case DI:return Object(T.a)({},e,{tooltipHovered:!0});case BI:return Object(T.a)({},e,{tooltipHovered:!1});case qI:return Object(T.a)({},e,{triggerHovered:!0,triggerData:{position:t.position,targetWidth:t.targetWidth}});case FI:return Object(T.a)({},e,{triggerHovered:!1});default:return e}};var KI=function(e){var t=e.children,n=e.label,r=e.disabled,a=void 0!==r&&r,i=Object(A.a)(e,["children","label","disabled"]),o=rn.useReducer(YI,WI),c=o[0],s=c.tooltipHovered,u=c.triggerHovered,l=c.triggerData,d=c.permanentlyDisabled,p=o[1];return a&&u&&p({type:FI}),rn.createElement(rn.Fragment,null,rn.createElement("div",Object(T.a)({className:Vg("display:flex;align-items:stretch;flex-shrink:0;"),onMouseEnter:function(e){var t=e.currentTarget;a||d||p({type:qI,position:HI(t),targetWidth:t.offsetWidth})},onMouseLeave:function(){return p({type:FI})},onTouchStart:function(){return p({type:LI})}},i),t),(u||s)&&l&&rn.createElement(sE,{portalId:"tooltip-portal"},rn.createElement(VI,{onMouseEnter:function(){return p({type:DI})},onMouseLeave:function(){return p({type:BI})},position:l.position},rn.createElement(GI,null,rn.createElement(UI,{horizontalFactor:l.targetWidth/2,height:"10",position:l.position,width:"16"},rn.createElement("polygon",{points:"0,10 16,10 8,0"})),n))))},QI=Vg("text-align:center;"),ZI=Vg("font-size:inherit;"),JI=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={open:!1,selectedRate:t.props.chatRate},t.handleRate=Object(k.N)((function(e){return function(){var n=t.state.selectedRate===e,r=n?null:e;t.rateChat(r),t.setState({selectedRate:r,open:!n})}})),t.closeModal=function(){t.setState({open:!1})},t.validate=function(e){if(!e.comment)return{comment:t.props.localize("survey_fill_in_required_fields")}},t.handleSubmit=function(e){t.props.rateChat({comment:e.comment}),t.closeModal()},t.getRateButtonProps=function(e){var n=t.props,r=n.chatRate;return{disabled:n.disabled,active:r===e,onClick:t.handleRate(e)}},t}Object(zg.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){e.chatRate!==this.props.chatRate&&this.setState({selectedRate:this.props.chatRate})},n.rateChat=function(e){var t=this;this.props.rateChat({rate:e}).catch((function(){return t.setState({selectedRate:t.props.chatRate})}))},n.render=function(){var e=this.state,t=e.open,n=e.selectedRate,r=this.props,a=r.disabled,i=r.chatRate,o=r.mobile,c=r.localize,s=c("good"===i?"rate_me_cancel_tooltip":"rate_me_good_tooltip"),u=c("bad"===i?"rate_me_cancel_tooltip":"rate_me_bad_tooltip");return rn.createElement(rn.Fragment,null,rn.createElement(KI,{disabled:a,label:s},rn.createElement(_w,Object(T.a)({},this.getRateButtonProps("good"),{"aria-label":s}),rn.createElement(Dw,{className:ZI,"aria-hidden":!0}))),rn.createElement(KI,{disabled:a,label:u},rn.createElement(_w,Object(T.a)({},this.getRateButtonProps("bad"),{"aria-label":u}),rn.createElement(Lw,{className:ZI,"aria-hidden":!0}))),rn.createElement(jE,{shown:t,onClose:this.closeModal,"aria-labelledby":"add_rate_comment_label"},rn.createElement(YC,{"aria-hidden":!0},"good"===n?rn.createElement(Dw,null):rn.createElement(Lw,null)),rn.createElement("p",{id:"add_rate_comment_label",className:QI},c("rate_me_add_comment")),rn.createElement(PI,{id:"rate_comment",mobile:o,onSubmit:this.handleSubmit,submitLabel:c("button_add_feedback"),validate:this.validate},rn.createElement(uy,null,rn.createElement(zI,{name:"comment",required:!0,mobile:o,ariaLabel:"Enter a rating comment"})))))},t}(rn.Component),XI=nn((function(e,t){var n=t.chatId,r=function(t){var r=t.rate,a=t.comment,i={};return void 0!==r&&(i.rate=r),void 0!==a&&(i.rateComment=a),e.requestUpdateChat(n,{properties:i})};return function(e){var t=e.getChat(n),a=t.active,i=t.properties,o=i.ended;return{chatRate:i.rate,disabled:!o&&!a,iconTheme:e.getApplicationState("config").theme.iconTheme,mobile:e.getApplicationState("mobile"),rateChat:r,localize:e.localize}}}))(JI),$I=Vg("margin-right:0;"),ek=lb("div",{target:"ekqutxs0"})("display:flex;align-items:center;position:relative;margin-right:0.5em;"),tk=lb("div",{target:"ekqutxs1"})("width:",(function(e){var t=e.size,n=e.theme;return"small"===t?n.spaces.space4:n.spaces.space5}),";height:",(function(e){var t=e.size,n=e.theme;return"small"===t?n.spaces.space4:n.spaces.space5}),";background:",(function(e){var t=e.availability,n=e.theme;return"online"===t?n.colors.success:n.colors.grayscale[500]}),";border:2px solid ",(function(e){return e.theme.colors.surface.light}),";border-width:",(function(e){return"small"===e.size?"1px":"2px"}),";position:absolute;border-radius:",(function(e){return e.theme.borderRadius.round}),";right:0;top:0;"),nk=function(e){var t=e.avatarUrl,n=e.availability,r=e.size,a=void 0===r?"normal":r;return rn.createElement(ek,null,rn.createElement(Uy,{className:$I,imgUrl:t}),n&&rn.createElement(tk,{availability:n,size:a}))},rk=Vg("justify-content:center;"),ak=lb("div",{target:"e10kp68a0"})("width:100%;display:flex;"),ik=Vg(rk," flex:1;"),ok=Vg(rk," min-width:auto;"),ck=lb("img",{target:"e10kp68a1"})("height:auto;max-height:50px;"),sk=Object(k.N)((function(e){return function(t){return t.position===e}})),uk=function(e){var t=e.agent,n=e.chatId,r=e.showAvatar,a=e.showLogo,i=e.logoPath;return rn.createElement(ak,null,r&&t.avatar&&rn.createElement(nk,{avatarUrl:t.avatar,availability:"online"}),rn.createElement(uy,{flexFill:!0},rn.createElement(Yy,{className:ik,flexFill:!0},rn.createElement(wx,{ellipsis:!0},t.name),t.properties.jobTitle&&rn.createElement(jx,{ellipsis:!0},t.properties.jobTitle),rn.createElement(iE,{condition:sk("bottom"),name:"rating"},rn.createElement(uy,null,rn.createElement(XI,{chatId:n})))),rn.createElement(iE,{condition:sk("right"),name:"rating"},rn.createElement(Yy,{className:rk,noShrink:!0},rn.createElement(uy,null,rn.createElement(XI,{chatId:n})))),a&&rn.createElement(Yy,{className:ok},rn.createElement(ck,{alt:"",src:i}))))},lk=lb(my,{target:"eraual0"})("position:relative;box-shadow:",(function(e){return e.theme.boxShadow.sm}),";"),dk=lb("div",{displayName:"TopBar",target:"eraual1"})("position:relative;z-index:1;height:auto;bottom:0;@media (max-height:330px){display:none;}"),pk={enter:150,exit:150},fk=Vg("&-enter,&-appear{transform:translateY(-100%);}&-enter-active,&-appear-active,&-enter-done,&-appear-done{transform:translateY(0);transition:transform ",150,"ms ","cubic-bezier(0.14, 0, 0, 1)",";}&-exit{transform:translateY(0);}&-exit-active{transform:translateY(-100%);transition:transform ",150,"ms ","cubic-bezier(0.14, 0, 0, 1)",";}"),mk=Vg("transition:opacity 100ms ease-in-out;position:relative;"),hk=nn((function(e,t){var n=t.chatId;return function(e){var t,r=e.getView("Chat/queue"),a=Yn(e),i=Wn(e),o=Jn(e);return{agent:hn(n,e),chatActive:e.getChat(n).active,showAvatar:vn("agentAvatar",e).enabled,logoPath:(t=vn("logo",e).path,"https://"+Object(P.k)(t)),showLogo:vn("logo",e).enabled&&"modern"===Fn(e),showAgentBar:a,showOfflineInformation:i,showQueueInformation:o,offlineInformation:e.localize(gn(e)?"agents_not_available_continuous":"agents_not_available"),hasNoVisibleEvents:or(e),queueTemplate:qn(e),numberInQueue:r&&r.numberInQueue,waitingTime:r&&r.waitingTime,showTopBar:cr(e)}}}))(Object(Zg.b)((function(e){var t=e.agent,n=e.chatId,r=e.showAvatar,a=e.logoPath,i=e.showLogo,o=e.showAgentBar,c=e.scrollingDeltaSource,s=e.isOnBottomSource,u=e.showOfflineInformation,l=e.offlineInformation,d=e.hasNoVisibleEvents,p=e.showQueueInformation,f=e.queueTemplate,m=e.numberInQueue,h=e.waitingTime,v=e.showTopBar,g=rn.useRef(),b=rn.useRef(),y=rn.useRef(0),x=rn.useState(!1),j=x[0],O=x[1],w=rn.useCallback((function(){O(!1),g.current&&(g.current.style.bottom=0,g.current.style.height="auto"),b.current&&(b.current.style.opacity=1)}),[g]);return Ob(c,(function(e){var t=e.y;v&&("auto"===g.current.style.height&&(y.current=g.current.offsetHeight),1===t&&O(!0),j&&t<1&&O(!1),g.current&&(g.current.style.bottom=t*y.current+"px",g.current.style.height=y.current-t*y.current+"px"),b.current&&(b.current.style.opacity=1-2*t))})),rn.useEffect((function(){w()}),[v,w]),rn.useEffect((function(){if(s)return s.subscribe((function(e){e&&w()}))}),[s,w]),rn.createElement(dk,{id:"top-bar",innerRef:g},rn.createElement(nx.a,{appear:!0,component:null,exit:!j},v&&rn.createElement(Ry.a,{timeout:pk,classNames:fk},rn.createElement("div",null,rn.createElement(UC,null),rn.createElement(lk,{noShrink:!0},rn.createElement(uy,{flexFill:!0,innerRef:b,className:mk},p&&rn.createElement(rE,{template:f,numberInQueue:m,waitingTime:h,compact:!d}),u&&rn.createElement(nE,{compact:!d,text:l}),o&&rn.createElement(uk,{agent:t,chatId:n,showAvatar:r,showLogo:i,logoPath:a})))))))}))),vk=function(e){var t=e.children;return rn.createElement(Kx,{date:"",showMetaOnClick:!1,system:!0},rn.createElement(Wy,null,rn.createElement(Xw,{text:t})))},gk=lb(o_,{displayName:"SystemCard",target:"e1r9cm3y0"})("padding:8px;margin:2px 0;width:100%;max-width:270px;position:relative;"),bk=lb("div",{target:"e1q4zsg90"})("display:flex;flex-direction:row;position:absolute;top:-21px;left:0;right:0;color:",(function(e){return e.theme.colors.text.white}),";"),yk=lb("div",{target:"e1q4zsg91"})("display:flex;justify-content:center;align-items:center;overflow:hidden;margin:0 auto;border-radius:",(function(e){return e.theme.borderRadius.round}),";width:",42,"px;height:",42,"px;background-color:",(function(e){var t=e.theme;return e.backgroundColor||t.colors.cta}),";"),xk=function(e){var t=e.children,n=e.backgroundColor;return rn.createElement(bk,{"aria-hidden":!0},rn.createElement(yk,{backgroundColor:n},t))},jk=function(e){return Vg("margin-left:4px;margin-top:3px;fill:currentColor;transform:","scaleY("+("up"===e?-1:1)+")",";")},Ok=function(e){var t=e.direction,n=void 0===t?"down":t,r=Object(A.a)(e,["direction"]);return rn.createElement("svg",Object(T.a)({viewBox:"0 0 7 4",width:"7px",height:"4px",className:jk(n)},r),rn.createElement("path",{d:"M1.1,0.2C0.9,0,0.5,0,0.4,0.2s-0.2,0.5,0,0.7l2.8,2.8c0.2,0.2,0.5,0.2,0.7,0l2.8-2.8c0.2-0.2,0.2-0.5,0-0.7S6.2,0,6,0.2 L3.5,2.7L1.1,0.2z"}))},wk=lb("button",{target:"eentevd0"})("display:flex;flex-direction:row;align-items:center;justify-content:center;width:100%;background:none;border:none;margin-top:8px;font-size:12px;text-align:center;cursor:pointer;color:",(function(e){return e.theme.colors.cta}),";"),_k=lb("div",{target:"e1g195pu0"})("position:absolute;top:50%;bottom:0;left:0;right:0;pointer-events:none;background:linear-gradient(rgba(255,255,255,0),rgba(255,255,255,0.9));"),Ck=lb("div",{target:"e9s6ynt0"})("position:relative;overflow:hidden;height:auto;transition:max-height 300ms ",(function(e){return e.theme.transitions.easings.swift}),";"),Ek=lb("div",{target:"e1cdxu9o0"})("overflow:auto;height:auto;padding:8px;"),Ik=nn((function(e,t){var n=t.icon,r=e.getApplicationState("config").theme;return{showIcon:!!n&&"modern"!==r.name,rtl:e.getApplicationState("rtl"),localize:e.localize}}))((function(e){var t,n,r=e.icon,a=e.showIcon,i=e.children,o=e.collapsible,c=void 0!==o&&o,s=e.defaultCollapsed,u=void 0!==s&&s,l=e.collapsedHeight,d=void 0===l?100:l,p=e.collapseThreshold,f=void 0===p?20:p,m=e.rtl,h=e.localize,v=(e.dataTestId,rn.useRef(0)),g=rn.useRef(!1),b=rn.useRef(null),y=rn.useRef(null),x=Object(bb.b)(),j=Object(bb.b)(),O=rn.useState(!1),w=O[0],_=O[1],C=rn.useState(c),E=C[0],I=C[1],S=Object(db.a)(k.t),A=Object(db.a)((function(){return c&&u?Vg("max-height:",d+"px",";"):null})),R=rn.useCallback((function(e){y.current.style.maxHeight="number"===typeof e?e+"px":e}),[]),P=rn.useCallback((function(){_(!w)}),[w]),M=rn.useCallback((function(){w||R("none")}),[w,R]);return rn.useEffect((function(){return function(){return cancelAnimationFrame(v.current)}}),[]),rn.useEffect((function(){var e=b.current.offsetHeight,t=e>d&&e-d>f;I(t&&c),!g.current&&c&&_(t&&u),g.current=c}),[c,u,d,f]),rn.useEffect((function(){E?(R(b.current.offsetHeight),w&&(cancelAnimationFrame(v.current),v.current=requestAnimationFrame((function(){return R(d)})))):R("none")}),[E,w,d,R]),rn.createElement("div",{className:Ug(a&&(n="21px",Vg("padding-top:",n,";"))),role:"row"},rn.createElement(gk,Object(T.a)({rtl:m,role:"gridcell"},x),a?r:null,rn.createElement(Ck,{id:S,"aria-hidden":w,innerRef:y,onTransitionEnd:M,className:Ug(a&&(t="12px",Vg("margin-top:",t,";")),A)},rn.createElement(Ek,{innerRef:b},i),w&&rn.createElement(_k,null)),E&&rn.createElement(wk,Object(T.a)({onClick:P,"aria-controls":S,"aria-expanded":!w},j),rn.createElement("span",null,h(w?"show_more":"show_less")),rn.createElement(Ok,{direction:w?"down":"up","aria-hidden":!0}))))})),kk=lb("div",{target:"e1fikopb0"})("padding-bottom:12px;",(function(e){return e.theme.typography.basic})),Sk=lb(_w,{target:"e1fikopb1"})("margin:0;padding:0;display:flex;width:40px;cursor:pointer;border:1px solid;align-items:center;justify-content:center;"),Tk=lb(Sk,{target:"e1fikopb2"})("border-radius:",(function(e){return e.theme.borderRadius.none}),";",(function(e){var t,n=e.rtl?"Left":"Right";return Vg(((t={})["borderTop"+n+"Radius"]=6,t["borderBottom"+n+"Radius"]=6,t))})," color:",(function(e){return e.theme.colors.text.white}),";border:1px solid ",(function(e){var t=e.theme;return e.disabled?t.colors.text.muted:t.colors.cta}),";background-color:",(function(e){var t=e.theme;return e.disabled?t.colors.text.muted:t.colors.cta}),";"),Ak=lb(Sk,{target:"e1fikopb3"})("color:",(function(e){return e.theme.colors.text.black}),";border:none;background-color:transparent;"),Rk=lb("span",{target:"e1fikopb4"})("width:100%;align-items:center;padding:8px;margin:1px;",(function(e){return e.theme.typography.input})," ",(function(e){var t=e.active,n=e.theme;return t&&Vg("color:",n.colors.cta,";")})),Pk=lb("form",{target:"e1fikopb5"})("display:flex;position:relative;flex-direction:row;"),Mk=lb("div",{target:"e1fikopb6"})("display:flex;justify-content:center;align-items:center;height:100%;position:absolute;padding:0 6px;color:",(function(e){return e.theme.colors.text.black}),";",(function(e){var t;return(t={})[e.rtl?"right":"left"]=0,t})),Nk=function(e){var t,n=e?"Left":"Right";return Vg(((t={margin:0,minWidth:0})["padding"+(e?"Right":"Left")]=34,t["border"+n]="none",t["borderTop"+n+"Radius"]=0,t["borderBottom"+n+"Radius"]=0,t))},zk=nn((function(e,t){var n=t.id,r=t.chatId,a=function(t){return Li(e,{email:t}),new Promise((function(t){return e.once("customer_updated",t)}))};return function(e){var t=e.getSessionUser().email,i=e.getApplicationState().rtl,o=e.getEvent(r,n).thread,c=e.getChat(r).properties;return{rtl:i,email:t,updateSessionUserEmail:a,firstTimeMessage:e.localize("email_prompt_first_time"),confirmationMessage:e.localize("email_prompt_confirmation"),active:o===c.lastThread}}}))((function(e){var t=e.rtl,n=e.email,r=e.active,a=e.firstTimeMessage,i=e.confirmationMessage,o=e.updateSessionUserEmail,c=rn.useRef(null),s=rn.useState(!n),u=s[0],l=s[1],d=rn.useState(n||""),p=d[0],f=d[1],m=rn.useCallback((function(e){var t=e.target;f(t.value)}),[]),h=rn.useCallback((function(e){e.preventDefault(),o(p).then((function(){return l(!1)}))}),[p,o]),v=rn.useCallback((function(){l(!0),f(n||"")}),[n]),g=rn.useCallback((function(){n&&l(!1)}),[n]);Object(mb.a)(c,g);var b=!n||r&&u,y=!p||p===n;return rn.createElement(Ik,null,rn.createElement(kk,null,n?i:a),rn.createElement(Pk,{innerRef:c,onSubmit:h},b?rn.createElement(rn.Fragment,null,rn.createElement(FE,{type:"email",placeholder:"Email","aria-label":"Enter your email address",value:p,className:Nk(t),onChange:m}),rn.createElement(Mk,{rtl:t},rn.createElement(kw,{"aria-hidden":!0})),rn.createElement(Tk,{rtl:t,type:"submit",role:"button",disabled:y,"aria-label":"Submit an email"},rn.createElement(dw,{"aria-hidden":!0}))):rn.createElement(rn.Fragment,null,rn.createElement(Rk,{ellipsis:!0,active:r},n),r&&rn.createElement(Ak,{role:"button",onClick:v,"aria-label":"Edit an email"},rn.createElement(jw,{"aria-hidden":!0})))))})),Lk=lb("div",{target:"efus62t0"})("margin-bottom:8px;a{color:inherit;}"),Dk=lb("div",{target:"efus62t1"})("width:100%;margin-bottom:2px;font-size:14px;color:",(function(e){return e.theme.colors.text.muted}),";"),Bk=lb("div",{target:"efus62t2"})("width:100%;font-size:14px;color:",(function(e){return e.theme.colors.text.black}),";"),qk=function(e){var t=e.fields;return rn.createElement("div",null,t.map((function(e,t){var n=e.label,r=e.answer;return rn.createElement(Lk,{key:t},rn.createElement(Dk,{textWrap:!0},rn.createElement(Pc,{preserveLists:!0,template:n,root:{component:Kw.a,props:{component:$C}}})),rn.createElement(Bk,{textWrap:!0},"string"===typeof r?r:r.join(", ")))})))},Fk=function(e){function t(){return e.apply(this,arguments)||this}Object(zg.a)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){var e=this.props,t=e.form,n=e.name,r=t.getFieldState(n);r&&r.value&&t.change(n,void 0)},n.render=function(){return this.props.children},t}(rn.Component);var Vk=function(e){var t=e.when,n=e.children;return t?rn.createElement(OE.c,{subscription:wI},(function(n){var r=n.form;return n.values[t]?rn.createElement(Fk,Object(T.a)({},e,{form:r})):null})):rn.createElement(rn.Fragment,null,n)},Uk=lb("p",{target:"ecj3oet0"})("margin:0;a{color:inherit;}",(function(e){return e.theme.typography.basic})),Gk=function(e){var t=e.children;return rn.createElement(Uk,null,"string"===typeof t?rn.createElement(Pc,{template:t,root:{component:Kw.a,props:{component:$C}}}):t)},Hk=n(43),Wk=n(248),Yk=n(37),Kk=n(241),Qk=function(e){var t=e.children,n=e.showRequiredMark,r=void 0!==n&&n,a=Object(A.a)(e,["children","showRequiredMark"]);return rn.createElement(AE,Object(T.a)({isRequired:r},a),"string"===typeof t?rn.createElement(Pc,{preserveLists:!0,template:t,root:{component:Kw.a,props:{component:$C}}}):t)},Zk=lb(uy,{target:"egdebj40"})((function(e){var t=e.theme,n=t.spaceBase,r=t.typography;return Object(T.a)({},r.basic,{margin:.5*n+"px 0"})})),Jk=lb(SE,{target:"egdebj41"})((function(e){return{paddingLeft:e.theme.spaceBase+"px"}})),Xk=Vg("flex-shrink:0;"),$k=function(e){var t=e.inputId,n=e.label,r=e.children;return rn.createElement(Zk,null,rn.createElement("div",{className:Xk},r),rn.createElement(Jk,{htmlFor:t},n))},eS=Vg("border:none;margin:0;padding:0;max-height:100%;"),tS=function(e){var t=e.checkboxGroupState,n=e.label,r=e.inputId,a=Object(A.a)(e,["checkboxGroupState","label","inputId"]),i=rn.useRef(null),o=Object(Kk.a)({}),c=Object(Wk.a)(Object(T.a)({},a,{id:r,children:[]}),o,i).inputProps;return rn.createElement($k,{inputId:r,label:n},rn.createElement($E,Object(T.a)({ref:i},Object(_E.c)(c,{onChange:function(e){t.setSelectedValue(e.target.value,e.target.checked)}}))))},nS=[],rS=function(e){var t=e.options,n=e.label,r=e.name,a=e.required,i=Object(OE.d)(r,{defaultValue:nS}),o=function(e){var t=e.value,n=e.onChange;return{setSelectedValue:function(e,r){var a=r?t.concat(e):t.filter((function(t){return t!==e}));n(a)}}}(i.input),c=EI(i).errorMessageProps,s=Object(Yk.c)({onBlurWithin:i.input.onBlur,onFocusWithin:i.input.onFocus}).focusWithinProps;return rn.createElement(MI,null,rn.createElement("fieldset",Object(T.a)({className:eS},s),rn.createElement(Qk,{showRequiredMark:a},n),t.map((function(e,t){return rn.createElement(tS,{key:t,inputId:r+"_"+t,label:e.label,value:e.value,checkboxGroupState:o})})),rn.createElement(IE,c)))},aS=function(e){var t=e.label,n=e.required,r=II(Object(T.a)({},e,{autoComplete:"name"===e.name?e.name:"off"})),a=r.inputProps,i=r.labelProps,o=r.errorMessageProps;return rn.createElement(MI,null,rn.createElement(NI,Object(T.a)({showRequiredMark:n},i),t),rn.createElement(VE,Object(T.a)({},a,{errorMessageProps:o})))},iS=function(e){var t=e.label,n=e.required,r=II(Object(T.a)({},e,{type:"email",autoComplete:"email"})),a=r.inputProps,i=r.labelProps,o=r.errorMessageProps;return rn.createElement(MI,null,t&&rn.createElement(NI,Object(T.a)({showRequiredMark:n},i),t),rn.createElement(VE,Object(T.a)({},a,{errorMessageProps:o})))},oS=n(174),cS=n(243),sS=Vg("border:none;margin:0;padding:0;max-height:100%;"),uS=function(e){var t=e.radioGroupState,n=e.label,r=e.inputId,a=Object(A.a)(e,["radioGroupState","label","inputId"]),i=Object(oS.a)(Object(T.a)({},a,{id:r,children:[]}),t,null).inputProps;return rn.createElement($k,{inputId:r,label:n},rn.createElement(cI,i))},lS=function(e){var t=e.options,n=e.label,r=e.name,a=e.required,i=Object(OE.d)(r),o=Object(cS.a)(i.input),c=EI(i),s=c.validationState,u=c.errorMessageProps,l=Object(oS.b)({name:r,label:n,isRequired:a,validationState:s,children:[]},o),d=l.radioGroupProps,p=l.labelProps;return rn.createElement(MI,null,rn.createElement("fieldset",Object(T.a)({className:sS},Object(_E.c)(d,{onBlur:i.input.onBlur,onFocus:i.input.onFocus})),rn.createElement(Qk,Object(T.a)({showRequiredMark:a},p),n),t.map((function(e,t){return rn.createElement(uS,{key:t,inputId:r+"_"+t,label:e.label,value:e.value,radioGroupState:o})})),rn.createElement(IE,u)))},dS=lb("option",{target:"e1t56ivc0"})("color:",(function(e){return e.primary?e.theme.colors.success:"inherit"}),";"),pS=function(e){var t=e.meta,n=e.name,r=e.label,a=e.value,i=e.localize,o=void 0!==t&&void 0!==t.online,c=Boolean(t&&t.online),s=" ("+i(c?"skill_status_online":"skill_status_offline")+")";return rn.createElement(dS,{name:n,primary:o&&c,value:a},""+r+(o?s:""))},fS=function(e){var t=e.options,n=e.label,r=e.name,a=e.localize,i=e.required,o=Object(OE.d)(r);return rn.createElement(MI,null,rn.createElement(NI,{showRequiredMark:i,htmlFor:r},n),rn.createElement(qE,Object(T.a)({},o,{id:r,name:r}),rn.createElement("option",{value:""},a("forms_choose")),t.map((function(e,t){return rn.createElement(pS,{key:t,meta:e.meta,label:e.label,localize:a,name:r,value:e.value})}))))},mS=function(e){var t=e.label,n=e.name,r=e.required,a=void 0!==r&&r;return rn.createElement(MI,null,rn.createElement(NI,{showRequiredMark:a,htmlFor:n},t),rn.createElement(OE.a,{id:n,component:NE,name:n}))},hS=lb("div",{target:"e12liu9t0"})("margin:0;a{color:inherit;}ul,ol{margin:8px 0;display:inline-block;white-space:normal;width:100%;padding-left:24px;}li{margin:4px 0;}",(function(e){return e.theme.typography.basic})),vS={information:function(e){var t=e.value;return rn.createElement(MI,null,rn.createElement(hS,{preserveLines:!0,textWrap:!0},rn.createElement(Pc,{template:t,root:{component:Kw.a,props:{component:$C}}})))},text:aS,textarea:zI,email:iS,rating:mS,radio:lS,checkbox:rS,select:fS};var gS=function(e){var t=e.type;return vS[t]},bS=function(e,t){switch(t){case"prechat":return e("prechat_submit_label");case"offline":return e("offline_form_submit_label");default:return e("submit")}},yS=nn((function(e,t){var n=t.chatId,r=t.eventId,a=t.type,i=function(t){if("prechat"===a){var i=t.name,o=t.email,c=Object(k.d)({name:i,email:o});Object(k.C)(c)||e.updateUser(e.getSessionUserId(),c)}return e.requestUpdateEvent(n,r,{properties:{answers:t}})};return function(e){return{localize:e.localize,mobile:e.getApplicationState("mobile"),sendForm:i,sessionUser:e.getSessionUser()}}}))((function(e){var t=e.id,n=e.type,r=e.fields,a=e.mobile,i=e.localize,o=e.sendForm,c=e.sessionUser,s=Hb(t+":"+n),u=Object(db.a)((function(){var e=s.get(),t=function(e,t){var n=Object(k.L)((function(e){return"string"===typeof e?Object(k.rb)(e):e}),Object(k.Y)(["email","name"],e)),r=n.name,a=n.email;return r===t("client")?{email:a}:{email:a,name:r}}(c,i);return function(e,t,n){return e.map((function(e){var r=n?n[e.name]:null,a=t?t[e.name]:null,i=r||a;return i?Object(T.a)({},e,{defaultValue:i}):e})).filter((function(e){return"defaultValue"in e})).reduce((function(e,t){var n=t.name,r=t.defaultValue;return e[n]=r,e}),{})}(r,t,e)})),l=rn.useRef({counter:0,lastValues:null,lastResult:null}),d=rn.useCallback((function(e){l.current.counter++,l.current.lastValues=Object(T.a)({},e);var t=r.reduce((function(t,n){var r,a,o,c=n.required,s=n.name;return c&&(a=e[s],Object(k.B)(a)?Object(k.C)(a):!Boolean(a))?Object(T.a)({},t,((r={})[s]=i("survey_fill_in_required_fields"),r)):"maxLength"in n&&"number"===typeof n.maxLength&&e[s]&&e[s].length>n.maxLength?Object(T.a)({},t,((o={})[s]="Cannot be longer than "+n.maxLength+" characters long.",o)):t}),{});return l.current.lastResult=Object(T.a)({},t),t}),[r,i]);return rn.createElement(PI,{id:t,mobile:a,initialValues:u,validate:d,onSubmit:function(e){var t=l.current,n=t.counter,r=t.lastValues,a=t.lastResult,i=d(e);return 0!==Object.keys(i).length&&jr("invalid_form_submit_4",null,Object(k.L)((function(e){return JSON.stringify(e)}),{validationErrors:i,validationCounter:n,lastValidationValues:r,lastValidationResult:a,values:e})),o(e).then((function(){s.destroy()}),(function(e){var t;return e||((t={})[Hk.a]="Please check your internet connection and then try again.",t)}))},submitLabel:bS(i,n)},r.map((function(e,t){var n=gS(e);return rn.createElement(uy,{key:t},rn.createElement(Vk,{name:e.name,when:e.dependOn},rn.createElement(n,Object(T.a)({},e,{localize:i}))))})),rn.createElement(OE.c,{onChange:function(e){var t=e.values;e.dirty&&s.set(t)},subscription:{values:!0,dirty:!0}}))})),xS=function(e){var t=e.theme;return rn.createElement(xk,{backgroundColor:t.colors.cta},rn.createElement(Rw,{color:t.colors.text.white}))},jS=function(e){var t=e.theme;return rn.createElement(xk,{backgroundColor:t.colors.cta},rn.createElement(zw,{color:t.colors.text.white}))},OS=function(e){var t=e.answered,n=e.theme;return rn.createElement(xk,{backgroundColor:t?n.colors.success:n.colors.cta},t?rn.createElement(Bw,{color:n.colors.text.black}):rn.createElement(kw,{color:n.colors.text.white}))},wS=function(e){var t=e.localize;return rn.createElement(Gk,null,t("offline_message_sent"))},_S=Object(Zg.b)((function(e){var t=e.theme,n=e.chatId,r=e.id,a=e.setScrollTargetNode,i=e.form,o=Object(A.a)(e,["theme","chatId","id","setScrollTargetNode","form"]),c=i.properties,s=c.formId,u=c.formType,l=c.fields,d=c.answered,p=l.filter((function(e){return e.answer&&e.label})),f=ir(i),m=rn.useRef(null);if(yb((function(){!d&&m.current&&a&&a(m.current)})),f)return null;var h=function(e){switch(e){case"prechat":return xS;case"postchat":return jS;case"offline":return OS}}(u),v=function(e){switch(e){case"prechat":case"postchat":return qk;case"offline":return wS}}(u);return rn.createElement("div",Object(T.a)({ref:m},o),rn.createElement(ln,null,(function(e){return rn.createElement(Ik,{defaultCollapsed:!0,collapsible:d,icon:rn.createElement(h,{theme:t,answered:d})},d?rn.createElement(v,{fields:p,localize:e}):rn.createElement(yS,{key:u,chatId:n,eventId:r,id:s,type:u,fields:l}))})))})),CS={enter:600,exit:400},ES=function(e,t){return Vg("&-enter,&-appear{transform:translateY(100%);}&-enter-active,&-appear-active,&-enter-done,&-appear-done{transform:translateY(0);transition:transform ",600*e,"ms ",t.transitions.easings.swift,";}&-exit{transform:translateY(0);}&-exit-active{transform:translateY(100%);transition:transform ",400*e,"ms ",t.transitions.easings.swift,";}")},IS=Object(Zg.b)((function(e){var t=e.show,n=e.durationFactor,r=e.onTransitionStart,a=e.onTransitionEnd,i=e.children,o=e.nodeRef,c=e.theme;return rn.createElement(nx.a,{appear:!0,component:null},t&&rn.createElement(Ry.a,{timeout:CS,onExited:a,onEntered:a,onExiting:r,onEntering:r,classNames:ES(n,c),nodeRef:o},i))})),kS=function(e){var t=e.heightPercentage,n=e.theme;return Vg("position:absolute;z-index:1500;display:flex;flex-direction:column;height:",100*t,"%;min-height:270px;max-height:100%;width:100%;bottom:0;border-radius:inherit;color:",n.colors.text.black,";background-color:",n.colors.surface.light,";")},SS=Object(Zg.b)((function(e){var t=e.heightPercentage,n=e.theme,r=e.children,a=e.innerRef,i=Object(A.a)(e,["heightPercentage","theme","children","innerRef"]),o=rn.useRef(null),c=Object(pb.a)(o,a);return Cb("touchmove",o),wb(o),rn.createElement(oE.a,{autoFocus:!1,returnFocus:!0,crossFrame:!1,className:kS({heightPercentage:t,theme:n}),ref:c,lockProps:Object(T.a)({role:"dialog","aria-modal":!0},i)},r)})),TS={allowtransparency:"true",scrolling:"yes",style:{position:"absolute",minWidth:"100%",minHeight:"100%",height:"1px",width:"1px",margin:"0",padding:"0",background:"none",border:"0"}},AS=function(e){if(e){var t=e.scrollTop,n=e.scrollHeight-e.offsetHeight;0===t?e.scrollTop=1:t===n&&(e.scrollTop=n-1)}},RS=function(e){return{moment_url:Object(P.d)(e)+Object(P.e)(e),moment_origin:Object(P.d)(e)||""}},PS=function(e){var t=e.hidden;return Vg("flex-grow:1;position:relative;overflow:auto;-webkit-overflow-scrolling:touch;display:",t?"none":"block",";")},MS=function(e,t,n){var r=document.createElement("iframe");return n&&(r.allow="microphone *; camera *;"),r.src=t,e.appendChild(r),r},NS=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).sdk=void 0,t.containerRef=rn.createRef(),t.handleIFrameLoad=function(){t.sdk&&(t.props.onLoadingChanged(!1),t.sdk.frame.removeEventListener("load",t.handleIFrameLoad))},t.handleScroll=function(e){AS(e.currentTarget)},t}Object(zg.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.url,n=e.close,r=e.sendMessage,a=e.sendSystemMessage,i=e.setAttributes,o=e.onLoadingChanged,c=e.onMomentDataChanged,s=e.allowVideoConferencing;if(t&&this.containerRef.current){var u={close:n,sendMessage:r,setAttributes:i,setExternalLink:function(e){c({externalLink:e})}};a&&(u.sendSystemMessage=a),this.sdk=Object(Za.b)({frame:MS(this.containerRef.current,t,s),url:t,onConnected:function(e){var t=e.data;o(!1),c(t)}},u),Object(Yi.a)(TS,this.sdk.frame),o(!0),this.sdk.frame.addEventListener("load",this.handleIFrameLoad),c({title:this.sdk.title}),Or("moment_opened",RS(Object(Za.a)(t)))}},n.componentWillUnmount=function(){var e=this.props,t=e.onMomentDataChanged,n=e.onLoadingChanged;this.sdk&&(this.sdk.destroy(),t(null),n(!1));var r=this.props.url;r&&Or("moment_closed",RS(Object(Za.a)(r)))},n.render=function(){return rn.createElement("div",{ref:this.containerRef,className:PS(this.props),onScroll:this.handleScroll})},t}(rn.Component),zS=lb("div",{target:"ekjkgns0"})("flex-grow:1;flex-basis:100%;font-weight:700;font-size:14px;margin:0 8px;"),LS=lb(uy,{target:"e11d7cwf0"})("border-bottom:1px solid ",(function(e){return e.theme.colors.divider}),";padding:0 0.8em;height:48px;display:flex;align-items:center;"),DS=Vg("width:100%;height:100%;"),BS=lb("div",{target:"e96px410"})("flex-shrink:0;width:24px;height:24px;border-radius:",(function(e){return e.theme.borderRadius.md}),";overflow:hidden;"),qS=function(){return rn.createElement(Ew,null,rn.createElement(Mw,null))},FS=function(e){var t=e.src;return t?rn.createElement(BS,null,rn.createElement(By,{src:t,className:DS},(function(e){switch(e.imageStatus){case"pending":return rn.createElement(Ew,null);case"failed":return rn.createElement(qS,null);case"loaded":return null}}))):rn.createElement(BS,null,rn.createElement(qS,null))},VS=lb(LS,{target:"e1xkjcv70"})("border-bottom:0;"),US=lb("div",{displayName:"BoosterContainer",target:"e1xkjcv71"})("width:100%;display:flex;color:",(function(e){return e.theme.colors.text.black}),";max-width:",(function(e){return e.single?"270px":"240px"}),";"),GS=lb("div",{target:"e1xkjcv72"})("padding:0 0.8em 0.8em 0.8em;"),HS=lb(o_,{target:"e1xkjcv73"})("flex-grow:1;max-width:100%;flex-basis:100%;"),WS=lb("div",{target:"e1xkjcv74"})(ZC(),";margin-bottom:1.2em;",(function(e){return e.theme.typography.basic})),YS=lb(gI,{displayName:"BoosterButton",target:"e1xkjcv75"})("background-color:",(function(e){return e.theme.colors.divider}),";color:",(function(e){return e.theme.colors.text.black}),";"),KS=function(e){var t=e.id,n=e.icon,r=e.title,a=e.description,i=e.onButtonClick,o=e.action,c=e.single,s=void 0!==c&&c;return rn.createElement(US,{single:s},rn.createElement(HS,{role:"gridcell"},rn.createElement(VS,null,rn.createElement(FS,{src:n}),rn.createElement(zS,{ellipsis:!0,flexFill:!0},r)),rn.createElement(GS,null,rn.createElement(WS,null,rn.createElement(Pc,{preserveLists:!0,template:a,root:{component:Kw.a,props:{component:$C}}})),rn.createElement(YS,{ellipsis:!0,onClick:function(){return i(t)}},o.label))))},QS=lb("div",{target:"e1ndqyd80"})("padding-top:0.8em;width:100%;display:flex;justify-content:center;flex-grow:1;"),ZS=nn((function(e){var t=function(t){return e.emit("on_chat_booster_launched",t)};return function(){return{emitBoosterLaunched:t}}}))((function(e){var t=e.boosters,n=e.setScrollTargetNode,r=e.showMoment,a=e.emitBoosterLaunched,i=rn.useRef(null);yb((function(){i.current&&n&&n(i.current)}));var o=function(e){var n=t.find((function(t){return t.id===e}));if(n){var i=n.icon,o=n.title,c=n.action,s=c.url,u=c.webviewHeight,l=void 0===u?"full":u;a({id:e,title:o}),r({icon:i,title:o,height:l,url:s+"?moment-title="+encodeURIComponent(o)})}};return rn.createElement(QS,{innerRef:i,role:"row"},1===t.length?rn.createElement(KS,Object(T.a)({},t[0],{single:!0,onButtonClick:o})):rn.createElement(Uj,null,t.map((function(e){return rn.createElement(KS,Object(T.a)({},e,{key:e.id,onButtonClick:o}))}))))})),JS=lb("div",{target:"e1yucjc70"})("width:100%;display:flex;margin-bottom:16px;flex-direction:row;align-items:center;justify-content:center;"),XS=lb("div",{target:"e1yucjc71"})("padding:4px 12px;",(function(e){var t=e.theme;return Vg(t.typography.basic,";background-color:",Object(N.f)(.7,t.colors.caution),";border-radius:",t.borderRadius.sm,";")})),$S=function(){return rn.createElement(ln,null,(function(e){return rn.createElement(JS,null,rn.createElement(XS,null,e("fill_form_to_send")))}))},eT=["message","webview"],tT=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={shouldHandleSeen:!t.props.event.own&&!t.props.event.seen},t.handleSeen=function(){t.setState({shouldHandleSeen:!1}),t.props.listItemHandlers.markAsSeen(t.props.id)},t.getCardDisabledButtons=function(){var e=t.props,n=e.isChatActive,r=e.isPartOfLastThread,a=e.event;return n&&r||a.properties.invitation?[]:eT},t.handleMessageRef=function(e){var n=t.props,r=n.scrollTarget,a=n.setScrollTargetNode;e&&"draft"===r&&a(e)},t}return Object(zg.a)(t,e),t.getDerivedStateFromProps=function(e,t){return t.shouldHandleSeen&&e.event.seen?{shouldHandleSeen:!1}:null},t.prototype.render=function(){var e,t=this.props,n=t.mobile,r=t.author,a=t.event,i=t.chatId,o=t.localize,c=t.radiusType,s=t.showMoment,u=t.scrollTarget,l=t.deliveryStatus,d=t.listItemHandlers,p=t.showMetaOnClick,f=t.setScrollTargetNode,m=t.handleGreetingDisplayed,h=t.showFillFormAnnouncement,v=t.rtl,g="system"===r.type,b=this.state.shouldHandleSeen;if("system_message"===a.type){var y=a.properties,x=y.systemMessageType,j=y.textVariables,O=y.defaultText;return rn.createElement(vk,null,x?o(x,j):O)}return"email_prompt"===a.type?rn.createElement(zk,{id:a.id,chatId:i}):"form"===a.type?rn.createElement(rn.Fragment,null,h&&rn.createElement($S,null),rn.createElement(nx.a,{appear:h,component:null},rn.createElement(Jj,{delay:100},rn.createElement(_S,{id:a.id,chatId:i,form:a,setScrollTargetNode:"form"===u&&f})))):"boosters"===a.type?rn.createElement(ZS,{boosters:a.properties.boosters,showMoment:s,setScrollTargetNode:"boosters"===u&&f}):rn.createElement(Kx,{authorName:a.own&&!r.name?o("client"):r.name,date:g?"":(e=a.timestamp,new Date(e).toTimeString().substr(0,5)),deliveryStatus:l,failed:a.failed,isOwn:a.own,onSeen:this.handleSeen,seen:!b,sending:!a.delivered&&!a.failed,showMetaOnClick:!g&&p,system:g,innerRef:this.handleMessageRef},rn.createElement(aC,Object(T.a)({event:a,mobile:n,radiusType:c,disabledButtons:this.getCardDisabledButtons(),onActionButtonClick:d.handleActionButtonClick,rtl:v},a.properties.invitation&&{onShow:function(){return m(a)}})))},t}(rn.Component),nT=nn((function(e,t){var n=t.chatId,r=t.id,a=t.showMoment,i=function(t){rr(e,t)||hi(e)};return function(e,t){var n;return function(r){var a=e(r);if(void 0===a)return n;var i=t(r,a);return n=i,i}}((function(e){return e.getEvent(n,r)}),(function(e,t){var o=e.getChat(n),c=o.properties.lastThread===t.thread,s="form"===t.type&&!t.properties.answered&&sr(e,n);return{event:t,chatId:n,showMoment:a,handleGreetingDisplayed:i,showFillFormAnnouncement:s,localize:e.localize,isChatActive:o.active,author:e.getUser(t.author),mobile:e.getApplicationState("mobile"),isPartOfLastThread:c,deliveryStatus:On(e,n,r),rtl:e.getApplicationState("rtl")}}))}))(tT),rT=lb("label",{target:"e1e9gyrb0"})("cursor:pointer;display:flex;align-items:center;color:",(function(e){return e.theme.colors.text.black}),";"),aT=lb("span",{target:"e1e9gyrb1"})("&:focus{outline-style:",(function(e){return e.focusVisible?"auto":"none"}),";}"),iT=lb("input",{target:"e1e9gyrb2"})("display:none;"),oT=Object(Zg.b)((function(e){var t=e.handleFileChange,n=e.theme,r=rn.useRef(null),a=Rb((function(){return r.current.click()})),i=Object(bb.b)();return rn.createElement(rT,{flexFit:!0,htmlFor:"fileupload"},rn.createElement(aT,Object(T.a)({role:"button","aria-label":"Send a file",tabIndex:"0"},a,i),rn.createElement(pw,{color:n.colors.text.muted,"aria-hidden":!0})),rn.createElement(iT,{multiple:!0,onChange:t,type:"file",value:"",id:"fileupload",innerRef:r}))})),cT=function(e,t){return Vg("font-family:inherit;padding:1.25em 5.5em 1.25em 1em;overflow-y:auto;margin-top:0;transition:box-shadow 0.1s ease-in-out;background-color:",e?Object(N.f)(.95,t.colors.caution):Object(N.e)(.012,t.colors.surface.light),";:focus{background-color:",t.colors.surface.light,";}")},sT=Vg("padding:0;svg *{transition:fill 100ms ease-in-out;}"),uT=lb("div",{target:"ex4ls1q0"})("position:absolute;top:0;height:100%;right:1em;display:flex;align-items:center;color:",(function(e){return e.theme.colors.text.black}),";"),lT=lb(uy,{target:"ex4ls1q1"})("position:relative;");var dT=nn((function(e,t){var n=t.chatId,r=function(t){return e.sendEvent(n,{type:"file",properties:{name:t.name}},{file:t})},a=function(t){xi(e,n,t)},i=function(t){e.requestUpdateChat(n,{properties:{messageDraft:t}})};return function(e){return{sendFile:r,sendMessage:a,setMessageDraft:i,reconnecting:Pn(e),allowInput:$n(e),allowFileUpload:Xn(e),mobile:e.getApplicationState("mobile"),applicationFocused:e.getApplicationState("applicationFocused")}}}))(Object(Zg.b)((function(e){var t=e.allowFileUpload,n=e.mobile,r=e.onHeightChange,a=e.onSendMessage,i=e.allowInput,o=e.reconnecting,c=e.sendFile,s=e.sendMessage,u=e.setMessageDraft,l=(e.applicationFocused,e.onFocusChange),d=e.theme,p=Object(A.a)(e,["allowFileUpload","mobile","onHeightChange","onSendMessage","allowInput","reconnecting","sendFile","sendMessage","setMessageDraft","applicationFocused","onFocusChange","theme"]),f=rn.useMemo((function(){return Object(k.qb)(1500,u)}),[u]),m=Hb("text-composer"),h=m.get(),v=rn.useCallback((function(){l&&l(!0)}),[l]),g=rn.useCallback((function(){l&&l(!1)}),[l]),b=rn.useCallback((function(e){s(e),a&&a()}),[s,a]),y=rn.useCallback((function(e){[].forEach.call(e.target.files,c)}),[c]);return rn.createElement(ln,null,(function(e){return rn.createElement(fj,Object(T.a)({},p,{active:i,disabled:o,mobile:n,defaultValue:h,onSend:b,onValueChange:function(e){m.set(e),f(e)}}),rn.createElement(lT,{verticalAlign:"center"},rn.createElement(xj,{autoFocus:TI(n),className:cT(o,d),disabled:o,flexFill:!0,minRows:1,onBlur:g,onFocus:v,onHeightChange:r,placeholder:e("embedded_textarea_placeholder"),"aria-label":e("embedded_textarea_placeholder")}),rn.createElement(uT,null,t&&i&&rn.createElement(oT,{handleFileChange:y}),rn.createElement(vj,{flexFit:!0,className:sT,icon:rn.createElement(Nw,null),"aria-label":"Send a message"}))))}))}))),pT={full:.8,tall:.5,compact:.3},fT=Vg("display:flex;"),mT=nn((function(e,t){var n,r=t.chatId,a=function(){return zi(e)},i=function(t){return Li(e,{properties:t})},o=function(t){return xi(e,r,t)},c=!!e.getApplicationState("config").hasAnyCustomLicenseProperty;return"lc3"===e.getApplicationState().protocol&&(n=function(t){return function(e,t,n){var r=n.text,a=n.recipients,i=void 0===a?"all":a;e.sendEvent(t,{type:"custom_system_message",properties:{text:r.trim(),recipients:i}})}(e,r,t)}),function(e){var t=e.getView("Moment"),r=t.show,s=t.data;return{show:r,closeMoment:a,sendMessage:o,sendSystemMessage:n,updateSessionUser:i,momentData:s,allowVideoConferencing:c}}}))((function(e){var t=e.allowVideoConferencing,n=e.show,r=e.closeMoment,a=e.updateSessionUser,i=e.sendMessage,o=e.sendSystemMessage,c=e.onSendMessage,s=rn.useRef(null),u=rn.useRef(null),l=rn.useState(!1),d=l[0],p=l[1],f=rn.useState(!1),m=f[0],h=f[1],v=rn.useState(!1),g=v[0],b=v[1],y=rn.useState({}),x=y[0],j=y[1],O=Object(bb.b)(),w=m||g,_=d&&n,C=function(e){var t=e.height;return t&&t in pT?pT[t]:pT.tall}(x);return Object(k.C)(x)&&!Object(k.C)(e.momentData)&&j(Object(T.a)({},x,e.momentData)),Vb(rn.useCallback((function(){return p(!0)}),[]),300),rn.useEffect((function(){_&&Object(_E.b)(u.current)}),[_]),rn.createElement(sE,null,rn.createElement(fE,{shown:n}),rn.createElement(IS,{show:_,nodeRef:s,onTransitionEnd:function(){return h(!1)},onTransitionStart:function(){return h(!0)},durationFactor:C/.8},rn.createElement(SS,{innerRef:s,heightPercentage:C},rn.createElement(LS,{noShrink:!0},rn.createElement(FS,{src:x.icon,"aria-hidden":!0}),rn.createElement(zS,Object(T.a)({ellipsis:!0,flexFill:!0,tabIndex:-1,innerRef:u},O),x.title),x.externalLink&&rn.createElement($C,{href:x.externalLink,rel:"nofollow noopener noreferrer",className:fT,"aria-label":"Open in a new tab"},rn.createElement(Aw,{"aria-hidden":!0})),rn.createElement(_w,{onClick:r,className:fT,"aria-label":"Close modal"},rn.createElement(yw,null))),rn.createElement(NS,{hidden:w,close:r,url:x.url,sendMessage:function(e){var t=e.text;i(t),c&&c(t)},sendSystemMessage:o,setAttributes:a,onMomentDataChanged:function(e){return j((function(t){return e?Object(T.a)({},t,e):{}}))},onLoadingChanged:b,allowVideoConferencing:t}),w&&rn.createElement(fI,{size:"xlarge",style:{margin:"auto"}}))))})),hT=!!document.documentElement.currentStyle,vT=lb("div",{target:"e1oq7ugp0"})("background-color:",(function(e){return e.theme.colors.divider}),";width:100%;height:3px;margin-top:-3px;border-radius:",(function(e){return e.theme.borderRadius.xs}),";overflow:hidden;"),gT=lb("div",{target:"e1oq7ugp1"})("background-color:",(function(e){return e.theme.colors.cta}),";width:",(function(e){return(100*e.progress).toFixed(2)}),"%;height:100%;transition:width 150ms ease;"),bT=lb("span",{target:"e1oq7ugp2"})((function(e){var t=e.failed,n=e.finished,r=e.theme;return{color:t?r.typography.errorCaption.color:r.typography.basic.color,marginBottom:n?"0":"5px"}}),";transition:margin-bottom 500ms linear ",500,"ms;"),yT=lb("span",{target:"e1oq7ugp3"})((function(e){return e.theme.typography.errorCaption})),xT=lb("div",{target:"e1oq7ugp4"})("display:flex;overflow:hidden;flex-direction:column;justify-content:center;transition:all 2s linear;margin:4px 0;"),jT=Vg("justify-content:center;"),OT=Vg("min-width:24px;flex-shrink:0;"),wT=Object(Zg.b)((function(e){var t,n=e.name,r=e.progress,a=void 0===r?0:r,i=e.failed,o=e.finished,c=e.failReason,s=e.onCancel,u=e.theme,l=rn.useState(o),d=l[0],p=l[1],f=rn.useCallback((function(){p(!0)}),[]),m=hT?Bw:lw;return rn.createElement(uy,null,rn.createElement(Yy,{className:Ug(jT,(t=o,Vg("flex-shrink:0;width:",t?"30px":"0",";overflow:hidden;transition:width 200ms linear ",500,"ms;")))},d&&(i?rn.createElement(hw,{color:u.colors.error,size:24,"aria-hidden":!0}):rn.createElement(m,{color:u.colors.success,size:24,"aria-hidden":!0}))),rn.createElement(xT,{flexFill:!0},rn.createElement(bT,{ellipsis:!0,failed:i,finished:o},n),rn.createElement(nx.a,{component:null},!o&&rn.createElement(tO,{transitionDuration:500,onTransitionEnd:f},rn.createElement(vT,null,rn.createElement(gT,{progress:a})))),c&&rn.createElement(yT,{ellipsis:!0},c)),rn.createElement(Yy,{className:Ug(jT,OT)},i&&rn.createElement(Vw,{onClick:s,"aria-label":"Cancel upload"})))})),_T=lb("span",{target:"e1k6tlos0"})("padding:0 6px;align-self:center;",(function(e){var t=e.failed,n=e.theme;return t&&{color:n.typography.errorCaption.color}})),CT=lb("div",{target:"e1k6tlos1"})("display:flex;cursor:pointer;"),ET=lb("div",{target:"e1k6tlos2"})("overflow:auto;max-height:",105,"px;padding-right:12px;"),IT=lb("hr",{target:"e1k6tlos3"})("border:0;border-bottom:1px solid rgba(0,0,0,0.1);margin:",8,"px -",8,"px 0;"),kT=lb(bw,{target:"e1k6tlos4"})((function(e){return"up"===e.direction&&{transform:"scaleY(-1)"}})),ST=function(e){return Vg("padding:",8,"px;overflow:hidden;",e.typography.basic)},TT=Vg("width:0;opacity:0;transition:width 200ms linear,opacity 200ms ease-out;"),AT=Vg("padding-left:4px;"),RT=Object(Zg.b)((function(e){var t=e.uploadEventList,n=e.cancelUpload,r=e.localize,a=e.theme,i=rn.useState(!1),o=i[0],c=i[1],s=rn.useCallback((function(){return c((function(e){return!e}))}),[]),u=rn.useState(0),l=u[0],d=u[1],p=rn.useRef(null);rn.useEffect((function(){null!==p.current&&d(Math.min(p.current.scrollHeight,105))}));var f=t.filter((function(e){return e.finished})).length,m=t.filter((function(e){return e.failed})),h=m.length,v=t.length,g=f===v,b="";h>1?b=r("files_failed_to_upload").replace("%files%",h.toString()):1===h&&(b=m[0].failReason);var y=f-h+"/"+v+" "+r("uploading"),x=g&&h>0?b:y;return rn.createElement(Uw,{className:ST(a)},rn.createElement(CT,{onClick:s},rn.createElement(Gj.b,{message:x,clearOnUnmount:!0,"aria-live":h>0?"assertive":"polite"}),rn.createElement(fI,{size:"medium",className:Ug(g&&TT),"aria-hidden":!0}),rn.createElement(_T,{flexFill:!0,ellipsis:!0,failed:g&&h>0},x),g&&h>0&&rn.createElement(Vw,{buttonSize:24,onClick:function(e){e.stopPropagation(),t.forEach((function(e){return e.failed&&n(e.id)}))},"aria-label":"Close upload list"}),rn.createElement(_w,{className:AT,"aria-label":"Toggle upload list"},rn.createElement(Cw,{size:24,"aria-hidden":!0},rn.createElement(kT,{direction:o?"down":"up",size:24})))),o&&rn.createElement(IT,null),rn.createElement(nx.a,{component:null},o&&rn.createElement(rO,{contentHeight:l},rn.createElement(ET,{innerRef:p},t.map((function(e){return rn.createElement(wT,Object(T.a)({key:e.id},e,{failed:!!e.failed,onCancel:function(){n(e.id)}}))}))))))})),PT=function(e){var t=e.properties;return{id:e.id,name:t.name,progress:t.progress,failed:t.failed,failReason:t.failReason,finished:t.failed||t.progress>=1}},MT=nn((function(e,t){var n=t.chatId,r=[],a=[],i=function(t){var i=Object(k.m)((function(e){return e.id===t}),r);-1!==i&&(a.push(r[i]),r=Object(k.eb)(i,r)),e.updateEvent(n,t,{properties:{canceled:!0}})};return function(t){var o=e.getView("uploadList").ids;return r=o.map((function(e){return t.getEvent(n,e)})).filter(Boolean).map(PT).reduce((function(e,t){if(-1!==Object(k.m)((function(e){return e.id===t.id}),a))return e;var n=Object(k.m)((function(e){return e.id===t.id}),e);return-1!==n?e[n]=t:e.push(t),e}),[].concat(r)),{localize:t.localize,uploadEventList:r,cancelUpload:i}}}))(RT),NT=lb("div",{target:"ezpiwsd0"})("position:absolute;bottom:0;left:0;right:0;z-index:100;"),zT=nn((function(e,t){var n=t.markAsSeen,r=function(){jn("liveChatChatId",Date.now(),e).reverse().forEach((function(e){return n(e.id)}))};return function(e){var t=e.getView("uploadList").ids,n=e.getApplicationState("mobile"),a=function(e,t){return Object(k.o)((function(e){return!e.own&&Object(k.A)(e.type,["message","rich_message","url_preview","emoji"])}),e.getEvents(t))}(e,"liveChatChatId"),i=e.getUnseenCount("liveChatChatId"),o=a&&a.properties?a.properties.text:null;return{isUploadingFiles:t.length>0,previewText:o,unseenCount:i,mobile:n,markAllEventsAsSeen:r,localize:e.localize}}}))((function(e){var t=e.isUploadingFiles,n=e.previewText,r=e.unseenCount,a=e.chatId,i=e.mobile,o=e.scrollToBottom,c=e.markAllEventsAsSeen,s=e.isOnBottomSource,u=e.isScrollable,l=e.localize,d=n,p=qb(s),f=r>0&&!p&&u,m=rn.useState(f),h=m[0],v=m[1];return d||(d=l(r>1?"new_messages":"new_message")),!f&&h&&v(!1),rn.useEffect((function(){if(f){var e=setTimeout((function(){return v(!0)}),300);return function(){return clearTimeout(e)}}}),[f]),rn.createElement(NT,null,rn.createElement(nx.a,{appear:!0,component:null},t&&rn.createElement(Jj,{key:"upload"},rn.createElement(MT,{chatId:a})),h&&rn.createElement(Jj,{key:"unseen"},rn.createElement(T_,{text:d,stickToEdge:i,unseenCount:r,onClick:o,onClose:c}))),h&&rn.createElement(Gj.b,{message:d,clearOnUnmount:!0,"aria-live":"assertive"}))})),LT=Object(Zg.b)((function(e){var t=e.theme,n=Object(A.a)(e,["theme"]),r=t.Maximized.css.background;return rn.createElement(fI,Object(T.a)({},n,{adjustToColor:r,ariaLabel:"Loading previous messages"}))})),DT=lb("div",{target:"e1fh44if0"})("padding:1em;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:0.9em;"),BT=function(e){return rn.createElement(DT,null,rn.createElement(gI,e))},qT=nn((function(e){var t=function(){e.emit("start_thread")},n=function(){e.updateChat("liveChatChatId",{properties:{startChatAgainPending:!0}})};return function(e){var r="startChatAgain"===zn(e,"liveChatChatId"),a=e.getChat("liveChatChatId").properties,i=a.starting,o=a.startChatAgainPending,c=e.localize(r?"embedded_start_chat_again":"embedded_greeting_accept");return{startAction:r?n:t,buttonLabel:c,isPending:i||o}}}))((function(e){var t=e.isPending,n=e.buttonLabel,r=e.startAction,a=e.onClick,i=void 0===a?k.R:a;return rn.createElement(BT,{disabled:t,pending:t,onClick:function(e){r(),i(e)}},n)})),FT=lb("div",{target:"e1onopp20"})("position:absolute;top:0;left:0;right:0;background:",(function(e){return e.theme.colors.caution}),";z-index:2;color:",(function(e){return e.theme.colors.text.black}),";text-align:center;font-size:0.9em;line-height:2.8em;"),VT=lb("div",{target:"e1onopp21"})("flex-grow:1;height:100%;position:relative;min-height:0;-webkit-overflow-scrolling:touch;"),UT=Vg("background:transparent;overscroll-behavior:contain;position:absolute;top:0;bottom:0;left:0;right:0;"),GT=Vg("position:absolute;bottom:0;left:50%;z-index:3;transform:translate(-50%,50%);"),HT=function(e){return e.events[0].id},WT=function(e){return 0!==e.length?HT(e[0]):null},YT=function(e){var t=Object(k.I)(e);if(!t)return null;var n=Object(k.I)(t.events);return n?n.id:null},KT=function(e){var t=rn.useRef(e);return rn.useEffect((function(){t.current=e})),rn.useMemo((function(){return{handleActionButtonClick:function(e){var n=e.button,r=e.event,a=t.current,i=a.active,o=a.showMoment,c=a.sendPostback,s=a.sendMessage,u=a.isGreeting,l=a.handleRichGreetingButtonClicked;if(u(r))l({event:r,button:n});else if(i)switch(n.type){case"webview":return c({eventId:r,buttonId:n.postbackId}),void o({url:n.value,height:n.webviewHeight});case"message":return void s(n.text,{type:"action_button",event:r,button:n});default:return void c({eventId:r,buttonId:n.postbackId})}},markAsSeen:function(e){return t.current.markAsSeen(e)}}}),[])},QT=function(e,t,n,r){return e.some((function(e){return"message_draft"===e.type}))?"draft":t?"newMessageDivider":r||n||!e.some((function(e){return e.events.some((function(e){return"boosters"===e.type}))}))?"form":"boosters"};var ZT=Object(ie.a)([function(e,t){return e.getTimeline(t)},k.z],(function(e,t){var n=bn(t);return e.map((function(e,r){var a=0===r,i=e.showDate&&!a&&n;return Object(T.a)({},e,{isThreadBoundary:i,authorData:t.getUser(e.author)})}))}))((function(e,t){return t})),JT=nn((function(e,t){var n=t.id,r=function(){wi(e)},a=e.localize,i=function(){return e.updateChat(n,{properties:{loadingHistory:!0}})},o=function(t){return e.requestUpdateEvent(n,t,{seen:!0}).catch(k.R)},c=function(t,r){xi(e,n,t,r)},s=function(t){var r=t.eventId,a=t.buttonId;e.sendEvent(n,{type:"rich_message_postback",properties:{eventId:r,postback:{id:a,toggled:!0}}})},u=function(t){return function(e,t){return!!e.hasEvent("liveChatChatId",t)&&e.getEvent("liveChatChatId",t).properties.invitation}(e,t)},l=function(t){return Mi(e,t)},d=function(t){return Li(e,{properties:t})},p=function(t){var n=t.event,r=t.button;return Ui(e,n,r)};return function(e){var t=e.getChat(n),f=t.active,m=t.properties,h=m.agentIsTyping,v=m.loadingHistory,g=m.queued,b=m.ended,y=hn(n,e),x=Cn(e,n),j=e.getUnseenCount(n),O=bn(e)&&function(e){return!!e.getView("Chat").liveChatChatId.hasDividers}(e);return{agent:y,active:f,ended:b,loadHistory:i,isThreadStickerEnabled:O,hasMoreHistory:x,markAsSeen:o,sendMessage:c,queued:g,sendPostback:s,showPrechat:r,localize:a,updateSessionUser:d,showMoment:l,unseenCount:j,timeline:ZT(e,n,e.getState()),activeQuickReply:Mn(n,e),agentIsTyping:h&&!!y,shouldLoadHistory:x&&!v,showAvatar:vn("agentAvatar",e).showWithMessage,pageFocused:e.getApplicationState("pageFocused"),inputMode:zn(e,n),reconnecting:Pn(e),displayOfflineInformation:Wn(e),lastSeenEvent:j>0&&e.getLastSeenAgentEvent(n),isGreeting:u,handleRichGreetingButtonClicked:p,isFillableFormDisplayed:Gn(e)}}}))((function(e){var t=e.displayOfflineInformation,n=e.active,r=e.ended,a=e.activeQuickReply,i=e.agent,o=e.isThreadStickerEnabled,c=e.hasMoreHistory,s=e.pageFocused,u=e.id,l=e.inputMode,d=e.loadHistory,p=e.localize,f=e.queued,m=e.reconnecting,h=e.shouldLoadHistory,v=e.showAvatar,g=e.showPrechat,b=e.timeline,y=e.agentIsTyping,x=e.mobile,j=e.unseenCount,O=e.lastSeenEvent,w=e.scrollingDeltaSource,_=e.sendMessage,C=e.showMoment,E=e.handleRichGreetingButtonClicked,I=e.isOnBottomSource,S=e.isFillableFormDisplayed,T=rn.useRef(),A=Fb(!1),R=KT(e),P=rn.useRef(!1),M=rn.useRef(),N=rn.useState(j),z=N[0],L=N[1],D=rn.useState(O)[0],B=Object(db.a)((function(){return QT(b,z,n,r)})),q=rn.useCallback((function(e){e&&h&&d()}),[h,d]),F=rn.useCallback((function(){clearTimeout(M.current),M.current=setTimeout((function(){w.next({deltaX:0,deltaY:40})}),4e3)}),[w]),V=rn.useCallback((function(e){I.next(e),e&&S?F():clearTimeout(M.current)}),[I,S,F]);Pb((function(){clearTimeout(M.current)}));var U=Bb(T,{firstItemKey:WT(b),lastItemKey:YT(b),onIsScrolledToTopChanged:q,onIsScrolledToBottomChanged:V,onIsUserScrollingChanged:A.next,onScrollDeltaChanged:w.next}),G=U.scrollToTop,H=U.scrollToBottom,W=U.getIsOnBottom,Y=U.onWheel,K=U.onTouchStart,Q=U.getIsScrollable,Z=U.setScrollTargetNode,J=rn.useCallback((function(e){W()&&H(e)}),[W,H]);rn.useEffect((function(){S?F():clearTimeout(M.current)}),[S,F]);var X=rn.useCallback((function(){J({duration:0})}),[J]),$=function(e){return void 0===e&&(e=k.R),function(){H({duration:0}),e()}},ee=Mb((function(){W()?H():H({duration:0}),L(0)})),te=rn.useCallback((function(e){P.current=e}),[]),ne=!!(y||f||a||t);return rn.useEffect((function(){ne&&J()}),[ne,J]),rn.useEffect((function(){if(x){var e=function(){P.current&&H({duration:0})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}}),[x,H]),Zb({mainElementRef:T,itemsCount:b.reduce((function(e,t){return e+t.events.length}),0),tableEdgeReached:function(e){"previous"===e&&G({duration:0})}}),rn.createElement(TC,{beginingOfTime:b.length>0?b[0].timestamp:null,rootRef:T},rn.createElement(Yy,{noShrink:!0},rn.createElement(hk,{chatId:u,isUserScrollingSource:A,scrollingDeltaSource:w,isOnBottomSource:I}),o&&rn.createElement(zC,{className:GT,isUserScrollingSource:A})),rn.createElement(nx.a,{appear:!0,component:null},rn.createElement($j,null,rn.createElement(VT,null,m&&rn.createElement(rn.Fragment,null,rn.createElement(Gj.b,{message:p("reconnecting"),clearOnUnmount:!0,"aria-live":"assertive"}),rn.createElement(FT,null,p("reconnecting")+"\u2026")),rn.createElement(zT,{chatId:u,isScrollable:Q(),isOnBottomSource:I,scrollToBottom:H,markAsSeen:R.markAsSeen}),rn.createElement(ux,{active:s,className:UT,onWheel:Y,onTouchStart:K,innerRef:T},c&&rn.createElement(uy,null,rn.createElement(LT,{size:"medium",style:{margin:"auto"}})),b.map((function(e,t){return rn.createElement(rn.Fragment,{key:HT(e)},e.isThreadBoundary&&rn.createElement(BC,{timestamp:e.timestamp}),D&&z>0&&e.events.some((function(e){return e.id===D.id}))&&rn.createElement(VC,{unseenCount:z,setScrollTargetNode:Z}),rn.createElement(Yx,{isOwn:e.own,onlyFirstWithMeta:!0,avatar:v&&"carousel"!==e.type&&e.authorData.avatar?e.authorData.avatar:void 0},e.events.map((function(t,n){return rn.createElement(nT,{chatId:u,id:t.id,key:t.id,showMetaOnClick:0!==n,radiusType:e.radiusType,listItemHandlers:R,scrollTarget:B,setScrollTargetNode:!z&&Z,showMoment:C})}))))})),a&&rn.createElement("div",{role:"row"},rn.createElement(Kj,{role:"gridcell",onSelect:function(e){var t=a.properties.quickReplies[e];a.properties.invitation?E({event:a.id,button:t}):_(t.text,{type:"quick_reply",event:a.id,button:t})},replies:a.properties.quickReplies})),y&&rn.createElement(rn.Fragment,null,rn.createElement(Gj.b,{clearOnUnmount:!0,"aria-live":"polite",message:p("operator_is_typing",{operator:"john"}).replace("...","")}),rn.createElement(nx.a,{appear:!0,component:null},rn.createElement(Jj,{exit:!1},rn.createElement(Q_,{avatar:v?i.avatar:null})))))))),"requestPrechat"===l?rn.createElement(BT,{onClick:$(g)},p("embedded_greeting_accept")):"startChat"===l||"startChatAgain"===l?rn.createElement(qT,{onClick:$()}):"text"===l?rn.createElement(dT,{chatId:u,onSendMessage:ee,onHeightChange:X,onFocusChange:te}):null,rn.createElement(mT,{chatId:u,onSendMessage:ee}))})),XT=lb("div",{displayName:"View",section:!0,target:"e1u2umur0"})("flex-grow:1;display:flex;height:100%;min-height:0;padding-bottom:1em;"),$T=lb("div",{displayType:"ViewContent",target:"e1u2umur1"})("overflow-y:auto;height:100%;flex-grow:1;padding:",(function(e){return e.full?"0 !important":"1em 1em 0 1em"}),";"),eA=function(e){return Vg("&-enter,&-appear{opacity:0;}&-enter&-enter-active,&-appear&-appear-active{opacity:1;transition:opacity ",200,"ms ",e.transitions.easings.sharp,";}&-exit{opacity:1;}&-exit&-exit-active{opacity:0;transition:opacity ",200,"ms ",e.transitions.easings.sharp,";}")},tA=Vg("width:100%;"),nA=Object(Zg.b)((function(e){var t=e.children,n=e.theme,r=e.full,a=void 0!==r&&r;return rn.createElement(XT,null,rn.createElement(nx.a,{className:tA},rn.createElement(Ry.a,{appear:!0,classNames:eA(n),timeout:200},rn.createElement($T,{full:a},t))))})),rA=function(){return rn.createElement(ln,null,(function(e){return rn.createElement(nA,null,rn.createElement(Wy,null,rn.createElement(kx,null,e("lost_connection"))))}))},aA=Vg("background:currentColor;opacity:0.3;animation:",Hg("50%{opacity:0.0;}")," 1.5s linear 0s infinite;"),iA=Vg(aA,";"),oA=lb("div",{target:"e1uut4cd0"})("width:",(function(e){return e.width||"10em"}),";height:1em;margin:0.3em;border-radius:",(function(e){return e.theme.borderRadius.sm}),";",aA,";"),cA=lb("div",{target:"e1uut4cd1"})("width:100%;"),sA=lb("div",{target:"e1uut4cd2"})("padding:1em;"),uA=lb("div",{target:"e1uut4cd3"})("width:100%;margin-top:0.5em;"),lA=lb("div",{displayName:"Message",section:!0,target:"e1uut4cd4"})(),dA=function(){return rn.createElement(nA,{full:!0},rn.createElement(cA,null,rn.createElement(my,null,rn.createElement(Uy,{className:iA,letter:" "})),rn.createElement(sA,null,rn.createElement(uA,null,rn.createElement(uy,null,rn.createElement(lA,null,rn.createElement(Wy,null,rn.createElement(kx,null,rn.createElement(oA,null),rn.createElement(oA,{width:"7em"})))))),rn.createElement(uA,null,rn.createElement(uy,{reverse:!0},rn.createElement(lA,null,rn.createElement(Wy,null,rn.createElement(kx,null,rn.createElement(oA,null)))))),rn.createElement(uA,null,rn.createElement(uy,null,rn.createElement(lA,null,rn.createElement(Wy,null,rn.createElement(kx,null,rn.createElement(oA,null)))))))))},pA=nn((function(e){return{destroyed:e.getApplicationState().destroyed,showLoader:Kn(0,e)}}))((function(e){var t=e.destroyed,n=e.showLoader,r=e.scrollingDeltaSource,a=e.isOnBottomSource;return t?rn.createElement(rA,null):n?rn.createElement(dA,null):rn.createElement(JT,{id:"liveChatChatId",scrollingDeltaSource:r,isOnBottomSource:a})})),fA=lb("div",{target:"e5cxvfk0"})("display:flex;justify-content:center;font-size:0.9em;"),mA=lb("p",{target:"errpamd0"})("text-align:center;"),hA=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={open:!1,submitting:!1},t.showModal=function(){t.setState({open:!0})},t.closeModal=function(){t.setState({open:!1})},t.handleCloseClick=function(){t.setState({submitting:!0}),t.props.closeChat().then((function(){t.setState({submitting:!1}),t.closeModal()})).catch((function(){t.setState({submitting:!1})}))},t}return Object(zg.a)(t,e),t.prototype.render=function(){var e=this.props.localize,t=this.state.submitting;return rn.createElement(rn.Fragment,null,rn.createElement(KI,{label:e("close_chat")},rn.createElement(_w,{onClick:this.showModal,"aria-label":e("close_chat")},rn.createElement(yw,{"aria-hidden":!0}))),rn.createElement(jE,{shown:this.state.open,onClose:this.closeModal,"aria-labelledby":"close_chat_confirm_label"},rn.createElement(YC,{"aria-hidden":!0},rn.createElement(Ow,null)),rn.createElement(mA,{id:"close_chat_confirm_label"},e("leave_chat_confirm")),rn.createElement(fA,null,rn.createElement(bI,{destructive:!0,label:e("close_chat"),submitting:t,onClick:this.handleCloseClick}))))},t}(rn.Component),vA=n(247),gA=rn.createContext({}),bA=lb("ul",{target:"e1ixnb8m0"})("list-style-type:none;position:absolute;z-index:100;background:",(function(e){return e.theme.colors.surface.light}),";box-shadow:",(function(e){return e.theme.boxShadow.md}),";border-radius:",(function(e){return e.theme.borderRadius.lg}),";margin:0;margin-top:2.2em;margin-left:0.8em;padding:0;min-width:180px;overflow:hidden;&:focus{outline:none;}& >:last-child{border-bottom:0;}"),yA=function(e){var t=e.highlightedIndex,n=e.items,r=t.current;return!(null===r||r<0)&&"true"!==n.current[r].ref.current.getAttribute("aria-disabled")};var xA=function(e){var t=e.children,n=e.onClose,r=e.menuButtonRef,a=e.onSelect,i=Object(A.a)(e,["children","onClose","menuButtonRef","onSelect"]),o=rn.useRef(null),c=Object(vA.a)({onSelect:a}),s=c.useHighlightedItemId(),u=Tb();return yb((function(){"click"===u()&&c.clearHighlightedItem(),o.current.focus()})),Object(mb.a)(o,(function(e){r.current.contains(e.target)||n()})),rn.createElement(sE,null,rn.createElement(gA.Provider,{value:c},rn.createElement(bA,Object(T.a)({onMouseOut:c.clearHighlightedItem,tabIndex:-1,role:"menu",innerRef:o,"aria-activedescendant":s,onKeyDown:function(e){switch(e.preventDefault(),e.key){case"ArrowUp":return void c.moveHighlightedItem(-1);case"ArrowDown":return void c.moveHighlightedItem(1);case"Home":return void c.setHighlightedItem(0);case"End":return void c.setHighlightedItem(c.items.current.length-1);case" ":if(!yA(c))return;return void c.selectHighlightedItem();case"Enter":if(!yA(c))return;return c.selectHighlightedItem(),n(),void r.current.focus();case"Tab":return n(),e.shiftKey?void r.current.focus():void Object(Yi.c)(r.current).focus();case"Escape":return n(),void r.current.focus();default:return void c.highlightItemByString(e)}}},i),t)))},jA=lb("p",{target:"emwx8nd0"})("text-align:center;"),OA=function(e){var t=e.email,n=e.localize,r=e.sent,a=e.open,i=e.onClose,o=e.onSubmit,c=e.mobile,s=Hb("email-transcript"),u=rn.useState((function(){return{email:t}})),l=u[0],d=u[1];return rn.useEffect((function(){if(a){var e=s.get();d(e||{email:t})}}),[s,t,a]),rn.createElement(jE,{shown:a,onClose:i,"aria-labelledby":r?"email-transcript-sent-label":"email-transcript-not-sent-label"},a&&(r?rn.createElement(rn.Fragment,null,rn.createElement(YC,{"aria-hidden":!0},rn.createElement(kw,null)),rn.createElement(jA,{id:"email-transcript-sent-label",textWrap:!0},n("chat_transcript_sent").replace(/%s/g,t||"")),rn.createElement(fA,null,rn.createElement(gI,{capitalize:!0,onClick:i},n("hide")))):rn.createElement(rn.Fragment,null,rn.createElement(YC,{"aria-hidden":!0},rn.createElement(kw,null)),rn.createElement(jA,{id:"email-transcript-not-sent-label"},n("send_transcript_to_email")),rn.createElement(PI,{id:"email_transcript",initialValues:l,mobile:c,onSubmit:function(e){return o(e.email).then((function(){return s.destroy()})).catch((function(){var e;return(e={})[Hk.a]=n("lost_connection"),e}))},submitLabel:n("send"),validate:function(e){return e.email?{}:{email:n("survey_fill_in_required_fields")}}},rn.createElement(uy,null,rn.createElement(OE.c,{onChange:function(e){var t=e.values;e.dirty&&s.set(t)}}),rn.createElement(iS,{ariaLabel:"Enter your email address",name:"email",required:!0,serverName:"",label:"",type:"email",localize:k.z}))))))},wA=lb("li",{target:"ezmrzej0"})("background:transparent;font-family:inherit;font-size:14px;border:0;display:flex;align-items:center;padding:1.3em;width:100%;cursor:pointer;",(function(e){var t=e.theme,n=e.highlighted;return Object(T.a)({borderBottom:"1px solid "+t.colors.divider},n&&{color:""+t.colors.text.white,backgroundColor:""+t.colors.cta})})," &[aria-disabled='true']{pointer-events:none;",(function(e){var t=e.theme,n=e.highlighted;return Object(T.a)({color:""+t.colors.grayscale[400]},n&&{color:""+t.colors.grayscale[600],backgroundColor:""+t.colors.grayscale[100]})}),"}"),_A=function(e){var t=e.disabled,n=e.text,r=e.value,a=Object(A.a)(e,["disabled","text","value"]),i=rn.useRef(null),o=rn.useContext(gA),c=o.clearHighlightedItem,s=(0,o.useItem)({ref:i,text:n,value:r}),u=s.id,l=s.highlight,d=s.select,p=(0,s.useHighlighted)();return rn.createElement(wA,Object(T.a)({role:"menuitem",id:u,innerRef:i,highlighted:p,onMouseOver:l,onMouseOut:c,onClick:function(e){1!==e.nativeEvent.which||t||d()}},t&&{"aria-disabled":!0},a))},CA=_A,EA=function(e){var t=e.checked,n=Object(A.a)(e,["checked"]);return rn.createElement(_A,Object(T.a)({role:"menuitemcheckbox","aria-checked":t},n))},IA=Vg("margin-right:8px;"),kA=Vg("&-enter{opacity:0;[role='menuitem'],[role='menuitemcheckbox']{transform:translate3d(0,20%,0);}}&-enter-active{opacity:1;transition:opacity 100ms ease-in-out;[role='menuitem'],[role='menuitemcheckbox']{transform:translate3d(0,0%,0);transition:transform 200ms;}}&-exit{opacity:1;[role='menuitem'],[role='menuitemcheckbox']{transform:translate3d(0,0%,0);}}&-exit-active{opacity:0;transition:opacity 200ms ease-in-out;[role='menuitem'],[role='menuitemcheckbox']{transform:translate3d(0,20%,0);transition:transform 200ms;}}"),SA=nn((function(e){var t=function(t){return e.requestUpdateChat("liveChatChatId",{properties:{transcriptSentTo:t}})},n=function(){e.setApplicationState({muted:!e.getApplicationState("muted")})};return function(e){var r=e.getChat("liveChatChatId"),a=r.active,i=r.properties,o=i.transcriptSentTo;return{localize:e.localize,muted:e.getApplicationState("muted"),sendTranscript:t,transcriptSentTo:o,enableTranscript:a||i.ended,showTranscript:vn("emailTranscript",e).enabled,toggleSounds:n,customerEmail:e.getSessionUser().email}}}))((function(e){var t=e.customerEmail,n=e.enableTranscript,r=e.localize,a=e.muted,i=e.sendTranscript,o=e.showTranscript,c=e.toggleSounds,s=e.transcriptSentTo,u=rn.useState(!1),l=u[0],d=u[1],p=rn.useState(!1),f=p[0],m=p[1];Tb();var h=rn.useRef(null),v=!!s,g=rn.useCallback((function(e){switch(e){case"mute":return void c();case"transcript":return d(!1),void m(!0)}}),[c]);return rn.createElement(rn.Fragment,null,rn.createElement(KI,{disabled:l,label:r("theme_options")},rn.createElement(tx,Object(T.a)({innerRef:h,onClick:function(){return d((function(e){return!e}))},className:Vg("padding:0;"),"aria-label":l?"Close menu":"Open menu","aria-haspopup":!0},l&&{"aria-expanded":l}),rn.createElement(xw,{"aria-hidden":!0}))),rn.createElement(nx.a,{component:null},l&&rn.createElement(Ry.a,{classNames:kA,timeout:200},rn.createElement(xA,{"aria-label":"Menu",menuButtonRef:h,onClose:function(){return d(!1)},onSelect:g},o&&rn.createElement(CA,{disabled:!n,text:r("send_transcript"),value:"transcript"},rn.createElement(kw,{className:IA,"aria-hidden":!0}),r("send_transcript")),rn.createElement(EA,{checked:a,text:r(a?"unmute":"mute"),value:"mute"},a?rn.createElement(qw,{className:IA,"aria-hidden":!0}):rn.createElement(Tw,{className:IA,"aria-hidden":!0}),r(a?"unmute":"mute"))))),rn.createElement(OA,{email:v?s:t,localize:r,onClose:function(){return m(!1)},onSubmit:i,sent:v,open:f}))})),TA=window.matchMedia("(max-height: 330px)"),AA=Vg("overflow:hidden;flex-grow:0;text-align:left;padding:0 0.8em;font-weight:700;display:flex;align-items:center;transition:0.3s background-color;"),RA=lb("div",{displayName:"IconPlaceholder",target:"e7bf83j0"})("width:25px;flex-shrink:0;"),PA=function(e){return Vg("height:30px;line-height:30px;font-size:inherit;font-weight:700;margin-top:0;margin-bottom:0;transition:opacity 100ms ",e.transitions.easings.smooth,";")},MA=lb(YC,{displayName:"HourGlassLabel",target:"e7bf83j1"})("margin-right:5px;"),NA=lb("h1",{target:"e7bf83j2"})((function(e){var t=e.theme;return PA(t)})),zA=lb("button",{target:"e7bf83j3"})((function(e){var t=e.theme;return PA(t)})," width:100%;height:32px;display:flex;flex-direction:row;justify-content:center;position:relative;color:inherit;background:none;border:none;cursor:pointer;appearance:none;"),LA=lb("span",{target:"e7bf83j4"})("min-width:0;"),DA=lb("div",{target:"e7bf83j5"})(),BA=function(e){return Object(k.cb)(e-1).map((function(e){return rn.createElement(RA,{key:"placeholder_"+e})}))},qA=nn((function(e){var t=function(t,n,r,a){return t&&a?t.name:n||r?e.localize("welcome_title"):""},n=function(){return e.requestUpdateChat("liveChatChatId",{active:!1})},r=e.getApplicationState("embedded");return function(e){var a=hn("liveChatChatId",e),i=Jn(e),o=Wn(e),c=Yn(e);return{embedded:r,closeChat:n,title:e.localize("welcome_title"),alternateTitle:t(a,i,o,c),agent:a,isQueued:i,isOffline:o,showCloseButton:e.getChat("liveChatChatId").active,localize:e.localize,showAgentBar:c,showAvatar:vn("agentAvatar",e).enabled}}}))((function(e){var t=e.showCloseButton,n=e.closeChat,r=e.localize,a=e.showMinimizedButton,i=e.title,o=e.alternateTitle,c=e.onMinimize,s=e.showAgentBar,u=e.scrollingDeltaSource,l=e.isQueued,d=e.isOffline,p=e.agent,f=e.showAvatar,m=e.isOnBottomSource,h=rn.useRef(),v=rn.useRef(),g=rn.useRef(),b=rn.useRef(TA.matches),y=rn.useState(!0),x=y[0],j=y[1],O=Object(bb.b)(),w=rn.useCallback((function(){h.current&&(h.current.style.opacity=1),v.current&&(v.current.style.opacity=0),g.current&&(g.current.style.transform="translateY(32px)"),j(!0)}),[]),_=rn.useCallback((function(){u.next({deltaX:0,deltaY:-50})}),[u]);yb(w),Ob(u,(function(e){var t=e.y;o&&!b.current&&(h.current&&(h.current.style.opacity=1-2*t),v.current&&(v.current.style.opacity=t),g.current&&(g.current.style.transform="translateY("+(32-60*t)+"px)"),1===t&&x?j(!1):0!==t||x||j(!0))})),rn.useEffect((function(){s&&o||w()}),[s,w,o]),rn.useEffect((function(){var e=function(e){var t=e.matches;return b.current=t};return TA.addListener(e),function(){return TA.removeListener(e)}}),[]),rn.useEffect((function(){if(m)return m.subscribe((function(e){e&&w()}))}),[m,w]);var C=function(e,t){var n=e.filter(Boolean),r=t.filter(Boolean);return n.length===r.length?{leftIcons:n,rightIcons:r}:n.length>r.length?{leftIcons:n,rightIcons:BA(n.length-r.length).concat(r)}:{leftIcons:n.concat(BA(r.length-n.length)),rightIcons:r}}([rn.createElement(SA,{key:"menu"})],[a&&rn.createElement(KI,{key:"minimize",label:r("embedded_minimize_window")},rn.createElement(_w,{onClick:c,"aria-label":r("embedded_minimize_window")},rn.createElement(Sw,{"aria-hidden":!0}))),t&&rn.createElement(hA,{closeChat:n,key:"close",localize:r})]),E=C.leftIcons,I=C.rightIcons;return rn.createElement(aj,{className:AA,leftIcons:E,noShrink:!0,rightIcons:I,title:rn.createElement(DA,{innerRef:g},rn.createElement(NA,{ellipsis:!0,innerRef:h,style:{marginBottom:30}},i),rn.createElement(zA,Object(T.a)({innerRef:v,disabled:x,onClick:_,"aria-expanded":x,"aria-controls":"top-bar","aria-label":o||i},O),d&&rn.createElement(nk,{size:"small",availability:"offline"}),l&&rn.createElement(MA,{size:"30px"},rn.createElement(ww,{size:22})),p&&s&&f&&rn.createElement(nk,{avatarUrl:p.avatar,size:"small",availability:"online"}),p&&!f&&rn.createElement(nk,{size:"small",availability:"online"}),rn.createElement(LA,{ellipsis:!0},o)))})})),FA=["M181.18 103.421H238.128V89.1388H198.435V17.1462H181.18V103.421Z","M246.429 103.421H263.195V39.3312H246.429V103.421ZM245.07 22.5837C245.178 25.0948 246.252 27.4671 248.067 29.2056C249.883 30.9442 252.299 31.9147 254.812 31.9147C257.326 31.9147 259.742 30.9442 261.557 29.2056C263.372 27.4671 264.446 25.0948 264.554 22.5837C264.611 21.269 264.401 19.9564 263.937 18.725C263.473 17.4936 262.765 16.3689 261.854 15.4185C260.944 14.4681 259.851 13.7119 258.641 13.1952C257.431 12.6785 256.128 12.4122 254.812 12.4122C253.496 12.4122 252.194 12.6785 250.984 13.1952C249.773 13.7119 248.68 14.4681 247.77 15.4185C246.86 16.3689 246.151 17.4936 245.687 18.725C245.223 19.9564 245.013 21.269 245.07 22.5837Z","M328.862 39.3312H312.097L298.303 86.2931L284.492 39.3312H267.727L289.477 103.421H306.967L328.862 39.3312Z","M358.805 104.907C372.979 104.907 384.452 96.4069 386.663 84.6981H372C370.387 89.1387 365.964 92.8363 358.805 92.8363C349.072 92.8363 345.247 86.2931 345.247 78.7712V77.1763H387.152V65.9569C387.152 50.5506 377.546 37.8631 358.569 37.8631C339.592 37.8631 328.989 50.1881 328.989 67.57V76.3062C328.953 94.25 340.68 104.907 358.805 104.907ZM345.211 64.7244C345.211 56.0969 348.836 49.6988 358.533 49.6988C367.596 49.6988 371.71 55.7344 371.71 63.7456V65.3406H345.211V64.7244Z","M431.667 105.125C453.417 105.125 466.92 90.335 467.79 72.6994H451.768C450.644 82.4325 444.518 90.9512 431.667 90.9512C417.258 90.9512 411.095 81.0912 411.095 67.28V53.2694C411.095 39.4581 417.258 29.5981 431.667 29.5981C444.482 29.5981 450.644 38.0987 451.768 47.85H467.79C466.92 30.2144 453.49 15.4244 431.667 15.4244C405.658 15.4244 393.949 32.0631 393.949 54.1212V66.4462C393.949 88.5225 405.658 105.125 431.667 105.125Z","M476.889 103.421H493.655V65.4675C493.655 56.84 498.458 52.3994 505.98 52.3994C514.118 52.3994 517.689 57.71 517.689 65.0869V103.421H534.454V62.3862C534.454 47.2337 525.7 37.8631 511.78 37.8631C503.515 37.8631 496.99 41.4881 493.655 46.9256V13.4487H476.889V103.421Z","M566.445 104.907C573.84 104.907 581.978 101.826 584.932 97.5125V103.421H601.082V62.5131C601.082 47.5963 590.116 37.8631 574.094 37.8631C560.282 37.8631 550.295 44.515 546.598 56.9669H562.131C563.853 53.505 567.424 50.9313 573.224 50.9313C580.129 50.9313 584.316 55.3538 584.316 61.2806V70.035C579.662 66.4073 573.903 64.4878 568.004 64.5975C552.597 64.5975 542.121 71.0138 542.121 84.9338C542.157 97.3856 552.017 104.907 566.445 104.907ZM570.759 93.815C563.726 93.815 558.434 90.3712 558.434 84.4444C558.434 78.5175 563.364 75.3819 571.248 75.3819C578.77 75.3819 584.316 78.7169 584.316 84.4444C584.316 90.1719 578.117 93.815 570.759 93.815Z","M632.492 103.421H644.074V89.8637H637.205C632.764 89.8637 631.169 88.1419 631.169 83.955V52.8887H644.853V39.3312H631.169V21.8406H614.367V39.3312H605.305V52.8887H614.367V85.1875C614.367 96.5337 620.077 103.421 632.492 103.421Z"],VA=lb("svg",{target:"e1lie4030"})("height:13px;max-width:58px;margin-left:4px;position:relative;top:",(function(e){return"smooth"===e.theme.name?"2px":"1px"}),";"),UA=Object(Zg.b)((function(e){var t=e.theme,n=Object(A.a)(e,["theme"]),r=t.colors.brand,a=r.orange,i=r.black;return rn.createElement(VA,Object(T.a)({viewBox:"0 0 645 145",fill:"none"},n),rn.createElement("path",{d:"M144.096 90.1356C143.359 98.7467 139.392 106.76 132.991 112.567C126.589 118.373 118.228 121.542 109.586 121.438H90.5545L54.3045 145V121.438L90.5545 97.875H109.622C112.32 97.9725 114.954 97.0425 116.993 95.2729C119.032 93.5033 120.323 91.026 120.606 88.3413C121.714 70.2301 121.623 52.0654 120.334 33.9663C120.116 31.552 119.036 29.2968 117.292 27.6129C115.548 25.929 113.257 24.9288 110.836 24.795C98.4752 24.0338 85.4614 23.5625 72.4295 23.5625C59.3977 23.5625 46.3839 23.9975 34.0227 24.8675C31.6022 25.0013 29.3107 26.0015 27.5669 27.6854C25.8231 29.3693 24.7434 31.6245 24.5252 34.0387C23.2361 52.1379 23.1452 70.3026 24.2533 88.4137C24.5532 91.0854 25.8518 93.545 27.8887 95.2996C29.9256 97.0542 32.5504 97.9741 35.237 97.875H54.3045V121.438H35.2733C26.641 121.523 18.2952 118.343 11.9087 112.535C5.52217 106.727 1.56695 98.7192 0.835792 90.1175C-0.362946 70.7996 -0.272119 51.4233 1.10767 32.1175C1.79276 24.1116 5.31632 16.6141 11.0427 10.9774C16.7691 5.34078 24.3213 1.93607 32.337 1.3775C45.242 0.453125 58.8358 0 72.4295 0C86.0233 0 99.617 0.453125 112.522 1.3775C120.562 1.92172 128.141 5.32939 133.884 10.9825C139.626 16.6355 143.153 24.1596 143.824 32.19C145.201 51.4777 145.292 70.8358 144.096 90.1356Z",fill:a}),FA.map((function(e,t){return rn.createElement("path",{key:t,d:e,fill:i})})))})),GA=lb("div",{displayName:"Footer",section:!0,target:"e13tedl70"})(),HA=lb("a",{displayName:"FooterLink",target:"e13tedl71"})("display:flex;direction:ltr;align-items:center;justify-content:center;"),WA=nn((function(e){var t=e.getApplicationState(),n=t.license,r=t.mobile,a=document.referrer?Object(P.k)(Object(P.d)(document.referrer)||""):"lc"+n,i=function(e){return e.getApplicationState("config").nonProfitLicense}(e);return{url:"https://www.livechatinc.com/powered-by-livechat/?"+Object(P.a)(Object(T.a)({partner:a,utm_campaign:a,utm_source:"chat_window",utm_medium:"referral"},i&&{utm_term:"nonprofit"})),hidden:vn("hideTrademark",e).enabled||r}}),{shouldHandleStateChanges:!1})((function(e){var t=e.url;return e.hidden?null:rn.createElement(GA,null,rn.createElement(HA,{href:t,rel:"noreferrer",target:"_blank"},rn.createElement("span",null,"Powered by "),rn.createElement(UA,null)))})),YA=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.forEach((function(e){e.apply(void 0,n)}))}},KA=lb("div",{displayName:"Maximized",target:"e903lsu0"})("position:relative;display:flex;flex-direction:column;min-width:0;height:100%;box-shadow:",(function(e){return e.theme.boxShadow.floating}),";overflow:hidden;background:",(function(e){return e.theme.colors.surface.light}),";",(function(e){var t=e.expandToEdge,n=e.theme;return{borderRadius:t?n.borderRadius.none+" !important":n.borderRadius.lg}}),";"),QA=lb("div",{target:"e903lsu1"})("flex-grow:1;"),ZA=Vg("&-enter{opacity:0;transform:translate3d(0,100%,0);}&-enter&-enter-active{opacity:1;transform:translate3d(0,0%,0);transition:opacity 140ms ease 200ms,transform 140ms ease 200ms;}&-exit{opacity:1;transform:translate3d(0,0%,0);}&-exit&-exit-active{opacity:0;transform:translate3d(0,100%,0);transition:opacity 140ms ease,transform 140ms ease;}"),JA=function(e,t){return Vg("&-enter{transform:translate3d(","right"===e?"":"-","40%,40%,0) scale(0.1);",KA," > *{opacity:0;transform:translate3d(0,20%,0);}}&-enter&-enter-active{transform:translate3d(0%,0%,0) scale(1);transition:transform ",430,"ms ",t.transitions.easings.sharp,";",KA," > *{opacity:1;transform:translate3d(0,0%,0);transition:opacity 160ms ",t.transitions.easings.sharp," 270ms,transform 160ms ",t.transitions.easings.sharp," 270ms;}}&-exit{transform:translate3d(0%,0%,0) scale(1);opacity:1;",KA," > *{opacity:1;transform:translate3d(0,0%,0);}}&-exit&-exit-active{opacity:0;transform:translate3d(","right"===e?"":"-","40%,40%,0) scale(0.1);transition:transform ",430,"ms ",t.transitions.easings.sharp,",opacity 300ms ease;",KA," > *{opacity:0;transform:translate3d(0,10%,0);transition:opacity 160ms ",t.transitions.easings.sharp,",transform 160ms ",t.transitions.easings.sharp,";}}")},XA=lb("div",{displayName:"ApplicationWrapper",target:"e903lsu2"})("position:absolute;top:0;left:auto;right:0;bottom:0;width:100%;height:100%;will-change:tranform,opacity;backface-visibility:hidden;"),$A=lb("div",{target:"e903lsu3"})("z-index:101;border-radius:inherit;"),eR=lb("div",{target:"e903lsu4"})("z-index:101;position:relative;"),tR=function(e){var t=e.dir,n=e.enhancedToggle,r=e.showMinimizedButton,a=e.isMainViewVisible,i=e.expandToEdge,o=Fb({x:0,y:0}),c=Fb(!0);return rn.createElement(XA,{dir:t,expandToEdge:i},rn.createElement(KA,{expandToEdge:i,role:"main"},rn.createElement($A,{id:"app-portal"}),rn.createElement(eR,{id:"tooltip-portal"}),rn.createElement(qA,{isOnBottomSource:c,onMinimize:n,showMinimizedButton:r,scrollingDeltaSource:o}),a?rn.createElement(pA,{scrollingDeltaSource:o,isOnBottomSource:c}):rn.createElement(QA,null),rn.createElement(WA,null)))},nR=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={isMainViewVisible:t.props.maximized},t.enhanceToggle=function(e){return YA(t.props.embedded?e:k.R,t.props.onClick)},t.handleAnimationEnd=function(){t.props.onAnimationEnd()},t.showMainView=function(){t.setState({isMainViewVisible:!0})},t.hideMainView=function(){t.setState({isMainViewVisible:!1})},t}Object(zg.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){},n.render=function(){var e=this,t=this.props,n=t.expandToEdge,r=t.maximized,a=t.setMaximizedState,i=t.screenPosition,o=t.showMinimizedButton,s=t.showMinimized,u=t.onMinimizedRef,l=t.onMinimizedResize,d=t.theme,p=this.state.isMainViewVisible,f=this.props.rtl?"rtl":"ltr";return rn.createElement(rn.Fragment,null,rn.createElement(Pg.LogOnMount,{eventType:c.INIT}),rn.createElement(Jb.a,{on:r,onToggle:a},(function(t){var r=t.on,a=t.toggle,c=e.enhanceToggle(a);return rn.createElement(nx.a,{appear:!0},r&&rn.createElement(Ry.a,{classNames:JA(i,d),onExited:e.handleAnimationEnd,onEntered:e.showMainView,onExit:e.hideMainView,timeout:430},rn.createElement(tR,{dir:f,enhancedToggle:c,isMainViewVisible:p,showMinimizedButton:o,expandToEdge:n})),!r&&s&&rn.createElement(Ry.a,{classNames:ZA,onExited:e.handleAnimationEnd,timeout:430},rn.createElement(wC,{dir:f,onMaximize:c,innerRef:u,onResize:l})))})))},t}(rn.Component);nR.propTypes={maximized:Xb.bool.isRequired,onAnimationEnd:Xb.func,onClick:Xb.func,setMaximizedState:Xb.func.isRequired},nR.defaultProps={onAnimationEnd:k.R,onClick:k.R};var rR=nn((function(e){var t=function(t){e.setApplicationState({maximized:t})};return function(e){var n=e.getApplicationState(),r=n.mobile,a=n.embedded,i=n.actingAsDirectLink,o=n.isInCustomContainer,c=n.maximized,s=n.rtl,u=vn(r?"mobileMinimized":"minimized",e).enabled;return{mobile:r,expandToEdge:r||!a||o,setMaximizedState:t,embedded:a,maximized:c,showMinimized:!i&&u,screenPosition:_n(e),rtl:s,testGroup:Dn(e),shouldPerformTest:Bn(e),showMinimizedButton:Zn(e)}}}))(Object(Zg.b)(nR)),aR=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={crashed:!1},t}Object(zg.a)(t,e);var n=t.prototype;return n.componentDidCatch=function(e,t){this.setState({crashed:!0}),this.props.onError(e,t)},n.render=function(){return this.state.crashed?null:this.props.children},t}(rn.Component);aR.defaultProps={onError:k.R};var iR=Object(T.a)({},w_,{borderRadius:Object(T.a)({},w_.borderRadius,{def:w_.borderRadius.sm}),TitleBar:{css:{fontWeight:"700!important",fontSize:"1.1em",textAlign:"center!important",height:"52px",justifyContent:"flex-start"},TitleBarTitle:{css:{fontSize:fO(14)}},Avatar:{css:{border:"0"}}},IconButton:{css:{padding:"0 .5em"}},MessageList:{css:{backgroundColor:w_.colors.surface.light}},Maximized:{css:{borderRadius:[w_.borderRadius.sm,w_.borderRadius.sm,w_.borderRadius.none,w_.borderRadius.none].join(" ")}},Footer:{css:{position:"relative",right:0,bottom:0,fontSize:"0.6em",color:w_.colors.text.muted,backgroundColor:w_.colors.surface.lightVariant,textAlign:"center",padding:"1em"},FooterLink:{css:{textDecoration:"none",color:"inherit",fontWeight:"bold"}}},ApplicationWrapper:{css:{padding:{default:"1em 1em 0 1em",expandToEdge:"0"}}},AgentBar:{css:{padding:"0.6em"},Avatar:{size:"60px",css:{borderRadius:w_.borderRadius.none}},SubTitle:{css:{fontSize:".8em"}},Title:{css:{fontSize:"1em",fontWeight:"bold"}},IconButton:{css:{fontSize:fO(24),backgroundColor:"transparent !important",color:{default:"inherit"},opacity:{default:"0.3",disabled:"0.15",active:"0.6"}}}},Button:{css:{boxShadow:"none"}},Message:{horizontalAlign:"left",own:{horizontalAlign:"left",Content:{css:{alignItems:"flex-start"}}},system:{MessageText:{css:{fontSize:".9em"}}},css:{flexDirection:"row"},Bubble:{sharpBorderRadius:"0px",ovalBorderRadius:"0px",css:{border:"0",padding:"0",background:"transparent",boxShadow:"none"}},ImagePreview:{css:{maxWidth:"150px",maxHeight:"250px",borderRadius:w_.borderRadius.none}},Button:{css:{borderTop:"0!important"}}},MessageText:{css:{padding:"0",fontSize:"14px"}},MessageGroup:{css:{marginBottom:".5em"}},MinimizedBar:{css:{borderRadius:[w_.borderRadius.sm,w_.borderRadius.sm,w_.borderRadius.none,w_.borderRadius.none].join(" "),height:"40px"},Icon:{css:{transform:"scale(0.8)"}}},MinimizedBubble:{css:{position:"relative"}},View:{Bubble:{css:{border:"0",padding:"0",background:"transparent",boxShadow:"none"}},ViewContent:{css:{paddingTop:".5em"}},css:{paddingBottom:"0"}},TextInput:{css:{lineHeight:"1.1em"}},Form:{css:{fontSize:"0.9em"},IconButton:{css:{color:{default:w_.colors.text.muted,active:w_.colors.text.white}}}},Tooltip:{css:{padding:"0.5em 0.8em",fontSize:".7em"}},TooltipArrow:{css:{marginTop:"-1em"}},Invitation:{Bubble:{sharpBorderRadius:"6px",ovalBorderRadius:"6px",css:{padding:".5em"}}},InformationField:{css:{fontSize:"1.1em"}},SystemCard:{css:{maxWidth:"368px",width:"calc(100% - 0.6em)",margin:"0.3em",boxShadow:"none",border:"1px solid "+w_.colors.divider}},TextComposer:{IconButton:{css:{opacity:{active:1,default:.4}}}},NewMessageHorizontalDivider:{css:{margin:"8px -0.5em"}},BoosterContainer:{css:{border:"1px solid "+w_.colors.divider,maxWidth:"368px",width:"calc(100% - 0.6em)",margin:"0.3em",boxShadow:"none",borderRadius:w_.borderRadius.md}},BoosterButton:{css:{boxShadow:"none"}}}),oR=function(e){function t(t){var n;(n=e.call(this,t)||this).id="widget-global-"+Object(k.t)(),Gg("#",n.id," *{font-family:'Noto Sans',sans-serif;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;}");var r="https://fonts.googleapis.com/css?family=Noto+Sans:400,700&subset=latin-ext&display=swap",a=document.querySelector("head"),i=a.querySelectorAll("link");if(Object(k.l)((function(e){return e.href===r}),i))return Object(Ng.a)(n);var o=document.createElement("link");return o.setAttribute("href",r),o.setAttribute("rel","stylesheet"),a.appendChild(o),n}return Object(zg.a)(t,e),t.prototype.render=function(){return rn.createElement("div",{id:this.id},this.props.children)},t}(rn.Component),cR=nn((function(e){return{mobile:e.getApplicationState("mobile"),theme:e.getApplicationState("config").theme}}),{shouldHandleStateChanges:Boolean("")})((function(e){var t=e.mobile,n=e.theme,r=e.children,a=Object(k.P)("modern"===n.name?iR:C_,n);return rn.createElement(bb.a,null,rn.createElement(Zx,{theme:t?Object(k.P)(a,{typography:{input:{fontSize:"16px"},placeholder:{fontSize:"16px"}}}):a},r))})),sR=function(e,t){var n=t.store,r=t.onError,a=t.amplitudeKey,i=Object(A.a)(t,["store","onError","amplitudeKey"]);ro.render(rn.createElement(aR,{onError:r},rn.createElement(dn,{store:n},rn.createElement(Mg,{amplitudeKey:a},rn.createElement(Gj.a,null,rn.createElement(oR,null,rn.createElement(cR,null,rn.createElement(rR,i))))))),e)};function uR(e,t,n,r){var a=t.adapterOptions,i=t.props,o=i.onError,c=void 0===o?k.R:o,s=Object(A.a)(i,["onError"]),u=t.onBootstrap,l=void 0===u?k.R:u;return new Promise((function(t){("3"===n.license_properties.lc_version?og:em)(a,e,n);var i="3"===n.license_properties.lc_version?"lc3":"lc2";e.setApplicationState({protocol:i});e.on("set_application_state",(function n(a){if(a.ready){window.performance&&"function"===typeof window.performance.mark&&window.performance.mark("lc_sdk_ready"),e.off("set_application_state",n),e.getApplicationState("embedded")||(Ig(e),ug(e)),Ca(e),ka(e),sg(e,r);var i=document.getElementById("root");sR(i,Object(T.a)({},s,{onError:function(e,t){var n=t.componentStack;jr("react_error",e,{componentStack:n}),ro.render(null,i),c()},amplitudeKey:!1,store:e})),window.performance&&"function"===typeof window.performance.mark&&window.performance.mark("lc_bootstrap_end"),l(),t()}}))}))}var lR=function(e,t,n){return!!n||!t&&e.getApplicationState("maximized")};var dR={},pR=function(e,t){var n=void 0===t?{}:t,r=n.query,a=void 0===r?{}:r,i=n.jsonpParam,o=void 0===i?"jsonp":i;return new Promise((function(t,n){Object(Yi.e)().then((function(r){var i,c=document.createElement("script"),s=Object(k.u)(dR);dR[s]=!0;var u="__"+s;window[u]=function(e){delete dR[s],delete window[u],Object(Yi.h)(c),t(e)},c.src=e+"?"+Object(P.a)(Object(q.a)({},a,((i={})[o]=u,i))),c.addEventListener("error",(function(){return n(new Error("JSONP request failed."))})),r.appendChild(c)}))}))},fR=function e(t,n){var r=n.license,a=n.uniqueGroups,i=n.group,o=n.region,c=n.query,s=function(e,t){if(1520===e)return"https://secure-lc.livechatinc.com";return t?function(e,t){var n=e.match(/secure(-(labs|lc))/i);return"https://secure-"+t+(null!==n&&n.length>0?n[1]:"")+".livechatinc.com"}("https://secure.livechatinc.com",t):"https://secure.livechatinc.com"}(r,o);return pR(s+"/"+function(e){var t=e.uniqueGroups,n=e.license,r=e.group;return"licence/"+(t?"g"+n+"_"+(r||0):n)}({uniqueGroups:a,license:r,group:i})+"/v2/"+t+".js",{query:Object(T.a)({url:String(document.location),referrer:document.referrer},c)}).then((function(n){if(n.error&&"incorrect region"===n.error)return e(t,{license:r,uniqueGroups:a,group:i,region:n.region,query:c});if(n.error)throw new Error(n.error);return Object(T.a)({},n,{region:o})}))},mR=function(e){var t=e.license,n=e.group,r=e.uniqueGroups,a=void 0!==r&&r,i=e.skipCodeInstallationTracking,o=void 0!==i&&i,c=e.channel,s=Object(T.a)({t:Date.now()},"number"===typeof n&&{groups:n},c&&{channel_type:c},o&&{test:1});return fR("get_dynamic_config",{license:t,group:n,uniqueGroups:a,query:s}).then((function(e){var r=e.visitor.groups;return Promise.all([a&&n!==r?fR("get_dynamic_config",{license:t,group:r,uniqueGroups:a}):e,fR("get_static_config."+r+"."+e.static_config_version,{license:t,group:r,uniqueGroups:a})])})).then((function(e){var t=e[0],n=e[1];return Object(T.a)({},t,n)}))},hR=function(e,t){var n=e.license,r=e.group,a=e.requestedGroup,i=Qa({application:{license:n,group:r,requestedGroup:a,rtl:eo(t),language:t.lang,embedded:!1,mobileWrapper:xa(),page:{title:document.title,url:String(document.location),referrer:document.referrer}}},{persistKey:$i(e)});return i.setApplicationState({maximized:!0}),i.on("protocol_upgraded",(function(){window.location.reload()})),i.updateUser(i.getSessionUserId(),function(){var e=Object(P.h)(window.location.search),t=Object(k.bb)(["name","email"],e);return e.params&&(t.properties=Object(P.b)(e.params)),t}()),i};var vR,gR=Object(P.h)(window.location.search),bR=lr(),yR="group"in(vR=gR)?dr(vR.group):"groups"in vR?dr(vR.groups):null,xR=pr();if(!bR)throw new Error("No license found in the URL.");!function(){var e={license:bR,group:yR,uniqueGroups:xR};gR.embedded?function(e){var t=e.license,n=e.group,r=e.uniqueGroups,a=Qa({application:{license:t,group:n}},{persistKey:$i(e)}),i=Gi(a);new Ma.Model(i).then((function(e){return Promise.all([e,a.syncing()])})).then((function(e){var i=e[0];window.performance&&"function"===typeof window.performance.mark&&window.performance.mark("lc_postmate_ready");var o=i.model,c=o.clientLimitExceeded,s=o.customer,u=o.hidden,l=o.integrationName,d=o.isInCustomContainer,p=o.page,f=o.region,m=o.serverConfig,h="actingAsDirectLink"in i.model?i.model.actingAsDirectLink:i.model.directLink,v=a.getApplicationState("mobile"),g=h||d,b="requestedGroup"in i.model?i.model.requestedGroup:n;to(m),a.updateUser(a.getSessionUserId(),s),a.setApplicationState({clientLimitExceeded:!a.getApplicationState("clientLimitExceededLifted")&&c,actingAsDirectLink:h,embedded:!0,isInCustomContainer:d,mobileWrapper:null,hidden:u,page:p,maximized:lR(a,v,g),rtl:eo(m),language:m.lang,integrationName:l,requestedGroup:b});var y={onAnimationEnd:function(){return a.emit("animation_end")},onError:function(){i.call("kill")},onMinimizedRef:function(e){i.minimizedRef=e},onMinimizedResize:function(){return Ji(i,a)}};uR(a,{adapterOptions:{license:t,group:n,requestedGroup:b,region:f,uniqueGroups:r,mobile:Va()},props:y,onBootstrap:function(){g?i.call("show"):(Xi(i,a),no(a.getState())||i.call("show"))}},m,i)}))}(e):function(e){window.performance&&"function"===typeof window.performance.mark&&window.performance.mark("lc_config_request");var t=e.group;mR(Object(T.a)({},e,{channel:"direct_link"})).then((function(n){window.performance&&"function"===typeof window.performance.mark&&window.performance.mark("lc_server_config");var r=n.visitor.groups,a=n.region;to(n);var i=hR(Object(T.a)({},e,{group:r,requestedGroup:t}),n),o={adapterOptions:Object(T.a)({},e,{group:r,requestedGroup:t,region:a,mobile:Va()}),props:{}};_a()&&(o.props.onClick=function(){return i.emit("mobile_wrapper_minimize_intent")}),uR(i,o,n)}))}(e)}()},83:function(e,t,n){"use strict";t.a=function(e){return new Promise((function(t){t(e())}))}}},[[354,1,2]]]);